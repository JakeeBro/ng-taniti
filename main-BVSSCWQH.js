var fM=Object.defineProperty,hM=Object.defineProperties;var pM=Object.getOwnPropertyDescriptors;var Ru=Object.getOwnPropertySymbols;var dw=Object.prototype.hasOwnProperty,fw=Object.prototype.propertyIsEnumerable;var lw=(t,e,n)=>e in t?fM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,M=(t,e)=>{for(var n in e||={})dw.call(e,n)&&lw(t,n,e[n]);if(Ru)for(var n of Ru(e))fw.call(e,n)&&lw(t,n,e[n]);return t},re=(t,e)=>hM(t,pM(e));var up=(t,e)=>{var n={};for(var r in t)dw.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Ru)for(var r of Ru(t))e.indexOf(r)<0&&fw.call(t,r)&&(n[r]=t[r]);return n};var mt=null,Nu=!1,hp=1,gM=null,Ft=Symbol("SIGNAL");function q(t){let e=mt;return mt=t,e}function xu(){return mt}var da={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function fa(t){if(Nu)throw new Error("");if(mt===null)return;mt.consumerOnSignalRead(t);let e=mt.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=mt.recomputing;if(r&&(n=e!==void 0?e.nextProducer:mt.producers,n!==void 0&&n.producer===t)){mt.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===mt&&(!r||yM(i,mt)))return;let o=Co(mt),s={producer:t,consumer:mt,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};mt.producersTail=s,e!==void 0?e.nextProducer=s:mt.producers=s,o&&mw(t,s)}function hw(){hp++}function pp(t){if(!(Co(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===hp)){if(!t.producerMustRecompute(t)&&!Ou(t)){fp(t);return}t.producerRecomputeValue(t),fp(t)}}function gp(t){if(t.consumers===void 0)return;let e=Nu;Nu=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||mM(r)}}finally{Nu=e}}function mp(){return mt?.consumerAllowSignalWrites!==!1}function mM(t){t.dirty=!0,gp(t),t.consumerMarkedDirty?.(t)}function fp(t){t.dirty=!1,t.lastCleanEpoch=hp}function ha(t){return t&&pw(t),q(t)}function pw(t){t.producersTail=void 0,t.recomputing=!0}function Pu(t,e){q(e),t&&gw(t)}function gw(t){t.recomputing=!1;let e=t.producersTail,n=e!==void 0?e.nextProducer:t.producers;if(n!==void 0){if(Co(t))do n=yp(n);while(n!==void 0);e!==void 0?e.nextProducer=void 0:t.producers=void 0}}function Ou(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(pp(n),r!==n.version))return!0}return!1}function pa(t){if(Co(t)){let e=t.producers;for(;e!==void 0;)e=yp(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function mw(t,e){let n=t.consumersTail,r=Co(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;i!==void 0;i=i.nextProducer)mw(i.producer,i)}function yp(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Co(e)){let o=e.producers;for(;o!==void 0;)o=yp(o)}return n}function Co(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function vp(t){gM?.(t)}function yM(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function _p(t,e){return Object.is(t,e)}function ku(t,e){let n=Object.create(vM);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(pp(n),fa(n),n.value===Mu)throw n.error;return n.value};return r[Ft]=n,vp(n),r}var lp=Symbol("UNSET"),dp=Symbol("COMPUTING"),Mu=Symbol("ERRORED"),vM=re(M({},da),{value:lp,dirty:!0,error:null,equal:_p,kind:"computed",producerMustRecompute(t){return t.value===lp||t.value===dp},producerRecomputeValue(t){if(t.value===dp)throw new Error("");let e=t.value;t.value=dp;let n=ha(t),r,i=!1;try{r=t.computation(),q(null),i=e!==lp&&e!==Mu&&r!==Mu&&t.equal(e,r)}catch(o){r=Mu,t.error=o}finally{Pu(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function _M(){throw new Error}var yw=_M;function vw(t){yw(t)}function Ep(t){yw=t}var EM=null;function Ip(t,e){let n=Object.create(Lu);n.value=t,e!==void 0&&(n.equal=e);let r=()=>_w(n);return r[Ft]=n,vp(n),[r,s=>ga(n,s),s=>Ew(n,s)]}function _w(t){return fa(t),t.value}function ga(t,e){mp()||vw(t),t.equal(t.value,e)||(t.value=e,IM(t))}function Ew(t,e){mp()||vw(t),ga(t,e(t.value))}var Lu=re(M({},da),{equal:_p,value:void 0,kind:"signal"});function IM(t){t.version++,hw(),gp(t),EM?.(t)}function wp(t){let e=q(null);try{return t()}finally{q(e)}}function X(t){return typeof t=="function"}function bo(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Fu=bo(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function ma(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var ft=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(X(r))try{r()}catch(o){e=o instanceof Fu?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Iw(o)}catch(s){e=e??[],s instanceof Fu?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Fu(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Iw(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&ma(n,e)}remove(e){let{_finalizers:n}=this;n&&ma(n,e),e instanceof t&&e._removeParent(this)}};ft.EMPTY=(()=>{let t=new ft;return t.closed=!0,t})();var Tp=ft.EMPTY;function Vu(t){return t instanceof ft||t&&"closed"in t&&X(t.remove)&&X(t.add)&&X(t.unsubscribe)}function Iw(t){X(t)?t():t.unsubscribe()}var pn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var So={setTimeout(t,e,...n){let{delegate:r}=So;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=So;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function ju(t){So.setTimeout(()=>{let{onUnhandledError:e}=pn;if(e)e(t);else throw t})}function ya(){}var ww=Dp("C",void 0,void 0);function Tw(t){return Dp("E",void 0,t)}function Dw(t){return Dp("N",t,void 0)}function Dp(t,e,n){return{kind:t,value:e,error:n}}var bi=null;function Ao(t){if(pn.useDeprecatedSynchronousErrorHandling){let e=!bi;if(e&&(bi={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=bi;if(bi=null,n)throw r}}else t()}function Cw(t){pn.useDeprecatedSynchronousErrorHandling&&bi&&(bi.errorThrown=!0,bi.error=t)}var Si=class extends ft{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Vu(e)&&e.add(this)):this.destination=DM}static create(e,n,r){return new Ro(e,n,r)}next(e){this.isStopped?bp(Dw(e),this):this._next(e)}error(e){this.isStopped?bp(Tw(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?bp(ww,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},wM=Function.prototype.bind;function Cp(t,e){return wM.call(t,e)}var Sp=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Uu(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Uu(r)}else Uu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Uu(n)}}},Ro=class extends Si{constructor(e,n,r){super();let i;if(X(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&pn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Cp(e.next,o),error:e.error&&Cp(e.error,o),complete:e.complete&&Cp(e.complete,o)}):i=e}this.destination=new Sp(i)}};function Uu(t){pn.useDeprecatedSynchronousErrorHandling?Cw(t):ju(t)}function TM(t){throw t}function bp(t,e){let{onStoppedNotification:n}=pn;n&&So.setTimeout(()=>n(t,e))}var DM={closed:!0,next:ya,error:TM,complete:ya};var No=typeof Symbol=="function"&&Symbol.observable||"@@observable";function gn(t){return t}function Ap(...t){return Rp(t)}function Rp(t){return t.length===0?gn:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var ve=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=bM(n)?n:new Ro(n,r,i);return Ao(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=bw(r),new r((i,o)=>{let s=new Ro({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[No](){return this}pipe(...n){return Rp(n)(this)}toPromise(n){return n=bw(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function bw(t){var e;return(e=t??pn.Promise)!==null&&e!==void 0?e:Promise}function CM(t){return t&&X(t.next)&&X(t.error)&&X(t.complete)}function bM(t){return t&&t instanceof Si||CM(t)&&Vu(t)}function SM(t){return X(t?.lift)}function De(t){return e=>{if(SM(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ae(t,e,n,r,i){return new Np(t,e,n,r,i)}var Np=class extends Si{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var Sw=bo(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ot=(()=>{class t extends ve{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Bu(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Sw}next(n){Ao(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Ao(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Ao(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Tp:(this.currentObservers=null,o.push(n),new ft(()=>{this.currentObservers=null,ma(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new ve;return n.source=this,n}}return t.create=(e,n)=>new Bu(e,n),t})(),Bu=class extends ot{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Tp}};var ht=class extends ot{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Vt=new ve(t=>t.complete());function Aw(t){return t&&X(t.schedule)}function Rw(t){return t[t.length-1]}function Nw(t){return X(Rw(t))?t.pop():void 0}function jr(t){return Aw(Rw(t))?t.pop():void 0}function xw(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(f){try{l(r.next(f))}catch(p){s(p)}}function u(f){try{l(r.throw(f))}catch(p){s(p)}}function l(f){f.done?o(f.value):i(f.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function Mw(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ai(t){return this instanceof Ai?(this.v=t,this):new Ai(t)}function Pw(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(S){return Promise.resolve(S).then(y,p)}}function a(y,S){r[y]&&(i[y]=function(A){return new Promise(function(R,L){o.push([y,A,R,L])>1||u(y,A)})},S&&(i[y]=S(i[y])))}function u(y,S){try{l(r[y](S))}catch(A){m(o[0][3],A)}}function l(y){y.value instanceof Ai?Promise.resolve(y.value.v).then(f,p):m(o[0][2],y)}function f(y){u("next",y)}function p(y){u("throw",y)}function m(y,S){y(S),o.shift(),o.length&&u(o[0][0],o[0][1])}}function Ow(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Mw=="function"?Mw(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,u){s=t[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var $u=t=>t&&typeof t.length=="number"&&typeof t!="function";function Hu(t){return X(t?.then)}function zu(t){return X(t[No])}function qu(t){return Symbol.asyncIterator&&X(t?.[Symbol.asyncIterator])}function Gu(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function AM(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Wu=AM();function Ku(t){return X(t?.[Wu])}function Qu(t){return Pw(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Ai(n.read());if(i)return yield Ai(void 0);yield yield Ai(r)}}finally{n.releaseLock()}})}function Yu(t){return X(t?.getReader)}function st(t){if(t instanceof ve)return t;if(t!=null){if(zu(t))return RM(t);if($u(t))return NM(t);if(Hu(t))return MM(t);if(qu(t))return kw(t);if(Ku(t))return xM(t);if(Yu(t))return PM(t)}throw Gu(t)}function RM(t){return new ve(e=>{let n=t[No]();if(X(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function NM(t){return new ve(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function MM(t){return new ve(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,ju)})}function xM(t){return new ve(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function kw(t){return new ve(e=>{OM(t,e).catch(n=>e.error(n))})}function PM(t){return kw(Qu(t))}function OM(t,e){var n,r,i,o;return xw(this,void 0,void 0,function*(){try{for(n=Ow(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function jt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Ju(t,e=0){return De((n,r)=>{n.subscribe(Ae(r,i=>jt(r,t,()=>r.next(i),e),()=>jt(r,t,()=>r.complete(),e),i=>jt(r,t,()=>r.error(i),e)))})}function Zu(t,e=0){return De((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Lw(t,e){return st(t).pipe(Zu(e),Ju(e))}function Fw(t,e){return st(t).pipe(Zu(e),Ju(e))}function Vw(t,e){return new ve(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function jw(t,e){return new ve(n=>{let r;return jt(n,e,()=>{r=t[Wu](),jt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>X(r?.return)&&r.return()})}function Xu(t,e){if(!t)throw new Error("Iterable cannot be null");return new ve(n=>{jt(n,e,()=>{let r=t[Symbol.asyncIterator]();jt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Uw(t,e){return Xu(Qu(t),e)}function Bw(t,e){if(t!=null){if(zu(t))return Lw(t,e);if($u(t))return Vw(t,e);if(Hu(t))return Fw(t,e);if(qu(t))return Xu(t,e);if(Ku(t))return jw(t,e);if(Yu(t))return Uw(t,e)}throw Gu(t)}function Ze(t,e){return e?Bw(t,e):st(t)}function de(...t){let e=jr(t);return Ze(t,e)}function Mp(t,e){let n=X(t)?t:()=>t,r=i=>i.error(n());return new ve(e?i=>e.schedule(r,0,i):r)}function el(t){return!!t&&(t instanceof ve||X(t.lift)&&X(t.subscribe))}var Ri=bo(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function ke(t,e){return De((n,r)=>{let i=0;n.subscribe(Ae(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:kM}=Array;function LM(t,e){return kM(e)?t(...e):t(e)}function $w(t){return ke(e=>LM(t,e))}var{isArray:FM}=Array,{getPrototypeOf:VM,prototype:jM,keys:UM}=Object;function Hw(t){if(t.length===1){let e=t[0];if(FM(e))return{args:e,keys:null};if(BM(e)){let n=UM(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function BM(t){return t&&typeof t=="object"&&VM(t)===jM}function zw(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function xp(...t){let e=jr(t),n=Nw(t),{args:r,keys:i}=Hw(t);if(r.length===0)return Ze([],e);let o=new ve($M(r,e,i?s=>zw(i,s):gn));return n?o.pipe($w(n)):o}function $M(t,e,n=gn){return r=>{qw(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)qw(e,()=>{let l=Ze(t[u],e),f=!1;l.subscribe(Ae(r,p=>{o[u]=p,f||(f=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function qw(t,e,n){t?jt(n,t,e):e()}function Gw(t,e,n,r,i,o,s,a){let u=[],l=0,f=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=A=>l<r?S(A):u.push(A),S=A=>{o&&e.next(A),l++;let R=!1;st(n(A,f++)).subscribe(Ae(e,L=>{i?.(L),o?y(L):e.next(L)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let L=u.shift();s?jt(e,s,()=>S(L)):S(L)}m()}catch(L){e.error(L)}}))};return t.subscribe(Ae(e,y,()=>{p=!0,m()})),()=>{a?.()}}function yt(t,e,n=1/0){return X(e)?yt((r,i)=>ke((o,s)=>e(r,o,i,s))(st(t(r,i))),n):(typeof e=="number"&&(n=e),De((r,i)=>Gw(r,i,t,n)))}function Mo(t=1/0){return yt(gn,t)}function Ww(){return Mo(1)}function xo(...t){return Ww()(Ze(t,jr(t)))}function va(t){return new ve(e=>{st(t()).subscribe(e)})}function mn(t,e){return De((n,r)=>{let i=0;n.subscribe(Ae(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Po(t){return De((e,n)=>{let r=null,i=!1,o;r=e.subscribe(Ae(n,void 0,void 0,s=>{o=st(t(s,Po(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function _a(t,e){return X(e)?yt(t,e,1):yt(t,1)}function Pp(t){return De((e,n)=>{let r=!1;e.subscribe(Ae(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function cr(t){return t<=0?()=>Vt:De((e,n)=>{let r=0;e.subscribe(Ae(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Kw(t=HM){return De((e,n)=>{let r=!1;e.subscribe(Ae(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function HM(){return new Ri}function Op(t){return De((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function ur(t,e){let n=arguments.length>=2;return r=>r.pipe(t?mn((i,o)=>t(i,o,r)):gn,cr(1),n?Pp(e):Kw(()=>new Ri))}function tl(t){return t<=0?()=>Vt:De((e,n)=>{let r=[];e.subscribe(Ae(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function kp(...t){let e=jr(t);return De((n,r)=>{(e?xo(t,n,e):xo(t,n)).subscribe(r)})}function Ln(t,e){return De((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(Ae(r,u=>{i?.unsubscribe();let l=0,f=o++;st(t(u,f)).subscribe(i=Ae(r,p=>r.next(e?e(u,p,f,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Ea(t){return De((e,n)=>{st(t).subscribe(Ae(n,()=>n.complete(),ya)),!n.closed&&e.subscribe(n)})}function Ct(t,e,n){let r=X(t)||e||n?{next:t,error:e,complete:n}:t;return r?De((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Ae(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):gn}var Lp;function nl(){return Lp}function Fn(t){let e=Lp;return Lp=t,e}var Qw=Symbol("NotFound");function Oo(t){return t===Qw||t?.name==="\u0275NotFound"}var cl="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",j=class extends Error{code;constructor(e,n){super(Fo(e,n)),this.code=e}};function GM(t){return`NG0${Math.abs(t)}`}function Fo(t,e){return`${GM(t)}${e?": "+e:""}`}var hr=globalThis;function Ce(t){for(let e in t)if(t[e]===Ce)return e;throw Error("")}function dr(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(dr).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function ul(t,e){return t?e?`${t} ${e}`:t:e||""}var WM=Ce({__forward_ref__:Ce});function ll(t){return t.__forward_ref__=ll,t.toString=function(){return dr(this())},t}function Ut(t){return Jp(t)?t():t}function Jp(t){return typeof t=="function"&&t.hasOwnProperty(WM)&&t.__forward_ref__===ll}function U(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ba(t){return KM(t,dl)}function Zp(t){return ba(t)!==null}function KM(t,e){return t.hasOwnProperty(e)&&t[e]||null}function QM(t){let e=t?.[dl]??null;return e||null}function Vp(t){return t&&t.hasOwnProperty(il)?t[il]:null}var dl=Ce({\u0275prov:Ce}),il=Ce({\u0275inj:Ce}),$=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=U({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Xp(t){return t&&!!t.\u0275providers}var eg=Ce({\u0275cmp:Ce}),tg=Ce({\u0275dir:Ce}),ng=Ce({\u0275pipe:Ce}),rg=Ce({\u0275mod:Ce}),wa=Ce({\u0275fac:Ce}),Pi=Ce({__NG_ELEMENT_ID__:Ce}),Yw=Ce({__NG_ENV_ID__:Ce});function Sa(t){return typeof t=="string"?t:t==null?"":String(t)}function eT(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Sa(t)}var tT=Ce({ngErrorCode:Ce}),YM=Ce({ngErrorMessage:Ce}),JM=Ce({ngTokenPath:Ce});function ig(t,e){return nT("",-200,e)}function fl(t,e){throw new j(-201,!1)}function nT(t,e,n){let r=new j(e,t);return r[tT]=e,r[YM]=t,n&&(r[JM]=n),r}function ZM(t){return t[tT]}var jp;function rT(){return jp}function bt(t){let e=jp;return jp=t,e}function og(t,e,n){let r=ba(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;fl(t,"Injector")}var XM={},Ni=XM,ex="__NG_DI_FLAG__",Up=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=Mi(n)||0;try{return this.injector.get(e,r&8?null:Ni,r)}catch(i){if(Oo(i))return i;throw i}}};function tx(t,e=0){let n=nl();if(n===void 0)throw new j(-203,!1);if(n===null)return og(t,void 0,e);{let r=nx(e),i=n.retrieve(t,r);if(Oo(i)){if(r.optional)return null;throw i}return i}}function Q(t,e=0){return(rT()||tx)(Ut(t),e)}function O(t,e){return Q(t,Mi(e))}function Mi(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function nx(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function Bp(t){let e=[];for(let n=0;n<t.length;n++){let r=Ut(t[n]);if(Array.isArray(r)){if(r.length===0)throw new j(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],u=rx(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(Q(i,o))}else e.push(Q(r))}return e}function rx(t){return t[ex]}function Ur(t,e){let n=t.hasOwnProperty(wa);return n?t[wa]:null}function iT(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function oT(t){return t.flat(Number.POSITIVE_INFINITY)}function hl(t,e){t.forEach(n=>Array.isArray(n)?hl(n,e):e(n))}function sg(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Aa(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function sT(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function pl(t,e,n){let r=Vo(t,e);return r>=0?t[r|1]=n:(r=~r,sT(t,r,e,n)),r}function gl(t,e){let n=Vo(t,e);if(n>=0)return t[n|1]}function Vo(t,e){return ix(t,e,1)}function ix(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var Oi={},Vn=[],ki=new $(""),ag=new $("",-1),cg=new $(""),Ta=class{get(e,n=Ni){if(n===Ni){let i=nT("",-201);throw i.name="\u0275NotFound",i}return n}};function ug(t){return t[rg]||null}function $r(t){return t[eg]||null}function lg(t){return t[tg]||null}function aT(t){return t[ng]||null}function Li(t){return{\u0275providers:t}}function cT(t){return Li([{provide:ki,multi:!0,useValue:t}])}function uT(...t){return{\u0275providers:dg(!0,t),\u0275fromNgModule:!0}}function dg(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return hl(e,s=>{let a=s;ol(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&lT(i,o),n}function lT(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];fg(i,o=>{e(o,r)})}}function ol(t,e,n,r){if(t=Ut(t),!t)return!1;let i=null,o=Vp(t),s=!o&&$r(t);if(!o&&!s){let u=t.ngModule;if(o=Vp(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)ol(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{hl(o.imports,f=>{ol(f,e,n,r)&&(l||=[],l.push(f))})}finally{}l!==void 0&&lT(l,e)}if(!a){let l=Ur(i)||(()=>new i);e({provide:i,useFactory:l,deps:Vn},i),e({provide:cg,useValue:i,multi:!0},i),e({provide:ki,useValue:()=>Q(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=t;fg(u,f=>{e(f,l)})}}else return!1;return i!==t&&t.providers!==void 0}function fg(t,e){for(let n of t)Xp(n)&&(n=n.\u0275providers),Array.isArray(n)?fg(n,e):e(n)}var ox=Ce({provide:String,useValue:Ce});function dT(t){return t!==null&&typeof t=="object"&&ox in t}function sx(t){return!!(t&&t.useExisting)}function ax(t){return!!(t&&t.useFactory)}function sl(t){return typeof t=="function"}var Ra=new $(""),rl={},Jw={},Fp;function Na(){return Fp===void 0&&(Fp=new Ta),Fp}var at=class{},xi=class extends at{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,Hp(e,s=>this.processProvider(s)),this.records.set(ag,ko(void 0,this)),i.has("environment")&&this.records.set(at,ko(void 0,this));let o=this.records.get(Ra);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(cg,Vn,{self:!0}))}retrieve(e,n){let r=Mi(n)||0;try{return this.get(e,Ni,r)}catch(i){if(Oo(i))return i;throw i}}destroy(){Ia(this),this._destroyed=!0;let e=q(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),q(e)}}onDestroy(e){return Ia(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Ia(this);let n=Fn(this),r=bt(void 0),i;try{return e()}finally{Fn(n),bt(r)}}get(e,n=Ni,r){if(Ia(this),e.hasOwnProperty(Yw))return e[Yw](this);let i=Mi(r),o,s=Fn(this),a=bt(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let f=fx(e)&&ba(e);f&&this.injectableDefInScope(f)?l=ko($p(e),rl):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?Na():this.parent;return n=i&8&&n===Ni?null:n,u.get(e,n)}catch(u){let l=ZM(u);throw l===-200||l===-201?new j(l,null):u}finally{bt(a),Fn(s)}}resolveInjectorInitializers(){let e=q(null),n=Fn(this),r=bt(void 0),i;try{let o=this.get(ki,Vn,{self:!0});for(let s of o)s()}finally{Fn(n),bt(r),q(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(dr(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Ut(e);let n=sl(e)?e:Ut(e&&e.provide),r=ux(e);if(!sl(e)&&e.multi===!0){let i=this.records.get(n);i||(i=ko(void 0,rl,!0),i.factory=()=>Bp(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=q(null);try{if(n.value===Jw)throw ig(dr(e));return n.value===rl&&(n.value=Jw,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&dx(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{q(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Ut(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function $p(t){let e=ba(t),n=e!==null?e.factory:Ur(t);if(n!==null)return n;if(t instanceof $)throw new j(204,!1);if(t instanceof Function)return cx(t);throw new j(204,!1)}function cx(t){if(t.length>0)throw new j(204,!1);let n=QM(t);return n!==null?()=>n.factory(t):()=>new t}function ux(t){if(dT(t))return ko(void 0,t.useValue);{let e=fT(t);return ko(e,rl)}}function fT(t,e,n){let r;if(sl(t)){let i=Ut(t);return Ur(i)||$p(i)}else if(dT(t))r=()=>Ut(t.useValue);else if(ax(t))r=()=>t.useFactory(...Bp(t.deps||[]));else if(sx(t))r=(i,o)=>Q(Ut(t.useExisting),o!==void 0&&o&8?8:void 0);else{let i=Ut(t&&(t.useClass||t.provide));if(lx(t))r=()=>new i(...Bp(t.deps));else return Ur(i)||$p(i)}return r}function Ia(t){if(t.destroyed)throw new j(205,!1)}function ko(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function lx(t){return!!t.deps}function dx(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function fx(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function Hp(t,e){for(let n of t)Array.isArray(n)?Hp(n,e):n&&Xp(n)?Hp(n.\u0275providers,e):e(n)}function St(t,e){let n;t instanceof xi?(Ia(t),n=t):n=new Up(t);let r,i=Fn(n),o=bt(void 0);try{return e()}finally{Fn(i),bt(o)}}function hT(){return rT()!==void 0||nl()!=null}var yn=0,H=1,Y=2,Xe=3,nn=4,rn=5,jo=6,Uo=7,$e=8,pr=9,Un=10,Le=11,Bo=12,hg=13,Fi=14,Gt=15,Hr=16,Vi=17,Bn=18,Ma=19,pg=20,lr=21,ml=22,xa=23,Wt=24,yl=25,ji=26,et=27,pT=1,gg=6,zr=7,Pa=8,Ui=9,Ue=10;function $n(t){return Array.isArray(t)&&typeof t[pT]=="object"}function vn(t){return Array.isArray(t)&&t[pT]===!0}function mg(t){return(t.flags&4)!==0}function qr(t){return t.componentOffset>-1}function vl(t){return(t.flags&1)===1}function Bi(t){return!!t.template}function $o(t){return(t[Y]&512)!==0}function $i(t){return(t[Y]&256)===256}var gT="svg",mT="math";function on(t){for(;Array.isArray(t);)t=t[yn];return t}function yg(t,e){return on(e[t])}function _n(t,e){return on(e[t.index])}function Oa(t,e){return t.data[e]}function yT(t,e){return t[e]}function vg(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function sn(t,e){let n=e[t];return $n(n)?n:n[yn]}function vT(t){return(t[Y]&4)===4}function _l(t){return(t[Y]&128)===128}function _T(t){return vn(t[Xe])}function Hn(t,e){return e==null?null:t[e]}function _g(t){t[Vi]=0}function Eg(t){t[Y]&1024||(t[Y]|=1024,_l(t)&&La(t))}function ET(t,e){for(;t>0;)e=e[Fi],t--;return e}function ka(t){return!!(t[Y]&9216||t[Wt]?.dirty)}function El(t){t[Un].changeDetectionScheduler?.notify(8),t[Y]&64&&(t[Y]|=1024),ka(t)&&La(t)}function La(t){t[Un].changeDetectionScheduler?.notify(0);let e=Br(t);for(;e!==null&&!(e[Y]&8192||(e[Y]|=8192,!_l(e)));)e=Br(e)}function Ig(t,e){if($i(t))throw new j(911,!1);t[lr]===null&&(t[lr]=[]),t[lr].push(e)}function IT(t,e){if(t[lr]===null)return;let n=t[lr].indexOf(e);n!==-1&&t[lr].splice(n,1)}function Br(t){let e=t[Xe];return vn(e)?e[Xe]:e}function wg(t){return t[Uo]??=[]}function Tg(t){return t.cleanup??=[]}function wT(t,e,n,r){let i=wg(e);i.push(n),t.firstCreatePass&&Tg(t).push(r,i.length-1)}var ue={lFrame:kT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var zp=!1;function TT(){return ue.lFrame.elementDepthCount}function DT(){ue.lFrame.elementDepthCount++}function Dg(){ue.lFrame.elementDepthCount--}function CT(){return ue.bindingsEnabled}function bT(){return ue.skipHydrationRootTNode!==null}function Cg(t){return ue.skipHydrationRootTNode===t}function bg(){ue.skipHydrationRootTNode=null}function le(){return ue.lFrame.lView}function pt(){return ue.lFrame.tView}function At(t){return ue.lFrame.contextLView=t,t[$e]}function Rt(t){return ue.lFrame.contextLView=null,t}function Nt(){let t=Sg();for(;t!==null&&t.type===64;)t=t.parent;return t}function Sg(){return ue.lFrame.currentTNode}function ST(){let t=ue.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Ho(t,e){let n=ue.lFrame;n.currentTNode=t,n.isParent=e}function Ag(){return ue.lFrame.isParent}function AT(){ue.lFrame.isParent=!1}function Rg(){return zp}function Ng(t){let e=zp;return zp=t,e}function Mg(){let t=ue.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function RT(t){return ue.lFrame.bindingIndex=t}function Hi(){return ue.lFrame.bindingIndex++}function xg(t){let e=ue.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function NT(){return ue.lFrame.inI18n}function MT(t,e){let n=ue.lFrame;n.bindingIndex=n.bindingRootIndex=t,Il(e)}function xT(){return ue.lFrame.currentDirectiveIndex}function Il(t){ue.lFrame.currentDirectiveIndex=t}function PT(t){let e=ue.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Pg(){return ue.lFrame.currentQueryIndex}function wl(t){ue.lFrame.currentQueryIndex=t}function hx(t){let e=t[H];return e.type===2?e.declTNode:e.type===1?t[rn]:null}function Og(t,e,n){if(n&4){let i=e,o=t;for(;i=i.parent,i===null&&!(n&1);)if(i=hx(o),i===null||(o=o[Fi],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=ue.lFrame=OT();return r.currentTNode=e,r.lView=t,!0}function Tl(t){let e=OT(),n=t[H];ue.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function OT(){let t=ue.lFrame,e=t===null?null:t.child;return e===null?kT(t):e}function kT(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function LT(){let t=ue.lFrame;return ue.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var kg=LT;function Dl(){let t=LT();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function FT(t){return(ue.lFrame.contextLView=ET(t,ue.lFrame.contextLView))[$e]}function gr(){return ue.lFrame.selectedIndex}function Gr(t){ue.lFrame.selectedIndex=t}function Cl(){let t=ue.lFrame;return Oa(t.tView,t.selectedIndex)}function VT(){return ue.lFrame.currentNamespace}var jT=!0;function bl(){return jT}function Sl(t){jT=t}function qp(t,e=null,n=null,r){let i=Lg(t,e,n,r);return i.resolveInjectorInitializers(),i}function Lg(t,e=null,n=null,r,i=new Set){let o=[n||Vn,uT(t)];return r=r||(typeof t=="object"?void 0:dr(t)),new xi(o,e||Na(),r||null,i)}var jn=class t{static THROW_IF_NOT_FOUND=Ni;static NULL=new Ta;static create(e,n){if(Array.isArray(e))return qp({name:""},n,e,"");{let r=e.name??"";return qp({name:r},e.parent,e.providers,r)}}static \u0275prov=U({token:t,providedIn:"any",factory:()=>Q(ag)});static __NG_ELEMENT_ID__=-1},tt=new $(""),zi=(()=>{class t{static __NG_ELEMENT_ID__=px;static __NG_ENV_ID__=n=>n}return t})(),Gp=class extends zi{_lView;constructor(e){super(),this._lView=e}get destroyed(){return $i(this._lView)}onDestroy(e){let n=this._lView;return Ig(n,e),()=>IT(n,e)}};function px(){return new Gp(le())}var UT=!1,Wr=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new ht(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new ve(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=U({token:t,providedIn:"root",factory:()=>new t})}return t})(),Wp=class extends ot{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,hT()&&(this.destroyRef=O(zi,{optional:!0})??void 0,this.pendingTasks=O(Wr,{optional:!0})??void 0)}emit(e){let n=q(null);try{super.next(e)}finally{q(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof ft&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},vt=Wp;function al(...t){}function Fg(t){let e,n;function r(){t=al;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function Vg(t){return queueMicrotask(()=>t()),()=>{t=al}}var jg="isAngularZone",Da=jg+"_ID",gx=0,qt=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new vt(!1);onMicrotaskEmpty=new vt(!1);onStable=new vt(!1);onError=new vt(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=UT}=e;if(typeof Zone>"u")throw new j(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,vx(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(jg)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new j(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new j(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,mx,al,al);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},mx={};function Ug(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function yx(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){Fg(()=>{t.callbackScheduled=!1,Kp(t),t.isCheckStableRunning=!0,Ug(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Kp(t)}function vx(t){let e=()=>{yx(t)},n=gx++;t._inner=t._inner.fork({name:"angular",properties:{[jg]:!0,[Da]:n,[Da+n]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(_x(u))return r.invokeTask(o,s,a,u);try{return Zw(t),r.invokeTask(o,s,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),Xw(t)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return Zw(t),r.invoke(o,s,a,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!Ex(u)&&e(),Xw(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Kp(t),Ug(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Kp(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function Zw(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Xw(t){t._nesting--,Ug(t)}var Ca=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new vt;onMicrotaskEmpty=new vt;onStable=new vt;onError=new vt;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function _x(t){return BT(t,"__ignore_ng_zone__")}function Ex(t){return BT(t,"__scheduler_tick__")}function BT(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var fr=class{_console=console;handleError(e){this._console.error("ERROR",e)}},an=new $("",{factory:()=>{let t=O(qt),e=O(at),n;return r=>{t.runOutsideAngular(()=>{e.destroyed&&!n?setTimeout(()=>{throw r}):(n??=e.get(fr),n.handleError(r))})}}}),$T={provide:ki,useValue:()=>{let t=O(fr,{optional:!0})},multi:!0},Ix=new $("",{factory:()=>{let t=O(tt).defaultView;if(!t)return;let e=O(an),n=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{t.addEventListener("unhandledrejection",n),t.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),O(zi).onDestroy(()=>{t.removeEventListener("error",r),t.removeEventListener("unhandledrejection",n)})}});function Bg(){return Li([cT(()=>void O(Ix))])}function qe(t,e){let[n,r,i]=Ip(t,e?.equal),o=n,s=o[Ft];return o.set=r,o.update=i,o.asReadonly=HT.bind(o),o}function HT(){let t=this[Ft];if(t.readonlyFn===void 0){let e=()=>this();e[Ft]=t,t.readonlyFn=e}return t.readonlyFn}var Lo=class{},Fa=new $("",{factory:()=>!0});var $g=new $("");var Hg=(()=>{class t{static \u0275prov=U({token:t,providedIn:"root",factory:()=>new Qp})}return t})(),Qp=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}},Yp=class{[Ft];constructor(e){this[Ft]=e}destroy(){this[Ft].destroy()}};function En(t){return wp(t)}function Xl(t){return{toString:t}.toString()}function Mx(t){return typeof t=="function"}function yD(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var kl=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}},Yi=(()=>{let t=()=>vD;return t.ngInherit=!0,t})();function vD(t){return t.type.prototype.ngOnChanges&&(t.setInput=Px),xx}function xx(){let t=ED(this),e=t?.current;if(e){let n=t.previous;if(n===Oi)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function Px(t,e,n,r,i){let o=this.declaredInputs[r],s=ED(t)||Ox(t,{previous:Oi,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new kl(l&&l.currentValue,n,u===Oi),yD(t,e,i,n)}var _D="__ngSimpleChanges__";function ED(t){return t[_D]||null}function Ox(t,e){return t[_D]=e}var zT=[];var Re=function(t,e=null,n){for(let r=0;r<zT.length;r++){let i=zT[r];i(t,e,n)}},_e=(function(t){return t[t.TemplateCreateStart=0]="TemplateCreateStart",t[t.TemplateCreateEnd=1]="TemplateCreateEnd",t[t.TemplateUpdateStart=2]="TemplateUpdateStart",t[t.TemplateUpdateEnd=3]="TemplateUpdateEnd",t[t.LifecycleHookStart=4]="LifecycleHookStart",t[t.LifecycleHookEnd=5]="LifecycleHookEnd",t[t.OutputStart=6]="OutputStart",t[t.OutputEnd=7]="OutputEnd",t[t.BootstrapApplicationStart=8]="BootstrapApplicationStart",t[t.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",t[t.BootstrapComponentStart=10]="BootstrapComponentStart",t[t.BootstrapComponentEnd=11]="BootstrapComponentEnd",t[t.ChangeDetectionStart=12]="ChangeDetectionStart",t[t.ChangeDetectionEnd=13]="ChangeDetectionEnd",t[t.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",t[t.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",t[t.AfterRenderHooksStart=16]="AfterRenderHooksStart",t[t.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",t[t.ComponentStart=18]="ComponentStart",t[t.ComponentEnd=19]="ComponentEnd",t[t.DeferBlockStateStart=20]="DeferBlockStateStart",t[t.DeferBlockStateEnd=21]="DeferBlockStateEnd",t[t.DynamicComponentStart=22]="DynamicComponentStart",t[t.DynamicComponentEnd=23]="DynamicComponentEnd",t[t.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",t[t.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",t})(_e||{});function kx(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=vD(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function Lx(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:f}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),f!=null&&(t.destroyHooks??=[]).push(n,f)}}function Nl(t,e,n){ID(t,e,3,n)}function Ml(t,e,n,r){(t[Y]&3)===n&&ID(t,e,n,r)}function zg(t,e){let n=t[Y];(n&3)===e&&(n&=16383,n+=1,t[Y]=n)}function ID(t,e,n,r){let i=r!==void 0?t[Vi]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[Vi]+=65536),(a<o||o==-1)&&(Fx(t,n,e,u),t[Vi]=(t[Vi]&4294901760)+u+2),u++}function qT(t,e){Re(_e.LifecycleHookStart,t,e);let n=q(null);try{e.call(t)}finally{q(n),Re(_e.LifecycleHookEnd,t,e)}}function Fx(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[Y]>>14<t[Vi]>>16&&(t[Y]&3)===e&&(t[Y]+=16384,qT(a,o)):qT(a,o)}var qo=-1,Ba=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function Vx(t){return(t.flags&8)!==0}function jx(t){return(t.flags&16)!==0}function Ux(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];Bx(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function wD(t){return t===3||t===4||t===6}function Bx(t){return t.charCodeAt(0)===64}function ed(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?GT(t,n,i,null,e[++r]):GT(t,n,i,null,null))}}return t}function GT(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function TD(t){return t!==qo}function Ll(t){return t&32767}function $x(t){return t>>16}function Fl(t,e){let n=$x(t),r=e;for(;n>0;)r=r[Fi],n--;return r}var Zg=!0;function Vl(t){let e=Zg;return Zg=t,e}var Hx=256,DD=Hx-1,CD=5,zx=0,zn={};function qx(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Pi)&&(r=n[Pi]),r==null&&(r=n[Pi]=zx++);let i=r&DD,o=1<<i;e.data[t+(i>>CD)]|=o}function bD(t,e){let n=SD(t,e);if(n!==-1)return n;let r=e[H];r.firstCreatePass&&(t.injectorIndex=e.length,qg(r.data,t),qg(e,null),qg(r.blueprint,null));let i=Dm(t,e),o=t.injectorIndex;if(TD(i)){let s=Ll(i),a=Fl(i,e),u=a[H].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function qg(t,e){t.push(0,0,0,0,0,0,0,0,e)}function SD(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Dm(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=xD(i),r===null)return qo;if(n++,i=i[Fi],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return qo}function Gx(t,e,n){qx(t,e,n)}function Wx(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(wD(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function AD(t,e,n){if(n&8||t!==void 0)return t;fl(e,"NodeInjector")}function RD(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[pr],o=bt(void 0);try{return i?i.get(e,r,n&8):og(e,r,n&8)}finally{bt(o)}}return AD(r,e,n)}function ND(t,e,n,r=0,i){if(t!==null){if(e[Y]&2048&&!(r&2)){let s=Jx(t,e,n,r,zn);if(s!==zn)return s}let o=MD(t,e,n,r,zn);if(o!==zn)return o}return RD(e,n,r,i)}function MD(t,e,n,r,i){let o=Qx(n);if(typeof o=="function"){if(!Og(e,t,r))return r&1?AD(i,n,r):RD(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))fl(n);else return s}finally{kg()}}else if(typeof o=="number"){let s=null,a=SD(t,e),u=qo,l=r&1?e[Gt][rn]:null;for((a===-1||r&4)&&(u=a===-1?Dm(t,e):e[a+8],u===qo||!KT(r,!1)?a=-1:(s=e[H],a=Ll(u),e=Fl(u,e)));a!==-1;){let f=e[H];if(WT(o,a,f.data)){let p=Kx(a,e,n,s,r,l);if(p!==zn)return p}u=e[a+8],u!==qo&&KT(r,e[H].data[a+8]===l)&&WT(o,a,e)?(s=f,a=Ll(u),e=Fl(u,e)):a=-1}}return i}function Kx(t,e,n,r,i,o){let s=e[H],a=s.data[t+8],u=r==null?qr(a)&&Zg:r!=s&&(a.type&3)!==0,l=i&1&&o===a,f=xl(a,s,n,u,l);return f!==null?jl(e,s,f,a,i):zn}function xl(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,u=t.directiveStart,l=t.directiveEnd,f=o>>20,p=r?a:a+f,m=i?a+f:l;for(let y=p;y<m;y++){let S=s[y];if(y<u&&n===S||y>=u&&S.type===n)return y}if(i){let y=s[u];if(y&&Bi(y)&&y.type===n)return u}return null}function jl(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof Ba){let a=o;if(a.resolving){let y=eT(s[n]);throw ig(y)}let u=Vl(a.canSeeViewProviders);a.resolving=!0;let l=s[n].type||s[n],f,p=a.injectImpl?bt(a.injectImpl):null,m=Og(t,r,0);try{o=t[n]=a.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&kx(n,s[n],e)}finally{p!==null&&bt(p),Vl(u),a.resolving=!1,kg()}}return o}function Qx(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Pi)?t[Pi]:void 0;return typeof e=="number"?e>=0?e&DD:Yx:e}function WT(t,e,n){let r=1<<t;return!!(n[e+(t>>CD)]&r)}function KT(t,e){return!(t&2)&&!(t&1&&e)}var qi=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return ND(this._tNode,this._lView,e,Mi(r),n)}};function Yx(){return new qi(Nt(),le())}function Ka(t){return Xl(()=>{let e=t.prototype.constructor,n=e[wa]||Xg(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[wa]||Xg(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Xg(t){return Jp(t)?()=>{let e=Xg(Ut(t));return e&&e()}:Ur(t)}function Jx(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[Y]&2048&&!$o(s);){let a=MD(o,s,n,r|2,zn);if(a!==zn)return a;let u=o.parent;if(!u){let l=s[pg];if(l){let f=l.get(n,zn,r);if(f!==zn)return f}u=xD(s),s=s[Fi]}o=u}return i}function xD(t){let e=t[H],n=e.type;return n===2?e.declTNode:n===1?t[rn]:null}function Qa(t){return Wx(Nt(),t)}function Zx(){return Yo(Nt(),le())}function Yo(t,e){return new Gn(_n(t,e))}var Gn=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=Zx}return t})();function Xx(t){return t instanceof Gn?t.nativeElement:t}function eP(){return this._results[Symbol.iterator]()}var Ul=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new ot}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=oT(e);(this._changesDetected=!iT(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=eP};function PD(t){return(t.flags&128)===128}var Cm=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(Cm||{}),OD=new Map,tP=0;function nP(){return tP++}function rP(t){OD.set(t[Ma],t)}function em(t){OD.delete(t[Ma])}var QT="__ngContext__";function Go(t,e){$n(e)?(t[QT]=e[Ma],rP(e)):t[QT]=e}function kD(t){return FD(t[Bo])}function LD(t){return FD(t[nn])}function FD(t){for(;t!==null&&!vn(t);)t=t[nn];return t}var iP;function bm(t){iP=t}var td=new $("",{factory:()=>oP}),oP="ng";var nd=new $(""),Ya=new $("",{providedIn:"platform",factory:()=>"unknown"});var rd=new $("",{factory:()=>O(tt).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var VD="r";var jD="di";var UD=!1,BD=new $("",{factory:()=>UD});var sP=(t,e,n,r)=>{};function aP(t,e,n,r){sP(t,e,n,r)}function Sm(t){return(t.flags&32)===32}var cP=()=>null;function $D(t,e,n=!1){return cP(t,e,n)}function HD(t,e){let n=t.contentQueries;if(n!==null){let r=q(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];wl(o),a.contentQueries(2,e[s],s)}}}finally{q(r)}}}function tm(t,e,n){wl(0);let r=q(null);try{e(t,n)}finally{q(r)}}function zD(t,e,n){if(mg(e)){let r=q(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let u=n[s];a.contentQueries(1,u,s)}}}finally{q(r)}}}var Tn=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t[t.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",t})(Tn||{});var Al;function uP(){if(Al===void 0&&(Al=null,hr.trustedTypes))try{Al=hr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Al}function YT(t){return uP()?.createScriptURL(t)||t}var Bl=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${cl})`}};function Ja(t){return t instanceof Bl?t.changingThisBreaksApplicationSecurity:t}function Am(t,e){let n=qD(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${cl})`)}return n===e}function qD(t){return t instanceof Bl&&t.getTypeName()||null}var lP=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function GD(t){return t=String(t),t.match(lP)?t:"unsafe:"+t}function dP(t,e){return t.createText(e)}function fP(t,e,n){t.setValue(e,n)}function WD(t,e,n){return t.createElement(e,n)}function $l(t,e,n,r,i){t.insertBefore(e,n,r,i)}function KD(t,e,n){t.appendChild(e,n)}function JT(t,e,n,r,i){r!==null?$l(t,e,n,r,i):KD(t,e,n)}function QD(t,e,n,r){t.removeChild(null,e,n,r)}function hP(t,e,n){t.setAttribute(e,"style",n)}function pP(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function YD(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Ux(t,e,r),i!==null&&pP(t,e,i),o!==null&&hP(t,e,o)}var id=(function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t})(id||{});function Mt(t){let e=ZD();return e?e.sanitize(id.URL,t)||"":Am(t,"URL")?Ja(t):GD(Sa(t))}function JD(t){let e=ZD();if(e)return YT(e.sanitize(id.RESOURCE_URL,t)||"");if(Am(t,"ResourceURL"))return YT(Ja(t));throw new j(904,!1)}function gP(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?JD:Mt}function Rm(t,e,n){return gP(e,n)(t)}function ZD(){let t=le();return t&&t[Un].sanitizer}function XD(t){return t instanceof Function?t():t}function mP(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var eC="ng-template";function yP(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&mP(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Nm(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Nm(t){return t.type===4&&t.value!==eC}function vP(t,e,n){let r=t.type===4&&!n?eC:t.value;return e===r}function _P(t,e,n){let r=4,i=t.attrs,o=i!==null?wP(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!In(r)&&!In(u))return!1;if(s&&In(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!vP(t,u,n)||u===""&&e.length===1){if(In(r))return!1;s=!0}}else if(r&8){if(i===null||!yP(t,i,u,n)){if(In(r))return!1;s=!0}}else{let l=e[++a],f=EP(u,i,Nm(t),n);if(f===-1){if(In(r))return!1;s=!0;continue}if(l!==""){let p;if(f>o?p="":p=i[f+1].toLowerCase(),r&2&&l!==p){if(In(r))return!1;s=!0}}}}return In(r)||s}function In(t){return(t&1)===0}function EP(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return TP(e,t)}function IP(t,e,n=!1){for(let r=0;r<e.length;r++)if(_P(t,e[r],n))return!0;return!1}function wP(t){for(let e=0;e<t.length;e++){let n=t[e];if(wD(n))return e}return t.length}function TP(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function ZT(t,e){return t?":not("+e.trim()+")":e}function DP(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!In(s)&&(e+=ZT(o,i),i=""),r=s,o=o||!In(r);n++}return i!==""&&(e+=ZT(o,i)),e}function CP(t){return t.map(DP).join(",")}function bP(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!In(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var cn={};function Mm(t,e,n,r,i,o,s,a,u,l,f){let p=et+r,m=p+i,y=SP(p,m),S=typeof l=="function"?l():l;return y[H]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:S,incompleteFirstPass:!1,ssrId:f}}function SP(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:cn);return n}function AP(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Mm(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function xm(t,e,n,r,i,o,s,a,u,l,f){let p=e.blueprint.slice();return p[yn]=i,p[Y]=r|4|128|8|64|1024,(l!==null||t&&t[Y]&2048)&&(p[Y]|=2048),_g(p),p[Xe]=p[Fi]=t,p[$e]=n,p[Un]=s||t&&t[Un],p[Le]=a||t&&t[Le],p[pr]=u||t&&t[pr]||null,p[rn]=o,p[Ma]=nP(),p[jo]=f,p[pg]=l,p[Gt]=e.type==2?t[Gt]:p,p}function RP(t,e,n){let r=_n(e,t),i=AP(n),o=t[Un].rendererFactory,s=Pm(t,xm(t,i,null,tC(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function tC(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function nC(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Pm(t,e){return t[Bo]?t[hg][nn]=e:t[Bo]=e,t[hg]=e,e}function P(t=1){rC(pt(),le(),gr()+t,!1)}function rC(t,e,n,r){if(!r)if((e[Y]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Nl(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Ml(e,o,0,n)}Gr(n)}var od=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(od||{});function nm(t,e,n,r){let i=q(null);try{let[o,s,a]=t.inputs[n],u=null;(s&od.SignalBased)!==0&&(u=e[o][Ft]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,u,r,n,o):yD(e,u,o,r)}finally{q(i)}}var qn=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(qn||{}),NP;function Om(t,e){return NP(t,e)}var Gi=new Set,km=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(km||{}),Za=new $(""),XT=new Set;function Ji(t){XT.has(t)||(XT.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var iC=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=U({token:t,providedIn:"root",factory:()=>new t})}return t})();var oC=new $("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:O(at)})});function sC(t,e,n){let r=t.get(oC);if(Array.isArray(e))for(let i of e)r.queue.add(i),n?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),n?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(t)}function MP(t,e){let n=t.get(oC);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)n.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function xP(t,e){for(let[n,r]of e)sC(t,r.animateFns)}function eD(t,e,n,r){let i=t?.[ji]?.enter;e!==null&&i&&i.has(n.index)&&xP(r,i)}function zo(t,e,n,r,i,o,s,a){if(i!=null){let u,l=!1;vn(i)?u=i:$n(i)&&(l=!0,i=i[yn]);let f=on(i);t===0&&r!==null?(eD(a,r,o,n),s==null?KD(e,r,f):$l(e,r,f,s||null,!0)):t===1&&r!==null?(eD(a,r,o,n),$l(e,r,f,s||null,!0)):t===2?tD(a,o,n,p=>{QD(e,f,l,p)}):t===3&&tD(a,o,n,()=>{e.destroyNode(f)}),u!=null&&qP(e,t,n,u,o,r,s)}}function PP(t,e){aC(t,e),e[yn]=null,e[rn]=null}function OP(t,e,n,r,i,o){r[yn]=i,r[rn]=e,ad(t,r,n,1,i,o)}function aC(t,e){e[Un].changeDetectionScheduler?.notify(9),ad(t,e,e[Le],2,null,null)}function kP(t){let e=t[Bo];if(!e)return Gg(t[H],t);for(;e;){let n=null;if($n(e))n=e[Bo];else{let r=e[Ue];r&&(n=r)}if(!n){for(;e&&!e[nn]&&e!==t;)$n(e)&&Gg(e[H],e),e=e[Xe];e===null&&(e=t),$n(e)&&Gg(e[H],e),n=e&&e[nn]}e=n}}function Lm(t,e){let n=t[Ui],r=n.indexOf(e);n.splice(r,1)}function sd(t,e){if($i(e))return;let n=e[Le];n.destroyNode&&ad(t,e,n,3,null,null),kP(e)}function Gg(t,e){if($i(e))return;let n=q(null);try{e[Y]&=-129,e[Y]|=256,e[Wt]&&pa(e[Wt]),VP(t,e),FP(t,e),e[H].type===1&&e[Le].destroy();let r=e[Hr];if(r!==null&&vn(e[Xe])){r!==e[Xe]&&Lm(r,e);let i=e[Bn];i!==null&&i.detachView(t)}em(e)}finally{q(n)}}function tD(t,e,n,r){let i=t?.[ji];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);t&&Gi.add(t),sC(n,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let u=0;u<s.animateFns.length;u++){let l=s.animateFns[u],{promise:f}=l();a.push(f)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),LP(t,r)}else t&&Gi.delete(t),r(!1)},i)}function LP(t,e){let n=t[ji]?.running;if(n){n.then(()=>{t[ji].running=void 0,Gi.delete(t),e(!0)});return}e(!1)}function FP(t,e){let n=t.cleanup,r=e[Uo];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(e[Uo]=null);let i=e[lr];if(i!==null){e[lr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[xa];if(o!==null){e[xa]=null;for(let s of o)s.destroy()}}function VP(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Ba)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Re(_e.LifecycleHookStart,a,u);try{u.call(a)}finally{Re(_e.LifecycleHookEnd,a,u)}}else{Re(_e.LifecycleHookStart,i,o);try{o.call(i)}finally{Re(_e.LifecycleHookEnd,i,o)}}}}}function jP(t,e,n){return UP(t,e.parent,n)}function UP(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[yn];if(qr(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===Tn.None||i===Tn.Emulated)return null}return _n(r,n)}function BP(t,e,n){return HP(t,e,n)}function $P(t,e,n){return t.type&40?_n(t,n):null}var HP=$P,nD;function Fm(t,e,n,r){let i=jP(t,r,e),o=e[Le],s=r.parent||e[rn],a=BP(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)JT(o,i,n[u],a,!1);else JT(o,i,n,a,!1);nD!==void 0&&nD(o,r,e,n,i)}function ja(t,e){if(e!==null){let n=e.type;if(n&3)return _n(e,t);if(n&4)return rm(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return ja(t,r);{let i=t[e.index];return vn(i)?rm(-1,i):on(i)}}else{if(n&128)return ja(t,e.next);if(n&32)return Om(e,t)()||on(t[e.index]);{let r=cC(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Br(t[Gt]);return ja(i,r)}else return ja(t,e.next)}}}return null}function cC(t,e){if(e!==null){let r=t[Gt][rn],i=e.projection;return r.projection[i]}return null}function rm(t,e){let n=Ue+t+1;if(n<e.length){let r=e[n],i=r[H].firstChild;if(i!==null)return ja(r,i)}return e[zr]}function Vm(t,e,n,r,i,o,s){for(;n!=null;){let a=r[pr];if(n.type===128){n=n.next;continue}let u=r[n.index],l=n.type;if(s&&e===0&&(u&&Go(on(u),r),n.flags|=2),!Sm(n))if(l&8)Vm(t,e,n.child,r,i,o,!1),zo(e,t,a,i,u,n,o,r);else if(l&32){let f=Om(n,r),p;for(;p=f();)zo(e,t,a,i,p,n,o,r);zo(e,t,a,i,u,n,o,r)}else l&16?zP(t,e,r,n,i,o):zo(e,t,a,i,u,n,o,r);n=s?n.projectionNext:n.next}}function ad(t,e,n,r,i,o){Vm(n,r,t.firstChild,e,i,o,!1)}function zP(t,e,n,r,i,o){let s=n[Gt],u=s[rn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let f=u[l];zo(e,t,n[pr],i,f,r,o,n)}else{let l=u,f=s[Xe];PD(r)&&(l.flags|=128),Vm(t,e,l,f,i,o,!0)}}function qP(t,e,n,r,i,o,s){let a=r[zr],u=on(r);a!==u&&zo(e,t,n,o,a,i,s);for(let l=Ue;l<r.length;l++){let f=r[l];ad(f[H],f,t,e,o,a)}}function GP(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:qn.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=qn.Important),t.setStyle(n,r,i,o))}}function uC(t,e,n,r,i){let o=gr(),s=r&2;try{Gr(-1),s&&e.length>et&&rC(t,e,et,!1);let a=s?_e.TemplateUpdateStart:_e.TemplateCreateStart;Re(a,i,n),n(r,i)}finally{Gr(o);let a=s?_e.TemplateUpdateEnd:_e.TemplateCreateEnd;Re(a,i,n)}}function lC(t,e,n){XP(t,e,n),(n.flags&64)===64&&eO(t,e,n)}function jm(t,e,n=_n){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function WP(t,e,n,r){let o=r.get(BD,UD)||n===Tn.ShadowDom||n===Tn.ExperimentalIsolatedShadowDom,s=t.selectRootElement(e,o);return KP(s),s}function KP(t){QP(t)}var QP=()=>null;function YP(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function JP(t,e,n,r,i,o){let s=e[H];if(Um(t,s,e,n,r)){qr(t)&&ZP(e,t.index);return}t.type&3&&(n=YP(n)),dC(t,e,n,r,i,o)}function dC(t,e,n,r,i,o){if(t.type&3){let s=_n(t,e);r=o!=null?o(r,t.value||"",n):r,i.setProperty(s,n,r)}else t.type&12}function ZP(t,e){let n=sn(e,t);n[Y]&16||(n[Y]|=64)}function XP(t,e,n){let r=n.directiveStart,i=n.directiveEnd;qr(n)&&RP(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||bD(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let a=t.data[s],u=jl(e,t,s,n);if(Go(u,e),o!==null&&oO(e,s-r,u,a,n,o),Bi(a)){let l=sn(n.index,e);l[$e]=jl(e,t,s,n)}}}function eO(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=xT();try{Gr(o);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];Il(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&tO(u,l)}}finally{Gr(-1),Il(s)}}function tO(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function nO(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];IP(e,o.selectors,!1)&&(r??=[],Bi(o)?r.unshift(o):r.push(o))}return r}function rO(t,e,n,r,i,o){let s=_n(t,e);iO(e[Le],s,o,t.value,n,r,i)}function iO(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?Sa(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function oO(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];nm(r,n,u,l)}}function fC(t,e,n,r,i){let o=et+n,s=e[H],a=i(s,e,t,r,n);e[o]=a,Ho(t,!0);let u=t.type===2;return u?(YD(e[Le],a,t),(TT()===0||vl(t))&&Go(a,e),DT()):Go(a,e),bl()&&(!u||!Sm(t))&&Fm(s,e,a,t),t}function hC(t){let e=t;return Ag()?AT():(e=e.parent,Ho(e,!1)),e}function sO(t,e){let n=t[pr];if(!n)return;let r;try{r=n.get(an,null)}catch{r=null}r?.(e)}function Um(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],f=s[u+1],p=e.data[l];nm(p,n[l],f,i),a=!0}if(o)for(let u of o){let l=n[u],f=e.data[u];nm(f,l,r,i),a=!0}return a}function aO(t,e){let n=sn(e,t),r=n[H];cO(r,n);let i=n[yn];i!==null&&n[jo]===null&&(n[jo]=$D(i,n[pr])),Re(_e.ComponentStart);try{Bm(r,n,n[$e])}finally{Re(_e.ComponentEnd,n[$e])}}function cO(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Bm(t,e,n){Tl(e);try{let r=t.viewQuery;r!==null&&tm(1,r,n);let i=t.template;i!==null&&uC(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Bn]?.finishViewCreation(t),t.staticContentQueries&&HD(t,e),t.staticViewQueries&&tm(2,t.viewQuery,n);let o=t.components;o!==null&&uO(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Y]&=-5,Dl()}}function uO(t,e){for(let n=0;n<e.length;n++)aO(t,e[n])}function cd(t,e,n,r){let i=q(null);try{let o=e.tView,a=t[Y]&4096?4096:16,u=xm(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[Hr]=l;let f=t[Bn];return f!==null&&(u[Bn]=f.createEmbeddedView(o)),Bm(o,u,n),u}finally{q(i)}}function $a(t,e){return!e||e.firstChild===null||PD(t)}function Ha(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(on(o)),vn(o)&&pC(o,r);let s=n.type;if(s&8)Ha(t,e,n.child,r);else if(s&32){let a=Om(n,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=cC(e,n);if(Array.isArray(a))r.push(...a);else{let u=Br(e[Gt]);Ha(u[H],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function pC(t,e){for(let n=Ue;n<t.length;n++){let r=t[n],i=r[H].firstChild;i!==null&&Ha(r[H],r,i,e)}t[zr]!==t[yn]&&e.push(t[zr])}function gC(t){if(t[yl]!==null){for(let e of t[yl])e.impl.addSequence(e);t[yl].length=0}}var mC=[];function lO(t){return t[Wt]??dO(t)}function dO(t){let e=mC.pop()??Object.create(hO);return e.lView=t,e}function fO(t){t.lView[Wt]!==t&&(t.lView=null,mC.push(t))}var hO=re(M({},da),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{La(t.lView)},consumerOnSignalRead(){this.lView[Wt]=this}});function pO(t){let e=t[Wt]??Object.create(gO);return e.lView=t,e}var gO=re(M({},da),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=Br(t.lView);for(;e&&!yC(e[H]);)e=Br(e);e&&Eg(e)},consumerOnSignalRead(){this.lView[Wt]=this}});function yC(t){return t.type!==2}function vC(t){if(t[xa]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[xa])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[Y]&8192)}}var mO=100;function _C(t,e=0){let r=t[Un].rendererFactory,i=!1;i||r.begin?.();try{yO(t,e)}finally{i||r.end?.()}}function yO(t,e){let n=Rg();try{Ng(!0),im(t,e);let r=0;for(;ka(t);){if(r===mO)throw new j(103,!1);r++,im(t,1)}}finally{Ng(n)}}function vO(t,e,n,r){if($i(e))return;let i=e[Y],o=!1,s=!1;Tl(e);let a=!0,u=null,l=null;o||(yC(t)?(l=lO(e),u=ha(l)):xu()===null?(a=!1,l=pO(e),u=ha(l)):e[Wt]&&(pa(e[Wt]),e[Wt]=null));try{_g(e),RT(t.bindingStartIndex),n!==null&&uC(t,e,n,2,r);let f=(i&3)===3;if(!o)if(f){let y=t.preOrderCheckHooks;y!==null&&Nl(e,y,null)}else{let y=t.preOrderHooks;y!==null&&Ml(e,y,0,null),zg(e,0)}if(s||_O(e),vC(e),EC(e,0),t.contentQueries!==null&&HD(t,e),!o)if(f){let y=t.contentCheckHooks;y!==null&&Nl(e,y)}else{let y=t.contentHooks;y!==null&&Ml(e,y,1),zg(e,1)}IO(t,e);let p=t.components;p!==null&&wC(e,p,0);let m=t.viewQuery;if(m!==null&&tm(2,m,r),!o)if(f){let y=t.viewCheckHooks;y!==null&&Nl(e,y)}else{let y=t.viewHooks;y!==null&&Ml(e,y,2),zg(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[ml]){for(let y of e[ml])y();e[ml]=null}o||(gC(e),e[Y]&=-73)}catch(f){throw o||La(e),f}finally{l!==null&&(Pu(l,u),a&&fO(l)),Dl()}}function EC(t,e){for(let n=kD(t);n!==null;n=LD(n))for(let r=Ue;r<n.length;r++){let i=n[r];IC(i,e)}}function _O(t){for(let e=kD(t);e!==null;e=LD(e)){if(!(e[Y]&2))continue;let n=e[Ui];for(let r=0;r<n.length;r++){let i=n[r];Eg(i)}}}function EO(t,e,n){Re(_e.ComponentStart);let r=sn(e,t);try{IC(r,n)}finally{Re(_e.ComponentEnd,r[$e])}}function IC(t,e){_l(t)&&im(t,e)}function im(t,e){let r=t[H],i=t[Y],o=t[Wt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Ou(o)),s||=!1,o&&(o.dirty=!1),t[Y]&=-9217,s)vO(r,t,r.template,t[$e]);else if(i&8192){let a=q(null);try{vC(t),EC(t,1);let u=r.components;u!==null&&wC(t,u,1),gC(t)}finally{q(a)}}}function wC(t,e,n){for(let r=0;r<e.length;r++)EO(t,e[r],n)}function IO(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Gr(~i);else{let o=i,s=n[++r],a=n[++r];MT(s,o);let u=e[o];Re(_e.HostBindingsUpdateStart,u);try{a(2,u)}finally{Re(_e.HostBindingsUpdateEnd,u)}}}}finally{Gr(-1)}}function $m(t,e){let n=Rg()?64:1088;for(t[Un].changeDetectionScheduler?.notify(e);t;){t[Y]|=n;let r=Br(t);if($o(t)&&!r)return t;t=r}return null}function TC(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function DC(t,e){let n=Ue+e;if(n<t.length)return t[n]}function ud(t,e,n,r=!0){let i=e[H];if(wO(i,e,t,n),r){let s=rm(n,t),a=e[Le],u=a.parentNode(t[zr]);u!==null&&OP(i,t[rn],a,e,u,s)}let o=e[jo];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function CC(t,e){let n=za(t,e);return n!==void 0&&sd(n[H],n),n}function za(t,e){if(t.length<=Ue)return;let n=Ue+e,r=t[n];if(r){let i=r[Hr];i!==null&&i!==t&&Lm(i,r),e>0&&(t[n-1][nn]=r[nn]);let o=Aa(t,Ue+e);PP(r[H],r);let s=o[Bn];s!==null&&s.detachView(o[H]),r[Xe]=null,r[nn]=null,r[Y]&=-129}return r}function wO(t,e,n,r){let i=Ue+r,o=n.length;r>0&&(n[i-1][nn]=e),r<o-Ue?(e[nn]=n[i],sg(n,Ue+r,e)):(n.push(e),e[nn]=null),e[Xe]=n;let s=e[Hr];s!==null&&n!==s&&bC(s,e);let a=e[Bn];a!==null&&a.insertView(t),El(e),e[Y]|=128}function bC(t,e){let n=t[Ui],r=e[Xe];if($n(r))t[Y]|=2;else{let i=r[Xe][Gt];e[Gt]!==i&&(t[Y]|=2)}n===null?t[Ui]=[e]:n.push(e)}var Kr=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[H];return Ha(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[$e]}set context(e){this._lView[$e]=e}get destroyed(){return $i(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Xe];if(vn(e)){let n=e[Pa],r=n?n.indexOf(this):-1;r>-1&&(za(e,r),Aa(n,r))}this._attachedToViewContainer=!1}sd(this._lView[H],this._lView)}onDestroy(e){Ig(this._lView,e)}markForCheck(){$m(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Y]&=-129}reattach(){El(this._lView),this._lView[Y]|=128}detectChanges(){this._lView[Y]|=1024,_C(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new j(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=$o(this._lView),n=this._lView[Hr];n!==null&&!e&&Lm(n,this._lView),aC(this._lView[H],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new j(902,!1);this._appRef=e;let n=$o(this._lView),r=this._lView[Hr];r!==null&&!n&&bC(r,this._lView),El(this._lView)}};var Wo=(()=>{class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=TO;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){let o=cd(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new Kr(o)}}return t})();function TO(){return Hm(Nt(),le())}function Hm(t,e){return t.type&4?new Wo(e,t,Yo(t,e)):null}function ld(t,e,n,r,i){let o=t.data[e];if(o===null)o=DO(t,e,n,r,i),NT()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=ST();o.injectorIndex=s===null?-1:s.injectorIndex}return Ho(o,!0),o}function DO(t,e,n,r,i){let o=Sg(),s=Ag(),a=s?o:o&&o.parent,u=t.data[e]=bO(t,a,n,e,r,i);return CO(t,u,o,s),u}function CO(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function bO(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return bT()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function SO(t){let e=t[gg]??[],r=t[Xe][Le],i=[];for(let o of e)o.data[jD]!==void 0?i.push(o):AO(o,r);t[gg]=i}function AO(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[VD];for(;n<i;){let o=r.nextSibling;QD(e,r,!1),r=o,n++}}}var RO=()=>null,NO=()=>null;function om(t,e){return RO(t,e)}function SC(t,e,n){return NO(t,e,n)}var AC=class{},dd=class{},sm=class{resolveComponentFactory(e){throw new j(917,!1)}},Xa=class{static NULL=new sm},Wi=class{},Jo=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>MO()}return t})();function MO(){let t=le(),e=Nt(),n=sn(e.index,t);return($n(n)?n:t)[Le]}var RC=(()=>{class t{static \u0275prov=U({token:t,providedIn:"root",factory:()=>null})}return t})();var Pl={},am=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,Pl,r);return i!==Pl||n===Pl?i:this.parentInjector.get(e,n,r)}};function Hl(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=ul(i,a);else if(o==2){let u=a,l=e[++s];r=ul(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function me(t,e=0){let n=le();if(n===null)return Q(t,e);let r=Nt();return ND(r,n,Ut(t),e)}function xO(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let a=s,u=null,l=null;for(let f of s)if(f.resolveHostDirectives!==null){[a,u,l]=f.resolveHostDirectives(s);break}kO(t,e,n,a,o,u,l)}o!==null&&r!==null&&PO(n,r,o)}function PO(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new j(-301,!1);r.push(e[i],o)}}function OO(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function kO(t,e,n,r,i,o,s){let a=r.length,u=null;for(let m=0;m<a;m++){let y=r[m];u===null&&Bi(y)&&(u=y,OO(t,n,m)),Gx(bD(n,e),t,y.type)}BO(n,t.data.length,a),u?.viewProvidersResolver&&u.viewProvidersResolver(u);for(let m=0;m<a;m++){let y=r[m];y.providersResolver&&y.providersResolver(y)}let l=!1,f=!1,p=nC(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let m=0;m<a;m++){let y=r[m];if(n.mergedAttrs=ed(n.mergedAttrs,y.hostAttrs),FO(t,n,e,p,y),UO(p,y,i),s!==null&&s.has(y)){let[A,R]=s.get(y);n.directiveToIndex.set(y.type,[p,A+n.directiveStart,R+n.directiveStart])}else(o===null||!o.has(y))&&n.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(n.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(n.flags|=64);let S=y.type.prototype;!l&&(S.ngOnChanges||S.ngOnInit||S.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!f&&(S.ngOnChanges||S.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),f=!0),p++}LO(t,n,o)}function LO(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))rD(0,e,i,r),rD(1,e,i,r),oD(e,r,!1);else{let o=n.get(i);iD(0,e,o,r),iD(1,e,o,r),oD(e,r,!0)}}}function rD(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),NC(e,o)}}function iD(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),NC(e,s)}}function NC(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function oD(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||Nm(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!n&&i.hasOwnProperty(u)){let l=i[u];for(let f of l)if(f===e){s??=[],s.push(u,r[a+1]);break}}else if(n&&o.hasOwnProperty(u)){let l=o[u];for(let f=0;f<l.length;f+=2)if(l[f]===e){s??=[],s.push(l[f+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function FO(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Ur(i.type,!0)),s=new Ba(o,Bi(i),me,null);t.blueprint[r]=s,n[r]=s,VO(t,e,r,nC(t,n,i.hostVars,cn),i)}function VO(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;jO(s)!=a&&s.push(a),s.push(n,r,o)}}function jO(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function UO(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Bi(e)&&(n[""]=t)}}function BO(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function MC(t,e,n,r,i,o,s,a){let u=e[H],l=u.consts,f=Hn(l,s),p=ld(u,t,n,r,f);return o&&xO(u,e,p,Hn(l,a),i),p.mergedAttrs=ed(p.mergedAttrs,p.attrs),p.attrs!==null&&Hl(p,p.attrs,!1),p.mergedAttrs!==null&&Hl(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function xC(t,e){Lx(t,e),mg(e)&&t.queries.elementEnd(e)}function $O(t,e,n,r,i,o){let s=e.consts,a=Hn(s,i),u=ld(e,t,n,r,a);if(u.mergedAttrs=ed(u.mergedAttrs,u.attrs),o!=null){let l=Hn(s,o);u.localNames=[];for(let f=0;f<l.length;f+=2)u.localNames.push(l[f],-1)}return u.attrs!==null&&Hl(u,u.attrs,!1),u.mergedAttrs!==null&&Hl(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function PC(t,e,n){return t[e]=n}function Dn(t,e,n){if(n===cn)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function HO(t,e,n,r){let i=Dn(t,e,n);return Dn(t,e+1,r)||i}function Ol(t,e,n){return function r(i){let o=qr(t)?sn(t.index,e):e;$m(o,5);let s=e[$e],a=sD(e,s,n,i),u=r.__ngNextListenerFn__;for(;u;)a=sD(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function sD(t,e,n,r){let i=q(null);try{return Re(_e.OutputStart,e,n),n(r)!==!1}catch(o){return sO(t,o),!1}finally{Re(_e.OutputEnd,e,n),q(i)}}function OC(t,e,n,r,i,o,s,a){let u=vl(t),l=!1,f=null;if(!r&&u&&(f=qO(e,n,o,t.index)),f!==null){let p=f.__ngLastListenerFn__||f;p.__ngNextListenerFn__=s,f.__ngLastListenerFn__=s,l=!0}else{let p=_n(t,n),m=r?r(p):p;aP(n,m,o,a);let y=i.listen(m,o,a);if(!zO(o)){let S=r?A=>r(on(A[t.index])):t.index;kC(S,e,n,o,a,y,!1)}}return l}function zO(t){return t.startsWith("animation")||t.startsWith("transition")}function qO(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[Uo],u=i[o+2];return a&&a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function kC(t,e,n,r,i,o,s){let a=e.firstCreatePass?Tg(e):null,u=wg(n),l=u.length;u.push(i,o),a&&a.push(r,t,l,(l+1)*(s?-1:1))}function aD(t,e,n,r,i,o){let s=e[n],a=e[H],l=a.data[n].outputs[r],p=s[l].subscribe(o);kC(t.index,a,e,i,o,p,!0)}var cm=Symbol("BINDING");var zl=class extends Xa{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=$r(e);return new Ko(n,this.ngModule)}};function GO(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&od.SignalBased)!==0};return i&&(o.transform=i),o})}function WO(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function KO(t,e,n){let r=e instanceof at?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new am(n,r):n}function QO(t){let e=t.get(Wi,null);if(e===null)throw new j(407,!1);let n=t.get(RC,null),r=t.get(Lo,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function YO(t,e){let n=LC(t);return WD(e,n,n==="svg"?gT:n==="math"?mT:null)}function LC(t){return(t.selectors[0][0]||"div").toLowerCase()}var Ko=class extends dd{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=GO(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=WO(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=CP(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){Re(_e.DynamicComponentStart);let a=q(null);try{let u=this.componentDef,l=JO(r,u,s,o),f=KO(u,i||this.ngModule,e),p=QO(f),m=p.rendererFactory.createRenderer(null,u),y=r?WP(m,r,u.encapsulation,f):YO(u,m),S=s?.some(cD)||o?.some(L=>typeof L!="function"&&L.bindings.some(cD)),A=xm(null,l,null,512|tC(u),null,null,p,m,f,null,$D(y,f,!0));A[et]=y,Tl(A);let R=null;try{let L=MC(et,A,2,"#host",()=>l.directiveRegistry,!0,0);YD(m,y,L),Go(y,A),lC(l,A,L),zD(l,L,A),xC(l,L),n!==void 0&&XO(L,this.ngContentSelectors,n),R=sn(L.index,A),A[$e]=R[$e],Bm(l,A,null)}catch(L){throw R!==null&&em(R),em(A),L}finally{Re(_e.DynamicComponentEnd),Dl()}return new ql(this.componentType,A,!!S)}finally{q(a)}}};function JO(t,e,n,r){let i=t?["ng-version","21.0.3"]:bP(e.selectors[0]),o=null,s=null,a=0;if(n)for(let f of n)a+=f[cm].requiredVars,f.create&&(f.targetIdx=0,(o??=[]).push(f)),f.update&&(f.targetIdx=0,(s??=[]).push(f));if(r)for(let f=0;f<r.length;f++){let p=r[f];if(typeof p!="function")for(let m of p.bindings){a+=m[cm].requiredVars;let y=f+1;m.create&&(m.targetIdx=y,(o??=[]).push(m)),m.update&&(m.targetIdx=y,(s??=[]).push(m))}}let u=[e];if(r)for(let f of r){let p=typeof f=="function"?f:f.type,m=lg(p);u.push(m)}return Mm(0,null,ZO(o,s),1,a,u,null,null,null,[i],null)}function ZO(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function cD(t){let e=t[cm].kind;return e==="input"||e==="twoWay"}var ql=class extends AC{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=Oa(n[H],et),this.location=Yo(this._tNode,n),this.instance=sn(this._tNode.index,n)[$e],this.hostView=this.changeDetectorRef=new Kr(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=Um(r,i[H],i,e,n);this.previousInputValues.set(e,n);let s=sn(r.index,i);$m(s,1)}get injector(){return new qi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function XO(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Zi=(()=>{class t{static __NG_ELEMENT_ID__=ek}return t})();function ek(){let t=Nt();return VC(t,le())}var tk=Zi,FC=class extends tk{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Yo(this._hostTNode,this._hostLView)}get injector(){return new qi(this._hostTNode,this._hostLView)}get parentInjector(){let e=Dm(this._hostTNode,this._hostLView);if(TD(e)){let n=Fl(e,this._hostLView),r=Ll(e),i=n[H].data[r+8];return new qi(i,n)}else return new qi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=uD(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Ue}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=om(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,$a(this._hostTNode,s)),a}createComponent(e,n,r,i,o,s,a){let u=e&&!Mx(e),l;if(u)l=n;else{let R=n||{};l=R.index,r=R.injector,i=R.projectableNodes,o=R.environmentInjector||R.ngModuleRef,s=R.directives,a=R.bindings}let f=u?e:new Ko($r(e)),p=r||this.parentInjector;if(!o&&f.ngModule==null){let L=(u?p:this.parentInjector).get(at,null);L&&(o=L)}let m=$r(f.componentType??{}),y=om(this._lContainer,m?.id??null),S=y?.firstChild??null,A=f.create(p,i,S,o,s,a);return this.insertImpl(A.hostView,l,$a(this._hostTNode,y)),A}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(_T(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Xe],l=new FC(u,u[rn],u[Xe]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return ud(s,i,o,r),e.attachToViewContainerRef(),sg(Wg(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=uD(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=za(this._lContainer,n);r&&(Aa(Wg(this._lContainer),n),sd(r[H],r))}detach(e){let n=this._adjustIndex(e,-1),r=za(this._lContainer,n);return r&&Aa(Wg(this._lContainer),n)!=null?new Kr(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function uD(t){return t[Pa]}function Wg(t){return t[Pa]||(t[Pa]=[])}function VC(t,e){let n,r=e[t.index];return vn(r)?n=r:(n=TC(r,e,null,t),e[t.index]=n,Pm(e,n)),rk(n,e,t,r),new FC(n,t,e)}function nk(t,e){let n=t[Le],r=n.createComment(""),i=_n(e,t),o=n.parentNode(i);return $l(n,o,r,n.nextSibling(i),!1),r}var rk=sk,ik=()=>!1;function ok(t,e,n){return ik(t,e,n)}function sk(t,e,n,r){if(t[zr])return;let i;n.type&8?i=on(r):i=nk(e,n),t[zr]=i}var um=class t{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},lm=class t{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)zm(e,n).matches!==null&&this.queries[n].setDirty()}},dm=class{flags;read;predicate;constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=pk(e):this.predicate=e}},fm=class t{queries;constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},hm=class t{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,n=-1){this.metadata=e,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,n,ak(n,o)),this.matchTNodeWithReadOption(e,n,xl(n,e,o,!1,!1))}else r===Wo?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,xl(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Gn||i===Zi||i===Wo&&n.type&4)this.addMatch(n.index,-2);else{let o=xl(n,e,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function ak(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function ck(t,e){return t.type&11?Yo(t,e):t.type&4?Hm(t,e):null}function uk(t,e,n,r){return n===-1?ck(e,t):n===-2?lk(t,e,r):jl(t,t[H],n,e)}function lk(t,e,n){if(n===Gn)return Yo(e,t);if(n===Wo)return Hm(e,t);if(n===Zi)return VC(e,t)}function jC(t,e,n,r){let i=e[Bn].queries[r];if(i.matches===null){let o=t.data,s=n.matches,a=[];for(let u=0;s!==null&&u<s.length;u+=2){let l=s[u];if(l<0)a.push(null);else{let f=o[l];a.push(uk(e,f,s[u+1],n.metadata.read))}}i.matches=a}return i.matches}function pm(t,e,n,r){let i=t.queries.getByIndex(n),o=i.matches;if(o!==null){let s=jC(t,e,i,n);for(let a=0;a<o.length;a+=2){let u=o[a];if(u>0)r.push(s[a/2]);else{let l=o[a+1],f=e[-u];for(let p=Ue;p<f.length;p++){let m=f[p];m[Hr]===m[Xe]&&pm(m[H],m,l,r)}if(f[Ui]!==null){let p=f[Ui];for(let m=0;m<p.length;m++){let y=p[m];pm(y[H],y,l,r)}}}}}return r}function dk(t,e){return t[Bn].queries[e].queryList}function fk(t,e,n){let r=new Ul((n&4)===4);return wT(t,e,r,r.destroy),(e[Bn]??=new lm).queries.push(new um(r))-1}function hk(t,e,n,r){let i=pt();if(i.firstCreatePass){let o=Nt();gk(i,new dm(e,n,r),o.index),mk(i,t),(n&2)===2&&(i.staticContentQueries=!0)}return fk(i,le(),n)}function pk(t){return t.split(",").map(e=>e.trim())}function gk(t,e,n){t.queries===null&&(t.queries=new fm),t.queries.track(new hm(e,n))}function mk(t,e){let n=t.contentQueries||(t.contentQueries=[]),r=n.length?n[n.length-1]:-1;e!==r&&n.push(t.queries.length-1,e)}function zm(t,e){return t.queries.getByIndex(e)}function yk(t,e){let n=t[H],r=zm(n,e);return r.crossesNgTemplate?pm(n,t,e,[]):jC(n,t,r,e)}var Ki=class{},fd=class{};var Gl=class extends Ki{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new zl(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=ug(e);this._bootstrapComponents=XD(o.bootstrap),this._r3Injector=Lg(e,n,[{provide:Ki,useValue:this},{provide:Xa,useValue:this.componentFactoryResolver},...r],dr(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Wl=class extends fd{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Gl(this.moduleType,e,[])}};var qa=class extends Ki{injector;componentFactoryResolver=new zl(this);instance=null;constructor(e){super();let n=new xi([...e.providers,{provide:Ki,useValue:this},{provide:Xa,useValue:this.componentFactoryResolver}],e.parent||Na(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function ec(t,e,n=null){return new qa({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var vk=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=dg(!1,n.type),i=r.length>0?ec([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=U({token:t,providedIn:"environment",factory:()=>new t(Q(at))})}return t})();function Se(t){return Xl(()=>{let e=UC(t),n=re(M({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Cm.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(vk).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Tn.Emulated,styles:t.styles||Vn,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&Ji("NgStandalone"),BC(n);let r=t.dependencies;return n.directiveDefs=lD(r,_k),n.pipeDefs=lD(r,aT),n.id=wk(n),n})}function _k(t){return $r(t)||lg(t)}function Ek(t,e){if(t==null)return Oi;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=od.None,u=null),n[o]=[r,a,u],e[o]=s}return n}function Ik(t){if(t==null)return Oi;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function Qr(t){return Xl(()=>{let e=UC(t);return BC(e),e})}function qm(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function UC(t){let e={};return{type:t.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||Oi,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||Vn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:Ek(t.inputs,e),outputs:Ik(t.outputs),debugInfo:null}}function BC(t){t.features?.forEach(e=>e(t))}function lD(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let o=e(i);o!==null&&r.push(o)}return r}:null}function wk(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Tk(t,e,n,r,i,o,s,a){if(n.firstCreatePass){t.mergedAttrs=ed(t.mergedAttrs,t.attrs);let f=t.tView=Mm(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),f.queries=n.queries.embeddedTView(t))}a&&(t.flags|=a),Ho(t,!1);let u=Dk(n,e,t,r);bl()&&Fm(n,e,u,t),Go(u,e);let l=TC(u,e,u,t);e[r+et]=l,Pm(e,l),ok(l,t,e)}function Kl(t,e,n,r,i,o,s,a,u,l,f){let p=n+et,m;if(e.firstCreatePass){if(m=ld(e,p,4,s||null,a||null),l!=null){let y=Hn(e.consts,l);m.localNames=[];for(let S=0;S<y.length;S+=2)m.localNames.push(y[S],-1)}}else m=e.data[p];return Tk(m,t,e,n,r,i,o,u),l!=null&&jm(t,m,f),m}var Dk=Ck;function Ck(t,e,n,r){return Sl(!0),e[Le].createComment("")}var Gm=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var Wm=new $("");function Zo(t){return!!t&&typeof t.then=="function"}function Km(t){return!!t&&typeof t.subscribe=="function"}var $C=new $("");var Qm=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=O($C,{optional:!0})??[];injector=O(jn);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=St(this.injector,i);if(Zo(o))n.push(o);else if(Km(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),hd=new $("");function HC(){Ep(()=>{let t="";throw new j(600,t)})}function zC(t){return t.isBoundToModule}var bk=10;var Xo=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=O(an);afterRenderManager=O(iC);zonelessEnabled=O(Fa);rootEffectScheduler=O(Hg);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new ot;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=O(Wr);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ke(n=>!n))}constructor(){O(Za,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=O(at);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=jn.NULL){return this._injector.get(qt).run(()=>{Re(_e.BootstrapComponentStart);let s=n instanceof dd;if(!this._injector.get(Qm).done){let S="";throw new j(405,S)}let u;s?u=n:u=this._injector.get(Xa).resolveComponentFactory(n),this.componentTypes.push(u.componentType);let l=zC(u)?void 0:this._injector.get(Ki),f=r||u.selector,p=u.create(i,[],f,l),m=p.location.nativeElement,y=p.injector.get(Wm,null);return y?.registerApplication(m),p.onDestroy(()=>{this.detachView(p.hostView),Ua(this.components,p),y?.unregisterApplication(m)}),this._loadComponent(p),Re(_e.BootstrapComponentEnd,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Re(_e.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(km.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw Re(_e.ChangeDetectionEnd),new j(101,!1);let n=q(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,q(n),this.afterTick.next(),Re(_e.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Wi,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<bk;){Re(_e.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{Re(_e.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!ka(i))continue;let o=r&&!this.zonelessEnabled?0:1;_C(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>ka(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;Ua(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(hd,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Ua(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new j(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Ua(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function pd(t,e,n,r){let i=le(),o=Hi();if(Dn(i,o,e)){let s=pt(),a=Cl();rO(a,i,t,e,n,r)}return pd}var ZG=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var gm=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function Kg(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function Sk(t,e,n,r){let i,o,s=0,a=t.length-1,u=void 0;if(Array.isArray(e)){q(r);let l=e.length-1;for(q(null);s<=a&&s<=l;){let f=t.at(s),p=e[s],m=Kg(s,f,s,p,n);if(m!==0){m<0&&t.updateValue(s,p),s++;continue}let y=t.at(a),S=e[l],A=Kg(a,y,l,S,n);if(A!==0){A<0&&t.updateValue(a,S),a--,l--;continue}let R=n(s,f),L=n(a,y),te=n(s,p);if(Object.is(te,L)){let he=n(l,S);Object.is(he,R)?(t.swap(s,a),t.updateValue(a,S),l--,a--):t.move(a,s),t.updateValue(s,p),s++;continue}if(i??=new Ql,o??=fD(t,s,a,n),mm(t,i,s,te))t.updateValue(s,p),s++,a++;else if(o.has(te))i.set(R,t.detach(s)),a--;else{let he=t.create(s,e[s]);t.attach(s,he),s++,a++}}for(;s<=l;)dD(t,i,n,s,e[s]),s++}else if(e!=null){q(r);let l=e[Symbol.iterator]();q(null);let f=l.next();for(;!f.done&&s<=a;){let p=t.at(s),m=f.value,y=Kg(s,p,s,m,n);if(y!==0)y<0&&t.updateValue(s,m),s++,f=l.next();else{i??=new Ql,o??=fD(t,s,a,n);let S=n(s,m);if(mm(t,i,s,S))t.updateValue(s,m),s++,a++,f=l.next();else if(!o.has(S))t.attach(s,t.create(s,m)),s++,a++,f=l.next();else{let A=n(s,p);i.set(A,t.detach(s)),a--}}}for(;!f.done;)dD(t,i,n,t.length,f.value),f=l.next()}for(;s<=a;)t.destroy(t.detach(a--));i?.forEach(l=>{t.destroy(l)})}function mm(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function dD(t,e,n,r,i){if(mm(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function fD(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var Ql=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function ie(t,e,n,r,i,o,s,a){Ji("NgControlFlow");let u=le(),l=pt(),f=Hn(l.consts,o);return Kl(u,l,t,e,n,r,i,f,256,s,a),Ym}function Ym(t,e,n,r,i,o,s,a){Ji("NgControlFlow");let u=le(),l=pt(),f=Hn(l.consts,o);return Kl(u,l,t,e,n,r,i,f,512,s,a),Ym}function oe(t,e){Ji("NgControlFlow");let n=le(),r=Hi(),i=n[r]!==cn?n[r]:-1,o=i!==-1?Yl(n,et+i):void 0,s=0;if(Dn(n,r,t)){let a=q(null);try{if(o!==void 0&&CC(o,s),t!==-1){let u=et+t,l=Yl(n,u),f=Em(n[H],u),p=SC(l,f,n),m=cd(n,f,e,{dehydratedView:p});ud(l,m,s,$a(f,p))}}finally{q(a)}}else if(o!==void 0){let a=DC(o,s);a!==void 0&&(a[$e]=e)}}var ym=class{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-Ue}};function un(t,e){return e}var vm=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function xt(t,e,n,r,i,o,s,a,u,l,f,p,m){Ji("NgControlFlow");let y=le(),S=pt(),A=u!==void 0,R=le(),L=a?s.bind(R[Gt][$e]):s,te=new vm(A,L);R[et+t]=te,Kl(y,S,t+1,e,n,r,i,Hn(S.consts,o),256),A&&Kl(y,S,t+2,u,l,f,p,Hn(S.consts,m),512)}var _m=class extends gm{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-Ue}at(e){return this.getLView(e)[$e].$implicit}attach(e,n){let r=n[jo];this.needsIndexUpdate||=e!==this.length,ud(this.lContainer,n,e,$a(this.templateTNode,r)),Ak(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,Rk(this.lContainer,e),Nk(this.lContainer,e)}create(e,n){let r=om(this.lContainer,this.templateTNode.tView.ssrId),i=cd(this.hostLView,this.templateTNode,new ym(this.lContainer,n,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){sd(e[H],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[$e].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[$e].$index=e}getLView(e){return Mk(this.lContainer,e)}};function Pt(t){let e=q(null),n=gr();try{let r=le(),i=r[H],o=r[n],s=n+1,a=Yl(r,s);if(o.liveCollection===void 0){let l=Em(i,s);o.liveCollection=new _m(a,r,l)}else o.liveCollection.reset();let u=o.liveCollection;if(Sk(u,t,o.trackByFn,e),u.updateIndexes(),o.hasEmptyBlock){let l=Hi(),f=u.length===0;if(Dn(r,l,f)){let p=n+2,m=Yl(r,p);if(f){let y=Em(i,p),S=SC(m,y,r),A=cd(r,y,void 0,{dehydratedView:S});ud(m,A,0,$a(y,S))}else i.firstUpdatePass&&SO(m),CC(m,0)}}}finally{q(e)}}function Yl(t,e){return t[e]}function Ak(t,e){if(t.length<=Ue)return;let n=Ue+e,r=t[n],i=r?r[ji]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let o=r[pr];MP(o,i),Gi.delete(r),i.detachedLeaveAnimationFns=void 0}}function Rk(t,e){if(t.length<=Ue)return;let n=Ue+e,r=t[n],i=r?r[ji]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function Nk(t,e){return za(t,e)}function Mk(t,e){return DC(t,e)}function Em(t,e){return Oa(t,e)}function ae(t,e,n){let r=le(),i=Hi();if(Dn(r,i,e)){let o=pt(),s=Cl();JP(s,r,t,e,r[Le],n)}return ae}function Im(t,e,n,r,i){Um(e,t,n,i?"class":"style",r)}function G(t,e,n,r){let i=le(),o=i[H],s=t+et,a=o.firstCreatePass?MC(s,i,2,e,nO,CT(),n,r):o.data[s];if(fC(a,i,t,e,qC),vl(a)){let u=i[H];lC(u,i,a),zD(u,a,i)}return r!=null&&jm(i,a),G}function se(){let t=pt(),e=Nt(),n=hC(e);return t.firstCreatePass&&xC(t,n),Cg(n)&&bg(),Dg(),n.classesWithoutHost!=null&&Vx(n)&&Im(t,n,le(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&jx(n)&&Im(t,n,le(),n.stylesWithoutHost,!1),se}function Ee(t,e,n,r){return G(t,e,n,r),se(),Ee}function Ie(t,e,n,r){let i=le(),o=i[H],s=t+et,a=o.firstCreatePass?$O(s,o,2,e,n,r):o.data[s];return fC(a,i,t,e,qC),r!=null&&jm(i,a),Ie}function we(){let t=Nt(),e=hC(t);return Cg(e)&&bg(),Dg(),we}function Yr(t,e,n,r){return Ie(t,e,n,r),we(),Yr}var qC=(t,e,n,r,i)=>(Sl(!0),WD(e[Le],r,VT()));function Bt(){return le()}function Wn(t,e,n){let r=le(),i=Hi();if(Dn(r,i,e)){let o=pt(),s=Cl();dC(s,r,t,e,r[Le],n)}return Wn}var Va=void 0;function xk(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return e===1&&n===0?1:5}var Pk=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Va,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Va,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm\u202Fa","h:mm:ss\u202Fa","h:mm:ss\u202Fa z","h:mm:ss\u202Fa zzzz"],["{1}, {0}",Va,Va,Va],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",xk],Qg={};function Kt(t){let e=Ok(t),n=hD(e);if(n)return n;let r=e.split("-")[0];if(n=hD(r),n)return n;if(r==="en")return Pk;throw new j(701,!1)}function hD(t){return t in Qg||(Qg[t]=hr.ng&&hr.ng.common&&hr.ng.common.locales&&hr.ng.common.locales[t]),Qg[t]}var He=(function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t})(He||{});function Ok(t){return t.toLowerCase().replace(/_/g,"-")}var tc="en-US";var kk=tc;function GC(t){typeof t=="string"&&(kk=t.toLowerCase().replace(/_/g,"-"))}function Cn(t,e,n){let r=le(),i=pt(),o=Nt();return Lk(i,r,r[Le],o,t,e,n),Cn}function Kn(t,e,n){let r=le(),i=pt(),o=Nt();return(o.type&3||n)&&OC(o,i,r,n,r[Le],t,e,Ol(o,r,e)),Kn}function Lk(t,e,n,r,i,o,s){let a=!0,u=null;if((r.type&3||s)&&(u??=Ol(r,e,o),OC(r,t,e,s,n,i,o,u)&&(a=!1)),a){let l=r.outputs?.[i],f=r.hostDirectiveOutputs?.[i];if(f&&f.length)for(let p=0;p<f.length;p+=2){let m=f[p],y=f[p+1];u??=Ol(r,e,o),aD(r,e,m,y,i,u)}if(l&&l.length)for(let p of l)u??=Ol(r,e,o),aD(r,e,p,i,i,u)}}function W(t=1){return FT(t)}function Jm(t,e,n,r){hk(t,e,n,r)}function Zm(t){let e=le(),n=pt(),r=Pg();wl(r+1);let i=zm(n,r);if(t.dirty&&vT(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let o=yk(e,r);t.reset(o,Xx),t.notifyOnChanges()}return!0}return!1}function Xm(){return dk(le(),Pg())}function Rl(t,e){return t<<17|e<<2}function Qi(t){return t>>17&32767}function Fk(t){return(t&2)==2}function Vk(t,e){return t&131071|e<<17}function wm(t){return t|2}function Qo(t){return(t&131068)>>2}function Yg(t,e){return t&-131069|e<<2}function jk(t){return(t&1)===1}function Tm(t){return t|1}function Uk(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Qi(s),u=Qo(s);t[r]=n;let l=!1,f;if(Array.isArray(n)){let p=n;f=p[1],(f===null||Vo(p,f)>0)&&(l=!0)}else f=n;if(i)if(u!==0){let m=Qi(t[a+1]);t[r+1]=Rl(m,a),m!==0&&(t[m+1]=Yg(t[m+1],r)),t[a+1]=Vk(t[a+1],r)}else t[r+1]=Rl(a,0),a!==0&&(t[a+1]=Yg(t[a+1],r)),a=r;else t[r+1]=Rl(u,0),a===0?a=r:t[u+1]=Yg(t[u+1],r),u=r;l&&(t[r+1]=wm(t[r+1])),pD(t,f,r,!0),pD(t,f,r,!1),Bk(e,f,t,r,o),s=Rl(a,u),o?e.classBindings=s:e.styleBindings=s}function Bk(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Vo(o,e)>=0&&(n[r+1]=Tm(n[r+1]))}function pD(t,e,n,r){let i=t[n+1],o=e===null,s=r?Qi(i):Qo(i),a=!1;for(;s!==0&&(a===!1||o);){let u=t[s],l=t[s+1];$k(u,e)&&(a=!0,t[s+1]=r?Tm(l):wm(l)),s=r?Qi(l):Qo(l)}a&&(t[n+1]=r?wm(i):Tm(i))}function $k(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Vo(t,e)>=0:!1}var wn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Hk(t){return t.substring(wn.key,wn.keyEnd)}function zk(t){return qk(t),WC(t,KC(t,0,wn.textEnd))}function WC(t,e){let n=wn.textEnd;return n===e?-1:(e=wn.keyEnd=Gk(t,wn.key=e,n),KC(t,e,n))}function qk(t){wn.key=0,wn.keyEnd=0,wn.value=0,wn.valueEnd=0,wn.textEnd=t.length}function KC(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function Gk(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function es(t,e){return Kk(t,e,null,!0),es}function gd(t){Qk(t1,Wk,t,!0)}function Wk(t,e){for(let n=zk(e);n>=0;n=WC(e,n))pl(t,Hk(e),!0)}function Kk(t,e,n,r){let i=le(),o=pt(),s=xg(2);if(o.firstUpdatePass&&YC(o,t,s,r),e!==cn&&Dn(i,s,e)){let a=o.data[gr()];JC(o,a,i,i[Le],t,i[s+1]=r1(e,n),r,s)}}function Qk(t,e,n,r){let i=pt(),o=xg(2);i.firstUpdatePass&&YC(i,null,o,r);let s=le();if(n!==cn&&Dn(s,o,n)){let a=i.data[gr()];if(ZC(a,r)&&!QC(i,o)){let u=r?a.classesWithoutHost:a.stylesWithoutHost;u!==null&&(n=ul(u,n||"")),Im(i,a,s,n,r)}else n1(i,a,s,s[Le],s[o+1],s[o+1]=e1(t,e,n),r,o)}}function QC(t,e){return e>=t.expandoStartIndex}function YC(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[gr()],s=QC(t,n);ZC(o,r)&&e===null&&!s&&(e=!1),e=Yk(i,o,e,r),Uk(i,o,e,n,s,r)}}function Yk(t,e,n,r){let i=PT(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Jg(null,t,e,n,r),n=Ga(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=Jg(i,t,e,n,r),o===null){let u=Jk(t,e,r);u!==void 0&&Array.isArray(u)&&(u=Jg(null,t,e,u[1],r),u=Ga(u,e.attrs,r),Zk(t,e,r,u))}else o=Xk(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function Jk(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Qo(r)!==0)return t[Qi(r)]}function Zk(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Qi(i)]=r}function Xk(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=Ga(r,s,n)}return Ga(r,e.attrs,n)}function Jg(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=Ga(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Ga(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),pl(t,s,n?!0:e[++o]))}return t===void 0?null:t}function e1(t,e,n){if(n==null||n==="")return Vn;let r=[],i=Ja(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function t1(t,e,n){let r=String(e);r!==""&&!r.includes(" ")&&pl(t,r,n)}function n1(t,e,n,r,i,o,s,a){i===cn&&(i=Vn);let u=0,l=0,f=0<i.length?i[0]:null,p=0<o.length?o[0]:null;for(;f!==null||p!==null;){let m=u<i.length?i[u+1]:void 0,y=l<o.length?o[l+1]:void 0,S=null,A;f===p?(u+=2,l+=2,m!==y&&(S=p,A=y)):p===null||f!==null&&f<p?(u+=2,S=f):(l+=2,S=p,A=y),S!==null&&JC(t,e,n,r,S,A,s,a),f=u<i.length?i[u]:null,p=l<o.length?o[l]:null}}function JC(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],f=jk(l)?gD(u,e,n,i,Qo(l),s):void 0;if(!Jl(f)){Jl(o)||Fk(l)&&(o=gD(u,null,n,i,a,s));let p=yg(gr(),n);GP(r,s,p,i,o)}}function gD(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),f=l?u[1]:u,p=f===null,m=n[i+1];m===cn&&(m=p?Vn:void 0);let y=p?gl(m,r):f===r?m:void 0;if(l&&!Jl(y)&&(y=gl(u,r)),Jl(y)&&(a=y,s))return a;let S=t[i+1];i=s?Qi(S):Qo(S)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=gl(u,r))}return a}function Jl(t){return t!==void 0}function r1(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=dr(Ja(t)))),t}function ZC(t,e){return(t.flags&(e?8:16))!==0}function ce(t,e=""){let n=le(),r=pt(),i=t+et,o=r.firstCreatePass?ld(r,i,1,e,null):r.data[i],s=i1(r,n,o,e,t);n[i]=s,bl()&&Fm(r,n,s,o),Ho(o,!1)}var i1=(t,e,n,r,i)=>(Sl(!0),dP(e[Le],r));function o1(t,e,n,r=""){return Dn(t,Hi(),n)?e+Sa(n)+r:cn}function ze(t){return ln("",t),ze}function ln(t,e,n){let r=le(),i=o1(r,t,e,n);return i!==cn&&s1(r,gr(),i),ln}function s1(t,e,n){let r=yg(e,t);fP(t[Le],r,n)}function nc(t,e,n,r){return a1(le(),Mg(),t,e,n,r)}function XC(t,e){let n=t[e];return n===cn?void 0:n}function a1(t,e,n,r,i,o){let s=e+n;return Dn(t,s,i)?PC(t,s+1,o?r.call(o,i):r(i)):XC(t,s+1)}function c1(t,e,n,r,i,o,s){let a=e+n;return HO(t,a,i,o)?PC(t,a+2,s?r.call(s,i,o):r(i,o)):XC(t,a+2)}function ey(t,e){let n=pt(),r,i=t+et;n.firstCreatePass?(r=u1(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=Ur(r.type,!0)),s,a=bt(me);try{let u=Vl(!1),l=o();return Vl(u),vg(n,le(),i,l),l}finally{bt(a)}}function u1(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function ty(t,e,n,r){let i=t+et,o=le(),s=yT(o,i);return l1(o,i)?c1(o,Mg(),e,s.transform,n,r,s):s.transform(n,r)}function l1(t,e){return t[H].data[e].pure}var Zl=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},ny=(()=>{class t{compileModuleSync(n){return new Wl(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=ug(n),o=XD(i.declarations).reduce((s,a)=>{let u=$r(a);return u&&s.push(new Ko(u)),s},[]);return new Zl(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var eb=(()=>{class t{applicationErrorHandler=O(an);appRef=O(Xo);taskService=O(Wr);ngZone=O(qt);zonelessEnabled=O(Fa);tracing=O(Za,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new ft;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Da):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(O($g,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?Vg:Fg;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Da+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Vg(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function tb(){return[{provide:Lo,useExisting:eb},{provide:qt,useClass:Ca},{provide:Fa,useValue:!0}]}function d1(){return typeof $localize<"u"&&$localize.locale||tc}var rc=new $("",{factory:()=>O(rc,{optional:!0,skipSelf:!0})||d1()});function ry(t,e){return ku(t,e?.equal)}var rb=Symbol("InputSignalNode#UNSET"),C1=re(M({},Lu),{transformFn:void 0,applyValueToInputSignal(t,e){ga(t,e)}});function ib(t,e){let n=Object.create(C1);n.value=t,n.transformFn=e?.transform;function r(){if(fa(n),n.value===rb){let i=null;throw new j(-950,i)}return n.value}return r[Ft]=n,r}var yd=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Qa(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}};function nb(t,e){return ib(t,e)}function b1(t){return ib(rb,t)}var ob=(nb.required=b1,nb);var iy=new $(""),S1=new $("");function ic(t){return!t.moduleRef}function A1(t){let e=ic(t)?t.r3Injector:t.moduleRef.injector,n=e.get(qt);return n.run(()=>{ic(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(an),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),ic(t)){let o=()=>e.destroy(),s=t.platformInjector.get(iy);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(iy);s.add(o),t.moduleRef.onDestroy(()=>{Ua(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return N1(r,n,()=>{let o=e.get(Wr),s=o.add(),a=e.get(Qm);return a.runInitializers(),a.donePromise.then(()=>{let u=e.get(rc,tc);if(GC(u||tc),!e.get(S1,!0))return ic(t)?e.get(Xo):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(ic(t)){let f=e.get(Xo);return t.rootComponent!==void 0&&f.bootstrap(t.rootComponent),f}else return R1?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void o.remove(s))})})}var R1;function N1(t,e,n){try{let r=n();return Zo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var md=null;function M1(t=[],e){return jn.create({name:e,providers:[{provide:Ra,useValue:"platform"},{provide:iy,useValue:new Set([()=>md=null])},...t]})}function x1(t=[]){if(md)return md;let e=M1(t);return md=e,HC(),P1(e),e}function P1(t){let e=t.get(nd,null);St(t,()=>{e?.forEach(n=>n())})}var oc=(()=>{class t{static __NG_ELEMENT_ID__=O1}return t})();function O1(t){return k1(Nt(),le(),(t&16)===16)}function k1(t,e,n){if(qr(t)&&!n){let r=sn(t.index,e);return new Kr(r,r)}else if(t.type&175){let r=e[Gt];return new Kr(r,e)}return null}function sb(t){let{rootComponent:e,appProviders:n,platformProviders:r,platformRef:i}=t;Re(_e.BootstrapApplicationStart);try{let o=i?.injector??x1(r),s=[tb(),$T,...n||[]],a=new qa({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return A1({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Re(_e.BootstrapApplicationEnd)}}function _d(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var ab=null;function mr(){return ab}function oy(t){ab??=t}var sc=class{},Ed=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:()=>O(cb),providedIn:"platform"})}return t})();var cb=(()=>{class t extends Ed{_location;_history;_doc=O(tt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return mr().getBaseHref(this._doc)}onPopState(n){let r=mr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=mr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function db(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function ub(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function Jr(t){return t&&t[0]!=="?"?`?${t}`:t}var ts=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:()=>O(F1),providedIn:"root"})}return t})(),L1=new $(""),F1=(()=>{class t extends ts{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??O(tt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return db(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+Jr(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+Jr(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+Jr(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(Q(Ed),Q(L1,8))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ns=(()=>{class t{_subject=new ot;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=U1(ub(lb(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Jr(r))}normalize(n){return t.stripTrailingSlash(j1(this._basePath,lb(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Jr(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Jr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Jr;static joinWithSlash=db;static stripTrailingSlash=ub;static \u0275fac=function(r){return new(r||t)(Q(ts))};static \u0275prov=U({token:t,factory:()=>V1(),providedIn:"root"})}return t})();function V1(){return new ns(Q(ts))}function j1(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function lb(t){return t.replace(/\/index.html$/,"")}function U1(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var _t=(function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t})(_t||{}),Ne=(function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t})(Ne||{}),$t=(function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t})($t||{}),vr={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function pb(t){return Kt(t)[He.LocaleId]}function gb(t,e,n){let r=Kt(t),i=[r[He.DayPeriodsFormat],r[He.DayPeriodsStandalone]],o=dn(i,e);return dn(o,n)}function mb(t,e,n){let r=Kt(t),i=[r[He.DaysFormat],r[He.DaysStandalone]],o=dn(i,e);return dn(o,n)}function yb(t,e,n){let r=Kt(t),i=[r[He.MonthsFormat],r[He.MonthsStandalone]],o=dn(i,e);return dn(o,n)}function vb(t,e){let r=Kt(t)[He.Eras];return dn(r,e)}function ac(t,e){let n=Kt(t);return dn(n[He.DateFormat],e)}function cc(t,e){let n=Kt(t);return dn(n[He.TimeFormat],e)}function uc(t,e){let r=Kt(t)[He.DateTimeFormat];return dn(r,e)}function lc(t,e){let n=Kt(t),r=n[He.NumberSymbols][e];if(typeof r>"u"){if(e===vr.CurrencyDecimal)return n[He.NumberSymbols][vr.Decimal];if(e===vr.CurrencyGroup)return n[He.NumberSymbols][vr.Group]}return r}function _b(t){if(!t[He.ExtraData])throw new j(2303,!1)}function Eb(t){let e=Kt(t);return _b(e),(e[He.ExtraData][2]||[]).map(r=>typeof r=="string"?sy(r):[sy(r[0]),sy(r[1])])}function Ib(t,e,n){let r=Kt(t);_b(r);let i=[r[He.ExtraData][0],r[He.ExtraData][1]],o=dn(i,e)||[];return dn(o,n)||[]}function dn(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new j(2304,!1)}function sy(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}var B1=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Id={},$1=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function wb(t,e,n,r){let i=J1(t);e=yr(n,e)||e;let s=[],a;for(;e;)if(a=$1.exec(e),a){s=s.concat(a.slice(1));let f=s.pop();if(!f)break;e=f}else{s.push(e);break}let u=i.getTimezoneOffset();r&&(u=Db(r,u),i=Y1(i,r));let l="";return s.forEach(f=>{let p=K1(f);l+=p?p(i,n,u):f==="''"?"'":f.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function bd(t,e,n){let r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function yr(t,e){let n=pb(t);if(Id[n]??={},Id[n][e])return Id[n][e];let r="";switch(e){case"shortDate":r=ac(t,$t.Short);break;case"mediumDate":r=ac(t,$t.Medium);break;case"longDate":r=ac(t,$t.Long);break;case"fullDate":r=ac(t,$t.Full);break;case"shortTime":r=cc(t,$t.Short);break;case"mediumTime":r=cc(t,$t.Medium);break;case"longTime":r=cc(t,$t.Long);break;case"fullTime":r=cc(t,$t.Full);break;case"short":let i=yr(t,"shortTime"),o=yr(t,"shortDate");r=wd(uc(t,$t.Short),[i,o]);break;case"medium":let s=yr(t,"mediumTime"),a=yr(t,"mediumDate");r=wd(uc(t,$t.Medium),[s,a]);break;case"long":let u=yr(t,"longTime"),l=yr(t,"longDate");r=wd(uc(t,$t.Long),[u,l]);break;case"full":let f=yr(t,"fullTime"),p=yr(t,"fullDate");r=wd(uc(t,$t.Full),[f,p]);break}return r&&(Id[n][e]=r),r}function wd(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return e!=null&&r in e?e[r]:n})),t}function bn(t,e,n="-",r,i){let o="";(t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,o=n));let s=String(t);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function H1(t,e){return bn(t,3).substring(0,e)}function Ge(t,e,n=0,r=!1,i=!1){return function(o,s){let a=z1(t,o);if((n>0||a>-n)&&(a+=n),t===3)a===0&&n===-12&&(a=12);else if(t===6)return H1(a,e);let u=lc(s,vr.MinusSign);return bn(a,e,u,r,i)}}function z1(t,e){switch(t){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new j(2301,!1)}}function Pe(t,e,n=_t.Format,r=!1){return function(i,o){return q1(i,o,t,e,n,r)}}function q1(t,e,n,r,i,o){switch(n){case 2:return yb(e,i,r)[t.getMonth()];case 1:return mb(e,i,r)[t.getDay()];case 0:let s=t.getHours(),a=t.getMinutes();if(o){let l=Eb(e),f=Ib(e,i,r),p=l.findIndex(m=>{if(Array.isArray(m)){let[y,S]=m,A=s>=y.hours&&a>=y.minutes,R=s<S.hours||s===S.hours&&a<S.minutes;if(y.hours<S.hours){if(A&&R)return!0}else if(A||R)return!0}else if(m.hours===s&&m.minutes===a)return!0;return!1});if(p!==-1)return f[p]}return gb(e,i,r)[s<12?0:1];case 3:return vb(e,r)[t.getFullYear()<=0?0:1];default:let u=n;throw new j(2302,!1)}}function Td(t){return function(e,n,r){let i=-1*r,o=lc(n,vr.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case 0:return(i>=0?"+":"")+bn(s,2,o)+bn(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+bn(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+bn(s,2,o)+":"+bn(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+bn(s,2,o)+":"+bn(Math.abs(i%60),2,o);default:throw new j(2310,!1)}}}var G1=0,Cd=4;function W1(t){let e=bd(t,G1,1).getDay();return bd(t,0,1+(e<=Cd?Cd:Cd+7)-e)}function Tb(t){let e=t.getDay(),n=e===0?-3:Cd-e;return bd(t.getFullYear(),t.getMonth(),t.getDate()+n)}function ay(t,e=!1){return function(n,r){let i;if(e){let o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,s=n.getDate();i=1+Math.floor((s+o)/7)}else{let o=Tb(n),s=W1(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return bn(i,t,lc(r,vr.MinusSign))}}function Dd(t,e=!1){return function(n,r){let o=Tb(n).getFullYear();return bn(o,t,lc(r,vr.MinusSign),e)}}var cy={};function K1(t){if(cy[t])return cy[t];let e;switch(t){case"G":case"GG":case"GGG":e=Pe(3,Ne.Abbreviated);break;case"GGGG":e=Pe(3,Ne.Wide);break;case"GGGGG":e=Pe(3,Ne.Narrow);break;case"y":e=Ge(0,1,0,!1,!0);break;case"yy":e=Ge(0,2,0,!0,!0);break;case"yyy":e=Ge(0,3,0,!1,!0);break;case"yyyy":e=Ge(0,4,0,!1,!0);break;case"Y":e=Dd(1);break;case"YY":e=Dd(2,!0);break;case"YYY":e=Dd(3);break;case"YYYY":e=Dd(4);break;case"M":case"L":e=Ge(1,1,1);break;case"MM":case"LL":e=Ge(1,2,1);break;case"MMM":e=Pe(2,Ne.Abbreviated);break;case"MMMM":e=Pe(2,Ne.Wide);break;case"MMMMM":e=Pe(2,Ne.Narrow);break;case"LLL":e=Pe(2,Ne.Abbreviated,_t.Standalone);break;case"LLLL":e=Pe(2,Ne.Wide,_t.Standalone);break;case"LLLLL":e=Pe(2,Ne.Narrow,_t.Standalone);break;case"w":e=ay(1);break;case"ww":e=ay(2);break;case"W":e=ay(1,!0);break;case"d":e=Ge(2,1);break;case"dd":e=Ge(2,2);break;case"c":case"cc":e=Ge(7,1);break;case"ccc":e=Pe(1,Ne.Abbreviated,_t.Standalone);break;case"cccc":e=Pe(1,Ne.Wide,_t.Standalone);break;case"ccccc":e=Pe(1,Ne.Narrow,_t.Standalone);break;case"cccccc":e=Pe(1,Ne.Short,_t.Standalone);break;case"E":case"EE":case"EEE":e=Pe(1,Ne.Abbreviated);break;case"EEEE":e=Pe(1,Ne.Wide);break;case"EEEEE":e=Pe(1,Ne.Narrow);break;case"EEEEEE":e=Pe(1,Ne.Short);break;case"a":case"aa":case"aaa":e=Pe(0,Ne.Abbreviated);break;case"aaaa":e=Pe(0,Ne.Wide);break;case"aaaaa":e=Pe(0,Ne.Narrow);break;case"b":case"bb":case"bbb":e=Pe(0,Ne.Abbreviated,_t.Standalone,!0);break;case"bbbb":e=Pe(0,Ne.Wide,_t.Standalone,!0);break;case"bbbbb":e=Pe(0,Ne.Narrow,_t.Standalone,!0);break;case"B":case"BB":case"BBB":e=Pe(0,Ne.Abbreviated,_t.Format,!0);break;case"BBBB":e=Pe(0,Ne.Wide,_t.Format,!0);break;case"BBBBB":e=Pe(0,Ne.Narrow,_t.Format,!0);break;case"h":e=Ge(3,1,-12);break;case"hh":e=Ge(3,2,-12);break;case"H":e=Ge(3,1);break;case"HH":e=Ge(3,2);break;case"m":e=Ge(4,1);break;case"mm":e=Ge(4,2);break;case"s":e=Ge(5,1);break;case"ss":e=Ge(5,2);break;case"S":e=Ge(6,1);break;case"SS":e=Ge(6,2);break;case"SSS":e=Ge(6,3);break;case"Z":case"ZZ":case"ZZZ":e=Td(0);break;case"ZZZZZ":e=Td(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Td(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=Td(2);break;default:return null}return cy[t]=e,e}function Db(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function Q1(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function Y1(t,e,n){let i=t.getTimezoneOffset(),o=Db(e,i);return Q1(t,-1*(o-i))}function J1(t){if(fb(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[i,o=1,s=1]=t.split("-").map(a=>+a);return bd(i,o-1,s)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(B1))return Z1(r)}let e=new Date(t);if(!fb(e))throw new j(2311,!1);return e}function Z1(t){let e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let s=Number(t[4]||0)-n,a=Number(t[5]||0)-r,u=Number(t[6]||0),l=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return o.call(e,s,a,u,l),e}function fb(t){return t instanceof Date&&!isNaN(t.valueOf())}var uy=/\s+/,hb=[],ly=(()=>{class t{_ngEl;_renderer;initialClasses=hb;rawClass;stateMap=new Map;constructor(n,r){this._ngEl=n,this._renderer=r}set klass(n){this.initialClasses=n!=null?n.trim().split(uy):hb}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(uy):n}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let r of n)this._updateState(r,!0);else if(n!=null)for(let r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){let i=this.stateMap.get(n);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){n=n.trim(),n.length>0&&n.split(uy).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||t)(me(Gn),me(Jo))};static \u0275dir=Qr({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return t})();function X1(t,e){return new j(2100,!1)}var eL="mediumDate",Cb=new $(""),bb=new $(""),dy=(()=>{class t{locale;defaultTimezone;defaultOptions;constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,o){if(n==null||n===""||n!==n)return null;try{let s=r??this.defaultOptions?.dateFormat??eL,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return wb(n,s,o||this.locale,a)}catch(s){throw X1(t,s.message)}}static \u0275fac=function(r){return new(r||t)(me(rc,16),me(Cb,24),me(bb,24))};static \u0275pipe=qm({name:"date",type:t,pure:!0})}return t})();function fy(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var dc=class{};var Sb="browser";var fc=class{_doc;constructor(e){this._doc=e}manager},Sd=(()=>{class t extends fc{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(Q(tt))};static \u0275prov=U({token:t,factory:t.\u0275fac})}return t})(),Nd=new $(""),my=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(s=>{s.manager=this});let i=n.filter(s=>!(s instanceof Sd));this._plugins=i.slice().reverse();let o=n.find(s=>s instanceof Sd);o&&this._plugins.push(o)}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new j(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(Q(Nd),Q(qt))};static \u0275prov=U({token:t,factory:t.\u0275fac})}return t})(),hy="ng-app-id";function Ab(t){for(let e of t)e.remove()}function Rb(t,e){let n=e.createElement("style");return n.textContent=t,n}function iL(t,e,n,r){let i=t.head?.querySelectorAll(`style[${hy}="${e}"],link[${hy}="${e}"]`);if(i)for(let o of i)o.removeAttribute(hy),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function gy(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var yy=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,iL(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,Rb);r?.forEach(i=>this.addUsage(i,this.external,gy))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(Ab(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])Ab(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,Rb(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,gy(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(Q(tt),Q(td),Q(rd,8),Q(Ya))};static \u0275prov=U({token:t,factory:t.\u0275fac})}return t})(),py={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},vy=/%COMP%/g;var Mb="%COMP%",oL=`_nghost-${Mb}`,sL=`_ngcontent-${Mb}`,aL=!0,cL=new $("",{factory:()=>aL});function uL(t){return sL.replace(vy,t)}function lL(t){return oL.replace(vy,t)}function xb(t,e){return e.map(n=>n.replace(vy,t))}var _y=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,a,u=null,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=u,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new hc(n,s,a,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof Rd?i.applyToHost(n):i instanceof pc&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,p=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case Tn.Emulated:o=new Rd(u,l,r,this.appId,f,s,a,p,m);break;case Tn.ShadowDom:return new Ad(u,n,r,s,a,this.nonce,p,m,l);case Tn.ExperimentalIsolatedShadowDom:return new Ad(u,n,r,s,a,this.nonce,p,m);default:o=new pc(u,l,r,f,s,a,p,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(Q(my),Q(yy),Q(td),Q(cL),Q(tt),Q(qt),Q(rd),Q(Za,8))};static \u0275prov=U({token:t,factory:t.\u0275fac})}return t})(),hc=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(py[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Nb(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(Nb(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new j(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=py[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=py[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(qn.DashCase|qn.Important)?e.style.setProperty(n,r,i&qn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&qn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=mr().getGlobalEventTarget(this.doc,e),!e))throw new j(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function Nb(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Ad=class extends hc{hostEl;sharedStylesHost;shadowRoot;constructor(e,n,r,i,o,s,a,u,l){super(e,i,o,a,u),this.hostEl=n,this.sharedStylesHost=l,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let f=r.styles;f=xb(r.id,f);for(let m of f){let y=document.createElement("style");s&&y.setAttribute("nonce",s),y.textContent=m,this.shadowRoot.appendChild(y)}let p=r.getExternalStyles?.();if(p)for(let m of p){let y=gy(m,i);s&&y.setAttribute("nonce",s),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},pc=class extends hc{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let f=r.styles;this.styles=l?xb(l,f):f,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Gi.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Rd=class extends pc{contentAttr;hostAttr;constructor(e,n,r,i,o,s,a,u,l){let f=i+"-"+r.id;super(e,n,r,o,s,a,u,l,f),this.contentAttr=uL(f),this.hostAttr=lL(f)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var Md=class t extends sc{supportsDOMEvents=!0;static makeCurrent(){oy(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=dL();return n==null?null:fL(n)}resetBaseElement(){gc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return fy(document.cookie,e)}},gc=null;function dL(){return gc=gc||document.head.querySelector("base"),gc?gc.getAttribute("href"):null}function fL(t){return new URL(t,document.baseURI).pathname}var hL=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac})}return t})(),Pb=["alt","control","meta","shift"],pL={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},gL={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},Ob=(()=>{class t extends fc{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),a=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>mr().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),Pb.forEach(l=>{let f=r.indexOf(l);f>-1&&(r.splice(f,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=pL[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Pb.forEach(s=>{if(s!==i){let a=gL[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(Q(tt))};static \u0275prov=U({token:t,factory:t.\u0275fac})}return t})();function Ey(t,e,n){let r=M({rootComponent:t,platformRef:n?.platformRef},mL(e));return sb(r)}function mL(t){return{appProviders:[...IL,...t?.providers??[]],platformProviders:EL}}function yL(){Md.makeCurrent()}function vL(){return new fr}function _L(){return bm(document),document}var EL=[{provide:Ya,useValue:Sb},{provide:nd,useValue:yL,multi:!0},{provide:tt,useFactory:_L}];var IL=[{provide:Ra,useValue:"root"},{provide:fr,useFactory:vL},{provide:Nd,useClass:Sd,multi:!0},{provide:Nd,useClass:Ob,multi:!0},_y,yy,my,{provide:Wi,useExisting:_y},{provide:dc,useClass:hL},[]];var kb=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(Q(tt))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var J="primary",Ac=Symbol("RouteTitle"),Cy=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function no(t){return new Cy(t)}function zb(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Fd(t){return new Promise((e,n)=>{t.pipe(ur()).subscribe({next:r=>e(r),error:r=>n(r)})})}function TL(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Qn(t[n],e[n]))return!1;return!0}function Qn(t,e){let n=t?by(t):void 0,r=e?by(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!qb(t[i],e[i]))return!1;return!0}function by(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function qb(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function Gb(t){return t.length>0?t[t.length-1]:null}function io(t){return el(t)?t:Zo(t)?Ze(Promise.resolve(t)):de(t)}function Wb(t){return el(t)?Fd(t):Promise.resolve(t)}var DL={exact:Qb,subset:Yb},Kb={exact:CL,subset:bL,ignored:()=>!0};function Lb(t,e,n){return DL[n.paths](t.root,e.root,n.matrixParams)&&Kb[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function CL(t,e){return Qn(t,e)}function Qb(t,e,n){if(!eo(t.segments,e.segments)||!Od(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!Qb(t.children[r],e.children[r],n))return!1;return!0}function bL(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>qb(t[n],e[n]))}function Yb(t,e,n){return Jb(t,e,e.segments,n)}function Jb(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!eo(i,n)||e.hasChildren()||!Od(i,n,r))}else if(t.segments.length===n.length){if(!eo(t.segments,n)||!Od(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!Yb(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!eo(t.segments,i)||!Od(t.segments,i,r)||!t.children[J]?!1:Jb(t.children[J],e,o,r)}}function Od(t,e,n){return e.every((r,i)=>Kb[n](t[i].parameters,r.parameters))}var An=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Te([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=no(this.queryParams),this._queryParamMap}toString(){return RL.serialize(this)}},Te=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return kd(this)}},Zr=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=no(this.parameters),this._parameterMap}toString(){return Xb(this)}};function SL(t,e){return eo(t,e)&&t.every((n,r)=>Qn(n.parameters,e[r].parameters))}function eo(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function AL(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===J&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==J&&(n=n.concat(e(i,r)))}),n}var Rc=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:()=>new Xr,providedIn:"root"})}return t})(),Xr=class{parse(e){let n=new Ay(e);return new An(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${mc(e.root,!0)}`,r=xL(e.queryParams),i=typeof e.fragment=="string"?`#${NL(e.fragment)}`:"";return`${n}${r}${i}`}},RL=new Xr;function kd(t){return t.segments.map(e=>Xb(e)).join("/")}function mc(t,e){if(!t.hasChildren())return kd(t);if(e){let n=t.children[J]?mc(t.children[J],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==J&&r.push(`${i}:${mc(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=AL(t,(r,i)=>i===J?[mc(t.children[J],!1)]:[`${i}:${mc(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[J]!=null?`${kd(t)}/${n[0]}`:`${kd(t)}/(${n.join("//")})`}}function Zb(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function xd(t){return Zb(t).replace(/%3B/gi,";")}function NL(t){return encodeURI(t)}function Sy(t){return Zb(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ld(t){return decodeURIComponent(t)}function Fb(t){return Ld(t.replace(/\+/g,"%20"))}function Xb(t){return`${Sy(t.path)}${ML(t.parameters)}`}function ML(t){return Object.entries(t).map(([e,n])=>`;${Sy(e)}=${Sy(n)}`).join("")}function xL(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${xd(n)}=${xd(i)}`).join("&"):`${xd(n)}=${xd(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var PL=/^[^\/()?;#]+/;function Iy(t){let e=t.match(PL);return e?e[0]:""}var OL=/^[^\/()?;=#]+/;function kL(t){let e=t.match(OL);return e?e[0]:""}var LL=/^[^=?&#]+/;function FL(t){let e=t.match(LL);return e?e[0]:""}var VL=/^[^&#]+/;function jL(t){let e=t.match(VL);return e?e[0]:""}var Ay=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Te([],{}):new Te([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[J]=new Te(e,n)),r}parseSegment(){let e=Iy(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new j(4009,!1);return this.capture(e),new Zr(Ld(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=kL(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Iy(this.remaining);i&&(r=i,this.capture(r))}e[Ld(n)]=Ld(r)}parseQueryParam(e){let n=FL(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=jL(this.remaining);s&&(r=s,this.capture(r))}let i=Fb(n),o=Fb(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Iy(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new j(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=J);let s=this.parseChildren();n[o??J]=Object.keys(s).length===1&&s[J]?s[J]:new Te([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new j(4011,!1)}};function eS(t){return t.segments.length>0?new Te([],{[J]:t}):t}function tS(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=tS(i);if(r===J&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new Te(t.segments,e);return UL(n)}function UL(t){if(t.numberOfChildren===1&&t.children[J]){let e=t.children[J];return new Te(t.segments.concat(e.segments),e.children)}return t}function ei(t){return t instanceof An}function nS(t,e,n=null,r=null,i=new Xr){let o=rS(t);return iS(o,e,n,r,i)}function rS(t){let e;function n(o){let s={};for(let u of o.children){let l=n(u);s[u.outlet]=l}let a=new Te(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=eS(r);return e??i}function iS(t,e,n,r,i){let o=t;for(;o.parent;)o=o.parent;if(e.length===0)return wy(o,o,o,n,r,i);let s=BL(e);if(s.toRoot())return wy(o,o,new Te([],{}),n,r,i);let a=$L(s,o,t),u=a.processChildren?vc(a.segmentGroup,a.index,s.commands):sS(a.segmentGroup,a.index,s.commands);return wy(o,a.segmentGroup,u,n,r,i)}function Vd(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Ic(t){return typeof t=="object"&&t!=null&&t.outlets}function Vb(t,e,n){t||="\u0275";let r=new An;return r.queryParams={[t]:e},n.parse(n.serialize(r)).queryParams[t]}function wy(t,e,n,r,i,o){let s={};for(let[l,f]of Object.entries(r??{}))s[l]=Array.isArray(f)?f.map(p=>Vb(l,p,o)):Vb(l,f,o);let a;t===e?a=n:a=oS(t,e,n);let u=eS(tS(a));return new An(u,s,i)}function oS(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=oS(o,e,n)}),new Te(t.segments,r)}var jd=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Vd(r[0]))throw new j(4003,!1);let i=r.find(Ic);if(i&&i!==Gb(r))throw new j(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function BL(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new jd(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new jd(n,e,r)}var is=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function $L(t,e,n){if(t.isAbsolute)return new is(e,!0,0);if(!n)return new is(e,!1,NaN);if(n.parent===null)return new is(n,!0,0);let r=Vd(t.commands[0])?0:1,i=n.segments.length-1+r;return HL(n,i,t.numberOfDoubleDots)}function HL(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new j(4005,!1);i=r.segments.length}return new is(r,!1,i-o)}function zL(t){return Ic(t[0])?t[0].outlets:{[J]:t}}function sS(t,e,n){if(t??=new Te([],{}),t.segments.length===0&&t.hasChildren())return vc(t,e,n);let r=qL(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new Te(t.segments.slice(0,r.pathIndex),{});return o.children[J]=new Te(t.segments.slice(r.pathIndex),t.children),vc(o,0,i)}else return r.match&&i.length===0?new Te(t.segments,{}):r.match&&!t.hasChildren()?Ry(t,e,n):r.match?vc(t,0,i):Ry(t,e,n)}function vc(t,e,n){if(n.length===0)return new Te(t.segments,{});{let r=zL(n),i={};if(Object.keys(r).some(o=>o!==J)&&t.children[J]&&t.numberOfChildren===1&&t.children[J].segments.length===0){let o=vc(t.children[J],e,n);return new Te(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=sS(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Te(t.segments,i)}}function qL(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(Ic(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!Ub(u,l,s))return o;r+=2}else{if(!Ub(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Ry(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(Ic(o)){let u=GL(o.outlets);return new Te(r,u)}if(i===0&&Vd(n[0])){let u=t.segments[e];r.push(new Zr(u.path,jb(n[0]))),i++;continue}let s=Ic(o)?o.outlets[J]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Vd(a)?(r.push(new Zr(s,jb(a))),i+=2):(r.push(new Zr(s,{})),i++)}return new Te(r,{})}function GL(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Ry(new Te([],{}),0,r))}),e}function jb(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function Ub(t,e,n){return t==n.path&&Qn(e,n.parameters)}var _c="imperative",ct=(function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t})(ct||{}),Jt=class{id;url;constructor(e,n){this.id=e,this.url=n}},ro=class extends Jt{type=ct.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Rn=class extends Jt{urlAfterRedirects;type=ct.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ot=(function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t})(Ot||{}),wc=(function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t})(wc||{}),Yn=class extends Jt{reason;code;type=ct.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},_r=class extends Jt{reason;code;type=ct.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},ss=class extends Jt{error;target;type=ct.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Tc=class extends Jt{urlAfterRedirects;state;type=ct.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ud=class extends Jt{urlAfterRedirects;state;type=ct.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Bd=class extends Jt{urlAfterRedirects;state;shouldActivate;type=ct.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},$d=class extends Jt{urlAfterRedirects;state;type=ct.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Hd=class extends Jt{urlAfterRedirects;state;type=ct.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},zd=class{route;type=ct.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},qd=class{route;type=ct.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Gd=class{snapshot;type=ct.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Wd=class{snapshot;type=ct.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Kd=class{snapshot;type=ct.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Qd=class{snapshot;type=ct.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Dc=class{},as=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function WL(t){return!(t instanceof Dc)&&!(t instanceof as)}function KL(t,e){return t.providers&&!t._injector&&(t._injector=ec(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Sn(t){return t.outlet||J}function QL(t,e){let n=t.filter(r=>Sn(r)===e);return n.push(...t.filter(r=>Sn(r)!==e)),n}function ls(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Yd=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return ls(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new ds(this.rootInjector)}},ds=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Yd(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(Q(at))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Jd=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Ny(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Ny(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=My(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return My(e,this._root).map(n=>n.value)}};function Ny(t,e){if(t===e.value)return e;for(let n of e.children){let r=Ny(t,n);if(r)return r}return null}function My(t,e){if(t===e.value)return[e];for(let n of e.children){let r=My(t,n);if(r.length)return r.unshift(e),r}return[]}var Yt=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function rs(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Cc=class extends Jd{snapshot;constructor(e,n){super(e),this.snapshot=n,Fy(this,e)}toString(){return this.snapshot.toString()}};function aS(t){let e=YL(t),n=new ht([new Zr("",{})]),r=new ht({}),i=new ht({}),o=new ht({}),s=new ht(""),a=new Nn(n,r,o,s,i,J,t,e.root);return a.snapshot=e.root,new Cc(new Yt(a,[]),e)}function YL(t){let e={},n={},r={},o=new to([],e,r,"",n,J,t,null,{});return new bc("",new Yt(o,[]))}var Nn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ke(l=>l[Ac]))??de(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ke(e=>no(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ke(e=>no(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Zd(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:M(M({},e.params),t.params),data:M(M({},e.data),t.data),resolve:M(M(M(M({},t.data),e.data),i?.data),t._resolvedData)}:r={params:M({},t.params),data:M({},t.data),resolve:M(M({},t.data),t._resolvedData??{})},i&&uS(i)&&(r.resolve[Ac]=i.title),r}var to=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Ac]}constructor(e,n,r,i,o,s,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=no(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=no(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},bc=class extends Jd{url;constructor(e,n){super(n),this.url=e,Fy(this,n)}toString(){return cS(this._root)}};function Fy(t,e){e.value._routerState=t,e.children.forEach(n=>Fy(t,n))}function cS(t){let e=t.children.length>0?` { ${t.children.map(cS).join(", ")} } `:"";return`${t.value}${e}`}function Ty(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Qn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Qn(e.params,n.params)||t.paramsSubject.next(n.params),TL(e.url,n.url)||t.urlSubject.next(n.url),Qn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function xy(t,e){let n=Qn(t.params,e.params)&&SL(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||xy(t.parent,e.parent))}function uS(t){return typeof t.title=="string"||t.title===null}var lS=new $(""),Nc=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=J;activateEvents=new vt;deactivateEvents=new vt;attachEvents=new vt;detachEvents=new vt;routerOutletData=ob();parentContexts=O(ds);location=O(Zi);changeDetector=O(oc);inputBinder=O(nf,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new j(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new j(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new j(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new j(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new Py(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Qr({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Yi]})}return t})(),Py=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===Nn?this.route:e===ds?this.childContexts:e===lS?this.outletData:this.parent.get(e,n)}},nf=new $("");var Vy=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Se({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Ee(0,"router-outlet")},dependencies:[Nc],encapsulation:2})}return t})();function jy(t){let e=t.children&&t.children.map(jy),n=e?re(M({},t),{children:e}):M({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==J&&(n.component=Vy),n}function JL(t,e,n){let r=Sc(t,e._root,n?n._root:void 0);return new Cc(r,e)}function Sc(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=ZL(t,e,n);return new Yt(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Sc(t,a)),s}}let r=XL(e.value),i=e.children.map(o=>Sc(t,o));return new Yt(r,i)}}function ZL(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Sc(t,r,i);return Sc(t,r)})}function XL(t){return new Nn(new ht(t.url),new ht(t.params),new ht(t.queryParams),new ht(t.fragment),new ht(t.data),t.outlet,t.component,t)}var cs=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},dS="ngNavigationCancelingError";function Xd(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=ei(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=fS(!1,Ot.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function fS(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[dS]=!0,n.cancellationCode=e,n}function eF(t){return hS(t)&&ei(t.url)}function hS(t){return!!t&&t[dS]}var tF=(t,e,n,r)=>ke(i=>(new Oy(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Oy=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Ty(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=rs(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=rs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=rs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=rs(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Qd(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Wd(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(Ty(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Ty(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},ef=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},os=class{component;route;constructor(e,n){this.component=e,this.route=n}};function nF(t,e,n){let r=t._root,i=e?e._root:null;return yc(r,i,n,[r.value])}function rF(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function fs(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Zp(t)?t:e.get(t):r}function yc(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=rs(e);return t.children.forEach(s=>{iF(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Ec(a,n.getContext(s),i)),i}function iF(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=oF(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new ef(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?yc(t,e,a?a.children:null,r,i):yc(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new os(a.outlet.component,s))}else s&&Ec(e,a,i),i.canActivateChecks.push(new ef(r)),o.component?yc(t,null,a?a.children:null,r,i):yc(t,null,n,r,i);return i}function oF(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!eo(t.url,e.url);case"pathParamsOrQueryParamsChange":return!eo(t.url,e.url)||!Qn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!xy(t,e)||!Qn(t.queryParams,e.queryParams);case"paramsChange":default:return!xy(t,e)}}function Ec(t,e,n){let r=rs(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Ec(s,e.children.getContext(o),n):Ec(s,null,n):Ec(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new os(e.outlet.component,i)):n.canDeactivateChecks.push(new os(null,i)):n.canDeactivateChecks.push(new os(null,i))}function Mc(t){return typeof t=="function"}function sF(t){return typeof t=="boolean"}function aF(t){return t&&Mc(t.canLoad)}function cF(t){return t&&Mc(t.canActivate)}function uF(t){return t&&Mc(t.canActivateChild)}function lF(t){return t&&Mc(t.canDeactivate)}function dF(t){return t&&Mc(t.canMatch)}function pS(t){return t instanceof Ri||t?.name==="EmptyError"}var Pd=Symbol("INITIAL_VALUE");function us(){return Ln(t=>xp(t.map(e=>e.pipe(cr(1),kp(Pd)))).pipe(ke(e=>{for(let n of e)if(n!==!0){if(n===Pd)return Pd;if(n===!1||fF(n))return n}return!0}),mn(e=>e!==Pd),cr(1)))}function fF(t){return ei(t)||t instanceof cs}function gS(t){return t.aborted?de(void 0).pipe(cr(1)):new ve(e=>{let n=()=>{e.next(),e.complete()};return t.addEventListener("abort",n),()=>t.removeEventListener("abort",n)})}function mS(t){return Ea(gS(t))}function hF(t,e){return yt(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?de(re(M({},n),{guardsResult:!0})):pF(s,r,i,t).pipe(yt(a=>a&&sF(a)?gF(r,o,t,e):de(a)),ke(a=>re(M({},n),{guardsResult:a})))})}function pF(t,e,n,r){return Ze(t).pipe(yt(i=>EF(i.component,i.route,n,e,r)),ur(i=>i!==!0,!0))}function gF(t,e,n,r){return Ze(e).pipe(_a(i=>xo(yF(i.route.parent,r),mF(i.route,r),_F(t,i.path,n),vF(t,i.route,n))),ur(i=>i!==!0,!0))}function mF(t,e){return t!==null&&e&&e(new Kd(t)),de(!0)}function yF(t,e){return t!==null&&e&&e(new Gd(t)),de(!0)}function vF(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return de(!0);let i=r.map(o=>va(()=>{let s=ls(e)??n,a=fs(o,s),u=cF(a)?a.canActivate(e,t):St(s,()=>a(e,t));return io(u).pipe(ur())}));return de(i).pipe(us())}function _F(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>rF(s)).filter(s=>s!==null).map(s=>va(()=>{let a=s.guards.map(u=>{let l=ls(s.node)??n,f=fs(u,l),p=uF(f)?f.canActivateChild(r,t):St(l,()=>f(r,t));return io(p).pipe(ur())});return de(a).pipe(us())}));return de(o).pipe(us())}function EF(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return de(!0);let s=o.map(a=>{let u=ls(e)??i,l=fs(a,u),f=lF(l)?l.canDeactivate(t,e,n,r):St(u,()=>l(t,e,n,r));return io(f).pipe(ur())});return de(s).pipe(us())}function IF(t,e,n,r,i){let o=e.canLoad;if(o===void 0||o.length===0)return de(!0);let s=o.map(a=>{let u=fs(a,t),l=aF(u)?u.canLoad(e,n):St(t,()=>u(e,n)),f=io(l);return i?f.pipe(mS(i)):f});return de(s).pipe(us(),yS(r))}function yS(t){return Ap(Ct(e=>{if(typeof e!="boolean")throw Xd(t,e)}),ke(e=>e===!0))}function wF(t,e,n,r,i){let o=e.canMatch;if(!o||o.length===0)return de(!0);let s=o.map(a=>{let u=fs(a,t),l=dF(u)?u.canMatch(e,n):St(t,()=>u(e,n)),f=io(l);return i?f.pipe(mS(i)):f});return de(s).pipe(us(),yS(r))}var Xi=class vS extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,vS.prototype)}},ky=class _S extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,_S.prototype)}};function TF(t){throw new j(4e3,!1)}function DF(t){throw fS(!1,Ot.GuardRejected)}var CF=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}async lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[J])throw TF(`${e.redirectTo}`);i=i.children[J]}}async applyRedirectCommands(e,n,r,i,o){let s=await bF(n,i,o);if(s instanceof An)throw new ky(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new ky(a);return a}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new An(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Te(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new j(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}};function bF(t,e,n){if(typeof t=="string")return Promise.resolve(t);let r=t,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,params:l,data:f,title:p}=e;return Fd(io(St(n,()=>r({params:l,data:f,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,title:p}))))}var Ly={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function SF(t,e,n,r,i,o){let s=ES(t,e,n);return s.matched?(r=KL(e,r),wF(r,e,n,i,o).pipe(ke(a=>a===!0?s:M({},Ly)))):de(s)}function ES(t,e,n){if(e.path==="**")return AF(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?M({},Ly):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||zb)(n,t,e);if(!i)return M({},Ly);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?M(M({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function AF(t){return{matched:!0,parameters:t.length>0?Gb(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function Bb(t,e,n,r){return n.length>0&&MF(t,n,r)?{segmentGroup:new Te(e,NF(r,new Te(n,t.children))),slicedSegments:[]}:n.length===0&&xF(t,n,r)?{segmentGroup:new Te(t.segments,RF(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Te(t.segments,t.children),slicedSegments:n}}function RF(t,e,n,r){let i={};for(let o of n)if(rf(t,e,o)&&!r[Sn(o)]){let s=new Te([],{});i[Sn(o)]=s}return M(M({},r),i)}function NF(t,e){let n={};n[J]=e;for(let r of t)if(r.path===""&&Sn(r)!==J){let i=new Te([],{});n[Sn(r)]=i}return n}function MF(t,e,n){return n.some(r=>rf(t,e,r)&&Sn(r)!==J)}function xF(t,e,n){return n.some(r=>rf(t,e,r))}function rf(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function PF(t,e,n){return e.length===0&&!t.children[n]}var OF=class{};async function kF(t,e,n,r,i,o,s="emptyOnly",a){return new FF(t,e,n,r,i,s,o,a).recognize()}var LF=31,FF=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,a,u){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.abortSignal=u,this.applyRedirects=new CF(this.urlSerializer,this.urlTree)}noMatchError(e){return new j(4002,`'${e.segmentGroup}'`)}async recognize(){let e=Bb(this.urlTree.root,[],[],this.config).segmentGroup,{children:n,rootSnapshot:r}=await this.match(e),i=new Yt(r,n),o=new bc("",i),s=nS(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}async match(e){let n=new to([],Object.freeze({}),Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),J,this.rootComponentType,null,{});try{return{children:await this.processSegmentGroup(this.injector,this.config,e,J,n),rootSnapshot:n}}catch(r){if(r instanceof ky)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Xi?this.noMatchError(r):r}}async processSegmentGroup(e,n,r,i,o){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,n,r,o);let s=await this.processSegment(e,n,r,r.segments,i,!0,o);return s instanceof Yt?[s]:[]}async processChildren(e,n,r,i){let o=[];for(let u of Object.keys(r.children))u==="primary"?o.unshift(u):o.push(u);let s=[];for(let u of o){let l=r.children[u],f=QL(n,u),p=await this.processSegmentGroup(e,f,l,u,i);s.push(...p)}let a=IS(s);return VF(a),a}async processSegment(e,n,r,i,o,s,a){for(let u of n)try{return await this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,s,a)}catch(l){if(l instanceof Xi||pS(l))continue;throw l}if(PF(r,i,o))return new OF;throw new Xi(r)}async processSegmentAgainstRoute(e,n,r,i,o,s,a,u){if(Sn(r)!==s&&(s===J||!rf(i,o,r)))throw new Xi(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,i,r,o,s,u);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,u);throw new Xi(i)}async expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:f,positionalParamSegments:p,remainingSegments:m}=ES(n,i,o);if(!u)throw new Xi(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>LF&&(this.allowRedirects=!1));let y=new to(o,l,Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,$b(i),Sn(i),i.component??i._loadedComponent??null,i,Hb(i)),S=Zd(y,a,this.paramsInheritanceStrategy);if(y.params=Object.freeze(S.params),y.data=Object.freeze(S.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let A=await this.applyRedirects.applyRedirectCommands(f,i.redirectTo,p,y,e),R=await this.applyRedirects.lineralizeSegments(i,A);return this.processSegment(e,r,n,R.concat(m),s,!1,a)}async matchSegmentAgainstRoute(e,n,r,i,o,s){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await Fd(SF(n,r,i,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(n.children={}),!a?.matched)throw new Xi(n);e=r._injector??e;let{routes:u}=await this.getChildConfig(e,r,i),l=r._loadedInjector??e,{parameters:f,consumedSegments:p,remainingSegments:m}=a,y=new to(p,f,Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,$b(r),Sn(r),r.component??r._loadedComponent??null,r,Hb(r)),S=Zd(y,s,this.paramsInheritanceStrategy);y.params=Object.freeze(S.params),y.data=Object.freeze(S.data);let{segmentGroup:A,slicedSegments:R}=Bb(n,p,m,u);if(R.length===0&&A.hasChildren()){let he=await this.processChildren(l,u,A,y);return new Yt(y,he)}if(u.length===0&&R.length===0)return new Yt(y,[]);let L=Sn(r)===o,te=await this.processSegment(l,u,A,R,L?J:o,!0,y);return new Yt(y,te instanceof Yt?[te]:[])}async getChildConfig(e,n,r){if(n.children)return{routes:n.children,injector:e};if(n.loadChildren){if(n._loadedRoutes!==void 0)return{routes:n._loadedRoutes,injector:n._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await Fd(IF(e,n,r,this.urlSerializer,this.abortSignal))){let o=await this.configLoader.loadChildren(e,n);return n._loadedRoutes=o.routes,n._loadedInjector=o.injector,o}throw DF(n)}return{routes:[],injector:e}}};function VF(t){t.sort((e,n)=>e.value.outlet===J?-1:n.value.outlet===J?1:e.value.outlet.localeCompare(n.value.outlet))}function jF(t){let e=t.value.routeConfig;return e&&e.path===""}function IS(t){let e=[],n=new Set;for(let r of t){if(!jF(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=IS(r.children);e.push(new Yt(r.value,i))}return e.filter(r=>!n.has(r))}function $b(t){return t.data||{}}function Hb(t){return t.resolve||{}}var UF=new $("",{factory:()=>kF});function BF(t,e,n,r,i,o,s){let a=t.get(UF);return yt(u=>de(u).pipe(Ln(l=>a(t,e,n,r,l.extractedUrl,i,o,s)),ke(({state:l,tree:f})=>re(M({},u),{targetSnapshot:l,urlAfterRedirects:f}))))}function $F(t,e){return yt(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return de(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of wS(u))s.add(l);let a=0;return Ze(s).pipe(_a(u=>o.has(u)?HF(u,r,t,e):(u.data=Zd(u,u.parent,t).resolve,de(void 0))),Ct(()=>a++),tl(1),yt(u=>a===s.size?de(n):Vt))})}function wS(t){let e=t.children.map(n=>wS(n)).flat();return[t,...e]}function HF(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!uS(i)&&(o[Ac]=i.title),va(()=>(t.data=Zd(t,t.parent,n).resolve,zF(o,t,e,r).pipe(ke(s=>(t._resolvedData=s,t.data=M(M({},t.data),s),null)))))}function zF(t,e,n,r){let i=by(t);if(i.length===0)return de({});let o={};return Ze(i).pipe(yt(s=>qF(t[s],e,n,r).pipe(ur(),Ct(a=>{if(a instanceof cs)throw Xd(new Xr,a);o[s]=a}))),tl(1),ke(()=>o),Po(s=>pS(s)?Vt:Mp(s)))}function qF(t,e,n,r){let i=ls(e)??r,o=fs(t,i),s=o.resolve?o.resolve(e,n):St(i,()=>o(e,n));return io(s)}function Dy(t){return Ln(e=>{let n=t(e);return n?Ze(n).pipe(ke(()=>e)):de(e)})}var Uy=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===J);return r}getResolvedTitleForRoute(n){return n.data[Ac]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:()=>O(TS),providedIn:"root"})}return t})(),TS=(()=>{class t extends Uy{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(Q(kb))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),hs=new $("",{factory:()=>({})}),xc=new $(""),DS=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=O(ny);async loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await Wb(St(n,()=>r.loadComponent())),s=await SS(bS(o));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s,s}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await CS(r,this.compiler,n,this.onLoadEndListener);return r._loadedRoutes=o.routes,r._loadedInjector=o.injector,o}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();async function CS(t,e,n,r){let i=await Wb(St(n,()=>t.loadChildren())),o=await SS(bS(i)),s;o instanceof fd||Array.isArray(o)?s=o:s=await e.compileModuleAsync(o),r&&r(t);let a,u,l=!1;return Array.isArray(s)?(u=s,l=!0):(a=s.create(n).injector,u=a.get(xc,[],{optional:!0,self:!0}).flat()),{routes:u.map(jy),injector:a}}function GF(t){return t&&typeof t=="object"&&"default"in t}function bS(t){return GF(t)?t.default:t}async function SS(t){return t}var of=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:()=>O(WF),providedIn:"root"})}return t})(),WF=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),AS=new $("");var KF=()=>{},RS=new $(""),NS=(()=>{class t{currentNavigation=qe(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=qe(null);events=new ot;transitionAbortWithErrorSubject=new ot;configLoader=O(DS);environmentInjector=O(at);destroyRef=O(zi);urlSerializer=O(Rc);rootContexts=O(ds);location=O(ns);inputBindingEnabled=O(nf,{optional:!0})!==null;titleStrategy=O(Uy);options=O(hs,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=O(of);createViewTransition=O(AS,{optional:!0});navigationErrorHandler=O(RS,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>de(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new zd(i)),r=i=>this.events.next(new qd(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;En(()=>{this.transitions?.next(re(M({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(n){return this.transitions=new ht(null),this.transitions.pipe(mn(r=>r!==null),Ln(r=>{let i=!1,o=new AbortController;return de(r).pipe(Ln(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Ot.SupersededByNewNavigation),Vt;this.currentTransition=r;let a=this.lastSuccessfulNavigation();this.currentNavigation.set({id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:a?re(M({},a),{previousNavigation:null}):null,abort:()=>o.abort()});let u=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=s.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!u&&l!=="reload")return this.events.next(new _r(s.id,this.urlSerializer.serialize(s.rawUrl),"",wc.IgnoredSameUrlNavigation)),s.resolve(!1),Vt;if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return de(s).pipe(Ln(f=>(this.events.next(new ro(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),f.id!==this.navigationId?Vt:Promise.resolve(f))),BF(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy,o.signal),Ct(f=>{r.targetSnapshot=f.targetSnapshot,r.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation.update(m=>(m.finalUrl=f.urlAfterRedirects,m));let p=new Tc(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(p)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:f,extractedUrl:p,source:m,restoredState:y,extras:S}=s,A=new ro(f,this.urlSerializer.serialize(p),m,y);this.events.next(A);let R=aS(this.rootComponentType).snapshot;return this.currentTransition=r=re(M({},s),{targetSnapshot:R,urlAfterRedirects:p,extras:re(M({},S),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(L=>(L.finalUrl=p,L)),de(r)}else return this.events.next(new _r(s.id,this.urlSerializer.serialize(s.extractedUrl),"",wc.IgnoredByUrlHandlingStrategy)),s.resolve(!1),Vt}),Ct(s=>{let a=new Ud(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),ke(s=>(this.currentTransition=r=re(M({},s),{guards:nF(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),hF(this.environmentInjector,s=>this.events.next(s)),Ct(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw Xd(this.urlSerializer,s.guardsResult);let a=new Bd(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),mn(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",Ot.GuardRejected),!1)),Dy(s=>{if(s.guards.canActivateChecks.length!==0)return de(s).pipe(Ct(a=>{let u=new $d(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}),Ln(a=>{let u=!1;return de(a).pipe($F(this.paramsInheritanceStrategy,this.environmentInjector),Ct({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(a,"",Ot.NoDataFromResolver)}}))}),Ct(a=>{let u=new Hd(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}))}),Dy(s=>{let a=l=>{let f=[];if(l.routeConfig?._loadedComponent)l.component=l.routeConfig?._loadedComponent;else if(l.routeConfig?.loadComponent){let p=ls(l)??this.environmentInjector;f.push(this.configLoader.loadComponent(p,l.routeConfig).then(m=>{l.component=m}))}for(let p of l.children)f.push(...a(p));return f},u=a(s.targetSnapshot.root);return u.length===0?de(s):Ze(Promise.all(u).then(()=>s))}),Dy(()=>this.afterPreactivation()),Ln(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,u=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return u?Ze(u).pipe(ke(()=>r)):de(r)}),ke(s=>{let a=JL(n.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=re(M({},s),{targetRouterState:a}),this.currentNavigation.update(u=>(u.targetRouterState=a,u)),r}),Ct(()=>{this.events.next(new Dc)}),tF(this.rootContexts,n.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),cr(1),Ea(gS(o.signal).pipe(mn(()=>!i&&!r.targetRouterState),Ct(()=>{this.cancelNavigationTransition(r,o.signal.reason+"",Ot.Aborted)}))),Ct({next:s=>{i=!0,this.currentNavigation.update(a=>(a.abort=KF,a)),this.lastSuccessfulNavigation.set(En(this.currentNavigation)),this.events.next(new Rn(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),Ea(this.transitionAbortWithErrorSubject.pipe(Ct(s=>{throw s}))),Op(()=>{o.abort(),i||this.cancelNavigationTransition(r,"",Ot.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Po(s=>{if(this.destroyed)return r.resolve(!1),Vt;if(i=!0,hS(s))this.events.next(new Yn(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),eF(s)?this.events.next(new as(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new ss(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let u=St(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(u instanceof cs){let{message:l,cancellationCode:f}=Xd(this.urlSerializer,u);this.events.next(new Yn(r.id,this.urlSerializer.serialize(r.extractedUrl),l,f)),this.events.next(new as(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(u){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(u)}}return Vt}))}))}cancelNavigationTransition(n,r,i){let o=new Yn(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=En(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function QF(t){return t!==_c}var MS=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:()=>O(YF),providedIn:"root"})}return t})(),tf=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},YF=(()=>{class t extends tf{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Ka(t)))(i||t)}})();static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),By=(()=>{class t{urlSerializer=O(Rc);options=O(hs,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=O(ns);urlHandlingStrategy=O(of);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new An;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof An?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=aS(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:()=>O(xS),providedIn:"root"})}return t})(),xS=(()=>{class t extends By{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof ro?this.updateStateMemento():n instanceof _r?this.commitTransition(r):n instanceof Tc?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Dc?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Yn&&n.code!==Ot.SupersededByNewNavigation&&n.code!==Ot.Redirect?this.restoreHistory(r):n instanceof ss?this.restoreHistory(r,!0):n instanceof Rn&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,u=M(M({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",u)}else{let a=M(M({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Ka(t)))(i||t)}})();static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function $y(t,e){t.events.pipe(mn(n=>n instanceof Rn||n instanceof Yn||n instanceof ss||n instanceof _r),ke(n=>n instanceof Rn||n instanceof _r?0:(n instanceof Yn?n.code===Ot.Redirect||n.code===Ot.SupersededByNewNavigation:!1)?2:1),mn(n=>n!==2),cr(1)).subscribe(()=>{e()})}var JF={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ZF={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ps=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=O(Gm);stateManager=O(By);options=O(hs,{optional:!0})||{};pendingTasks=O(Wr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=O(NS);urlSerializer=O(Rc);location=O(ns);urlHandlingStrategy=O(of);injector=O(at);_events=new ot;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=O(MS);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=O(xc,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!O(nf,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new ft;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=En(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Yn&&r.code!==Ot.Redirect&&r.code!==Ot.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Rn)this.navigated=!0;else if(r instanceof as){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=M({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||QF(i.source)},s);this.scheduleNavigation(a,_c,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}WL(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),_c,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=M({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o).catch(u=>{this.disposed||this.injector.get(an)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return En(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(jy),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,f=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":f=M(M({},this.currentUrlTree.queryParams),o);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}f!==null&&(f=this.removeEmptyProps(f));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=rS(m)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return iS(p,n,f,l??null,this.urlSerializer)}navigateByUrl(n,r={skipLocationChange:!1}){let i=ei(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,_c,null,r)}navigate(n,r={skipLocationChange:!1}){return XF(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.console.warn(Fo(4018,!1)),this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=M({},JF):r===!1?i=M({},ZF):i=r,ei(n))return Lb(this.currentUrlTree,n,i);let o=this.parseUrl(n);return Lb(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,u=m});let f=this.pendingTasks.add();return $y(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function XF(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new j(4008,!1)}var gs=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=qe(null);get href(){return En(this.reactiveHref)}set href(n){this.reactiveHref.set(n)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new ot;applicationErrorHandler=O(an);options=O(hs,{optional:!0});constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(O(new yd("href"),{optional:!0}));let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area"||!!(typeof customElements=="object"&&customElements.get(u)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let n=this.preserveFragment,r=i=>i==="merge"||i==="preserve";n||=r(this.queryParamsHandling),n||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),n&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Rn&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(ei(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(n!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.reactiveHref.set(n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n))??"":null)}applyAttributeValue(n,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return this.routerLinkInput===null?null:ei(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||t)(me(ps),me(Nn),Qa("tabindex"),me(Jo),me(Gn),me(ts))};static \u0275dir=Qr({type:t,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&Cn("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&pd("href",i.reactiveHref(),Rm)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",_d],skipLocationChange:[2,"skipLocationChange","skipLocationChange",_d],replaceUrl:[2,"replaceUrl","replaceUrl",_d],routerLink:"routerLink"},features:[Yi]})}return t})(),Hy=(()=>{class t{router;element;renderer;cdr;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new vt;link=O(gs,{optional:!0});constructor(n,r,i,o){this.router=n,this.element=r,this.renderer=i,this.cdr=o,this.routerEventsSubscription=n.events.subscribe(s=>{s instanceof Rn&&this.update()})}ngAfterContentInit(){de(this.links.changes,de(null)).pipe(Mo()).subscribe(n=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let n=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Ze(n).pipe(Mo()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(n){let r=Array.isArray(n)?n:n.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(n){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let n=this.hasActiveLinks();this.classes.forEach(r=>{n?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),n&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==n&&(this._isActive=n,this.cdr.markForCheck(),this.isActiveChange.emit(n))})}isLinkActive(n){let r=tV(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?n.isActive(o,r):!1}}hasActiveLinks(){let n=this.isLinkActive(this.router);return this.link&&n(this.link)||this.links.some(n)}static \u0275fac=function(r){return new(r||t)(me(ps),me(Gn),me(Jo),me(oc))};static \u0275dir=Qr({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&Jm(o,gs,5),r&2){let s;Zm(s=Xm())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[Yi]})}return t})();function tV(t){return!!t.paths}var nV=new $("");function zy(t,...e){return Li([{provide:xc,multi:!0,useValue:t},[],{provide:Nn,useFactory:rV},{provide:hd,multi:!0,useFactory:iV},e.map(n=>n.\u0275providers)])}function rV(){return O(ps).routerState.root}function iV(){let t=O(jn);return e=>{let n=t.get(Xo);if(e!==n.components[0])return;let r=t.get(ps),i=t.get(oV);t.get(sV)===1&&r.initialNavigation(),t.get(aV,null,{optional:!0})?.setUpPreloading(),t.get(nV,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var oV=new $("",{factory:()=>new ot}),sV=new $("",{factory:()=>1});var aV=new $("");function uV(t,e){if(t&1&&Ee(0,"img",2),t&2){let n=W(2);ae("src",n.data.image,Mt)}}function lV(t,e){if(t&1&&(G(0,"h1"),ce(1),se()),t&2){let n=W(2);P(),ze(n.data.title)}}function dV(t,e){if(t&1&&(G(0,"button",4),ce(1),se()),t&2){let n=W(2);es("disabled",!n.data.interactive),ae("disabled",!n.data.interactive),P(),ze(n.data.button)}}function fV(t,e){if(t&1&&(G(0,"div",1),ie(1,uV,1,1,"img",2),G(2,"div",3),ie(3,lV,2,1,"h1"),ie(4,dV,2,4,"button",4),se()()),t&2){let n=W();ae("ngClass",n.data.bannerType),P(),oe(n.data.image!=""?1:-1),P(2),oe(n.data.title!=""?3:-1),P(),oe(n.data.button!=""?4:-1)}}var Jn=class t{data;static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Se({type:t,selectors:[["app-banner"]],inputs:{data:"data"},decls:2,vars:1,consts:[[1,"banner-shell"],[1,"banner",3,"ngClass"],[3,"src","alt"],[1,"book-container"],["id","book",3,"disabled"]],template:function(n,r){n&1&&(G(0,"div",0),ie(1,fV,5,4,"div",1),se()),n&2&&(P(),oe(r.data?1:-1))},dependencies:[ly],styles:[".banner[_ngcontent-%COMP%]{margin:0 0 1.5rem;width:100%;height:500px;position:relative;display:flex;justify-content:center}.subpage[_ngcontent-%COMP%]{height:200px}h1[_ngcontent-%COMP%]{font-family:Malvie,sans-serif;font-size:6rem;color:#fffaf0}img[_ngcontent-%COMP%]{width:100%;object-fit:cover}.book-container[_ngcontent-%COMP%]{width:100%;position:absolute;top:0;bottom:0;display:flex;flex-direction:column;justify-content:center;align-items:center;background:radial-gradient(black 0%,transparent 30%)}button[_ngcontent-%COMP%]{margin:0;padding:0}#book[_ngcontent-%COMP%]{margin:0;padding:.2rem 3rem 0;width:90%;max-width:450px;display:flex;justify-content:center;align-items:center;background:transparent;color:#fffaf0;font-family:Bebas Neue,sans-serif;font-size:clamp(1rem,3vw,2rem);border:5px solid floralwhite;box-sizing:border-box;transition:all .2s ease-in-out}#book.disabled[_ngcontent-%COMP%]{cursor:default;background:#fffaf0;color:var(--primary);font-size:clamp(3rem,4vw,4rem)}#book[_ngcontent-%COMP%]:not(.disabled):hover{transform:scale(1.1);background:#fffaf0;color:var(--primary);cursor:pointer}"]})};function hV(t,e){if(t&1&&(Ie(0,"h2",3),ce(1),we()),t&2){let n=W(2);P(),ze(n.data==null?null:n.data.title)}}function pV(t,e){if(t&1&&(Ie(0,"p"),ce(1),we()),t&2){let n=W(2);P(),ze(n.data==null?null:n.data.content)}}function gV(t,e){if(t&1&&Yr(0,"img",4),t&2){let n=W(2);Wn("src",n.data==null?null:n.data.image,Mt)}}function mV(t,e){if(t&1&&(Ie(0,"div",1),ie(1,hV,2,1,"h2",3),ie(2,pV,2,1,"p"),ie(3,gV,1,1,"img",4),we()),t&2){let n=W();P(),oe((n.data==null?null:n.data.title)!=""?1:-1),P(),oe((n.data==null?null:n.data.content)!=""?2:-1),P(),oe((n.data==null?null:n.data.image)!=""?3:-1)}}function yV(t,e){if(t&1&&(Ie(0,"p"),ce(1),we()),t&2){let n=W(2);P(),ze(n.data==null?null:n.data.content)}}function vV(t,e){if(t&1&&(Ie(0,"div",1),ie(1,yV,2,1,"p"),we()),t&2){let n=W();P(),oe((n.data==null?null:n.data.content)!=""?1:-1)}}function _V(t,e){if(t&1&&(Ie(0,"p",3),ce(1),we()),t&2){let n=W(2);P(),ze(n.data==null?null:n.data.title)}}function EV(t,e){if(t&1&&(Ie(0,"p"),ce(1),we()),t&2){let n=W(2);P(),ze(n.data==null?null:n.data.content)}}function IV(t,e){if(t&1&&(Ie(0,"div",2),ie(1,_V,2,1,"p",3),ie(2,EV,2,1,"p"),we()),t&2){let n=W();P(),oe((n.data==null?null:n.data.title)!=""?1:-1),P(),oe((n.data==null?null:n.data.content)!=""?2:-1)}}var Pc=(r=>(r[r.Primary=0]="Primary",r[r.Secondary=1]="Secondary",r[r.FAQ=2]="FAQ",r))(Pc||{}),ms=class t{data;width;InfoType=Pc;static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Se({type:t,selectors:[["app-info"]],inputs:{data:"data",width:"width"},decls:4,vars:3,consts:[[1,"info-shell"],[1,"info-container"],[1,"info-container","faq"],[1,"title"],["alt","image",3,"src"]],template:function(n,r){n&1&&(Ie(0,"div",0),ie(1,mV,4,3,"div",1),ie(2,vV,2,1,"div",1),ie(3,IV,3,2,"div",2),we()),n&2&&(P(),oe((r.data==null?null:r.data.type)===r.InfoType.Primary?1:-1),P(),oe((r.data==null?null:r.data.type)===r.InfoType.Secondary?2:-1),P(),oe((r.data==null?null:r.data.type)===r.InfoType.FAQ?3:-1))},styles:[".info-shell[_ngcontent-%COMP%]{display:flex;justify-content:center}.info-container[_ngcontent-%COMP%]{padding:0 1rem 1.25rem;max-width:var(--maxWidth);display:flex;flex-direction:column;align-items:center;gap:1rem}.faq[_ngcontent-%COMP%]{flex-direction:row;align-items:flex-start}.faq[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{flex:1;max-width:50%}.faq[_ngcontent-%COMP%]   p.title[_ngcontent-%COMP%]{text-align:right}.faq[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:not(.title){text-align:left}h2[_ngcontent-%COMP%]{margin:0;font-family:Malvie,sans-serif;font-size:2rem;text-align:center}p[_ngcontent-%COMP%]{margin:0;padding:0;font-size:1.25em;text-align:center}.title[_ngcontent-%COMP%]{color:var(--highlight)}img[_ngcontent-%COMP%]{width:100%;max-width:700px;max-height:450px;display:block;object-fit:cover;object-position:top}"]})};var wV=t=>({title:"FAQ",type:t,content:"",image:""});function TV(t,e){if(t&1&&Ee(0,"app-info",1),t&2){let n=e.$implicit;ae("data",n)}}var sf=class t{bannerData={bannerType:"primary",title:"Taniti",image:"banners/taniti.jpeg",button:"Start Your Adventure",interactive:!0};aboutData={title:"About the Island",type:0,content:"Taniti is a small, tropical island in the Pacific. While the island has an area of less than 500 square miles, the terrain is varied and includes both sandy and rocky beaches, a small but safe harbor, lush tropical rainforests, and a mountainous interior that includes a small, active volcano. Taniti has an indigenous population of about 20,000. Until a recent increase in tourism, most of the Tanitian economy was dominated by fishing or agriculture",image:""};questionsData=[{title:"What power outlets are on the Island?",type:2,content:"Power outlets are 120 volts (the same as in the United States).",image:""},{title:"What is the law on alcohol sales?",type:2,content:"Alcohol is not allowed to be served or sold between the hours of midnight and 9:00 a.m.",image:""},{title:"What is the drinking age on Taniti?",type:2,content:"The drinking age on Taniti is 18 and the drinking age is not strictly enforced.",image:""},{title:"What language is spoken on Taniti?",type:2,content:"Many younger Tanitians speak fluent English. Very little English is spoken in rural areas, especially by the older residents.",image:""},{title:"Does the island have medical facilities?",type:2,content:"There is one hospital and several clinics. The hospital has many multilingual employees.",image:""},{title:"How bad is the crime on Taniti?",type:2,content:"Violent crime is very rare on Taniti, but as tourism increases, there are more reports of pickpocketing and other petty crimes.",image:""},{title:"What holidays does Taniti observe?",type:2,content:"Taniti enjoys a large number of national holidays, and many tourist attractions and restaurants will be closed on holidays, so visitors should plan accordingly.",image:""},{title:"What currency is accepted on Taniti?",type:2,content:"Taniti uses the U.S. dollar as its currency, but many businesses will also accept euros and yen. Several banks facilitate currency exchange, and many businesses accept major credit cards.",image:""}];InfoType=Pc;static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Se({type:t,selectors:[["app-home"]],decls:6,vars:5,consts:[[3,"data"],[1,"faq",3,"data"]],template:function(n,r){n&1&&(G(0,"div"),Ee(1,"app-banner",0)(2,"app-info",0)(3,"app-info",0),xt(4,TV,1,1,"app-info",1,un),se()),n&2&&(P(),ae("data",r.bannerData),P(),ae("data",r.aboutData),P(),ae("data",nc(3,wV,r.InfoType.Primary)),P(),Pt(r.questionsData))},dependencies:[Jn,ms],encapsulation:2})};var PS=()=>{};var LS=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},DV=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},FS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,f=o>>2,p=(o&3)<<4|a>>4,m=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(m=64)),r.push(n[f],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(LS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):DV(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new Wy;let m=o<<2|a>>4;if(r.push(m),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let S=l<<6&192|p;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Wy=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},CV=function(t){let e=LS(t);return FS.encodeByteArray(e,!0)},kc=function(t){return CV(t).replace(/\./g,"")},cf=function(t){try{return FS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function VS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var bV=()=>VS().__FIREBASE_DEFAULTS__,SV=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},AV=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&cf(t[1]);return e&&JSON.parse(e)},uf=()=>{try{return PS()||bV()||SV()||AV()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Qy=t=>uf()?.emulatorHosts?.[t],jS=t=>{let e=Qy(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Yy=()=>uf()?.config,Jy=t=>uf()?.[`_${t}`];var af=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function ti(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function lf(t){return(await fetch(t,{credentials:"include"})).ok}function US(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=M({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[kc(JSON.stringify(n)),kc(JSON.stringify(s)),""].join(".")}var Oc={};function RV(){let t={prod:[],emulator:[]};for(let e of Object.keys(Oc))Oc[e]?t.emulator.push(e):t.prod.push(e);return t}function NV(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var OS=!1;function df(t,e){if(typeof window>"u"||typeof document>"u"||!ti(window.location.host)||Oc[t]===e||Oc[t]||OS)return;Oc[t]=e;function n(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=RV().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{OS=!0,s()},m}function f(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=NV(r),y=n("text"),S=document.getElementById(y)||document.createElement("span"),A=n("learnmore"),R=document.getElementById(A)||document.createElement("a"),L=n("preprendIcon"),te=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let he=m.element;a(he),f(R,A);let wt=l();u(te,L),he.append(te,S,R,wt),document.body.appendChild(he)}o?(S.innerText="Preview backend disconnected.",te.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(te.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function ut(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function BS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ut())}function MV(){let t=uf()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $S(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function HS(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function zS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function qS(){let t=ut();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function GS(){return!MV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Zy(){try{return typeof indexedDB=="object"}catch{return!1}}function WS(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}var xV="FirebaseError",Zt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=xV,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Er.prototype.create)}},Er=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?PV(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Zt(i,a,r)}};function PV(t,e){return t.replace(OV,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var OV=/\{\$([^}]+)}/g;function KS(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Zn(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(kS(o)&&kS(s)){if(!Zn(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function kS(t){return t!==null&&typeof t=="object"}function Lc(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function QS(t,e){let n=new Ky(t,e);return n.subscribe.bind(n)}var Ky=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");kV(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Gy),i.error===void 0&&(i.error=Gy),i.complete===void 0&&(i.complete=Gy);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function kV(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Gy(){}var OZ=14400*1e3;function Xt(t){return t&&t._delegate?t._delegate:t}var fn=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var oo="[DEFAULT]";var Xy=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new af;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){let n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(FV(e))try{this.getOrInitializeService({instanceIdentifier:oo})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=oo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=oo){return this.instances.has(e)}getOptions(e=oo){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){let r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:LV(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=oo){return this.component?this.component.multipleInstances?e:oo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function LV(t){return t===oo?void 0:t}function FV(t){return t.instantiationMode==="EAGER"}var ff=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Xy(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var VV=[],fe=(function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t})(fe||{}),jV={debug:fe.DEBUG,verbose:fe.VERBOSE,info:fe.INFO,warn:fe.WARN,error:fe.ERROR,silent:fe.SILENT},UV=fe.INFO,BV={[fe.DEBUG]:"log",[fe.VERBOSE]:"log",[fe.INFO]:"info",[fe.WARN]:"warn",[fe.ERROR]:"error"},$V=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=BV[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},ni=class{constructor(e){this.name=e,this._logLevel=UV,this._logHandler=$V,this._userLogHandler=null,VV.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,fe.DEBUG,...e),this._logHandler(this,fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,fe.VERBOSE,...e),this._logHandler(this,fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,fe.INFO,...e),this._logHandler(this,fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,fe.WARN,...e),this._logHandler(this,fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,fe.ERROR,...e),this._logHandler(this,fe.ERROR,...e)}};var HV=(t,e)=>e.some(n=>t instanceof n),YS,JS;function zV(){return YS||(YS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qV(){return JS||(JS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var ZS=new WeakMap,tv=new WeakMap,XS=new WeakMap,ev=new WeakMap,rv=new WeakMap;function GV(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Xn(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&ZS.set(n,t)}).catch(()=>{}),rv.set(e,t),e}function WV(t){if(tv.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});tv.set(t,e)}var nv={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return tv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||XS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Xn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function e0(t){nv=t(nv)}function KV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(hf(this),e,...n);return XS.set(r,e.sort?e.sort():[e]),Xn(r)}:qV().includes(t)?function(...e){return t.apply(hf(this),e),Xn(ZS.get(this))}:function(...e){return Xn(t.apply(hf(this),e))}}function QV(t){return typeof t=="function"?KV(t):(t instanceof IDBTransaction&&WV(t),HV(t,zV())?new Proxy(t,nv):t)}function Xn(t){if(t instanceof IDBRequest)return GV(t);if(ev.has(t))return ev.get(t);let e=QV(t);return e!==t&&(ev.set(t,e),rv.set(e,t)),e}var hf=t=>rv.get(t);function n0(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=Xn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Xn(s.result),u.oldVersion,u.newVersion,Xn(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var YV=["get","getKey","getAll","getAllKeys","count"],JV=["put","add","delete","clear"],iv=new Map;function t0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(iv.get(e))return iv.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=JV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||YV.includes(n)))return;let o=async function(s,...a){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return iv.set(e,o),o}e0(t=>re(M({},t),{get:(e,n,r)=>t0(e,n)||t.get(e,n,r),has:(e,n)=>!!t0(e,n)||t.has(e,n)}));var sv=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ZV(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function ZV(t){return t.getComponent()?.type==="VERSION"}var av="@firebase/app",r0="0.14.6";var Ir=new ni("@firebase/app"),XV="@firebase/app-compat",e2="@firebase/analytics-compat",t2="@firebase/analytics",n2="@firebase/app-check-compat",r2="@firebase/app-check",i2="@firebase/auth",o2="@firebase/auth-compat",s2="@firebase/database",a2="@firebase/data-connect",c2="@firebase/database-compat",u2="@firebase/functions",l2="@firebase/functions-compat",d2="@firebase/installations",f2="@firebase/installations-compat",h2="@firebase/messaging",p2="@firebase/messaging-compat",g2="@firebase/performance",m2="@firebase/performance-compat",y2="@firebase/remote-config",v2="@firebase/remote-config-compat",_2="@firebase/storage",E2="@firebase/storage-compat",I2="@firebase/firestore",w2="@firebase/ai",T2="@firebase/firestore-compat",D2="firebase",C2="12.6.0";var cv="[DEFAULT]",b2={[av]:"fire-core",[XV]:"fire-core-compat",[t2]:"fire-analytics",[e2]:"fire-analytics-compat",[r2]:"fire-app-check",[n2]:"fire-app-check-compat",[i2]:"fire-auth",[o2]:"fire-auth-compat",[s2]:"fire-rtdb",[a2]:"fire-data-connect",[c2]:"fire-rtdb-compat",[u2]:"fire-fn",[l2]:"fire-fn-compat",[d2]:"fire-iid",[f2]:"fire-iid-compat",[h2]:"fire-fcm",[p2]:"fire-fcm-compat",[g2]:"fire-perf",[m2]:"fire-perf-compat",[y2]:"fire-rc",[v2]:"fire-rc-compat",[_2]:"fire-gcs",[E2]:"fire-gcs-compat",[I2]:"fire-fst",[T2]:"fire-fst-compat",[w2]:"fire-vertex","fire-js":"fire-js",[D2]:"fire-js-all"};var pf=new Map,S2=new Map,uv=new Map;function i0(t,e){try{t.container.addComponent(e)}catch(n){Ir.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ii(t){let e=t.name;if(uv.has(e))return Ir.debug(`There were multiple attempts to register component ${e}.`),!1;uv.set(e,t);for(let n of pf.values())i0(n,t);for(let n of S2.values())i0(n,t);return!0}function Vc(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function en(t){return t==null?!1:t.settings!==void 0}var A2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ri=new Er("app","Firebase",A2);var lv=class{constructor(e,n,r){this._isDeleted=!1,this._options=M({},e),this._config=M({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new fn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ri.create("app-deleted",{appName:this._name})}};var oi=C2;function hv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=M({name:cv,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw ri.create("bad-app-name",{appName:String(i)});if(n||(n=Yy()),!n)throw ri.create("no-options");let o=pf.get(i);if(o){if(Zn(n,o.options)&&Zn(r,o.config))return o;throw ri.create("duplicate-app",{appName:i})}let s=new ff(i);for(let u of uv.values())s.addComponent(u);let a=new lv(n,r,s);return pf.set(i,a),a}function gf(t=cv){let e=pf.get(t);if(!e&&t===cv&&Yy())return hv();if(!e)throw ri.create("no-app",{appName:t});return e}function Mn(t,e,n){let r=b2[t]??t;n&&(r+=`-${n}`);let i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ir.warn(s.join(" "));return}ii(new fn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var R2="firebase-heartbeat-database",N2=1,Fc="firebase-heartbeat-store",ov=null;function c0(){return ov||(ov=n0(R2,N2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Fc)}catch(n){console.warn(n)}}}}).catch(t=>{throw ri.create("idb-open",{originalErrorMessage:t.message})})),ov}async function M2(t){try{let n=(await c0()).transaction(Fc),r=await n.objectStore(Fc).get(u0(t));return await n.done,r}catch(e){if(e instanceof Zt)Ir.warn(e.message);else{let n=ri.create("idb-get",{originalErrorMessage:e?.message});Ir.warn(n.message)}}}async function o0(t,e){try{let r=(await c0()).transaction(Fc,"readwrite");await r.objectStore(Fc).put(e,u0(t)),await r.done}catch(n){if(n instanceof Zt)Ir.warn(n.message);else{let r=ri.create("idb-set",{originalErrorMessage:n?.message});Ir.warn(r.message)}}}function u0(t){return`${t.name}!${t.options.appId}`}var x2=1024,P2=30,dv=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new fv(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{let n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=s0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>P2){let i=k2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ir.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=s0(),{heartbeatsToSend:n,unsentEntries:r}=O2(this._heartbeatsCache.heartbeats),i=kc(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Ir.warn(e),""}}};function s0(){return new Date().toISOString().substring(0,10)}function O2(t,e=x2){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),a0(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),a0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var fv=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Zy()?WS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let n=await M2(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return o0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return o0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function a0(t){return kc(JSON.stringify({version:2,heartbeats:t})).length}function k2(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function L2(t){ii(new fn("platform-logger",e=>new sv(e),"PRIVATE")),ii(new fn("heartbeat",e=>new dv(e),"PRIVATE")),Mn(av,r0,t),Mn(av,r0,"esm2020"),Mn("fire-js","")}L2("");var l0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},d0={};var wr,pv;(function(){var t;function e(w,v){function E(){}E.prototype=v.prototype,w.F=v.prototype,w.prototype=new E,w.prototype.constructor=w,w.D=function(T,I,C){for(var _=Array(arguments.length-2),Lt=2;Lt<arguments.length;Lt++)_[Lt-2]=arguments[Lt];return v.prototype[I].apply(T,_)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,v,E){E||(E=0);let T=Array(16);if(typeof v=="string")for(var I=0;I<16;++I)T[I]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(I=0;I<16;++I)T[I]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=w.g[0],E=w.g[1],I=w.g[2];let C=w.g[3],_;_=v+(C^E&(I^C))+T[0]+3614090360&4294967295,v=E+(_<<7&4294967295|_>>>25),_=C+(I^v&(E^I))+T[1]+3905402710&4294967295,C=v+(_<<12&4294967295|_>>>20),_=I+(E^C&(v^E))+T[2]+606105819&4294967295,I=C+(_<<17&4294967295|_>>>15),_=E+(v^I&(C^v))+T[3]+3250441966&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(C^E&(I^C))+T[4]+4118548399&4294967295,v=E+(_<<7&4294967295|_>>>25),_=C+(I^v&(E^I))+T[5]+1200080426&4294967295,C=v+(_<<12&4294967295|_>>>20),_=I+(E^C&(v^E))+T[6]+2821735955&4294967295,I=C+(_<<17&4294967295|_>>>15),_=E+(v^I&(C^v))+T[7]+4249261313&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(C^E&(I^C))+T[8]+1770035416&4294967295,v=E+(_<<7&4294967295|_>>>25),_=C+(I^v&(E^I))+T[9]+2336552879&4294967295,C=v+(_<<12&4294967295|_>>>20),_=I+(E^C&(v^E))+T[10]+4294925233&4294967295,I=C+(_<<17&4294967295|_>>>15),_=E+(v^I&(C^v))+T[11]+2304563134&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(C^E&(I^C))+T[12]+1804603682&4294967295,v=E+(_<<7&4294967295|_>>>25),_=C+(I^v&(E^I))+T[13]+4254626195&4294967295,C=v+(_<<12&4294967295|_>>>20),_=I+(E^C&(v^E))+T[14]+2792965006&4294967295,I=C+(_<<17&4294967295|_>>>15),_=E+(v^I&(C^v))+T[15]+1236535329&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(I^C&(E^I))+T[1]+4129170786&4294967295,v=E+(_<<5&4294967295|_>>>27),_=C+(E^I&(v^E))+T[6]+3225465664&4294967295,C=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(C^v))+T[11]+643717713&4294967295,I=C+(_<<14&4294967295|_>>>18),_=E+(C^v&(I^C))+T[0]+3921069994&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(I^C&(E^I))+T[5]+3593408605&4294967295,v=E+(_<<5&4294967295|_>>>27),_=C+(E^I&(v^E))+T[10]+38016083&4294967295,C=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(C^v))+T[15]+3634488961&4294967295,I=C+(_<<14&4294967295|_>>>18),_=E+(C^v&(I^C))+T[4]+3889429448&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(I^C&(E^I))+T[9]+568446438&4294967295,v=E+(_<<5&4294967295|_>>>27),_=C+(E^I&(v^E))+T[14]+3275163606&4294967295,C=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(C^v))+T[3]+4107603335&4294967295,I=C+(_<<14&4294967295|_>>>18),_=E+(C^v&(I^C))+T[8]+1163531501&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(I^C&(E^I))+T[13]+2850285829&4294967295,v=E+(_<<5&4294967295|_>>>27),_=C+(E^I&(v^E))+T[2]+4243563512&4294967295,C=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(C^v))+T[7]+1735328473&4294967295,I=C+(_<<14&4294967295|_>>>18),_=E+(C^v&(I^C))+T[12]+2368359562&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(E^I^C)+T[5]+4294588738&4294967295,v=E+(_<<4&4294967295|_>>>28),_=C+(v^E^I)+T[8]+2272392833&4294967295,C=v+(_<<11&4294967295|_>>>21),_=I+(C^v^E)+T[11]+1839030562&4294967295,I=C+(_<<16&4294967295|_>>>16),_=E+(I^C^v)+T[14]+4259657740&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(E^I^C)+T[1]+2763975236&4294967295,v=E+(_<<4&4294967295|_>>>28),_=C+(v^E^I)+T[4]+1272893353&4294967295,C=v+(_<<11&4294967295|_>>>21),_=I+(C^v^E)+T[7]+4139469664&4294967295,I=C+(_<<16&4294967295|_>>>16),_=E+(I^C^v)+T[10]+3200236656&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(E^I^C)+T[13]+681279174&4294967295,v=E+(_<<4&4294967295|_>>>28),_=C+(v^E^I)+T[0]+3936430074&4294967295,C=v+(_<<11&4294967295|_>>>21),_=I+(C^v^E)+T[3]+3572445317&4294967295,I=C+(_<<16&4294967295|_>>>16),_=E+(I^C^v)+T[6]+76029189&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(E^I^C)+T[9]+3654602809&4294967295,v=E+(_<<4&4294967295|_>>>28),_=C+(v^E^I)+T[12]+3873151461&4294967295,C=v+(_<<11&4294967295|_>>>21),_=I+(C^v^E)+T[15]+530742520&4294967295,I=C+(_<<16&4294967295|_>>>16),_=E+(I^C^v)+T[2]+3299628645&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(I^(E|~C))+T[0]+4096336452&4294967295,v=E+(_<<6&4294967295|_>>>26),_=C+(E^(v|~I))+T[7]+1126891415&4294967295,C=v+(_<<10&4294967295|_>>>22),_=I+(v^(C|~E))+T[14]+2878612391&4294967295,I=C+(_<<15&4294967295|_>>>17),_=E+(C^(I|~v))+T[5]+4237533241&4294967295,E=I+(_<<21&4294967295|_>>>11),_=v+(I^(E|~C))+T[12]+1700485571&4294967295,v=E+(_<<6&4294967295|_>>>26),_=C+(E^(v|~I))+T[3]+2399980690&4294967295,C=v+(_<<10&4294967295|_>>>22),_=I+(v^(C|~E))+T[10]+4293915773&4294967295,I=C+(_<<15&4294967295|_>>>17),_=E+(C^(I|~v))+T[1]+2240044497&4294967295,E=I+(_<<21&4294967295|_>>>11),_=v+(I^(E|~C))+T[8]+1873313359&4294967295,v=E+(_<<6&4294967295|_>>>26),_=C+(E^(v|~I))+T[15]+4264355552&4294967295,C=v+(_<<10&4294967295|_>>>22),_=I+(v^(C|~E))+T[6]+2734768916&4294967295,I=C+(_<<15&4294967295|_>>>17),_=E+(C^(I|~v))+T[13]+1309151649&4294967295,E=I+(_<<21&4294967295|_>>>11),_=v+(I^(E|~C))+T[4]+4149444226&4294967295,v=E+(_<<6&4294967295|_>>>26),_=C+(E^(v|~I))+T[11]+3174756917&4294967295,C=v+(_<<10&4294967295|_>>>22),_=I+(v^(C|~E))+T[2]+718787259&4294967295,I=C+(_<<15&4294967295|_>>>17),_=E+(C^(I|~v))+T[9]+3951481745&4294967295,w.g[0]=w.g[0]+v&4294967295,w.g[1]=w.g[1]+(I+(_<<21&4294967295|_>>>11))&4294967295,w.g[2]=w.g[2]+I&4294967295,w.g[3]=w.g[3]+C&4294967295}r.prototype.v=function(w,v){v===void 0&&(v=w.length);let E=v-this.blockSize,T=this.C,I=this.h,C=0;for(;C<v;){if(I==0)for(;C<=E;)i(this,w,C),C+=this.blockSize;if(typeof w=="string"){for(;C<v;)if(T[I++]=w.charCodeAt(C++),I==this.blockSize){i(this,T),I=0;break}}else for(;C<v;)if(T[I++]=w[C++],I==this.blockSize){i(this,T),I=0;break}}this.h=I,this.o+=v},r.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var v=1;v<w.length-8;++v)w[v]=0;v=this.o*8;for(var E=w.length-8;E<w.length;++E)w[E]=v&255,v/=256;for(this.v(w),w=Array(16),v=0,E=0;E<4;++E)for(let T=0;T<32;T+=8)w[v++]=this.g[E]>>>T&255;return w};function o(w,v){var E=a;return Object.prototype.hasOwnProperty.call(E,w)?E[w]:E[w]=v(w)}function s(w,v){this.h=v;let E=[],T=!0;for(let I=w.length-1;I>=0;I--){let C=w[I]|0;T&&C==v||(E[I]=C,T=!1)}this.g=E}var a={};function u(w){return-128<=w&&w<128?o(w,function(v){return new s([v|0],v<0?-1:0)}):new s([w|0],w<0?-1:0)}function l(w){if(isNaN(w)||!isFinite(w))return p;if(w<0)return R(l(-w));let v=[],E=1;for(let T=0;w>=E;T++)v[T]=w/E|0,E*=4294967296;return new s(v,0)}function f(w,v){if(w.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(w.charAt(0)=="-")return R(f(w.substring(1),v));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');let E=l(Math.pow(v,8)),T=p;for(let C=0;C<w.length;C+=8){var I=Math.min(8,w.length-C);let _=parseInt(w.substring(C,C+I),v);I<8?(I=l(Math.pow(v,I)),T=T.j(I).add(l(_))):(T=T.j(E),T=T.add(l(_)))}return T}var p=u(0),m=u(1),y=u(16777216);t=s.prototype,t.m=function(){if(A(this))return-R(this).m();let w=0,v=1;for(let E=0;E<this.g.length;E++){let T=this.i(E);w+=(T>=0?T:4294967296+T)*v,v*=4294967296}return w},t.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(S(this))return"0";if(A(this))return"-"+R(this).toString(w);let v=l(Math.pow(w,6));var E=this;let T="";for(;;){let I=wt(E,v).g;E=L(E,I.j(v));let C=((E.g.length>0?E.g[0]:E.h)>>>0).toString(w);if(E=I,S(E))return C+T;for(;C.length<6;)C="0"+C;T=C+T}},t.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function S(w){if(w.h!=0)return!1;for(let v=0;v<w.g.length;v++)if(w.g[v]!=0)return!1;return!0}function A(w){return w.h==-1}t.l=function(w){return w=L(this,w),A(w)?-1:S(w)?0:1};function R(w){let v=w.g.length,E=[];for(let T=0;T<v;T++)E[T]=~w.g[T];return new s(E,~w.h).add(m)}t.abs=function(){return A(this)?R(this):this},t.add=function(w){let v=Math.max(this.g.length,w.g.length),E=[],T=0;for(let I=0;I<=v;I++){let C=T+(this.i(I)&65535)+(w.i(I)&65535),_=(C>>>16)+(this.i(I)>>>16)+(w.i(I)>>>16);T=_>>>16,C&=65535,_&=65535,E[I]=_<<16|C}return new s(E,E[E.length-1]&-2147483648?-1:0)};function L(w,v){return w.add(R(v))}t.j=function(w){if(S(this)||S(w))return p;if(A(this))return A(w)?R(this).j(R(w)):R(R(this).j(w));if(A(w))return R(this.j(R(w)));if(this.l(y)<0&&w.l(y)<0)return l(this.m()*w.m());let v=this.g.length+w.g.length,E=[];for(var T=0;T<2*v;T++)E[T]=0;for(T=0;T<this.g.length;T++)for(let I=0;I<w.g.length;I++){let C=this.i(T)>>>16,_=this.i(T)&65535,Lt=w.i(I)>>>16,xr=w.i(I)&65535;E[2*T+2*I]+=_*xr,te(E,2*T+2*I),E[2*T+2*I+1]+=C*xr,te(E,2*T+2*I+1),E[2*T+2*I+1]+=_*Lt,te(E,2*T+2*I+1),E[2*T+2*I+2]+=C*Lt,te(E,2*T+2*I+2)}for(w=0;w<v;w++)E[w]=E[2*w+1]<<16|E[2*w];for(w=v;w<2*v;w++)E[w]=0;return new s(E,0)};function te(w,v){for(;(w[v]&65535)!=w[v];)w[v+1]+=w[v]>>>16,w[v]&=65535,v++}function he(w,v){this.g=w,this.h=v}function wt(w,v){if(S(v))throw Error("division by zero");if(S(w))return new he(p,p);if(A(w))return v=wt(R(w),v),new he(R(v.g),R(v.h));if(A(v))return v=wt(w,R(v)),new he(R(v.g),v.h);if(w.g.length>30){if(A(w)||A(v))throw Error("slowDivide_ only works with positive integers.");for(var E=m,T=v;T.l(w)<=0;)E=kt(E),T=kt(T);var I=rt(E,1),C=rt(T,1);for(T=rt(T,2),E=rt(E,2);!S(T);){var _=C.add(T);_.l(w)<=0&&(I=I.add(E),C=_),T=rt(T,1),E=rt(E,1)}return v=L(w,I.j(v)),new he(I,v)}for(I=p;w.l(v)>=0;){for(E=Math.max(1,Math.floor(w.m()/v.m())),T=Math.ceil(Math.log(E)/Math.LN2),T=T<=48?1:Math.pow(2,T-48),C=l(E),_=C.j(v);A(_)||_.l(w)>0;)E-=T,C=l(E),_=C.j(v);S(C)&&(C=m),I=I.add(C),w=L(w,_)}return new he(I,w)}t.B=function(w){return wt(this,w).h},t.and=function(w){let v=Math.max(this.g.length,w.g.length),E=[];for(let T=0;T<v;T++)E[T]=this.i(T)&w.i(T);return new s(E,this.h&w.h)},t.or=function(w){let v=Math.max(this.g.length,w.g.length),E=[];for(let T=0;T<v;T++)E[T]=this.i(T)|w.i(T);return new s(E,this.h|w.h)},t.xor=function(w){let v=Math.max(this.g.length,w.g.length),E=[];for(let T=0;T<v;T++)E[T]=this.i(T)^w.i(T);return new s(E,this.h^w.h)};function kt(w){let v=w.g.length+1,E=[];for(let T=0;T<v;T++)E[T]=w.i(T)<<1|w.i(T-1)>>>31;return new s(E,w.h)}function rt(w,v){let E=v>>5;v%=32;let T=w.g.length-E,I=[];for(let C=0;C<T;C++)I[C]=v>0?w.i(C+E)>>>v|w.i(C+E+1)<<32-v:w.i(C+E);return new s(I,w.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,pv=d0.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=f,wr=d0.Integer=s}).apply(typeof l0<"u"?l0:typeof self<"u"?self:typeof window<"u"?window:{});var mf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Tr={};var gv,F2,ys,mv,jc,yf,yv,vv,_v;(function(){var t,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof mf=="object"&&mf];for(var d=0;d<c.length;++d){var h=c[d];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var h=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var D=c[g];if(!(D in h))break e;h=h[D]}c=c[c.length-1],g=h[c],d=d(g),d!=g&&d!=null&&e(h,c,{configurable:!0,writable:!0,value:d})}}i("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(c){return c||function(d){var h=[],g;for(g in d)Object.prototype.hasOwnProperty.call(d,g)&&h.push([g,d[g]]);return h}});var o=o||{},s=this||self;function a(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function u(c,d,h){return c.call.apply(c.bind,arguments)}function l(c,d,h){return l=u,l.apply(null,arguments)}function f(c,d){var h=Array.prototype.slice.call(arguments,1);return function(){var g=h.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function p(c,d){function h(){}h.prototype=d.prototype,c.Z=d.prototype,c.prototype=new h,c.prototype.constructor=c,c.Ob=function(g,D,b){for(var k=Array(arguments.length-2),ne=2;ne<arguments.length;ne++)k[ne-2]=arguments[ne];return d.prototype[D].apply(g,k)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function y(c){let d=c.length;if(d>0){let h=Array(d);for(let g=0;g<d;g++)h[g]=c[g];return h}return[]}function S(c,d){for(let g=1;g<arguments.length;g++){let D=arguments[g];var h=typeof D;if(h=h!="object"?h:D?Array.isArray(D)?"array":h:"null",h=="array"||h=="object"&&typeof D.length=="number"){h=c.length||0;let b=D.length||0;c.length=h+b;for(let k=0;k<b;k++)c[h+k]=D[k]}else c.push(D)}}class A{constructor(d,h){this.i=d,this.j=h,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function R(c){s.setTimeout(()=>{throw c},0)}function L(){var c=w;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class te{constructor(){this.h=this.g=null}add(d,h){let g=he.get();g.set(d,h),this.h?this.h.next=g:this.g=g,this.h=g}}var he=new A(()=>new wt,c=>c.reset());class wt{constructor(){this.next=this.g=this.h=null}set(d,h){this.h=d,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let kt,rt=!1,w=new te,v=()=>{let c=Promise.resolve(void 0);kt=()=>{c.then(E)}};function E(){for(var c;c=L();){try{c.h.call(c.g)}catch(h){R(h)}var d=he;d.j(c),d.h<100&&(d.h++,c.next=d.g,d.g=c)}rt=!1}function T(){this.u=this.u,this.C=this.C}T.prototype.u=!1,T.prototype.dispose=function(){this.u||(this.u=!0,this.N())},T.prototype[Symbol.dispose]=function(){this.dispose()},T.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var C=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let h=()=>{};s.addEventListener("test",h,d),s.removeEventListener("test",h,d)}catch{}return c})();function _(c){return/^[\s\xa0]*$/.test(c)}function Lt(c,d){I.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,d)}p(Lt,I),Lt.prototype.init=function(c,d){let h=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget,d||(h=="mouseover"?d=c.fromElement:h=="mouseout"&&(d=c.toElement)),this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Lt.Z.h.call(this)},Lt.prototype.h=function(){Lt.Z.h.call(this);let c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var xr="closure_listenable_"+(Math.random()*1e6|0),kN=0;function LN(c,d,h,g,D){this.listener=c,this.proxy=null,this.src=d,this.type=h,this.capture=!!g,this.ha=D,this.key=++kN,this.da=this.fa=!1}function hu(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function pu(c,d,h){for(let g in c)d.call(h,c[g],g,c)}function FN(c,d){for(let h in c)d.call(void 0,c[h],h,c)}function cI(c){let d={};for(let h in c)d[h]=c[h];return d}let uI="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function lI(c,d){let h,g;for(let D=1;D<arguments.length;D++){g=arguments[D];for(h in g)c[h]=g[h];for(let b=0;b<uI.length;b++)h=uI[b],Object.prototype.hasOwnProperty.call(g,h)&&(c[h]=g[h])}}function gu(c){this.src=c,this.g={},this.h=0}gu.prototype.add=function(c,d,h,g,D){let b=c.toString();c=this.g[b],c||(c=this.g[b]=[],this.h++);let k=Uh(c,d,g,D);return k>-1?(d=c[k],h||(d.fa=!1)):(d=new LN(d,this.src,b,!!g,D),d.fa=h,c.push(d)),d};function jh(c,d){let h=d.type;if(h in c.g){var g=c.g[h],D=Array.prototype.indexOf.call(g,d,void 0),b;(b=D>=0)&&Array.prototype.splice.call(g,D,1),b&&(hu(d),c.g[h].length==0&&(delete c.g[h],c.h--))}}function Uh(c,d,h,g){for(let D=0;D<c.length;++D){let b=c[D];if(!b.da&&b.listener==d&&b.capture==!!h&&b.ha==g)return D}return-1}var Bh="closure_lm_"+(Math.random()*1e6|0),$h={};function dI(c,d,h,g,D){if(g&&g.once)return hI(c,d,h,g,D);if(Array.isArray(d)){for(let b=0;b<d.length;b++)dI(c,d[b],h,g,D);return null}return h=Gh(h),c&&c[xr]?c.J(d,h,a(g)?!!g.capture:!!g,D):fI(c,d,h,!1,g,D)}function fI(c,d,h,g,D,b){if(!d)throw Error("Invalid event type");let k=a(D)?!!D.capture:!!D,ne=zh(c);if(ne||(c[Bh]=ne=new gu(c)),h=ne.add(d,h,g,k,b),h.proxy)return h;if(g=VN(),h.proxy=g,g.src=c,g.listener=h,c.addEventListener)C||(D=k),D===void 0&&(D=!1),c.addEventListener(d.toString(),g,D);else if(c.attachEvent)c.attachEvent(gI(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return h}function VN(){function c(h){return d.call(c.src,c.listener,h)}let d=jN;return c}function hI(c,d,h,g,D){if(Array.isArray(d)){for(let b=0;b<d.length;b++)hI(c,d[b],h,g,D);return null}return h=Gh(h),c&&c[xr]?c.K(d,h,a(g)?!!g.capture:!!g,D):fI(c,d,h,!0,g,D)}function pI(c,d,h,g,D){if(Array.isArray(d))for(var b=0;b<d.length;b++)pI(c,d[b],h,g,D);else g=a(g)?!!g.capture:!!g,h=Gh(h),c&&c[xr]?(c=c.i,b=String(d).toString(),b in c.g&&(d=c.g[b],h=Uh(d,h,g,D),h>-1&&(hu(d[h]),Array.prototype.splice.call(d,h,1),d.length==0&&(delete c.g[b],c.h--)))):c&&(c=zh(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Uh(d,h,g,D)),(h=c>-1?d[c]:null)&&Hh(h))}function Hh(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[xr])jh(d.i,c);else{var h=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(h,g,c.capture):d.detachEvent?d.detachEvent(gI(h),g):d.addListener&&d.removeListener&&d.removeListener(g),(h=zh(d))?(jh(h,c),h.h==0&&(h.src=null,d[Bh]=null)):hu(c)}}}function gI(c){return c in $h?$h[c]:$h[c]="on"+c}function jN(c,d){if(c.da)c=!0;else{d=new Lt(d,this);let h=c.listener,g=c.ha||c.src;c.fa&&Hh(c),c=h.call(g,d)}return c}function zh(c){return c=c[Bh],c instanceof gu?c:null}var qh="__closure_events_fn_"+(Math.random()*1e9>>>0);function Gh(c){return typeof c=="function"?c:(c[qh]||(c[qh]=function(d){return c.handleEvent(d)}),c[qh])}function gt(){T.call(this),this.i=new gu(this),this.M=this,this.G=null}p(gt,T),gt.prototype[xr]=!0,gt.prototype.removeEventListener=function(c,d,h,g){pI(this,c,d,h,g)};function Tt(c,d){var h,g=c.G;if(g)for(h=[];g;g=g.G)h.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new I(d,c);else if(d instanceof I)d.target=d.target||c;else{var D=d;d=new I(g,c),lI(d,D)}D=!0;let b,k;if(h)for(k=h.length-1;k>=0;k--)b=d.g=h[k],D=mu(b,g,!0,d)&&D;if(b=d.g=c,D=mu(b,g,!0,d)&&D,D=mu(b,g,!1,d)&&D,h)for(k=0;k<h.length;k++)b=d.g=h[k],D=mu(b,g,!1,d)&&D}gt.prototype.N=function(){if(gt.Z.N.call(this),this.i){var c=this.i;for(let d in c.g){let h=c.g[d];for(let g=0;g<h.length;g++)hu(h[g]);delete c.g[d],c.h--}}this.G=null},gt.prototype.J=function(c,d,h,g){return this.i.add(String(c),d,!1,h,g)},gt.prototype.K=function(c,d,h,g){return this.i.add(String(c),d,!0,h,g)};function mu(c,d,h,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();let D=!0;for(let b=0;b<d.length;++b){let k=d[b];if(k&&!k.da&&k.capture==h){let ne=k.listener,Je=k.ha||k.src;k.fa&&jh(c.i,k),D=ne.call(Je,g)!==!1&&D}}return D&&!g.defaultPrevented}function UN(c,d){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=l(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:s.setTimeout(c,d||0)}function mI(c){c.g=UN(()=>{c.g=null,c.i&&(c.i=!1,mI(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class BN extends T{constructor(d,h){super(),this.m=d,this.l=h,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:mI(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qs(c){T.call(this),this.h=c,this.g={}}p(Qs,T);var yI=[];function vI(c){pu(c.g,function(d,h){this.g.hasOwnProperty(h)&&Hh(d)},c),c.g={}}Qs.prototype.N=function(){Qs.Z.N.call(this),vI(this)},Qs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wh=s.JSON.stringify,$N=s.JSON.parse,HN=class{stringify(c){return s.JSON.stringify(c,void 0)}parse(c){return s.JSON.parse(c,void 0)}};function _I(){}function EI(){}var Ys={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Kh(){I.call(this,"d")}p(Kh,I);function Qh(){I.call(this,"c")}p(Qh,I);var Ii={},II=null;function yu(){return II=II||new gt}Ii.Ia="serverreachability";function wI(c){I.call(this,Ii.Ia,c)}p(wI,I);function Js(c){let d=yu();Tt(d,new wI(d))}Ii.STAT_EVENT="statevent";function TI(c,d){I.call(this,Ii.STAT_EVENT,c),this.stat=d}p(TI,I);function Dt(c){let d=yu();Tt(d,new TI(d,c))}Ii.Ja="timingevent";function DI(c,d){I.call(this,Ii.Ja,c),this.size=d}p(DI,I);function Zs(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){c()},d)}function Xs(){this.g=!0}Xs.prototype.ua=function(){this.g=!1};function zN(c,d,h,g,D,b){c.info(function(){if(c.g)if(b){var k="",ne=b.split("&");for(let Me=0;Me<ne.length;Me++){var Je=ne[Me].split("=");if(Je.length>1){let it=Je[0];Je=Je[1];let kn=it.split("_");k=kn.length>=2&&kn[1]=="type"?k+(it+"="+Je+"&"):k+(it+"=redacted&")}}}else k=null;else k=b;return"XMLHTTP REQ ("+g+") [attempt "+D+"]: "+d+`
`+h+`
`+k})}function qN(c,d,h,g,D,b,k){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+D+"]: "+d+`
`+h+`
`+b+" "+k})}function wo(c,d,h,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+WN(c,h)+(g?" "+g:"")})}function GN(c,d){c.info(function(){return"TIMEOUT: "+d})}Xs.prototype.info=function(){};function WN(c,d){if(!c.g)return d;if(!d)return null;try{let b=JSON.parse(d);if(b){for(c=0;c<b.length;c++)if(Array.isArray(b[c])){var h=b[c];if(!(h.length<2)){var g=h[1];if(Array.isArray(g)&&!(g.length<1)){var D=g[0];if(D!="noop"&&D!="stop"&&D!="close")for(let k=1;k<g.length;k++)g[k]=""}}}}return Wh(b)}catch{return d}}var vu={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},CI={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},bI;function Yh(){}p(Yh,_I),Yh.prototype.g=function(){return new XMLHttpRequest},bI=new Yh;function ea(c){return encodeURIComponent(String(c))}function KN(c){var d=1;c=c.split(":");let h=[];for(;d>0&&c.length;)h.push(c.shift()),d--;return c.length&&h.push(c.join(":")),h}function Pr(c,d,h,g){this.j=c,this.i=d,this.l=h,this.S=g||1,this.V=new Qs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new SI}function SI(){this.i=null,this.g="",this.h=!1}var AI={},Jh={};function Zh(c,d,h){c.M=1,c.A=Eu(On(d)),c.u=h,c.R=!0,RI(c,null)}function RI(c,d){c.F=Date.now(),_u(c),c.B=On(c.A);var h=c.B,g=c.S;Array.isArray(g)||(g=[String(g)]),$I(h.i,"t",g),c.C=0,h=c.j.L,c.h=new SI,c.g=sw(c.j,h?d:null,!c.u),c.P>0&&(c.O=new BN(l(c.Y,c,c.g),c.P)),d=c.V,h=c.g,g=c.ba;var D="readystatechange";Array.isArray(D)||(D&&(yI[0]=D.toString()),D=yI);for(let b=0;b<D.length;b++){let k=dI(h,D[b],g||d.handleEvent,!1,d.h||d);if(!k)break;d.g[k.key]=k}d=c.J?cI(c.J):{},c.u?(c.v||(c.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,d)):(c.v="GET",c.g.ea(c.B,c.v,null,d)),Js(),zN(c.i,c.v,c.B,c.l,c.S,c.u)}Pr.prototype.ba=function(c){c=c.target;let d=this.O;d&&Lr(c)==3?d.j():this.Y(c)},Pr.prototype.Y=function(c){try{if(c==this.g)e:{let ne=Lr(this.g),Je=this.g.ya(),Me=this.g.ca();if(!(ne<3)&&(ne!=3||this.g&&(this.h.h||this.g.la()||QI(this.g)))){this.K||ne!=4||Je==7||(Je==8||Me<=0?Js(3):Js(2)),Xh(this);var d=this.g.ca();this.X=d;var h=QN(this);if(this.o=d==200,qN(this.i,this.v,this.B,this.l,this.S,ne,d),this.o){if(this.U&&!this.L){t:{if(this.g){var g,D=this.g;if((g=D.g?D.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(g)){var b=g;break t}}b=null}if(c=b)wo(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ep(this,c);else{this.o=!1,this.m=3,Dt(12),wi(this),ta(this);break e}}if(this.R){c=!0;let it;for(;!this.K&&this.C<h.length;)if(it=YN(this,h),it==Jh){ne==4&&(this.m=4,Dt(14),c=!1),wo(this.i,this.l,null,"[Incomplete Response]");break}else if(it==AI){this.m=4,Dt(15),wo(this.i,this.l,h,"[Invalid Chunk]"),c=!1;break}else wo(this.i,this.l,it,null),ep(this,it);if(NI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ne!=4||h.length!=0||this.h.h||(this.m=1,Dt(16),c=!1),this.o=this.o&&c,!c)wo(this.i,this.l,h,"[Invalid Chunked Response]"),wi(this),ta(this);else if(h.length>0&&!this.W){this.W=!0;var k=this.j;k.g==this&&k.aa&&!k.P&&(k.j.info("Great, no buffering proxy detected. Bytes received: "+h.length),ap(k),k.P=!0,Dt(11))}}else wo(this.i,this.l,h,null),ep(this,h);ne==4&&wi(this),this.o&&!this.K&&(ne==4?nw(this.j,this):(this.o=!1,_u(this)))}else lM(this.g),d==400&&h.indexOf("Unknown SID")>0?(this.m=3,Dt(12)):(this.m=0,Dt(13)),wi(this),ta(this)}}}catch{}finally{}};function QN(c){if(!NI(c))return c.g.la();let d=QI(c.g);if(d==="")return"";let h="",g=d.length,D=Lr(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return wi(c),ta(c),"";c.h.i=new s.TextDecoder}for(let b=0;b<g;b++)c.h.h=!0,h+=c.h.i.decode(d[b],{stream:!(D&&b==g-1)});return d.length=0,c.h.g+=h,c.C=0,c.h.g}function NI(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function YN(c,d){var h=c.C,g=d.indexOf(`
`,h);return g==-1?Jh:(h=Number(d.substring(h,g)),isNaN(h)?AI:(g+=1,g+h>d.length?Jh:(d=d.slice(g,g+h),c.C=g+h,d)))}Pr.prototype.cancel=function(){this.K=!0,wi(this)};function _u(c){c.T=Date.now()+c.H,MI(c,c.H)}function MI(c,d){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Zs(l(c.aa,c),d)}function Xh(c){c.D&&(s.clearTimeout(c.D),c.D=null)}Pr.prototype.aa=function(){this.D=null;let c=Date.now();c-this.T>=0?(GN(this.i,this.B),this.M!=2&&(Js(),Dt(17)),wi(this),this.m=2,ta(this)):MI(this,this.T-c)};function ta(c){c.j.I==0||c.K||nw(c.j,c)}function wi(c){Xh(c);var d=c.O;d&&typeof d.dispose=="function"&&d.dispose(),c.O=null,vI(c.V),c.g&&(d=c.g,c.g=null,d.abort(),d.dispose())}function ep(c,d){try{var h=c.j;if(h.I!=0&&(h.g==c||tp(h.h,c))){if(!c.L&&tp(h.h,c)&&h.I==3){try{var g=h.Ba.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var D=g;if(D[0]==0){e:if(!h.v){if(h.g)if(h.g.F+3e3<c.F)bu(h),Du(h);else break e;sp(h),Dt(18)}}else h.xa=D[1],0<h.xa-h.K&&D[2]<37500&&h.F&&h.A==0&&!h.C&&(h.C=Zs(l(h.Va,h),6e3));OI(h.h)<=1&&h.ta&&(h.ta=void 0)}else Di(h,11)}else if((c.L||h.g==c)&&bu(h),!_(d))for(D=h.Ba.g.parse(d),d=0;d<D.length;d++){let Me=D[d],it=Me[0];if(!(it<=h.K))if(h.K=it,Me=Me[1],h.I==2)if(Me[0]=="c"){h.M=Me[1],h.ba=Me[2];let kn=Me[3];kn!=null&&(h.ka=kn,h.j.info("VER="+h.ka));let Ci=Me[4];Ci!=null&&(h.za=Ci,h.j.info("SVER="+h.za));let Fr=Me[5];Fr!=null&&typeof Fr=="number"&&Fr>0&&(g=1.5*Fr,h.O=g,h.j.info("backChannelRequestTimeoutMs_="+g)),g=h;let Vr=c.g;if(Vr){let Au=Vr.g?Vr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Au){var b=g.h;b.g||Au.indexOf("spdy")==-1&&Au.indexOf("quic")==-1&&Au.indexOf("h2")==-1||(b.j=b.l,b.g=new Set,b.h&&(np(b,b.h),b.h=null))}if(g.G){let cp=Vr.g?Vr.g.getResponseHeader("X-HTTP-Session-Id"):null;cp&&(g.wa=cp,Oe(g.J,g.G,cp))}}h.I=3,h.l&&h.l.ra(),h.aa&&(h.T=Date.now()-c.F,h.j.info("Handshake RTT: "+h.T+"ms")),g=h;var k=c;if(g.na=ow(g,g.L?g.ba:null,g.W),k.L){kI(g.h,k);var ne=k,Je=g.O;Je&&(ne.H=Je),ne.D&&(Xh(ne),_u(ne)),g.g=k}else ew(g);h.i.length>0&&Cu(h)}else Me[0]!="stop"&&Me[0]!="close"||Di(h,7);else h.I==3&&(Me[0]=="stop"||Me[0]=="close"?Me[0]=="stop"?Di(h,7):op(h):Me[0]!="noop"&&h.l&&h.l.qa(Me),h.A=0)}}Js(4)}catch{}}var JN=class{constructor(c,d){this.g=c,this.map=d}};function xI(c){this.l=c||10,s.PerformanceNavigationTiming?(c=s.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function PI(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function OI(c){return c.h?1:c.g?c.g.size:0}function tp(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function np(c,d){c.g?c.g.add(d):c.h=d}function kI(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}xI.prototype.cancel=function(){if(this.i=LI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function LI(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let h of c.g.values())d=d.concat(h.G);return d}return y(c.i)}var FI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ZN(c,d){if(c){c=c.split("&");for(let h=0;h<c.length;h++){let g=c[h].indexOf("="),D,b=null;g>=0?(D=c[h].substring(0,g),b=c[h].substring(g+1)):D=c[h],d(D,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function Or(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;c instanceof Or?(this.l=c.l,na(this,c.j),this.o=c.o,this.g=c.g,ra(this,c.u),this.h=c.h,rp(this,HI(c.i)),this.m=c.m):c&&(d=String(c).match(FI))?(this.l=!1,na(this,d[1]||"",!0),this.o=ia(d[2]||""),this.g=ia(d[3]||"",!0),ra(this,d[4]),this.h=ia(d[5]||"",!0),rp(this,d[6]||"",!0),this.m=ia(d[7]||"")):(this.l=!1,this.i=new sa(null,this.l))}Or.prototype.toString=function(){let c=[];var d=this.j;d&&c.push(oa(d,VI,!0),":");var h=this.g;return(h||d=="file")&&(c.push("//"),(d=this.o)&&c.push(oa(d,VI,!0),"@"),c.push(ea(h).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.u,h!=null&&c.push(":",String(h))),(h=this.h)&&(this.g&&h.charAt(0)!="/"&&c.push("/"),c.push(oa(h,h.charAt(0)=="/"?tM:eM,!0))),(h=this.i.toString())&&c.push("?",h),(h=this.m)&&c.push("#",oa(h,rM)),c.join("")},Or.prototype.resolve=function(c){let d=On(this),h=!!c.j;h?na(d,c.j):h=!!c.o,h?d.o=c.o:h=!!c.g,h?d.g=c.g:h=c.u!=null;var g=c.h;if(h)ra(d,c.u);else if(h=!!c.h){if(g.charAt(0)!="/")if(this.g&&!this.h)g="/"+g;else{var D=d.h.lastIndexOf("/");D!=-1&&(g=d.h.slice(0,D+1)+g)}if(D=g,D==".."||D==".")g="";else if(D.indexOf("./")!=-1||D.indexOf("/.")!=-1){g=D.lastIndexOf("/",0)==0,D=D.split("/");let b=[];for(let k=0;k<D.length;){let ne=D[k++];ne=="."?g&&k==D.length&&b.push(""):ne==".."?((b.length>1||b.length==1&&b[0]!="")&&b.pop(),g&&k==D.length&&b.push("")):(b.push(ne),g=!0)}g=b.join("/")}else g=D}return h?d.h=g:h=c.i.toString()!=="",h?rp(d,HI(c.i)):h=!!c.m,h&&(d.m=c.m),d};function On(c){return new Or(c)}function na(c,d,h){c.j=h?ia(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function ra(c,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);c.u=d}else c.u=null}function rp(c,d,h){d instanceof sa?(c.i=d,iM(c.i,c.l)):(h||(d=oa(d,nM)),c.i=new sa(d,c.l))}function Oe(c,d,h){c.i.set(d,h)}function Eu(c){return Oe(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function ia(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function oa(c,d,h){return typeof c=="string"?(c=encodeURI(c).replace(d,XN),h&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function XN(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var VI=/[#\/\?@]/g,eM=/[#\?:]/g,tM=/[#\?]/g,nM=/[#\?@]/g,rM=/#/g;function sa(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Ti(c){c.g||(c.g=new Map,c.h=0,c.i&&ZN(c.i,function(d,h){c.add(decodeURIComponent(d.replace(/\+/g," ")),h)}))}t=sa.prototype,t.add=function(c,d){Ti(this),this.i=null,c=To(this,c);let h=this.g.get(c);return h||this.g.set(c,h=[]),h.push(d),this.h+=1,this};function jI(c,d){Ti(c),d=To(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function UI(c,d){return Ti(c),d=To(c,d),c.g.has(d)}t.forEach=function(c,d){Ti(this),this.g.forEach(function(h,g){h.forEach(function(D){c.call(d,D,g,this)},this)},this)};function BI(c,d){Ti(c);let h=[];if(typeof d=="string")UI(c,d)&&(h=h.concat(c.g.get(To(c,d))));else for(c=Array.from(c.g.values()),d=0;d<c.length;d++)h=h.concat(c[d]);return h}t.set=function(c,d){return Ti(this),this.i=null,c=To(this,c),UI(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=BI(this,c),c.length>0?String(c[0]):d):d};function $I(c,d,h){jI(c,d),h.length>0&&(c.i=null,c.g.set(To(c,d),y(h)),c.h+=h.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(let g=0;g<d.length;g++){var h=d[g];let D=ea(h);h=BI(this,h);for(let b=0;b<h.length;b++){let k=D;h[b]!==""&&(k+="="+ea(h[b])),c.push(k)}}return this.i=c.join("&")};function HI(c){let d=new sa;return d.i=c.i,c.g&&(d.g=new Map(c.g),d.h=c.h),d}function To(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function iM(c,d){d&&!c.j&&(Ti(c),c.i=null,c.g.forEach(function(h,g){let D=g.toLowerCase();g!=D&&(jI(this,g),$I(this,D,h))},c)),c.j=d}function oM(c,d){let h=new Xs;if(s.Image){let g=new Image;g.onload=f(kr,h,"TestLoadImage: loaded",!0,d,g),g.onerror=f(kr,h,"TestLoadImage: error",!1,d,g),g.onabort=f(kr,h,"TestLoadImage: abort",!1,d,g),g.ontimeout=f(kr,h,"TestLoadImage: timeout",!1,d,g),s.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function sM(c,d){let h=new Xs,g=new AbortController,D=setTimeout(()=>{g.abort(),kr(h,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(b=>{clearTimeout(D),b.ok?kr(h,"TestPingServer: ok",!0,d):kr(h,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(D),kr(h,"TestPingServer: error",!1,d)})}function kr(c,d,h,g,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),g(h)}catch{}}function aM(){this.g=new HN}function Iu(c){this.i=c.Sb||null,this.h=c.ab||!1}p(Iu,_I),Iu.prototype.g=function(){return new wu(this.i,this.h)};function wu(c,d){gt.call(this),this.H=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(wu,gt),t=wu.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=d,this.readyState=1,ca(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(d.body=c),(this.H||s).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,aa(this)),this.readyState=0},t.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ca(this)),this.g&&(this.readyState=3,ca(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;zI(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function zI(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}t.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?aa(this):ca(this),this.readyState==3&&zI(this)}},t.Oa=function(c){this.g&&(this.response=this.responseText=c,aa(this))},t.Na=function(c){this.g&&(this.response=c,aa(this))},t.ga=function(){this.g&&aa(this)};function aa(c){c.readyState=4,c.l=null,c.j=null,c.B=null,ca(c)}t.setRequestHeader=function(c,d){this.A.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var h=d.next();!h.done;)h=h.value,c.push(h[0]+": "+h[1]),h=d.next();return c.join(`\r
`)};function ca(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(wu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function qI(c){let d="";return pu(c,function(h,g){d+=g,d+=":",d+=h,d+=`\r
`}),d}function ip(c,d,h){e:{for(g in h){var g=!1;break e}g=!0}g||(h=qI(h),typeof c=="string"?h!=null&&ea(h):Oe(c,d,h))}function je(c){gt.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(je,gt);var cM=/^https?$/i,uM=["POST","PUT"];t=je.prototype,t.Fa=function(c){this.H=c},t.ea=function(c,d,h,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():bI.g(),this.g.onreadystatechange=m(l(this.Ca,this));try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(b){GI(this,b);return}if(c=h||"",h=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var D in g)h.set(D,g[D]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let b of g.keys())h.set(b,g.get(b));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(h.keys()).find(b=>b.toLowerCase()=="content-type"),D=s.FormData&&c instanceof s.FormData,!(Array.prototype.indexOf.call(uM,d,void 0)>=0)||g||D||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[b,k]of h)this.g.setRequestHeader(b,k);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(b){GI(this,b)}};function GI(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.o=5,WI(c),Tu(c)}function WI(c){c.A||(c.A=!0,Tt(c,"complete"),Tt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,Tt(this,"complete"),Tt(this,"abort"),Tu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Tu(this,!0)),je.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?KI(this):this.Xa())},t.Xa=function(){KI(this)};function KI(c){if(c.h&&typeof o<"u"){if(c.v&&Lr(c)==4)setTimeout(c.Ca.bind(c),0);else if(Tt(c,"readystatechange"),Lr(c)==4){c.h=!1;try{let b=c.ca();e:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var h;if(!(h=d)){var g;if(g=b===0){let k=String(c.D).match(FI)[1]||null;!k&&s.self&&s.self.location&&(k=s.self.location.protocol.slice(0,-1)),g=!cM.test(k?k.toLowerCase():"")}h=g}if(h)Tt(c,"complete"),Tt(c,"success");else{c.o=6;try{var D=Lr(c)>2?c.g.statusText:""}catch{D=""}c.l=D+" ["+c.ca()+"]",WI(c)}}finally{Tu(c)}}}}function Tu(c,d){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);let h=c.g;c.g=null,d||Tt(c,"ready");try{h.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Lr(c){return c.g?c.g.readyState:0}t.ca=function(){try{return Lr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),$N(d)}};function QI(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function lM(c){let d={};c=(c.g&&Lr(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(_(c[g]))continue;var h=KN(c[g]);let D=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let b=d[D]||[];d[D]=b,b.push(h)}FN(d,function(g){return g.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ua(c,d,h){return h&&h.internalChannelParams&&h.internalChannelParams[c]||d}function YI(c){this.za=0,this.i=[],this.j=new Xs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ua("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ua("baseRetryDelayMs",5e3,c),this.Za=ua("retryDelaySeedMs",1e4,c),this.Ta=ua("forwardChannelMaxRetries",2,c),this.va=ua("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new xI(c&&c.concurrentRequestLimit),this.Ba=new aM,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=YI.prototype,t.ka=8,t.I=1,t.connect=function(c,d,h,g){Dt(0),this.W=c,this.H=d||{},h&&g!==void 0&&(this.H.OSID=h,this.H.OAID=g),this.F=this.X,this.J=ow(this,null,this.W),Cu(this)};function op(c){if(JI(c),c.I==3){var d=c.V++,h=On(c.J);if(Oe(h,"SID",c.M),Oe(h,"RID",d),Oe(h,"TYPE","terminate"),la(c,h),d=new Pr(c,c.j,d),d.M=2,d.A=Eu(On(h)),h=!1,s.navigator&&s.navigator.sendBeacon)try{h=s.navigator.sendBeacon(d.A.toString(),"")}catch{}!h&&s.Image&&(new Image().src=d.A,h=!0),h||(d.g=sw(d.j,null),d.g.ea(d.A)),d.F=Date.now(),_u(d)}iw(c)}function Du(c){c.g&&(ap(c),c.g.cancel(),c.g=null)}function JI(c){Du(c),c.v&&(s.clearTimeout(c.v),c.v=null),bu(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&s.clearTimeout(c.m),c.m=null)}function Cu(c){if(!PI(c.h)&&!c.m){c.m=!0;var d=c.Ea;kt||v(),rt||(kt(),rt=!0),w.add(d,c),c.D=0}}function dM(c,d){return OI(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=d.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Zs(l(c.Ea,c,d),rw(c,c.D)),c.D++,!0)}t.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;let D=new Pr(this,this.j,c),b=this.o;if(this.U&&(b?(b=cI(b),lI(b,this.U)):b=this.U),this.u!==null||this.R||(D.J=b,b=null),this.S)e:{for(var d=0,h=0;h<this.i.length;h++){t:{var g=this.i[h];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,d>4096){d=h;break e}if(d===4096||h===this.i.length-1){d=h+1;break e}}d=1e3}else d=1e3;d=XI(this,D,d),h=On(this.J),Oe(h,"RID",c),Oe(h,"CVER",22),this.G&&Oe(h,"X-HTTP-Session-Id",this.G),la(this,h),b&&(this.R?d="headers="+ea(qI(b))+"&"+d:this.u&&ip(h,this.u,b)),np(this.h,D),this.Ra&&Oe(h,"TYPE","init"),this.S?(Oe(h,"$req",d),Oe(h,"SID","null"),D.U=!0,Zh(D,h,null)):Zh(D,h,d),this.I=2}}else this.I==3&&(c?ZI(this,c):this.i.length==0||PI(this.h)||ZI(this))};function ZI(c,d){var h;d?h=d.l:h=c.V++;let g=On(c.J);Oe(g,"SID",c.M),Oe(g,"RID",h),Oe(g,"AID",c.K),la(c,g),c.u&&c.o&&ip(g,c.u,c.o),h=new Pr(c,c.j,h,c.D+1),c.u===null&&(h.J=c.o),d&&(c.i=d.G.concat(c.i)),d=XI(c,h,1e3),h.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),np(c.h,h),Zh(h,g,d)}function la(c,d){c.H&&pu(c.H,function(h,g){Oe(d,g,h)}),c.l&&pu({},function(h,g){Oe(d,g,h)})}function XI(c,d,h){h=Math.min(c.i.length,h);let g=c.l?l(c.l.Ka,c.l,c):null;e:{var D=c.i;let ne=-1;for(;;){let Je=["count="+h];ne==-1?h>0?(ne=D[0].g,Je.push("ofs="+ne)):ne=0:Je.push("ofs="+ne);let Me=!0;for(let it=0;it<h;it++){var b=D[it].g;let kn=D[it].map;if(b-=ne,b<0)ne=Math.max(0,D[it].g-100),Me=!1;else try{b="req"+b+"_"||"";try{var k=kn instanceof Map?kn:Object.entries(kn);for(let[Ci,Fr]of k){let Vr=Fr;a(Fr)&&(Vr=Wh(Fr)),Je.push(b+Ci+"="+encodeURIComponent(Vr))}}catch(Ci){throw Je.push(b+"type="+encodeURIComponent("_badmap")),Ci}}catch{g&&g(kn)}}if(Me){k=Je.join("&");break e}}k=void 0}return c=c.i.splice(0,h),d.G=c,k}function ew(c){if(!c.g&&!c.v){c.Y=1;var d=c.Da;kt||v(),rt||(kt(),rt=!0),w.add(d,c),c.A=0}}function sp(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Zs(l(c.Da,c),rw(c,c.A)),c.A++,!0)}t.Da=function(){if(this.v=null,tw(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Zs(l(this.Wa,this),c)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Dt(10),Du(this),tw(this))};function ap(c){c.B!=null&&(s.clearTimeout(c.B),c.B=null)}function tw(c){c.g=new Pr(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var d=On(c.na);Oe(d,"RID","rpc"),Oe(d,"SID",c.M),Oe(d,"AID",c.K),Oe(d,"CI",c.F?"0":"1"),!c.F&&c.ia&&Oe(d,"TO",c.ia),Oe(d,"TYPE","xmlhttp"),la(c,d),c.u&&c.o&&ip(d,c.u,c.o),c.O&&(c.g.H=c.O);var h=c.g;c=c.ba,h.M=1,h.A=Eu(On(d)),h.u=null,h.R=!0,RI(h,c)}t.Va=function(){this.C!=null&&(this.C=null,Du(this),sp(this),Dt(19))};function bu(c){c.C!=null&&(s.clearTimeout(c.C),c.C=null)}function nw(c,d){var h=null;if(c.g==d){bu(c),ap(c),c.g=null;var g=2}else if(tp(c.h,d))h=d.G,kI(c.h,d),g=1;else return;if(c.I!=0){if(d.o)if(g==1){h=d.u?d.u.length:0,d=Date.now()-d.F;var D=c.D;g=yu(),Tt(g,new DI(g,h)),Cu(c)}else ew(c);else if(D=d.m,D==3||D==0&&d.X>0||!(g==1&&dM(c,d)||g==2&&sp(c)))switch(h&&h.length>0&&(d=c.h,d.i=d.i.concat(h)),D){case 1:Di(c,5);break;case 4:Di(c,10);break;case 3:Di(c,6);break;default:Di(c,2)}}}function rw(c,d){let h=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(h*=2),h*d}function Di(c,d){if(c.j.info("Error code "+d),d==2){var h=l(c.bb,c),g=c.Ua;let D=!g;g=new Or(g||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||na(g,"https"),Eu(g),D?oM(g.toString(),h):sM(g.toString(),h)}else Dt(2);c.I=0,c.l&&c.l.pa(d),iw(c),JI(c)}t.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Dt(2)):(this.j.info("Failed to ping google.com"),Dt(1))};function iw(c){if(c.I=0,c.ja=[],c.l){let d=LI(c.h);(d.length!=0||c.i.length!=0)&&(S(c.ja,d),S(c.ja,c.i),c.h.i.length=0,y(c.i),c.i.length=0),c.l.oa()}}function ow(c,d,h){var g=h instanceof Or?On(h):new Or(h);if(g.g!="")d&&(g.g=d+"."+g.g),ra(g,g.u);else{var D=s.location;g=D.protocol,d=d?d+"."+D.hostname:D.hostname,D=+D.port;let b=new Or(null);g&&na(b,g),d&&(b.g=d),D&&ra(b,D),h&&(b.h=h),g=b}return h=c.G,d=c.wa,h&&d&&Oe(g,h,d),Oe(g,"VER",c.ka),la(c,g),g}function sw(c,d,h){if(d&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Aa&&!c.ma?new je(new Iu({ab:h})):new je(c.ma),d.Fa(c.L),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function aw(){}t=aw.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Su(){}Su.prototype.g=function(c,d){return new zt(c,d)};function zt(c,d){gt.call(this),this.g=new YI(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(c?c["X-WebChannel-Client-Profile"]=d.sa:c={"X-WebChannel-Client-Profile":d.sa}),this.g.U=c,(c=d&&d.Qb)&&!_(c)&&(this.g.u=c),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!_(d)&&(this.g.G=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Do(this)}p(zt,gt),zt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},zt.prototype.close=function(){op(this.g)},zt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var h={};h.__data__=c,c=h}else this.v&&(h={},h.__data__=Wh(c),c=h);d.i.push(new JN(d.Ya++,c)),d.I==3&&Cu(d)},zt.prototype.N=function(){this.g.l=null,delete this.j,op(this.g),delete this.g,zt.Z.N.call(this)};function cw(c){Kh.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let h in d){c=h;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}p(cw,Kh);function uw(){Qh.call(this),this.status=1}p(uw,Qh);function Do(c){this.g=c}p(Do,aw),Do.prototype.ra=function(){Tt(this.g,"a")},Do.prototype.qa=function(c){Tt(this.g,new cw(c))},Do.prototype.pa=function(c){Tt(this.g,new uw)},Do.prototype.oa=function(){Tt(this.g,"b")},Su.prototype.createWebChannel=Su.prototype.g,zt.prototype.send=zt.prototype.o,zt.prototype.open=zt.prototype.m,zt.prototype.close=zt.prototype.close,_v=Tr.createWebChannelTransport=function(){return new Su},vv=Tr.getStatEventTarget=function(){return yu()},yv=Tr.Event=Ii,yf=Tr.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},vu.NO_ERROR=0,vu.TIMEOUT=8,vu.HTTP_ERROR=6,jc=Tr.ErrorCode=vu,CI.COMPLETE="complete",mv=Tr.EventType=CI,EI.EventType=Ys,Ys.OPEN="a",Ys.CLOSE="b",Ys.ERROR="c",Ys.MESSAGE="d",gt.prototype.listen=gt.prototype.J,ys=Tr.WebChannel=EI,F2=Tr.FetchXmlHttpFactory=Iu,je.prototype.listenOnce=je.prototype.K,je.prototype.getLastError=je.prototype.Ha,je.prototype.getLastErrorCode=je.prototype.ya,je.prototype.getStatus=je.prototype.ca,je.prototype.getResponseJson=je.prototype.La,je.prototype.getResponseText=je.prototype.la,je.prototype.send=je.prototype.ea,je.prototype.setWithCredentials=je.prototype.Fa,gv=Tr.XhrIo=je}).apply(typeof mf<"u"?mf:typeof self<"u"?self:typeof window<"u"?window:{});var f0="@firebase/firestore",h0="4.9.2";var lt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};lt.UNAUTHENTICATED=new lt(null),lt.GOOGLE_CREDENTIALS=new lt("google-credentials-uid"),lt.FIRST_PARTY=new lt("first-party-uid"),lt.MOCK_USER=new lt("mock-user");var $s="12.3.0";var co=new ni("@firebase/firestore");function vs(){return co.logLevel}function F(t,...e){if(co.logLevel<=fe.DEBUG){let n=e.map(uE);co.debug(`Firestore (${$s}): ${t}`,...n)}}function Dr(t,...e){if(co.logLevel<=fe.ERROR){let n=e.map(uE);co.error(`Firestore (${$s}): ${t}`,...n)}}function As(t,...e){if(co.logLevel<=fe.WARN){let n=e.map(uE);co.warn(`Firestore (${$s}): ${t}`,...n)}}function uE(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function z(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,X0(t,r,n)}function X0(t,e,n){let r=`FIRESTORE (${$s}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Dr(r),new Error(r)}function be(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||X0(e,i,r)}function Z(t,e){return t}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},V=class extends Zt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var tr=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Df=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Cv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(lt.UNAUTHENTICATED))}shutdown(){}},bv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Sv=class{constructor(e){this.t=e,this.currentUser=lt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){be(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new tr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new tr,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new tr)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(be(typeof r.accessToken=="string",31837,{l:r}),new Df(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return be(e===null||typeof e=="string",2055,{h:e}),new lt(e)}},Av=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=lt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},Rv=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Av(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(lt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Cf=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Nv=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,en(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){be(this.o===void 0,3512);let r=o=>{o.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,F("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Cf(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(be(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Cf(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function V2(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var qc=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=V2(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function pe(t,e){return t<e?-1:t>e?1:0}function Mv(t,e){let n=Math.min(t.length,e.length);for(let r=0;r<n;r++){let i=t.charAt(r),o=e.charAt(r);if(i!==o)return Ev(i)===Ev(o)?pe(i,o):Ev(i)?1:-1}return pe(t.length,e.length)}var j2=55296,U2=57343;function Ev(t){let e=t.charCodeAt(0);return e>=j2&&e<=U2}function Rs(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var p0="__name__",bf=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&z(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&z(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return pe(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):Mv(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return wr.fromString(e.substring(4,e.length-2))}},Ve=class t extends bf{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new V(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},B2=/^[_a-zA-Z][_a-zA-Z0-9]*$/,tn=class t extends bf{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return B2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===p0}static keyField(){return new t([p0])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new V(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new V(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new V(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new V(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var B=class t{constructor(e){this.path=e}static fromPath(e){return new t(Ve.fromString(e))}static fromName(e){return new t(Ve.fromString(e).popFirst(5))}static empty(){return new t(Ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ve.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Ve(e.slice()))}};function eA(t,e,n){if(!n)throw new V(N.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function $2(t,e,n,r){if(e===!0&&r===!0)throw new V(N.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function g0(t){if(!B.isDocumentKey(t))throw new V(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function m0(t){if(B.isDocumentKey(t))throw new V(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function tA(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function lE(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":z(12329,{type:typeof t})}function Gc(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new V(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=lE(t);throw new V(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Qe(t,e){let n={typeString:t};return e&&(n.value=e),n}function iu(t,e){if(!tA(t))throw new V(N.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new V(N.INVALID_ARGUMENT,n);return!0}var y0=-62135596800,v0=1e6,Ye=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*v0);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new V(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new V(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<y0)throw new V(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new V(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/v0}_compareTo(e){return this.seconds===e.seconds?pe(this.nanoseconds,e.nanoseconds):pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(iu(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-y0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Ye._jsonSchemaVersion="firestore/timestamp/1.0",Ye._jsonSchema={type:Qe("string",Ye._jsonSchemaVersion),seconds:Qe("number"),nanoseconds:Qe("number")};var ee=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new Ye(0,0))}static max(){return new t(new Ye(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Wc=-1,xv=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};xv.UNKNOWN_ID=-1;function H2(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ee.fromTimestamp(r===1e9?new Ye(n+1,0):new Ye(n,r));return new uo(i,B.empty(),e)}function z2(t){return new uo(t.readTime,t.key,Wc)}var uo=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(ee.min(),B.empty(),Wc)}static max(){return new t(ee.max(),B.empty(),Wc)}};function q2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=B.comparator(t.documentKey,e.documentKey),n!==0?n:pe(t.largestBatchId,e.largestBatchId))}var G2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Pv=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function Hs(t){if(t.code!==N.FAILED_PRECONDITION||t.message!==G2)throw t;F("LocalStore","Unexpectedly lost primary lease")}var x=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&z(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(f=>{s[l]=f,++a,a===o&&r(s)},f=>i(f))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function W2(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function zs(t){return t.name==="IndexedDbTransactionError"}var dE=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ue&&this.ue(n),n}}t.ce=-1;return t})(),fE=-1;function eh(t){return t==null}function Kc(t){return t===0&&1/t==-1/0}function K2(t){return typeof t=="number"&&Number.isInteger(t)&&!Kc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var nA="";function Q2(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=_0(e)),e=Y2(t.get(n),e);return _0(e)}function Y2(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case nA:n+="";break;default:n+=o}}return n}function _0(t){return t+nA+""}var J2="remoteDocuments",rA="owner";var iA="mutationQueues";var oA="mutations";var sA="documentMutations",Z2="remoteDocumentsV14";var aA="remoteDocumentGlobal";var cA="targets";var uA="targetDocuments";var lA="targetGlobal",dA="collectionParents";var fA="clientMetadata";var hA="bundles";var pA="namedQueries";var X2="indexConfiguration";var ej="indexState";var tj="indexEntries";var gA="documentOverlays";var nj="globals";var rj=[iA,oA,sA,J2,cA,rA,lA,uA,fA,aA,dA,hA,pA],pX=[...rj,gA],ij=[iA,oA,sA,Z2,cA,rA,lA,uA,fA,aA,dA,hA,pA,gA],oj=ij,sj=[...oj,X2,ej,tj];var gX=[...sj,nj];function E0(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function mo(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function mA(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Be=class t{constructor(e,n){this.comparator=e,this.root=n||nr.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,nr.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ws(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ws(this.root,e,this.comparator,!1)}getReverseIterator(){return new ws(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ws(this.root,e,this.comparator,!0)}},ws=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},nr=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw z(43730,{key:this.key,value:this.value});if(this.right.isRed())throw z(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw z(27949);return e+(this.isRed()?0:1)}};nr.EMPTY=null,nr.RED=!0,nr.BLACK=!1;nr.EMPTY=new class{constructor(){this.size=0}get key(){throw z(57766)}get value(){throw z(16141)}get color(){throw z(16727)}get left(){throw z(29726)}get right(){throw z(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new nr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var dt=class t{constructor(e){this.comparator=e,this.data=new Be(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Sf(this.data.getIterator())}getIteratorFrom(e){return new Sf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Sf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var er=class t{constructor(e){this.fields=e,e.sort(tn.comparator)}static empty(){return new t([])}unionWith(e){let n=new dt(tn.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Rs(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Af=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var It=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Af("Invalid base64 string: "+o):o}})(e);return new t(n)}static fromUint8Array(e){let n=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};It.EMPTY_BYTE_STRING=new It("");var aj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cr(t){if(be(!!t,39018),typeof t=="string"){let e=0,n=aj.exec(t);if(be(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Fe(t.seconds),nanos:Fe(t.nanos)}}function Fe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function br(t){return typeof t=="string"?It.fromBase64String(t):It.fromUint8Array(t)}var yA="server_timestamp",vA="__type__",_A="__previous_value__",EA="__local_write_time__";function hE(t){return(t?.mapValue?.fields||{})[vA]?.stringValue===yA}function th(t){let e=t.mapValue.fields[_A];return hE(e)?th(e):e}function Qc(t){let e=Cr(t.mapValue.fields[EA].timestampValue);return new Ye(e.seconds,e.nanos)}var Ov=class{constructor(e,n,r,i,o,s,a,u,l,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=f}},Rf="(default)",Nf=class t{constructor(e,n){this.projectId=e,this.database=n||Rf}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===Rf}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var pE="__type__",IA="__max__",vf={mapValue:{fields:{__type__:{stringValue:IA}}}},gE="__vector__",Ns="value";function di(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?hE(t)?4:TA(t)?9007199254740991:wA(t)?10:11:z(28295,{value:t})}function or(t,e){if(t===e)return!0;let n=di(t);if(n!==di(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Qc(t).isEqual(Qc(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Cr(i.timestampValue),a=Cr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,o){return br(i.bytesValue).isEqual(br(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,o){return Fe(i.geoPointValue.latitude)===Fe(o.geoPointValue.latitude)&&Fe(i.geoPointValue.longitude)===Fe(o.geoPointValue.longitude)})(t,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Fe(i.integerValue)===Fe(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Fe(i.doubleValue),a=Fe(o.doubleValue);return s===a?Kc(s)===Kc(a):isNaN(s)&&isNaN(a)}return!1})(t,e);case 9:return Rs(t.arrayValue.values||[],e.arrayValue.values||[],or);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(E0(s)!==E0(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!or(s[u],a[u])))return!1;return!0})(t,e);default:return z(52216,{left:t})}}function Yc(t,e){return(t.values||[]).find(n=>or(n,e))!==void 0}function Ms(t,e){if(t===e)return 0;let n=di(t),r=di(e);if(n!==r)return pe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return pe(t.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=Fe(o.integerValue||o.doubleValue),u=Fe(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1})(t,e);case 3:return I0(t.timestampValue,e.timestampValue);case 4:return I0(Qc(t),Qc(e));case 5:return Mv(t.stringValue,e.stringValue);case 6:return(function(o,s){let a=br(o),u=br(s);return a.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let f=pe(a[l],u[l]);if(f!==0)return f}return pe(a.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=pe(Fe(o.latitude),Fe(s.latitude));return a!==0?a:pe(Fe(o.longitude),Fe(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return w0(t.arrayValue,e.arrayValue);case 10:return(function(o,s){let a=o.fields||{},u=s.fields||{},l=a[Ns]?.arrayValue,f=u[Ns]?.arrayValue,p=pe(l?.values?.length||0,f?.values?.length||0);return p!==0?p:w0(l,f)})(t.mapValue,e.mapValue);case 11:return(function(o,s){if(o===vf.mapValue&&s===vf.mapValue)return 0;if(o===vf.mapValue)return 1;if(s===vf.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},f=Object.keys(l);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){let m=Mv(u[p],f[p]);if(m!==0)return m;let y=Ms(a[u[p]],l[f[p]]);if(y!==0)return y}return pe(u.length,f.length)})(t.mapValue,e.mapValue);default:throw z(23264,{he:n})}}function I0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return pe(t,e);let n=Cr(t),r=Cr(e),i=pe(n.seconds,r.seconds);return i!==0?i:pe(n.nanos,r.nanos)}function w0(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=Ms(n[i],r[i]);if(o)return o}return pe(n.length,r.length)}function xs(t){return kv(t)}function kv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){let r=Cr(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return br(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return B.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=kv(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${kv(n.fields[s])}`;return i+"}"})(t.mapValue):z(61005,{value:t})}function If(t){switch(di(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=th(t);return e?16+If(e):16;case 5:return 2*t.stringValue.length;case 6:return br(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+If(o),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return mo(r.fields,(o,s)=>{i+=o.length+If(s)}),i})(t.mapValue);default:throw z(13486,{value:t})}}function Lv(t){return!!t&&"integerValue"in t}function mE(t){return!!t&&"arrayValue"in t}function T0(t){return!!t&&"nullValue"in t}function D0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function wf(t){return!!t&&"mapValue"in t}function wA(t){return(t?.mapValue?.fields||{})[pE]?.stringValue===gE}function Bc(t){if(t.geoPointValue)return{geoPointValue:M({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:M({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return mo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Bc(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Bc(t.arrayValue.values[n]);return e}return M({},t)}function TA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===IA}var yX={mapValue:{fields:{[pE]:{stringValue:gE},[Ns]:{arrayValue:{}}}}};var xn=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!wf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bc(n)}setAll(e){let n=tn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=Bc(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());wf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return or(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];wf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){mo(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(Bc(this.value))}};function DA(t){let e=[];return mo(t.fields,(n,r)=>{let i=new tn([n]);if(wf(r)){let o=DA(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new er(e)}var Pn=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,ee.min(),ee.min(),ee.min(),xn.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,ee.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,ee.min(),ee.min(),xn.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,ee.min(),ee.min(),xn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ps=class{constructor(e,n){this.position=e,this.inclusive=n}};function C0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=B.comparator(B.fromName(s.referenceValue),n.key):r=Ms(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function b0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!or(t.position[n],e.position[n]))return!1;return!0}var Os=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function cj(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Mf=class{},nt=class t extends Mf{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Vv(e,n,r):n==="array-contains"?new Bv(e,r):n==="in"?new $v(e,r):n==="not-in"?new Hv(e,r):n==="array-contains-any"?new zv(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new jv(e,r):new Uv(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ms(n,this.value)):n!==null&&di(this.value)===di(n)&&this.matchesComparison(Ms(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return z(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},sr=class t extends Mf{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new t(e,n)}matches(e){return CA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function CA(t){return t.op==="and"}function bA(t){return uj(t)&&CA(t)}function uj(t){for(let e of t.filters)if(e instanceof sr)return!1;return!0}function Fv(t){if(t instanceof nt)return t.field.canonicalString()+t.op.toString()+xs(t.value);if(bA(t))return t.filters.map(e=>Fv(e)).join(",");{let e=t.filters.map(n=>Fv(n)).join(",");return`${t.op}(${e})`}}function SA(t,e){return t instanceof nt?(function(r,i){return i instanceof nt&&r.op===i.op&&r.field.isEqual(i.field)&&or(r.value,i.value)})(t,e):t instanceof sr?(function(r,i){return i instanceof sr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&SA(s,i.filters[a]),!0):!1})(t,e):void z(19439)}function AA(t){return t instanceof nt?(function(n){return`${n.field.canonicalString()} ${n.op} ${xs(n.value)}`})(t):t instanceof sr?(function(n){return n.op.toString()+" {"+n.getFilters().map(AA).join(" ,")+"}"})(t):"Filter"}var Vv=class extends nt{constructor(e,n,r){super(e,n,r),this.key=B.fromName(r.referenceValue)}matches(e){let n=B.comparator(e.key,this.key);return this.matchesComparison(n)}},jv=class extends nt{constructor(e,n){super(e,"in",n),this.keys=RA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Uv=class extends nt{constructor(e,n){super(e,"not-in",n),this.keys=RA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function RA(t,e){return(e.arrayValue?.values||[]).map(n=>B.fromName(n.referenceValue))}var Bv=class extends nt{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return mE(n)&&Yc(n.arrayValue,this.value)}},$v=class extends nt{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Yc(this.value.arrayValue,n)}},Hv=class extends nt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Yc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Yc(this.value.arrayValue,n)}},zv=class extends nt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!mE(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Yc(this.value.arrayValue,r))}};var qv=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Te=null}};function S0(t,e=null,n=[],r=[],i=null,o=null,s=null){return new qv(t,e,n,r,i,o,s)}function yE(t){let e=Z(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Fv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),eh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>xs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>xs(r)).join(",")),e.Te=n}return e.Te}function vE(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!cj(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!SA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!b0(t.startAt,e.startAt)&&b0(t.endAt,e.endAt)}function Gv(t){return B.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var ks=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function lj(t,e,n,r,i,o,s,a){return new ks(t,e,n,r,i,o,s,a)}function NA(t){return new ks(t)}function A0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function dj(t){return t.collectionGroup!==null}function $c(t){let e=Z(t);if(e.Ie===null){e.Ie=[];let n=new Set;for(let o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new dt(tn.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Os(o,r))}),n.has(tn.keyField().canonicalString())||e.Ie.push(new Os(tn.keyField(),r))}return e.Ie}function rr(t){let e=Z(t);return e.Ee||(e.Ee=fj(e,$c(t))),e.Ee}function fj(t,e){if(t.limitType==="F")return S0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Os(i.field,o)});let n=t.endAt?new Ps(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ps(t.startAt.position,t.startAt.inclusive):null;return S0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Wv(t,e,n){return new ks(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function nh(t,e){return vE(rr(t),rr(e))&&t.limitType===e.limitType}function MA(t){return`${yE(rr(t))}|lt:${t.limitType}`}function _s(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>AA(i)).join(", ")}]`),eh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>xs(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>xs(i)).join(",")),`Target(${r})`})(rr(t))}; limitType=${t.limitType})`}function rh(t,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):B.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,i){for(let o of $c(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,u){let l=C0(s,a,u);return s.inclusive?l<=0:l<0})(r.startAt,$c(r),i)||r.endAt&&!(function(s,a,u){let l=C0(s,a,u);return s.inclusive?l>=0:l>0})(r.endAt,$c(r),i))})(t,e)}function hj(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function xA(t){return(e,n)=>{let r=!1;for(let i of $c(t)){let o=pj(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function pj(t,e,n){let r=t.field.isKeyField()?B.comparator(e.key,n.key):(function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?Ms(u,l):z(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return z(19790,{direction:t.dir})}}var Sr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){mo(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return mA(this.inner)}size(){return this.innerSize}};var gj=new Be(B.comparator);function Ar(){return gj}var PA=new Be(B.comparator);function Uc(...t){let e=PA;for(let n of t)e=e.insert(n.key,n);return e}function OA(t){let e=PA;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function so(){return Hc()}function kA(){return Hc()}function Hc(){return new Sr(t=>t.toString(),(t,e)=>t.isEqual(e))}var mj=new Be(B.comparator),yj=new dt(B.comparator);function ge(...t){let e=yj;for(let n of t)e=e.add(n);return e}var vj=new dt(pe);function _j(){return vj}function _E(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kc(e)?"-0":e}}function LA(t){return{integerValue:""+t}}function Ej(t,e){return K2(e)?LA(e):_E(t,e)}var Ls=class{constructor(){this._=void 0}};function Ij(t,e,n){return t instanceof lo?(function(i,o){let s={fields:{[vA]:{stringValue:yA},[EA]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&hE(o)&&(o=th(o)),o&&(s.fields[_A]=o),{mapValue:s}})(n,e):t instanceof fo?VA(t,e):t instanceof ho?jA(t,e):(function(i,o){let s=FA(i,o),a=R0(s)+R0(i.Ae);return Lv(s)&&Lv(i.Ae)?LA(a):_E(i.serializer,a)})(t,e)}function wj(t,e,n){return t instanceof fo?VA(t,e):t instanceof ho?jA(t,e):n}function FA(t,e){return t instanceof Fs?(function(r){return Lv(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var lo=class extends Ls{},fo=class extends Ls{constructor(e){super(),this.elements=e}};function VA(t,e){let n=UA(e);for(let r of t.elements)n.some(i=>or(i,r))||n.push(r);return{arrayValue:{values:n}}}var ho=class extends Ls{constructor(e){super(),this.elements=e}};function jA(t,e){let n=UA(e);for(let r of t.elements)n=n.filter(i=>!or(i,r));return{arrayValue:{values:n}}}var Fs=class extends Ls{constructor(e,n){super(),this.serializer=e,this.Ae=n}};function R0(t){return Fe(t.integerValue||t.doubleValue)}function UA(t){return mE(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Kv=class{constructor(e,n){this.field=e,this.transform=n}};function Tj(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof fo&&i instanceof fo||r instanceof ho&&i instanceof ho?Rs(r.elements,i.elements,or):r instanceof Fs&&i instanceof Fs?or(r.Ae,i.Ae):r instanceof lo&&i instanceof lo})(t.transform,e.transform)}var Qv=class{constructor(e,n){this.version=e,this.transformResults=n}},si=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Tf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Vs=class{};function BA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Jc(t.key,si.none()):new po(t.key,t.data,si.none());{let n=t.data,r=xn.empty(),i=new dt(tn.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Rr(t.key,r,new er(i.toArray()),si.none())}}function Dj(t,e,n){t instanceof po?(function(i,o,s){let a=i.value.clone(),u=M0(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(t,e,n):t instanceof Rr?(function(i,o,s){if(!Tf(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=M0(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll($A(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(t,e,n):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function zc(t,e,n,r){return t instanceof po?(function(o,s,a,u){if(!Tf(o.precondition,s))return a;let l=o.value.clone(),f=x0(o.fieldTransforms,u,s);return l.setAll(f),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(t,e,n,r):t instanceof Rr?(function(o,s,a,u){if(!Tf(o.precondition,s))return a;let l=x0(o.fieldTransforms,u,s),f=s.data;return f.setAll($A(o)),f.setAll(l),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(t,e,n,r):(function(o,s,a){return Tf(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(t,e,n)}function Cj(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=FA(r.transform,i||null);o!=null&&(n===null&&(n=xn.empty()),n.set(r.field,o))}return n||null}function N0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Rs(r,i,(o,s)=>Tj(o,s))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var po=class extends Vs{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Rr=class extends Vs{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function $A(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function M0(t,e,n){let r=new Map;be(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,wj(s,a,n[i]))}return r}function x0(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,Ij(o,s,e))}return r}var Jc=class extends Vs{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Yv=class extends Vs{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Jv=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&Dj(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=zc(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=zc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=kA();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let u=BA(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ge())}isEqual(e){return this.batchId===e.batchId&&Rs(this.mutations,e.mutations,(n,r)=>N0(n,r))&&Rs(this.baseMutations,e.baseMutations,(n,r)=>N0(n,r))}},Zv=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){be(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return mj})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var Xv=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var e_=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var We,ye;function bj(t){switch(t){case N.OK:return z(64938);case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0;default:return z(15467,{code:t})}}function HA(t){if(t===void 0)return Dr("GRPC error has no .code"),N.UNKNOWN;switch(t){case We.OK:return N.OK;case We.CANCELLED:return N.CANCELLED;case We.UNKNOWN:return N.UNKNOWN;case We.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case We.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case We.INTERNAL:return N.INTERNAL;case We.UNAVAILABLE:return N.UNAVAILABLE;case We.UNAUTHENTICATED:return N.UNAUTHENTICATED;case We.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case We.NOT_FOUND:return N.NOT_FOUND;case We.ALREADY_EXISTS:return N.ALREADY_EXISTS;case We.PERMISSION_DENIED:return N.PERMISSION_DENIED;case We.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case We.ABORTED:return N.ABORTED;case We.OUT_OF_RANGE:return N.OUT_OF_RANGE;case We.UNIMPLEMENTED:return N.UNIMPLEMENTED;case We.DATA_LOSS:return N.DATA_LOSS;default:return z(39323,{code:t})}}(ye=We||(We={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";var Sj=null;function Aj(){return new TextEncoder}var Rj=new wr([4294967295,4294967295],0);function P0(t){let e=Aj().encode(t),n=new pv;return n.update(e),new Uint8Array(n.digest())}function O0(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new wr([n,r],0),new wr([i,o],0)]}var t_=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ao(`Invalid padding: ${n}`);if(r<0)throw new ao(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ao(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ao(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=wr.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(wr.fromNumber(r)));return i.compare(Rj)===1&&(i=new wr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let n=P0(e),[r,i]=O0(n);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.ge===0)return;let n=P0(e),[r,i]=O0(n);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);this.Se(s)}}Se(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},ao=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var xf=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Zc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(ee.min(),i,new Be(pe),Ar(),ge())}},Zc=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,ge(),ge(),ge())}};var Ds=class{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}},Pf=class{constructor(e,n){this.targetId=e,this.Ce=n}},Of=class{constructor(e,n,r=It.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},kf=class{constructor(){this.ve=0,this.Fe=k0(),this.Me=It.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ge(),n=ge(),r=ge();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:z(38017,{changeType:o})}}),new Zc(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=k0()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,be(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},n_=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ar(),this.Je=_f(),this.He=_f(),this.Ye=new Be(pe)}Ze(e){for(let n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(let n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{let r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:z(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){let n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){let o=i.target;if(Gv(o))if(r===0){let s=new B(o.path);this.et(n,s,Pn.newNoDocument(s,ee.min()))}else be(r===1,20013,{expectedCount:r});else{let s=this._t(n);if(s!==r){let a=this.ut(e),u=a?this.ct(a,e,s):1;if(u!==0){this.it(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,l)}Sj?.lt((function(f,p,m,y,S){let A={localCacheCount:f,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},R=p.unchangedNames;return R&&(A.bloomFilter={applied:S===0,hashCount:R?.hashCount??0,bitmapLength:R?.bits?.bitmap?.length??0,padding:R?.bits?.padding??0,mightContain:L=>y?.mightContain(L)??!1}),A})(s,e.Ce,this.Ge.ht(),a,u))}}}}ut(e){let n=e.Ce.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=br(r).toUint8Array()}catch(u){if(u instanceof Af)return As("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new t_(s,i,o)}catch(u){return As(u instanceof ao?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){let r=this.Ge.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Ge.ht(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.et(n,o,null),i++)}),i}Tt(e){let n=new Map;this.ze.forEach((o,s)=>{let a=this.ot(s);if(a){if(o.current&&Gv(a.target)){let u=new B(a.target.path);this.It(u).has(s)||this.Et(s,u)||this.et(s,u,Pn.newNoDocument(u,e))}o.Be&&(n.set(s,o.ke()),o.qe())}});let r=ge();this.He.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.ot(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.je.forEach((o,s)=>s.setReadTime(e));let i=new xf(e,n,this.Ye,this.je,r);return this.je=Ar(),this.Je=_f(),this.He=_f(),this.Ye=new Be(pe),i}Xe(e,n){if(!this.rt(e))return;let r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){let n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new kf,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new dt(pe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new dt(pe),this.Je=this.Je.insert(e,n)),n}rt(e){let n=this.ot(e)!==null;return n||F("WatchChangeAggregator","Detected inactive target",e),n}ot(e){let n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new kf),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}};function _f(){return new Be(B.comparator)}function k0(){return new Be(B.comparator)}var Nj={asc:"ASCENDING",desc:"DESCENDING"},Mj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xj={and:"AND",or:"OR"},r_=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function i_(t,e){return t.useProto3Json||eh(e)?e:{value:e}}function Lf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Pj(t,e){return Lf(t,e.toTimestamp())}function ir(t){return be(!!t,49232),ee.fromTimestamp((function(n){let r=Cr(n);return new Ye(r.seconds,r.nanos)})(t))}function EE(t,e){return o_(t,e).canonicalString()}function o_(t,e){let n=(function(i){return new Ve(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function qA(t){let e=Ve.fromString(t);return be(YA(e),10190,{key:e.toString()}),e}function s_(t,e){return EE(t.databaseId,e.path)}function Iv(t,e){let n=qA(e);if(n.get(1)!==t.databaseId.projectId)throw new V(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new V(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new B(WA(n))}function GA(t,e){return EE(t.databaseId,e)}function Oj(t){let e=qA(t);return e.length===4?Ve.emptyPath():WA(e)}function a_(t){return new Ve(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function WA(t){return be(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function L0(t,e,n){return{name:s_(t,e),fields:n.value.mapValue.fields}}function kj(t,e){let n;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:z(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,f){return l.useProto3Json?(be(f===void 0||typeof f=="string",58123),It.fromBase64String(f||"")):(be(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),It.fromUint8Array(f||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(l){let f=l.code===void 0?N.UNKNOWN:HA(l.code);return new V(f,l.message||"")})(s);n=new Of(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Iv(t,r.document.name),o=ir(r.document.updateTime),s=r.document.createTime?ir(r.document.createTime):ee.min(),a=new xn({mapValue:{fields:r.document.fields}}),u=Pn.newFoundDocument(i,o,s,a),l=r.targetIds||[],f=r.removedTargetIds||[];n=new Ds(l,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Iv(t,r.document),o=r.readTime?ir(r.readTime):ee.min(),s=Pn.newNoDocument(i,o),a=r.removedTargetIds||[];n=new Ds([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Iv(t,r.document),o=r.removedTargetIds||[];n=new Ds([],o,i,null)}else{if(!("filter"in e))return z(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new e_(i,o),a=r.targetId;n=new Pf(a,s)}}return n}function Lj(t,e){let n;if(e instanceof po)n={update:L0(t,e.key,e.value)};else if(e instanceof Jc)n={delete:s_(t,e.key)};else if(e instanceof Rr)n={update:L0(t,e.key,e.data),updateMask:qj(e.fieldMask)};else{if(!(e instanceof Yv))return z(16599,{Vt:e.type});n={verify:s_(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof lo)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof fo)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ho)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Fs)return{fieldPath:s.field.canonicalString(),increment:a.Ae};throw z(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(n.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:Pj(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:z(27497)})(t,e.precondition)),n}function Fj(t,e){return t&&t.length>0?(be(e!==void 0,14353),t.map(n=>(function(i,o){let s=i.updateTime?ir(i.updateTime):ir(o);return s.isEqual(ee.min())&&(s=ir(o)),new Qv(s,i.transformResults||[])})(n,e))):[]}function Vj(t,e){return{documents:[GA(t,e.path)]}}function jj(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=GA(t,i);let o=(function(l){if(l.length!==0)return QA(sr.create(l,"and"))})(e.filters);o&&(n.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(f=>(function(m){return{field:Es(m.field),direction:$j(m.dir)}})(f))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=i_(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{ft:n,parent:i}}function Uj(t){let e=Oj(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){be(r===1,65062);let f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let o=[];n.where&&(o=(function(p){let m=KA(p);return m instanceof sr&&bA(m)?m.getFilters():[m]})(n.where));let s=[];n.orderBy&&(s=(function(p){return p.map(m=>(function(S){return new Os(Is(S.field),(function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(m))})(n.orderBy));let a=null;n.limit&&(a=(function(p){let m;return m=typeof p=="object"?p.value:p,eh(m)?null:m})(n.limit));let u=null;n.startAt&&(u=(function(p){let m=!!p.before,y=p.values||[];return new Ps(y,m)})(n.startAt));let l=null;return n.endAt&&(l=(function(p){let m=!p.before,y=p.values||[];return new Ps(y,m)})(n.endAt)),lj(e,i,s,o,a,"F",u,l)}function Bj(t,e){let n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return z(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function KA(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Is(n.unaryFilter.field);return nt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Is(n.unaryFilter.field);return nt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Is(n.unaryFilter.field);return nt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Is(n.unaryFilter.field);return nt.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return z(61313);default:return z(60726)}})(t):t.fieldFilter!==void 0?(function(n){return nt.create(Is(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return z(58110);default:return z(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return sr.create(n.compositeFilter.filters.map(r=>KA(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return z(1026)}})(n.compositeFilter.op))})(t):z(30097,{filter:t})}function $j(t){return Nj[t]}function Hj(t){return Mj[t]}function zj(t){return xj[t]}function Es(t){return{fieldPath:t.canonicalString()}}function Is(t){return tn.fromServerFormat(t.fieldPath)}function QA(t){return t instanceof nt?(function(n){if(n.op==="=="){if(D0(n.value))return{unaryFilter:{field:Es(n.field),op:"IS_NAN"}};if(T0(n.value))return{unaryFilter:{field:Es(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(D0(n.value))return{unaryFilter:{field:Es(n.field),op:"IS_NOT_NAN"}};if(T0(n.value))return{unaryFilter:{field:Es(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Es(n.field),op:Hj(n.op),value:n.value}}})(t):t instanceof sr?(function(n){let r=n.getFilters().map(i=>QA(i));return r.length===1?r[0]:{compositeFilter:{op:zj(n.op),filters:r}}})(t):z(54877,{filter:t})}function qj(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function YA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Xc=class t{constructor(e,n,r,i,o=ee.min(),s=ee.min(),a=It.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var c_=class{constructor(e){this.yt=e}};function Gj(t){let e=Uj({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Wv(e,e.limit,"L"):e}var Ff=class{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(Fe(e.integerValue));else if("doubleValue"in e){let r=Fe(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Kc(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=Cr(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(br(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?TA(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):wA(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):z(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){let r=e.fields||{};this.Ft(n,55);for(let i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){let r=e.fields||{};this.Ft(n,53);let i=Ns,o=r[i].arrayValue?.values?.length||0;this.Ft(n,15),n.Mt(Fe(o)),this.Ot(i,n),this.Ct(r[i],n)}Qt(e,n){let r=e.values||[];this.Ft(n,50);for(let i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),B.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}};Ff.Kt=new Ff;var u_=class{constructor(){this.Cn=new l_}addToCollectionParentIndex(e,n){return this.Cn.add(n),x.resolve()}getCollectionParents(e,n){return x.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return x.resolve()}deleteFieldIndex(e,n){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,n){return x.resolve()}getDocumentsMatchingTarget(e,n){return x.resolve(null)}getIndexType(e,n){return x.resolve(0)}getFieldIndexes(e,n){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,n){return x.resolve(uo.min())}getMinOffsetFromCollectionGroup(e,n){return x.resolve(uo.min())}updateCollectionGroup(e,n,r){return x.resolve()}updateIndexEntries(e,n){return x.resolve()}},l_=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new dt(Ve.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new dt(Ve.comparator)).toArray()}};var vX=new Uint8Array(0);var F0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},JA=41943040,hn=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};hn.DEFAULT_COLLECTION_PERCENTILE=10,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hn.DEFAULT=new hn(JA,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hn.DISABLED=new hn(-1,0,0);var eu=class t{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new t(0)}static cr(){return new t(-1)}};var V0="LruGarbageCollector",Wj=1048576;function j0([t,e],[n,r]){let i=pe(t,n);return i===0?pe(e,r):i}var d_=class{constructor(e){this.Ir=e,this.buffer=new dt(j0),this.Er=0}dr(){return++this.Er}Ar(e){let n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();j0(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},f_=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){F(V0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){zs(n)?F(V0,"Ignoring IndexedDB error during garbage collection: ",n):await Hs(n)}await this.Vr(3e5)})}},h_=class{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return x.resolve(dE.ce);let r=new d_(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(F("LruGarbageCollector","Garbage collection skipped; disabled"),x.resolve(F0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(F("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),F0):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,o,s,a,u,l,f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(F("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),vs()<=fe.DEBUG&&F("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-f}ms`),x.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function Kj(t,e){return new h_(t,e)}var p_=class{constructor(){this.changes=new Sr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Pn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?x.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var g_=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var m_=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&zc(r.mutation,i,er.empty(),Ye.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ge()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ge()){let i=so();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Uc();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=so();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ge()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=Ar(),s=Hc(),a=(function(){return Hc()})();return n.forEach((u,l)=>{let f=r.get(l.key);i.has(l.key)&&(f===void 0||f.mutation instanceof Rr)?o=o.insert(l.key,l):f!==void 0?(s.set(l.key,f.mutation.getFieldMask()),zc(f.mutation,l,f.mutation.getFieldMask(),Ye.now())):s.set(l.key,er.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,f)=>s.set(l,f)),n.forEach((l,f)=>a.set(l,new g_(f,s.get(l)??null))),a))}recalculateAndSaveOverlays(e,n){let r=Hc(),i=new Be((s,a)=>s-a),o=ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let f=r.get(u)||er.empty();f=a.applyToLocalView(l,f),r.set(u,f);let p=(i.get(a.batchId)||ge()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,f=u.value,p=kA();f.forEach(m=>{if(!o.has(m)){let y=BA(n.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return x.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return(function(s){return B.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):dj(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):x.resolve(so()),a=Wc,u=o;return s.next(l=>x.forEach(l,(f,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(f)?x.resolve():this.remoteDocumentCache.getEntry(e,f).next(m=>{u=u.insert(f,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,ge())).next(f=>({batchId:a,changes:OA(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new B(n)).next(r=>{let i=Uc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=Uc();return this.indexManager.getCollectionParents(e,o).next(a=>x.forEach(a,u=>{let l=(function(p,m){return new ks(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(f=>{f.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let f=l.getKey();s.get(f)===null&&(s=s.insert(f,Pn.newInvalidDocument(f)))});let a=Uc();return s.forEach((u,l)=>{let f=o.get(u);f!==void 0&&zc(f.mutation,l,er.empty(),Ye.now()),rh(n,l)&&(a=a.insert(u,l))}),a})}};var y_=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return x.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:ir(i.createTime)}})(n)),x.resolve()}getNamedQuery(e,n){return x.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:Gj(i.bundledQuery),readTime:ir(i.readTime)}})(n)),x.resolve()}};var v_=class{constructor(){this.overlays=new Be(B.comparator),this.qr=new Map}getOverlay(e,n){return x.resolve(this.overlays.get(n))}getOverlays(e,n){let r=so();return x.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.St(e,n,o)}),x.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),x.resolve()}getOverlaysForCollection(e,n,r){let i=so(),o=n.length+1,s=new B(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return x.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Be((l,f)=>l-f),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let f=o.get(l.largestBatchId);f===null&&(f=so(),o=o.insert(l.largestBatchId,f)),f.set(l.getKey(),l)}}let a=so(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,f)=>a.set(l,f)),!(a.size()>=i)););return x.resolve(a)}St(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Xv(n,r));let o=this.qr.get(n);o===void 0&&(o=ge(),this.qr.set(n,o)),this.qr.set(n,o.add(r.key))}};var __=class{constructor(){this.sessionToken=It.EMPTY_BYTE_STRING}getSessionToken(e){return x.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,x.resolve()}};var tu=class{constructor(){this.Qr=new dt(Ke.$r),this.Ur=new dt(Ke.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){let r=new Ke(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Ke(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){let n=new B(new Ve([])),r=new Ke(n,e),i=new Ke(n,e+1),o=[];return this.Ur.forEachInRange([r,i],s=>{this.Gr(s),o.push(s.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let n=new B(new Ve([])),r=new Ke(n,e),i=new Ke(n,e+1),o=ge();return this.Ur.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new Ke(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Ke=class{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return B.comparator(e.key,n.key)||pe(e.Yr,n.Yr)}static Kr(e,n){return pe(e.Yr,n.Yr)||B.comparator(e.key,n.key)}};var E_=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new dt(Ke.$r)}checkEmpty(e){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Jv(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.Zr=this.Zr.add(new Ke(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return x.resolve(s)}lookupMutationBatch(e,n){return x.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.ei(r),o=i<0?0:i;return x.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?fE:this.tr-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Ke(n,0),i=new Ke(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],s=>{let a=this.Xr(s.Yr);o.push(a)}),x.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new dt(pe);return n.forEach(i=>{let o=new Ke(i,0),s=new Ke(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],a=>{r=r.add(a.Yr)})}),x.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;B.isDocumentKey(o)||(o=o.child(""));let s=new Ke(new B(o),0),a=new dt(pe);return this.Zr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Yr)),!0)},s),x.resolve(this.ti(a))}ti(e){let n=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){be(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return x.forEach(n.mutations,i=>{let o=new Ke(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){let r=new Ke(n,0),i=this.Zr.firstAfterOrEqual(r);return x.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,x.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var I_=class{constructor(e){this.ri=e,this.docs=(function(){return new Be(B.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return x.resolve(r?r.document.mutableCopy():Pn.newInvalidDocument(n))}getEntries(e,n){let r=Ar();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Pn.newInvalidDocument(i))}),x.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Ar(),s=n.path,a=new B(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:f}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||q2(z2(f),r)<=0||(i.has(f.key)||rh(n,f))&&(o=o.insert(f.key,f.mutableCopy()))}return x.resolve(o)}getAllFromCollectionGroup(e,n,r,i){z(9500)}ii(e,n){return x.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new w_(this)}getSize(e){return x.resolve(this.size)}},w_=class extends p_{constructor(e){super(),this.Nr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),x.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}};var T_=class{constructor(e){this.persistence=e,this.si=new Sr(n=>yE(n),vE),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.oi=0,this._i=new tu,this.targetCount=0,this.ai=eu.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),x.resolve()}Pr(e){this.si.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.ai=new eu(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,x.resolve()}updateTargetData(e,n){return this.Pr(n),x.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.si.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),x.waitFor(o).next(()=>i)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,n){let r=this.si.get(n)||null;return x.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),x.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),x.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),x.resolve()}getMatchingKeysForTargetId(e,n){let r=this._i.Hr(n);return x.resolve(r)}containsKey(e,n){return x.resolve(this._i.containsKey(n))}};var Vf=class{constructor(e,n){this.ui={},this.overlays={},this.ci=new dE(0),this.li=!1,this.li=!0,this.hi=new __,this.referenceDelegate=e(this),this.Pi=new T_(this),this.indexManager=new u_,this.remoteDocumentCache=(function(i){return new I_(i)})(r=>this.referenceDelegate.Ti(r)),this.serializer=new c_(n),this.Ii=new y_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new v_,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new E_(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){F("MemoryPersistence","Starting transaction:",e);let i=new D_(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,n){return x.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}},D_=class extends Pv{constructor(e){super(),this.currentSequenceNumber=e}},C_=class t{constructor(e){this.persistence=e,this.Ri=new tu,this.Vi=null}static mi(e){return new t(e)}get fi(){if(this.Vi)return this.Vi;throw z(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),x.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),x.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.fi,r=>{let i=B.fromPath(r);return this.gi(e,i).next(o=>{o||n.removeEntry(i,ee.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return x.or([()=>x.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}},jf=class t{constructor(e,n){this.persistence=e,this.pi=new Sr(r=>Q2(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Kj(this,n)}static mi(e,n){return new t(e,n)}Ei(){}di(e){return x.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){let n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return x.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?x.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,s=>this.br(e,s,n).next(a=>{a||(r++,o.removeEntry(s,ee.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),x.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),x.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),x.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),x.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=If(e.data.value)),n}br(e,n,r){return x.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.pi.get(n);return x.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var b_=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=ge(),i=ge();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var S_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var A_=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return GS()?8:W2(ut())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ys(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ws(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new S_;return this.Ss(e,n,s).next(a=>{if(o.result=a,this.Vs)return this.bs(e,n,s,a.size)})}).next(()=>o.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(vs()<=fe.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",_s(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),x.resolve()):(vs()<=fe.DEBUG&&F("QueryEngine","Query:",_s(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(vs()<=fe.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",_s(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,rr(n))):x.resolve())}ys(e,n){if(A0(n))return x.resolve(null);let r=rr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Wv(n,null,"F"),r=rr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ge(...o);return this.ps.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.Ds(n,a);return this.Cs(n,l,s,u.readTime)?this.ys(e,Wv(n,null,"F")):this.vs(e,l,n,u)}))})))}ws(e,n,r,i){return A0(n)||i.isEqual(ee.min())?x.resolve(null):this.ps.getDocuments(e,r).next(o=>{let s=this.Ds(n,o);return this.Cs(n,s,r,i)?x.resolve(null):(vs()<=fe.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),_s(n)),this.vs(e,s,n,H2(i,Wc)).next(a=>a))})}Ds(e,n){let r=new dt(xA(e));return n.forEach((i,o)=>{rh(e,o)&&(r=r.add(o))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,n,r){return vs()<=fe.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",_s(n)),this.ps.getDocumentsMatchingQuery(e,n,uo.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var IE="LocalStore",Qj=3e8,R_=class{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Be(pe),this.xs=new Sr(o=>yE(o),vE),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new m_(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}};function Yj(t,e,n,r){return new R_(t,e,n,r)}async function ZA(t,e){let n=Z(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=ge();for(let l of i){s.push(l.batchId);for(let f of l.mutations)u=u.add(f.key)}for(let l of o){a.push(l.batchId);for(let f of l.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Ls:l,removedBatchIds:s,addedBatchIds:a}))})})}function Jj(t,e){let n=Z(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,u,l,f){let p=l.batch,m=p.keys(),y=x.resolve();return m.forEach(S=>{y=y.next(()=>f.getEntry(u,S)).next(A=>{let R=l.docVersions.get(S);be(R!==null,48541),A.version.compareTo(R)<0&&(p.applyToRemoteDocument(A,l),A.isValidDocument()&&(A.setReadTime(l.commitVersion),f.addEntry(A)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))})(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let u=ge();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u})(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function XA(t){let e=Z(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function Zj(t,e){let n=Z(t),r=e.snapshotVersion,i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;let a=[];e.targetChanges.forEach((f,p)=>{let m=i.get(p);if(!m)return;a.push(n.Pi.removeMatchingKeys(o,f.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(o,f.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(It.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):f.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(f.resumeToken,r)),i=i.insert(p,y),(function(A,R,L){return A.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=Qj?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0})(m,y,f)&&a.push(n.Pi.updateTargetData(o,y))});let u=Ar(),l=ge();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,f))}),a.push(Xj(o,s,e.documentUpdates).next(f=>{u=f.ks,l=f.qs})),!r.isEqual(ee.min())){let f=n.Pi.getLastRemoteSnapshotVersion(o).next(p=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(f)}return x.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.Ms=i,o))}function Xj(t,e,n){let r=ge(),i=ge();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Ar();return n.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ee.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):F(IE,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{ks:s,qs:i}})}function eU(t,e){let n=Z(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=fE),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function tU(t,e){let n=Z(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(o=>o?(i=o,x.resolve(i)):n.Pi.allocateTargetId(r).next(s=>(i=new Xc(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function N_(t,e,n){let r=Z(t),i=r.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!zs(s))throw s;F(IE,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function U0(t,e,n){let r=Z(t),i=ee.min(),o=ge();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,l,f){let p=Z(u),m=p.xs.get(f);return m!==void 0?x.resolve(p.Ms.get(m)):p.Pi.getTargetData(l,f)})(r,s,rr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(s,e,n?i:ee.min(),n?o:ge())).next(a=>(nU(r,hj(e),a),{documents:a,Qs:o})))}function nU(t,e,n){let r=t.Os.get(e)||ee.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Os.set(e,r)}var Uf=class{constructor(){this.activeTargetIds=_j()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var M_=class{constructor(){this.Mo=new Uf,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Uf,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var x_=class{Oo(e){}shutdown(){}};var B0="ConnectivityMonitor",Bf=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){F(B0,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){F(B0,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Ef=null;function P_(){return Ef===null?Ef=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ef++,"0x"+Ef.toString(16)}var wv="RestConnection",rU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},O_=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Rf?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,o){let s=P_(),a=this.zo(e,n.toUriEncodedString());F(wv,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,o);let{host:l}=new URL(a),f=ti(l);return this.Jo(e,a,u,r,f).then(p=>(F(wv,`Received RPC '${e}' ${s}: `,p),p),p=>{throw As(wv,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Ho(e,n,r,i,o,s){return this.Go(e,n,r,i,o)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+$s})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,n){let r=rU[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}};var k_=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var Et="WebChannelConnection",L_=class extends O_{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,o){let s=P_();return new Promise((a,u)=>{let l=new gv;l.setWithCredentials(!0),l.listenOnce(mv.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case jc.NO_ERROR:let p=l.getResponseJson();F(Et,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case jc.TIMEOUT:F(Et,`RPC '${e}' ${s} timed out`),u(new V(N.DEADLINE_EXCEEDED,"Request time out"));break;case jc.HTTP_ERROR:let m=l.getStatus();if(F(Et,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let S=y?.error;if(S&&S.status&&S.message){let A=(function(L){let te=L.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(te)>=0?te:N.UNKNOWN})(S.status);u(new V(A,S.message))}else u(new V(N.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new V(N.UNAVAILABLE,"Connection failed."));break;default:z(9055,{l_:e,streamId:s,h_:l.getLastErrorCode(),P_:l.getLastError()})}}finally{F(Et,`RPC '${e}' ${s} completed.`)}});let f=JSON.stringify(i);F(Et,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",f,r,15)})}T_(e,n,r){let i=P_(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=_v(),a=vv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let f=o.join("");F(Et,`Creating RPC '${e}' stream ${i}: ${f}`,u);let p=s.createWebChannel(f,u);this.I_(p);let m=!1,y=!1,S=new k_({Yo:R=>{y?F(Et,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(F(Et,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),F(Et,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},Zo:()=>p.close()}),A=(R,L,te)=>{R.listen(L,he=>{try{te(he)}catch(wt){setTimeout(()=>{throw wt},0)}})};return A(p,ys.EventType.OPEN,()=>{y||(F(Et,`RPC '${e}' stream ${i} transport opened.`),S.o_())}),A(p,ys.EventType.CLOSE,()=>{y||(y=!0,F(Et,`RPC '${e}' stream ${i} transport closed`),S.a_(),this.E_(p))}),A(p,ys.EventType.ERROR,R=>{y||(y=!0,As(Et,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),S.a_(new V(N.UNAVAILABLE,"The operation could not be completed")))}),A(p,ys.EventType.MESSAGE,R=>{if(!y){let L=R.data[0];be(!!L,16349);let te=L,he=te?.error||te[0]?.error;if(he){F(Et,`RPC '${e}' stream ${i} received error:`,he);let wt=he.status,kt=(function(v){let E=We[v];if(E!==void 0)return HA(E)})(wt),rt=he.message;kt===void 0&&(kt=N.INTERNAL,rt="Unknown error status: "+wt+" with message "+he.message),y=!0,S.a_(new V(kt,rt)),p.close()}else F(Et,`RPC '${e}' stream ${i} received:`,L),S.u_(L)}}),A(a,yv.STAT_EVENT,R=>{R.stat===yf.PROXY?F(Et,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===yf.NOPROXY&&F(Et,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.__()},0),S}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}};function Tv(){return typeof document<"u"?document:null}function ih(t){return new r_(t,!0)}var $f=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&F("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var $0="PersistentStream",Hf=class{constructor(e,n,r,i,o,s,a,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new $f(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(Dr(n.toString()),Dr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;let e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{let i=new V(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){let r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return F($0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(F($0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},F_=class extends Hf{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let n=kj(this.serializer,e),r=(function(o){if(!("targetChange"in o))return ee.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ee.min():s.readTime?ir(s.readTime):ee.min()})(e);return this.listener.H_(n,r)}Y_(e){let n={};n.database=a_(this.serializer),n.addTarget=(function(o,s){let a,u=s.target;if(a=Gv(u)?{documents:Vj(o,u)}:{query:jj(o,u).ft},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=zA(o,s.resumeToken);let l=i_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ee.min())>0){a.readTime=Lf(o,s.snapshotVersion.toTimestamp());let l=i_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=Bj(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){let n={};n.database=a_(this.serializer),n.removeTarget=e,this.q_(n)}},V_=class extends Hf{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return be(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,be(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){be(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let n=Fj(e.writeResults,e.commitTime),r=ir(e.commitTime);return this.listener.na(r,n)}ra(){let e={};e.database=a_(this.serializer),this.q_(e)}ea(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>Lj(this.serializer,r))};this.q_(n)}};var j_=class{},U_=class extends j_{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new V(N.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Go(e,o_(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new V(N.UNKNOWN,o.toString())})}Ho(e,n,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Ho(e,o_(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new V(N.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},B_=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Dr(n),this.aa=!1):F("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var go="RemoteStore",$_=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(s=>{r.enqueueAndForget(async()=>{yo(this)&&(F(go,"Restarting streams for network reachability change."),await(async function(u){let l=Z(u);l.Ea.add(4),await ou(l),l.Ra.set("Unknown"),l.Ea.delete(4),await oh(l)})(this))})}),this.Ra=new B_(r,i)}};async function oh(t){if(yo(t))for(let e of t.da)await e(!0)}async function ou(t){for(let e of t.da)await e(!1)}function eR(t,e){let n=Z(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),CE(n)?DE(n):qs(n).O_()&&TE(n,e))}function wE(t,e){let n=Z(t),r=qs(n);n.Ia.delete(e),r.O_()&&tR(n,e),n.Ia.size===0&&(r.O_()?r.L_():yo(n)&&n.Ra.set("Unknown"))}function TE(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}qs(t).Y_(e)}function tR(t,e){t.Va.Ue(e),qs(t).Z_(e)}function DE(t){t.Va=new n_({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),qs(t).start(),t.Ra.ua()}function CE(t){return yo(t)&&!qs(t).x_()&&t.Ia.size>0}function yo(t){return Z(t).Ea.size===0}function nR(t){t.Va=void 0}async function iU(t){t.Ra.set("Online")}async function oU(t){t.Ia.forEach((e,n)=>{TE(t,e)})}async function sU(t,e){nR(t),CE(t)?(t.Ra.ha(e),DE(t)):t.Ra.set("Unknown")}async function aU(t,e,n){if(t.Ra.set("Online"),e instanceof Of&&e.state===2&&e.cause)try{await(async function(i,o){let s=o.cause;for(let a of o.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.Ia.delete(a),i.Va.removeTarget(a))})(t,e)}catch(r){F(go,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await zf(t,r)}else if(e instanceof Ds?t.Va.Ze(e):e instanceof Pf?t.Va.st(e):t.Va.tt(e),!n.isEqual(ee.min()))try{let r=await XA(t.localStore);n.compareTo(r)>=0&&await(function(o,s){let a=o.Va.Tt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let f=o.Ia.get(l);f&&o.Ia.set(l,f.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let f=o.Ia.get(u);if(!f)return;o.Ia.set(u,f.withResumeToken(It.EMPTY_BYTE_STRING,f.snapshotVersion)),tR(o,u);let p=new Xc(f.target,u,l,f.sequenceNumber);TE(o,p)}),o.remoteSyncer.applyRemoteEvent(a)})(t,n)}catch(r){F(go,"Failed to raise snapshot:",r),await zf(t,r)}}async function zf(t,e,n){if(!zs(e))throw e;t.Ea.add(1),await ou(t),t.Ra.set("Offline"),n||(n=()=>XA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{F(go,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await oh(t)})}function rR(t,e){return e().catch(n=>zf(t,n,e))}async function sh(t){let e=Z(t),n=fi(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:fE;for(;cU(e);)try{let i=await eU(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,uU(e,i)}catch(i){await zf(e,i)}iR(e)&&oR(e)}function cU(t){return yo(t)&&t.Ta.length<10}function uU(t,e){t.Ta.push(e);let n=fi(t);n.O_()&&n.X_&&n.ea(e.mutations)}function iR(t){return yo(t)&&!fi(t).x_()&&t.Ta.length>0}function oR(t){fi(t).start()}async function lU(t){fi(t).ra()}async function dU(t){let e=fi(t);for(let n of t.Ta)e.ea(n.mutations)}async function fU(t,e,n){let r=t.Ta.shift(),i=Zv.from(r,e,n);await rR(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await sh(t)}async function hU(t,e){e&&fi(t).X_&&await(async function(r,i){if((function(s){return bj(s)&&s!==N.ABORTED})(i.code)){let o=r.Ta.shift();fi(r).B_(),await rR(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await sh(r)}})(t,e),iR(t)&&oR(t)}async function H0(t,e){let n=Z(t);n.asyncQueue.verifyOperationInProgress(),F(go,"RemoteStore received new credentials");let r=yo(n);n.Ea.add(3),await ou(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await oh(n)}async function pU(t,e){let n=Z(t);e?(n.Ea.delete(2),await oh(n)):e||(n.Ea.add(2),await ou(n),n.Ra.set("Unknown"))}function qs(t){return t.ma||(t.ma=(function(n,r,i){let o=Z(n);return o.sa(),new F_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Xo:iU.bind(null,t),t_:oU.bind(null,t),r_:sU.bind(null,t),H_:aU.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),CE(t)?DE(t):t.Ra.set("Unknown")):(await t.ma.stop(),nR(t))})),t.ma}function fi(t){return t.fa||(t.fa=(function(n,r,i){let o=Z(n);return o.sa(),new V_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:lU.bind(null,t),r_:hU.bind(null,t),ta:dU.bind(null,t),na:fU.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await sh(t)):(await t.fa.stop(),t.Ta.length>0&&(F(go,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}var H_=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new V(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function bE(t,e){if(Dr("AsyncQueue",`${e}: ${t}`),zs(t))return new V(N.UNAVAILABLE,`${e}: ${t}`);throw t}var qf=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||B.comparator(n.key,r.key):(n,r)=>B.comparator(n.key,r.key),this.keyedMap=Uc(),this.sortedSet=new Be(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Gf=class{constructor(){this.ga=new Be(B.comparator)}track(e){let n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):z(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){let e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}},js=class t{constructor(e,n,r,i,o,s,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,qf.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var z_=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},q_=class{constructor(){this.queries=z0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){let i=Z(n),o=i.queries;i.queries=z0(),o.forEach((s,a)=>{for(let u of a.Sa)u.onError(r)})})(this,new V(N.ABORTED,"Firestore shutting down"))}};function z0(){return new Sr(t=>MA(t),nh)}async function gU(t,e){let n=Z(t),r=3,i=e.query,o=n.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new z_,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(i,!0);break;case 1:o.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){let a=bE(s,`Initialization of query '${_s(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&SE(n)}async function mU(t,e){let n=Z(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function yU(t,e){let n=Z(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.Sa)a.Fa(i)&&(r=!0);s.wa=i}}r&&SE(n)}function vU(t,e,n){let r=Z(t),i=r.queries.get(e);if(i)for(let o of i.Sa)o.onError(n);r.queries.delete(e)}function SE(t){t.Ca.forEach(e=>{e.next()})}var G_,q0;(q0=G_||(G_={})).Ma="default",q0.Cache="cache";var W_=class{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new js(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;let r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=js.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==G_.Cache}};var Wf=class{constructor(e){this.key=e}},Kf=class{constructor(e){this.key=e}},K_=class{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ge(),this.mutatedKeys=ge(),this.eu=xA(e),this.tu=new qf(this.eu)}get nu(){return this.Ya}ru(e,n){let r=n?n.iu:new Gf,i=n?n.tu:this.tu,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{let m=i.get(f),y=rh(this.query,p)?p:null,S=!!m&&this.mutatedKeys.has(m.key),A=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),R=!1;m&&y?m.data.isEqual(y.data)?S!==A&&(r.track({type:3,doc:y}),R=!0):this.su(m,y)||(r.track({type:2,doc:y}),R=!0,(u&&this.eu(y,u)>0||l&&this.eu(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),R=!0):m&&!y&&(r.track({type:1,doc:m}),R=!0,(u||l)&&(a=!0)),R&&(y?(s=s.add(y),o=A?o.add(f):o.delete(f)):(s=s.delete(f),o=o.delete(f)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),o=o.delete(f.key),r.track({type:1,doc:f})}return{tu:s,iu:r,Cs:a,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let s=e.iu.ya();s.sort((f,p)=>(function(y,S){let A=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z(20277,{Rt:R})}};return A(y)-A(S)})(f.type,p.type)||this.eu(f.doc,p.doc)),this.ou(r),i=i??!1;let a=n&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,l=u!==this.Za;return this.Za=u,s.length!==0||l?{snapshot:new js(this.query,e.tu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Gf,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=ge(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new Kf(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new Wf(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=ge();let n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return js.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},AE="SyncEngine",Q_=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},Y_=class{constructor(e){this.key=e,this.hu=!1}},J_=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Sr(a=>MA(a),nh),this.Iu=new Map,this.Eu=new Set,this.du=new Be(B.comparator),this.Au=new Map,this.Ru=new tu,this.Vu={},this.mu=new Map,this.fu=eu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};async function _U(t,e,n=!0){let r=dR(t),i,o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await sR(r,e,n,!0),i}async function EU(t,e){let n=dR(t);await sR(n,e,!0,!1)}async function sR(t,e,n,r){let i=await tU(t.localStore,rr(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),a;return r&&(a=await IU(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&eR(t.remoteStore,i),a}async function IU(t,e,n,r,i){t.pu=(p,m,y)=>(async function(A,R,L,te){let he=R.view.ru(L);he.Cs&&(he=await U0(A.localStore,R.query,!1).then(({documents:w})=>R.view.ru(w,he)));let wt=te&&te.targetChanges.get(R.targetId),kt=te&&te.targetMismatches.get(R.targetId)!=null,rt=R.view.applyChanges(he,A.isPrimaryClient,wt,kt);return W0(A,R.targetId,rt.au),rt.snapshot})(t,p,m,y);let o=await U0(t.localStore,e,!0),s=new K_(e,o.Qs),a=s.ru(o.documents),u=Zc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(a,t.isPrimaryClient,u);W0(t,n,l.au);let f=new Q_(e,n,s);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),l.snapshot}async function wU(t,e,n){let r=Z(t),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(s=>!nh(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await N_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&wE(r.remoteStore,i.targetId),Z_(r,i.targetId)}).catch(Hs)):(Z_(r,i.targetId),await N_(r.localStore,i.targetId,!0))}async function TU(t,e){let n=Z(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),wE(n.remoteStore,r.targetId))}async function DU(t,e,n){let r=MU(t);try{let i=await(function(s,a){let u=Z(s),l=Ye.now(),f=a.reduce((y,S)=>y.add(S.key),ge()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let S=Ar(),A=ge();return u.Ns.getEntries(y,f).next(R=>{S=R,S.forEach((L,te)=>{te.isValidDocument()||(A=A.add(L))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,S)).next(R=>{p=R;let L=[];for(let te of a){let he=Cj(te,p.get(te.key).overlayedDocument);he!=null&&L.push(new Rr(te.key,he,DA(he.value.mapValue),si.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,L,a)}).next(R=>{m=R;let L=R.applyToLocalDocumentSet(p,A);return u.documentOverlayCache.saveOverlays(y,R.batchId,L)})}).then(()=>({batchId:m.batchId,changes:OA(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,u){let l=s.Vu[s.currentUser.toKey()];l||(l=new Be(pe)),l=l.insert(a,u),s.Vu[s.currentUser.toKey()]=l})(r,i.batchId,n),await su(r,i.changes),await sh(r.remoteStore)}catch(i){let o=bE(i,"Failed to persist write");n.reject(o)}}async function aR(t,e){let n=Z(t);try{let r=await Zj(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Au.get(o);s&&(be(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?be(s.hu,14607):i.removedDocuments.size>0&&(be(s.hu,42227),s.hu=!1))}),await su(n,r,e)}catch(r){await Hs(r)}}function G0(t,e,n){let r=Z(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Tu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let u=Z(s);u.onlineState=a;let l=!1;u.queries.forEach((f,p)=>{for(let m of p.Sa)m.va(a)&&(l=!0)}),l&&SE(u)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function CU(t,e,n){let r=Z(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Au.get(e),o=i&&i.key;if(o){let s=new Be(B.comparator);s=s.insert(o,Pn.newNoDocument(o,ee.min()));let a=ge().add(o),u=new xf(ee.min(),new Map,new Be(pe),s,a);await aR(r,u),r.du=r.du.remove(o),r.Au.delete(e),RE(r)}else await N_(r.localStore,e,!1).then(()=>Z_(r,e,n)).catch(Hs)}async function bU(t,e){let n=Z(t),r=e.batch.batchId;try{let i=await Jj(n.localStore,e);uR(n,r,null),cR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await su(n,i)}catch(i){await Hs(i)}}async function SU(t,e,n){let r=Z(t);try{let i=await(function(s,a){let u=Z(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let f;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(be(p!==null,37113),f=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,f,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,f)).next(()=>u.localDocuments.getDocuments(l,f))})})(r.localStore,e);uR(r,e,n),cR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await su(r,i)}catch(i){await Hs(i)}}function cR(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function uR(t,e,n){let r=Z(t),i=r.Vu[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Z_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||lR(t,r)})}function lR(t,e){t.Eu.delete(e.path.canonicalString());let n=t.du.get(e);n!==null&&(wE(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),RE(t))}function W0(t,e,n){for(let r of n)r instanceof Wf?(t.Ru.addReference(r.key,e),AU(t,r)):r instanceof Kf?(F(AE,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||lR(t,r.key)):z(19791,{wu:r})}function AU(t,e){let n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(F(AE,"New document in limbo: "+n),t.Eu.add(r),RE(t))}function RE(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){let e=t.Eu.values().next().value;t.Eu.delete(e);let n=new B(Ve.fromString(e)),r=t.fu.next();t.Au.set(r,new Y_(n)),t.du=t.du.insert(n,r),eR(t.remoteStore,new Xc(rr(NA(n.path)),r,"TargetPurposeLimboResolution",dE.ce))}}async function su(t,e,n){let r=Z(t),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((a,u)=>{s.push(r.pu(u,e,n).then(l=>{if((l||n)&&r.isPrimaryClient){let f=l?!l.fromCache:n?.targetChanges.get(u.targetId)?.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(l){i.push(l);let f=b_.As(u.targetId,l);o.push(f)}}))}),await Promise.all(s),r.Pu.H_(i),await(async function(u,l){let f=Z(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>x.forEach(l,m=>x.forEach(m.Es,y=>f.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>x.forEach(m.ds,y=>f.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!zs(p))throw p;F(IE,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=f.Ms.get(m),S=y.snapshotVersion,A=y.withLastLimboFreeSnapshotVersion(S);f.Ms=f.Ms.insert(m,A)}}})(r.localStore,o))}async function RU(t,e){let n=Z(t);if(!n.currentUser.isEqual(e)){F(AE,"User change. New user:",e.toKey());let r=await ZA(n.localStore,e);n.currentUser=e,(function(o,s){o.mu.forEach(a=>{a.forEach(u=>{u.reject(new V(N.CANCELLED,s))})}),o.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await su(n,r.Ls)}}function NU(t,e){let n=Z(t),r=n.Au.get(e);if(r&&r.hu)return ge().add(r.key);{let i=ge(),o=n.Iu.get(e);if(!o)return i;for(let s of o){let a=n.Tu.get(s);i=i.unionWith(a.view.nu)}return i}}function dR(t){let e=Z(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=aR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=NU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=CU.bind(null,e),e.Pu.H_=yU.bind(null,e.eventManager),e.Pu.yu=vU.bind(null,e.eventManager),e}function MU(t){let e=Z(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=SU.bind(null,e),e}var fR=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(n){this.serializer=ih(n.databaseInfo.databaseId),this.sharedClientState=this.Du(n),this.persistence=this.Cu(n),await this.persistence.start(),this.localStore=this.vu(n),this.gcScheduler=this.Fu(n,this.localStore),this.indexBackfillerScheduler=this.Mu(n,this.localStore)}Fu(n,r){return null}Mu(n,r){return null}vu(n){return Yj(this.persistence,new A_,n.initialUser,this.serializer)}Cu(n){return new Vf(C_.mi,this.serializer)}Du(n){return new M_}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return t.provider={build:()=>new t},t})(),X_=class extends fR{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){be(this.persistence.referenceDelegate instanceof jf,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new f_(r,e.asyncQueue,n)}Cu(e){let n=this.cacheSizeBytes!==void 0?hn.withCacheSize(this.cacheSizeBytes):hn.DEFAULT;return new Vf(r=>jf.mi(r,n),this.serializer)}};var xU=(()=>{class t{async initialize(n,r){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>G0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=RU.bind(null,this.syncEngine),await pU(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(n){return(function(){return new q_})()}createDatastore(n){let r=ih(n.databaseInfo.databaseId),i=(function(s){return new L_(s)})(n.databaseInfo);return(function(s,a,u,l){return new U_(s,a,u,l)})(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return(function(i,o,s,a,u){return new $_(i,o,s,a,u)})(this.localStore,this.datastore,n.asyncQueue,r=>G0(this.syncEngine,r,0),(function(){return Bf.v()?new Bf:new x_})())}createSyncEngine(n,r){return(function(o,s,a,u,l,f,p){let m=new J_(o,s,a,u,l,f);return p&&(m.gu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}async terminate(){await(async function(r){let i=Z(r);F(go,"RemoteStore shutting down."),i.Ea.add(5),await ou(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}return t.provider={build:()=>new t},t})();var eE=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Dr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var hi="FirestoreClient",tE=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=lt.UNAUTHENTICATED,this.clientId=qc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{F(hi,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(F(hi,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=bE(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function Dv(t,e){t.asyncQueue.verifyOperationInProgress(),F(hi,"Initializing OfflineComponentProvider");let n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await ZA(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function K0(t,e){t.asyncQueue.verifyOperationInProgress();let n=await PU(t);F(hi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>H0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>H0(e.remoteStore,i)),t._onlineComponents=e}async function PU(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){F(hi,"Using user provided OfflineComponentProvider");try{await Dv(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;As("Error using user provided cache. Falling back to memory cache: "+n),await Dv(t,new fR)}}else F(hi,"Using default OfflineComponentProvider"),await Dv(t,new X_(void 0));return t._offlineComponents}async function hR(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(F(hi,"Using user provided OnlineComponentProvider"),await K0(t,t._uninitializedComponentsProvider._online)):(F(hi,"Using default OnlineComponentProvider"),await K0(t,new xU))),t._onlineComponents}function OU(t){return hR(t).then(e=>e.syncEngine)}async function kU(t){let e=await hR(t),n=e.eventManager;return n.onListen=_U.bind(null,e.syncEngine),n.onUnlisten=wU.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=EU.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=TU.bind(null,e.syncEngine),n}function LU(t,e,n={}){let r=new tr;return t.asyncQueue.enqueueAndForget(async()=>(function(o,s,a,u,l){let f=new eE({next:m=>{f.Nu(),s.enqueueAndForget(()=>mU(o,p)),m.fromCache&&u.source==="server"?l.reject(new V(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new W_(a,f,{includeMetadataChanges:!0,qa:!0});return gU(o,p)})(await kU(t),t.asyncQueue,e,n,r)),r.promise}function pR(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var Q0=new Map;var gR="firestore.googleapis.com",Y0=!0,Qf=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new V(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=gR,this.ssl=Y0}else this.host=e.host,this.ssl=e.ssl??Y0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=JA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Wj)throw new V(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=pR(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new V(N.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new V(N.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new V(N.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Us=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qf({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new V(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new V(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qf(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Cv;switch(r.type){case"firstParty":return new Rv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new V(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){let r=Q0.get(n);r&&(F("ComponentProvider","Removing Datastore"),Q0.delete(n),r.terminate())})(this),Promise.resolve()}};function FU(t,e,n,r={}){t=Gc(t,Us);let i=ti(e),o=t._getSettings(),s=re(M({},o),{emulatorOptions:t._getEmulatorOptions()}),a=`${e}:${n}`;i&&(lf(`https://${a}`),df("Firestore",!0)),o.host!==gR&&o.host!==a&&As("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=re(M({},o),{host:a,ssl:i,emulatorOptions:r});if(!Zn(u,s)&&(t._setSettings(u),r.mockUserToken)){let l,f;if(typeof r.mockUserToken=="string")l=r.mockUserToken,f=lt.MOCK_USER;else{l=US(r.mockUserToken,t._app?.options.projectId);let p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new V(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new lt(p)}t._authCredentials=new bv(new Df(l,f))}}var Yf=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Ht=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ai(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(iu(n,t._jsonSchema))return new t(e,r||null,new B(Ve.fromString(n.referencePath)))}};Ht._jsonSchemaVersion="firestore/documentReference/1.0",Ht._jsonSchema={type:Qe("string",Ht._jsonSchemaVersion),referencePath:Qe("string")};var ai=class t extends Yf{constructor(e,n,r){super(e,n,NA(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ht(this.firestore,null,new B(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function au(t,e,...n){if(t=Xt(t),eA("collection","path",e),t instanceof Us){let r=Ve.fromString(e,...n);return m0(r),new ai(t,null,r)}{if(!(t instanceof Ht||t instanceof ai))throw new V(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ve.fromString(e,...n));return m0(r),new ai(t.firestore,null,r)}}function ah(t,e,...n){if(t=Xt(t),arguments.length===1&&(e=qc.newId()),eA("doc","path",e),t instanceof Us){let r=Ve.fromString(e,...n);return g0(r),new Ht(t,null,new B(r))}{if(!(t instanceof Ht||t instanceof ai))throw new V(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ve.fromString(e,...n));return g0(r),new Ht(t.firestore,t instanceof ai?t.converter:null,new B(r))}}var J0="AsyncQueue",Jf=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new $f(this,"async_queue_retry"),this._c=()=>{let r=Tv();r&&F(J0,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let n=Tv();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let n=Tv();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let n=new tr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!zs(e))throw e;F(J0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){let n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Dr("INTERNAL UNHANDLED ERROR: ",Z0(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);let i=H_.createAndSchedule(this,e,n,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&z(47125,{Pc:Z0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let n=this.tc.indexOf(e);this.tc.splice(n,1)}};function Z0(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}var Bs=class extends Us{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Jf,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Jf(e),this._firestoreClient=void 0,await e}}};function mR(t,e){let n=typeof t=="object"?t:gf(),r=typeof t=="string"?t:e||Rf,i=Vc(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=jS("firestore");o&&FU(i,...o)}return i}function yR(t){if(t._terminated)throw new V(N.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||VU(t),t._firestoreClient}function VU(t){let e=t._freezeSettings(),n=(function(i,o,s,a){return new Ov(i,o,s,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,pR(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new tE(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(i){let o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}})(t._componentsProvider))}var ci=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(It.fromBase64String(e))}catch(n){throw new V(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(It.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(iu(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};ci._jsonSchemaVersion="firestore/bytes/1.0",ci._jsonSchema={type:Qe("string",ci._jsonSchemaVersion),bytes:Qe("string")};var nu=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new V(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ru=class{constructor(e){this._methodName=e}};var ui=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new V(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new V(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return pe(this._lat,e._lat)||pe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(iu(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};ui._jsonSchemaVersion="firestore/geoPoint/1.0",ui._jsonSchema={type:Qe("string",ui._jsonSchemaVersion),latitude:Qe("number"),longitude:Qe("number")};var li=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(iu(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new V(N.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};li._jsonSchemaVersion="firestore/vectorValue/1.0",li._jsonSchema={type:Qe("string",li._jsonSchemaVersion),vectorValues:Qe("object")};var jU=/^__.*__$/,nE=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Rr(e,this.data,this.fieldMask,n,this.fieldTransforms):new po(e,this.data,n,this.fieldTransforms)}};function vR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw z(40011,{Ac:t})}}var rE=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new t(M(M({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){let n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){let n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Zf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(vR(this.Ac)&&jU.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}},iE=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ih(e)}Cc(e,n,r,i=!1){return new rE({Ac:e,methodName:n,Dc:r,path:tn.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function UU(t){let e=t._freezeSettings(),n=ih(t._databaseId);return new iE(t._databaseId,!!e.ignoreUndefinedProperties,n)}function BU(t,e,n,r,i,o={}){let s=t.Cc(o.merge||o.mergeFields?2:0,e,n,i);wR("Data must be an object, but it was:",s,r);let a=ER(r,s),u,l;if(o.merge)u=new er(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let f=[];for(let p of o.mergeFields){let m=$U(e,p,n);if(!s.contains(m))throw new V(N.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);zU(f,m)||f.push(m)}u=new er(f),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new nE(new xn(a),u,l)}var oE=class t extends ru{_toFieldTransform(e){return new Kv(e.path,new lo)}isEqual(e){return e instanceof t}};function _R(t,e){if(IR(t=Xt(t)))return wR("Unsupported field value:",e,t),ER(t,e);if(t instanceof ru)return(function(r,i){if(!vR(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let u=_R(a,i.wc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(t,e)}return(function(r,i){if((r=Xt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Ej(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ye.fromDate(r);return{timestampValue:Lf(i.serializer,o)}}if(r instanceof Ye){let o=new Ye(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Lf(i.serializer,o)}}if(r instanceof ui)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ci)return{bytesValue:zA(i.serializer,r._byteString)};if(r instanceof Ht){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:EE(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof li)return(function(s,a){return{mapValue:{fields:{[pE]:{stringValue:gE},[Ns]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.Sc("VectorValues must only contain numeric values.");return _E(a.serializer,l)})}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${lE(r)}`)})(t,e)}function ER(t,e){let n={};return mA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):mo(t,(r,i)=>{let o=_R(i,e.mc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function IR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ye||t instanceof ui||t instanceof ci||t instanceof Ht||t instanceof ru||t instanceof li)}function wR(t,e,n){if(!IR(n)||!tA(n)){let r=lE(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function $U(t,e,n){if((e=Xt(e))instanceof nu)return e._internalPath;if(typeof e=="string")return TR(t,e);throw Zf("Field path arguments must be of type string or ",t,!1,void 0,n)}var HU=new RegExp("[~\\*/\\[\\]]");function TR(t,e,n){if(e.search(HU)>=0)throw Zf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new nu(...e.split("."))._internalPath}catch{throw Zf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Zf(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new V(N.INVALID_ARGUMENT,a+t+u)}function zU(t,e){return t.some(n=>n.isEqual(e))}var Xf=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new sE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(DR("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},sE=class extends Xf{data(){return super.data()}};function DR(t,e){return typeof e=="string"?TR(t,e):e instanceof nu?e._internalPath:e._delegate._internalPath}function qU(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new V(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var aE=class{convertValue(e,n="none"){switch(di(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(br(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw z(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return mo(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){let n=e.fields?.[Ns].arrayValue?.values?.map(r=>Fe(r.doubleValue));return new li(n)}convertGeoPoint(e){return new ui(Fe(e.latitude),Fe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=th(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Qc(e));default:return null}}convertTimestamp(e){let n=Cr(e);return new Ye(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Ve.fromString(e);be(YA(r),9688,{name:e});let i=new Nf(r.get(1),r.get(3)),o=new B(r.popFirst(5));return i.isEqual(n)||Dr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function GU(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Ts=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Cs=class t extends Xf{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new bs(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(DR("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new V(N.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};Cs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Cs._jsonSchema={type:Qe("string",Cs._jsonSchemaVersion),bundleSource:Qe("string","DocumentSnapshot"),bundleName:Qe("string"),bundle:Qe("string")};var bs=class extends Cs{data(e={}){return super.data(e)}},Ss=class t{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ts(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new bs(this._firestore,this._userDataWriter,r.key,r,new Ts(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new V(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new bs(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ts(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new bs(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ts(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,f=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),f=s.indexOf(a.doc.key)),{type:WU(a.type),doc:u,oldIndex:l,newIndex:f}})}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new V(N.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=qc.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function WU(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return z(61501,{type:t})}}Ss._jsonSchemaVersion="firestore/querySnapshot/1.0",Ss._jsonSchema={type:Qe("string",Ss._jsonSchemaVersion),bundleSource:Qe("string","QuerySnapshot"),bundleName:Qe("string"),bundle:Qe("string")};var cE=class extends aE{constructor(e){super(),this.firestore=e}convertBytes(e){return new ci(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ht(this.firestore,null,n)}};function NE(t){t=Gc(t,Yf);let e=Gc(t.firestore,Bs),n=yR(e),r=new cE(e);return qU(t._query),LU(n,t._query).then(i=>new Ss(e,r,t,i))}function ME(t){return CR(Gc(t.firestore,Bs),[new Jc(t._key,si.none())])}function xE(t,e){let n=Gc(t.firestore,Bs),r=ah(t),i=GU(t.converter,e);return CR(n,[BU(UU(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,si.exists(!1))]).then(()=>r)}function CR(t,e){return(function(r,i){let o=new tr;return r.asyncQueue.enqueueAndForget(async()=>DU(await OU(r),i,o)),o.promise})(yR(t),e)}function PE(){return new oE("serverTimestamp")}(function(e,n=!0){(function(i){$s=i})(oi),ii(new fn("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Bs(new Sv(r.getProvider("auth-internal")),new Nv(s,r.getProvider("app-check-internal")),(function(l,f){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new V(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Nf(l.options.projectId,f)})(s,i),s);return o=M({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Mn(f0,h0,e),Mn(f0,h0,"esm2020")})();function UR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var BR=UR,$R=new Er("auth","Firebase",UR());var hh=new ni("@firebase/auth");function KU(t,...e){hh.logLevel<=fe.WARN&&hh.warn(`Auth (${oi}): ${t}`,...e)}function uh(t,...e){hh.logLevel<=fe.ERROR&&hh.error(`Auth (${oi}): ${t}`,...e)}function yi(t,...e){throw XE(t,...e)}function vo(t,...e){return XE(t,...e)}function HR(t,e,n){let r=re(M({},BR()),{[e]:n});return new Er("auth","Firebase",r).create(e,{appName:t.name})}function mi(t){return HR(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function XE(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return $R.create(t,...e)}function K(t,e,...n){if(!t)throw XE(e,...n)}function Nr(t){let e="INTERNAL ASSERTION FAILED: "+t;throw uh(e),new Error(e)}function vi(t,e){t||Nr(e)}function FE(){return typeof self<"u"&&self.location?.href||""}function QU(){return bR()==="http:"||bR()==="https:"}function bR(){return typeof self<"u"&&self.location?.protocol||null}function YU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(QU()||HS()||"connection"in navigator)?navigator.onLine:!0}function JU(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var _o=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,vi(n>e,"Short delay should be less than long delay!"),this.isMobile=BS()||zS()}get(){return YU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function eI(t,e){vi(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var ph=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Nr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Nr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Nr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var ZU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var XU=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],eB=new _o(3e4,6e4);function Ch(t,e){return t.tenantId&&!e.tenantId?re(M({},e),{tenantId:t.tenantId}):e}async function Gs(t,e,n,r,i={}){return zR(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});let a=Lc(M({key:t.config.apiKey},s)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);let l=M({method:e,headers:u},o);return $S()||(l.referrerPolicy="no-referrer"),t.emulatorConfig&&ti(t.emulatorConfig.host)&&(l.credentials="include"),ph.fetch()(await GR(t,t.config.apiHost,n,a),l)})}async function zR(t,e,n){t._canInitEmulator=!1;let r=M(M({},ZU),e);try{let i=new VE(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=await o.json();if("needConfirmation"in s)throw ch(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw ch(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw ch(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw ch(t,"user-disabled",s);let f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw HR(t,f,l);yi(t,f)}}catch(i){if(i instanceof Zt)throw i;yi(t,"network-request-failed",{message:String(i)})}}async function qR(t,e,n,r,i={}){let o=await Gs(t,e,n,r,i);return"mfaPendingCredential"in o&&yi(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function GR(t,e,n,r){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?eI(t.config,i):`${t.config.apiScheme}://${i}`;return XU.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}var VE=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(vo(this.auth,"network-request-failed")),eB.get())})}};function ch(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=vo(t,e,r);return i.customData._tokenResponse=n,i}async function tB(t,e){return Gs(t,"POST","/v1/accounts:delete",e)}async function gh(t,e){return Gs(t,"POST","/v1/accounts:lookup",e)}function cu(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function WR(t,e=!1){let n=Xt(t),r=await n.getIdToken(e),i=tI(r);K(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:cu(OE(i.auth_time)),issuedAtTime:cu(OE(i.iat)),expirationTime:cu(OE(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}}function OE(t){return Number(t)*1e3}function tI(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return uh("JWT malformed, contained fewer than 3 sections"),null;try{let i=cf(n);return i?JSON.parse(i):(uh("Failed to decode base64 JWT payload"),null)}catch(i){return uh("Caught error parsing JWT payload as JSON",i?.toString()),null}}function SR(t){let e=tI(t);return K(e,"internal-error"),K(typeof e.exp<"u","internal-error"),K(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function lu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Zt&&nB(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function nB({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var jE=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var du=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=cu(this.lastLoginAt),this.creationTime=cu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function mh(t){let e=t.auth,n=await t.getIdToken(),r=await lu(t,gh(e,{idToken:n}));K(r?.users.length,e,"internal-error");let i=r.users[0];t._notifyReloadListener(i);let o=i.providerUserInfo?.length?QR(i.providerUserInfo):[],s=rB(t.providerData,o),a=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!s?.length,l=a?u:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new du(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(t,f)}async function KR(t){let e=Xt(t);await mh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function rB(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function QR(t){return t.map(r=>{var i=r,{providerId:e}=i,n=up(i,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}async function iB(t,e){let n=await zR(t,{},async()=>{let r=Lc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=await GR(t,i,"/v1/token",`key=${o}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return t.emulatorConfig&&ti(t.emulatorConfig.host)&&(u.credentials="include"),ph.fetch()(s,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function oB(t,e){return Gs(t,"POST","/v2/accounts:revokeToken",Ch(t,e))}var uu=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){K(e.idToken,"internal-error"),K(typeof e.idToken<"u","internal-error"),K(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):SR(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){K(e.length!==0,"internal-error");let n=SR(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(K(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){let{accessToken:r,refreshToken:i,expiresIn:o}=await iB(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(K(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(K(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(K(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Nr("not implemented")}};function pi(t,e){K(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var gi=class t{constructor(o){var s=o,{uid:e,auth:n,stsTokenManager:r}=s,i=up(s,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new jE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new du(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){let n=await lu(this,this.stsTokenManager.getToken(this.auth,e));return K(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return WR(this,e)}reload(){return KR(this)}_assign(e){this!==e&&(K(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>M({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(re(M({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){K(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await mh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(en(this.auth.app))return Promise.reject(mi(this.auth));let e=await this.getIdToken();return await lu(this,tB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return re(M({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>M({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){let r=n.displayName??void 0,i=n.email??void 0,o=n.phoneNumber??void 0,s=n.photoURL??void 0,a=n.tenantId??void 0,u=n._redirectEventId??void 0,l=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:p,emailVerified:m,isAnonymous:y,providerData:S,stsTokenManager:A}=n;K(p&&A,e,"internal-error");let R=uu.fromJSON(this.name,A);K(typeof p=="string",e,"internal-error"),pi(r,e.name),pi(i,e.name),K(typeof m=="boolean",e,"internal-error"),K(typeof y=="boolean",e,"internal-error"),pi(o,e.name),pi(s,e.name),pi(a,e.name),pi(u,e.name),pi(l,e.name),pi(f,e.name);let L=new t({uid:p,auth:e,email:i,emailVerified:m,displayName:r,isAnonymous:y,photoURL:s,phoneNumber:o,tenantId:a,stsTokenManager:R,createdAt:l,lastLoginAt:f});return S&&Array.isArray(S)&&(L.providerData=S.map(te=>M({},te))),u&&(L._redirectEventId=u),L}static async _fromIdTokenResponse(e,n,r=!1){let i=new uu;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await mh(o),o}static async _fromGetAccountInfoResponse(e,n,r){let i=n.users[0];K(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?QR(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new uu;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new du(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u}};var AR=new Map;function Mr(t){vi(t instanceof Function,"Expected a class definition");let e=AR.get(t);return e?(vi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,AR.set(t,e),e)}var sB=(()=>{class t{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(n,r){this.storage[n]=r}async _get(n){let r=this.storage[n];return r===void 0?null:r}async _remove(n){delete this.storage[n]}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),UE=sB;function lh(t,e,n){return`firebase:${t}:${e}:${n}`}var yh=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=lh(this.userKey,i.apiKey,o),this.fullPersistenceKey=lh("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=await gh(this.auth,{idToken:e}).catch(()=>{});return n?gi._fromGetAccountInfoResponse(this.auth,n,e):null}return gi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new t(Mr(UE),e,r);let i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l),o=i[0]||Mr(UE),s=lh(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let f=await l._get(s);if(f){let p;if(typeof f=="string"){let m=await gh(e,{idToken:f}).catch(()=>{});if(!m)break;p=await gi._fromGetAccountInfoResponse(e,m,f)}else p=gi._fromJSON(e,f);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],a&&await o._set(s,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==o)try{await l._remove(s)}catch{}})),new t(o,e,r))}};function RR(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(XR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(YR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(tN(e))return"Blackberry";if(nN(e))return"Webos";if(JR(e))return"Safari";if((e.includes("chrome/")||ZR(e))&&!e.includes("edge/"))return"Chrome";if(eN(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function YR(t=ut()){return/firefox\//i.test(t)}function JR(t=ut()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ZR(t=ut()){return/crios\//i.test(t)}function XR(t=ut()){return/iemobile/i.test(t)}function eN(t=ut()){return/android/i.test(t)}function tN(t=ut()){return/blackberry/i.test(t)}function nN(t=ut()){return/webos/i.test(t)}function nI(t=ut()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function aB(t=ut()){return nI(t)&&!!window.navigator?.standalone}function cB(){return qS()&&document.documentMode===10}function rN(t=ut()){return nI(t)||eN(t)||nN(t)||tN(t)||/windows phone/i.test(t)||XR(t)}function iN(t,e=[]){let n;switch(t){case"Browser":n=RR(ut());break;case"Worker":n=`${RR(ut())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${oi}/${r}`}var BE=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function uB(t,e={}){return Gs(t,"GET","/v2/passwordPolicy",Ch(t,e))}var lB=6,$E=class{constructor(e){let n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??lB,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var HE=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vh(this),this.idTokenSubscription=new vh(this),this.beforeStateQueue=new BE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$R,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Mr(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await yh.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let n=await gh(this,{idToken:e}),r=await gi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(en(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}let n=await this.assertedPersistence.getCurrentUser(),r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let o=this.redirectUser?._redirectEventId,s=r?._redirectEventId,a=await this.tryRedirectSignIn(e);(!o||o===s)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return K(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await mh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=JU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(en(this.app))return Promise.reject(mi(this));let n=e?Xt(e):null;return n&&K(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&K(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return en(this.app)?Promise.reject(mi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return en(this.app)?Promise.reject(mi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Mr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await uB(this),n=new $E(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Er("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){let n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await oB(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){let r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let n=e&&Mr(e)||this._popupRedirectResolver;K(n,this,"argument-error"),this.redirectPersistenceManager=await yh.create(this,[Mr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(K(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return K(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=iN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);let r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(en(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&KU(`Error while retrieving App Check token: ${e.error}`),e?.token}};function bh(t){return Xt(t)}var vh=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=QS(n=>this.observer=n)}get next(){return K(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var rI={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function dB(t){rI=t}function fB(t){return rI.loadJS(t)}function hB(){return rI.gapiScript}function oN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function sN(t,e){let n=Vc(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(Zn(o,e??{}))return i;yi(i,"already-initialized")}return n.initialize({options:e})}function pB(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Mr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function aN(t,e,n){let r=bh(t);K(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=cN(e),{host:s,port:a}=gB(e),u=a===null?"":`:${a}`,l={url:`${o}//${s}${u}/`},f=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){K(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),K(Zn(l,r.config.emulator)&&Zn(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,ti(s)?(lf(`${o}//${s}${u}`),df("Auth",!0)):i||mB()}function cN(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function gB(t){let e=cN(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:NR(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:NR(s)}}}function NR(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function mB(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var _h=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Nr("not implemented")}_getIdTokenResponse(e){return Nr("not implemented")}_linkToIdToken(e,n){return Nr("not implemented")}_getReauthenticationResolver(e){return Nr("not implemented")}};async function kE(t,e){return qR(t,"POST","/v1/accounts:signInWithIdp",Ch(t,e))}var Eh=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var zE=class extends Eh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};async function yB(t,e){return qR(t,"POST","/v1/accounts:signUp",Ch(t,e))}var Eo=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){let o=await gi._fromIdTokenResponse(e,r,i),s=MR(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);let i=MR(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})}};function MR(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}async function iI(t){if(en(t.app))return Promise.reject(mi(t));let e=bh(t);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new Eo({user:e.currentUser,providerId:null,operationType:"signIn"});let n=await yB(e,{returnSecureToken:!0}),r=await Eo._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(r.user),r}var qE=class t extends Zt{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function uN(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?qE._fromErrorAndOperation(t,o,e,r):o})}async function vB(t,e,n=!1){let r=await lu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Eo._forOperation(t,"link",r)}async function _B(t,e,n=!1){let{auth:r}=t;if(en(r.app))return Promise.reject(mi(r));let i="reauthenticate";try{let o=await lu(t,uN(r,i,e,t),n);K(o.idToken,r,"internal-error");let s=tI(o.idToken);K(s,r,"internal-error");let{sub:a}=s;return K(t.uid===a,r,"user-mismatch"),Eo._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&yi(r,"user-mismatch"),o}}async function EB(t,e,n=!1){if(en(t.app))return Promise.reject(mi(t));let r="signIn",i=await uN(t,r,e),o=await Eo._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}function lN(t,e,n,r){return Xt(t).onIdTokenChanged(e,n,r)}function dN(t,e,n){return Xt(t).beforeAuthStateChanged(e,n)}var Ih="__sak";var wh=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ih,"1"),this.storage.removeItem(Ih),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var IB=1e3,wB=10,TB=(()=>{class t extends wh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=rN(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);cB()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,wB):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},IB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(n,r){await super._set(n,r),this.localCache[n]=JSON.stringify(r)}async _get(n){let r=await super._get(n);return this.localCache[n]=JSON.stringify(r),r}async _remove(n){await super._remove(n),delete this.localCache[n]}}return t.type="LOCAL",t})(),fN=TB;var DB=(()=>{class t extends wh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),oI=DB;function CB(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}var bB=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}async handleEvent(n){let r=n,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(async f=>f(r.origin,s)),l=await CB(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function hN(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var GE=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=hN("",20);i.port1.start();let f=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(f),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(m.data.response);break;default:clearTimeout(f),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}};function ar(){return window}function SB(t){ar().location.href=t}function pN(){return typeof ar().WorkerGlobalScope<"u"&&typeof ar().importScripts=="function"}async function AB(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function RB(){return navigator?.serviceWorker?.controller||null}function NB(){return pN()?self:null}var gN="firebaseLocalStorageDb",MB=1,Th="firebaseLocalStorage",mN="fbase_key",Io=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Sh(t,e){return t.transaction([Th],e?"readwrite":"readonly").objectStore(Th)}function xB(){let t=indexedDB.deleteDatabase(gN);return new Io(t).toPromise()}function WE(){let t=indexedDB.open(gN,MB);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Th,{keyPath:mN})}catch(i){n(i)}}),t.addEventListener("success",async()=>{let r=t.result;r.objectStoreNames.contains(Th)?e(r):(r.close(),await xB(),e(await WE()))})})}async function xR(t,e,n){let r=Sh(t,!0).put({[mN]:e,value:n});return new Io(r).toPromise()}async function PB(t,e){let n=Sh(t,!1).get(e),r=await new Io(n).toPromise();return r===void 0?null:r.value}function PR(t,e){let n=Sh(t,!0).delete(e);return new Io(n).toPromise()}var OB=800,kB=3,LB=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await WE(),this.db)}async _withRetries(n){let r=0;for(;;)try{let i=await this._openDb();return await n(i)}catch(i){if(r++>kB)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return pN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=bB._getInstance(NB()),this.receiver._subscribe("keyChanged",async(n,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(n,r)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await AB(),!this.activeServiceWorker)return;this.sender=new GE(this.activeServiceWorker);let n=await this.sender._send("ping",{},800);n&&n[0]?.fulfilled&&n[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(n){if(!(!this.sender||!this.activeServiceWorker||RB()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let n=await WE();return await xR(n,Ih,"1"),await PR(n,Ih),!0}catch{}return!1}async _withPendingWrite(n){this.pendingWrites++;try{await n()}finally{this.pendingWrites--}}async _set(n,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>xR(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)))}async _get(n){let r=await this._withRetries(i=>PB(i,n));return this.localCache[n]=r,r}async _remove(n){return this._withPendingWrite(async()=>(await this._withRetries(r=>PR(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)))}async _poll(){let n=await this._withRetries(o=>{let s=Sh(o,!1).getAll();return new Io(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),OB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),yN=LB;var RX=oN("rcb"),NX=new _o(3e4,6e4);function FB(t,e){return e?Mr(e):(K(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var fu=class extends _h{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return kE(e,this._buildIdpRequest())}_linkToIdToken(e,n){return kE(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return kE(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function VB(t){return EB(t.auth,new fu(t),t.bypassAuthState)}function jB(t){let{auth:e,user:n}=t;return K(n,e,"internal-error"),_B(n,new fu(t),t.bypassAuthState)}async function UB(t){let{auth:e,user:n}=t;return K(n,e,"internal-error"),vB(n,new fu(t),t.bypassAuthState)}var KE=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return VB;case"linkViaPopup":case"linkViaRedirect":return UB;case"reauthViaPopup":case"reauthViaRedirect":return jB;default:yi(this.auth,"internal-error")}}resolve(e){vi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var MX=new _o(2e3,1e4);var BB="pendingRedirect",dh=new Map,QE=class extends KE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=dh.get(this.auth._key());if(!e){try{let r=await $B(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}dh.set(this.auth._key(),e)}return this.bypassAuthState||dh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function $B(t,e){let n=qB(e),r=zB(t);if(!await r._isAvailable())return!1;let i=await r._get(n)==="true";return await r._remove(n),i}function HB(t,e){dh.set(t._key(),e)}function zB(t){return Mr(t._redirectPersistence)}function qB(t){return lh(BB,t.config.apiKey,t.name)}async function GB(t,e,n=!1){if(en(t.app))return Promise.reject(mi(t));let r=bh(t),i=FB(r,e),s=await new QE(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}var WB=600*1e3,YE=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!KB(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!vN(e)){let r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(vo(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=WB&&this.cachedEventUids.clear(),this.cachedEventUids.has(OR(e))}saveEventToCache(e){this.cachedEventUids.add(OR(e)),this.lastProcessedEventTime=Date.now()}};function OR(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function vN({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function KB(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vN(t);default:return!1}}async function QB(t,e={}){return Gs(t,"GET","/v1/projects",e)}var YB=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,JB=/^https?/;async function ZB(t){if(t.config.emulator)return;let{authorizedDomains:e}=await QB(t);for(let n of e)try{if(XB(n))return}catch{}yi(t,"unauthorized-domain")}function XB(t){let e=FE(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!JB.test(n))return!1;if(YB.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var e$=new _o(3e4,6e4);function kR(){let t=ar().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function t$(t){return new Promise((e,n)=>{function r(){kR(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{kR(),n(vo(t,"network-request-failed"))},timeout:e$.get()})}if(ar().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ar().gapi?.load)r();else{let i=oN("iframefcb");return ar()[i]=()=>{gapi.load?r():n(vo(t,"network-request-failed"))},fB(`${hB()}?onload=${i}`).catch(o=>n(o))}}).catch(e=>{throw fh=null,e})}var fh=null;function n$(t){return fh=fh||t$(t),fh}var r$=new _o(5e3,15e3),i$="__/auth/iframe",o$="emulator/auth/iframe",s$={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},a$=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function c$(t){let e=t.config;K(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?eI(e,o$):`https://${t.config.authDomain}/${i$}`,r={apiKey:e.apiKey,appName:t.name,v:oi},i=a$.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Lc(r).slice(1)}`}async function u$(t){let e=await n$(t),n=ar().gapi;return K(n,t,"internal-error"),e.open({where:document.body,url:c$(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:s$,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});let s=vo(t,"network-request-failed"),a=ar().setTimeout(()=>{o(s)},r$.get());function u(){ar().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})}))}var l$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},d$=500,f$=600,h$="_blank",p$="http://localhost",Dh=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function g$(t,e,n,r=d$,i=f$){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=re(M({},l$),{width:r.toString(),height:i.toString(),top:o,left:s}),l=ut().toLowerCase();n&&(a=ZR(l)?h$:n),YR(l)&&(e=e||p$,u.scrollbars="yes");let f=Object.entries(u).reduce((m,[y,S])=>`${m}${y}=${S},`,"");if(aB(l)&&a!=="_self")return m$(e||"",a),new Dh(null);let p=window.open(e||"",a,f);K(p,t,"popup-blocked");try{p.focus()}catch{}return new Dh(p)}function m$(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var y$="__/auth/handler",v$="emulator/auth/handler",_$=encodeURIComponent("fac");async function LR(t,e,n,r,i,o){K(t.config.authDomain,t,"auth-domain-config-required"),K(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:oi,eventId:i};if(e instanceof Eh){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",KS(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[f,p]of Object.entries(o||{}))s[f]=p}if(e instanceof zE){let f=e.getScopes().filter(p=>p!=="");f.length>0&&(s.scopes=f.join(","))}t.tenantId&&(s.tid=t.tenantId);let a=s;for(let f of Object.keys(a))a[f]===void 0&&delete a[f];let u=await t._getAppCheckToken(),l=u?`#${_$}=${encodeURIComponent(u)}`:"";return`${E$(t)}?${Lc(a).slice(1)}${l}`}function E$({config:t}){return t.emulator?eI(t,v$):`https://${t.authDomain}/${y$}`}var LE="webStorageSupport",JE=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=oI,this._completeRedirectFn=GB,this._overrideRedirectResult=HB}async _openPopup(e,n,r,i){vi(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");let o=await LR(e,n,r,FE(),i);return g$(e,o,hN())}async _openRedirect(e,n,r,i){await this._originValidation(e);let o=await LR(e,n,r,FE(),i);return SB(o),new Promise(()=>{})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(vi(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){let n=await u$(e),r=new YE(e);return n.register("authEvent",i=>(K(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(LE,{type:LE},i=>{let o=i?.[0]?.[LE];o!==void 0&&n(!!o),yi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ZB(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return rN()||JR()||nI()}},_N=JE;var FR="@firebase/auth",VR="1.11.1";var ZE=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){K(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function I$(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function w$(t){ii(new fn("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;K(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:iN(t)},l=new HE(r,i,o,u);return pB(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ii(new fn("auth-internal",e=>{let n=bh(e.getProvider("auth").getImmediate());return(r=>new ZE(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Mn(FR,VR,I$(t)),Mn(FR,VR,"esm2020")}var T$=300,D$=Jy("authIdTokenMaxAge")||T$,jR=null,C$=t=>async e=>{let n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>D$)return;let i=n?.token;jR!==i&&(jR=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function sI(t=gf()){let e=Vc(t,"auth");if(e.isInitialized())return e.getImmediate();let n=sN(t,{popupRedirectResolver:_N,persistence:[yN,fN,oI]}),r=Jy("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=C$(o.toString());dN(n,s,()=>s(n.currentUser)),lN(n,a=>s(a))}}let i=Qy("auth");return i&&aN(n,`http://${i}`),n}function b$(){return document.getElementsByTagName("head")?.[0]??document}dB({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=vo("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",b$().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});w$("Browser");var Ws=class t{db=mR();auth=sI();authReadyPromise;constructor(){this.authReadyPromise=this.signInAnon()}async signInAnon(){if(!this.auth.currentUser)try{let e=await iI(this.auth);console.log("Firebase: Anonymous Sign-In Successful. UID: "+e.user.uid)}catch(e){throw console.error("Firebase: Anonymous Sign-In Failed: "+e),new Error("Could not authenticate Demo user.")}}async withAuth(e){return await this.authReadyPromise,e()}async saveOrder(e){return xE(au(this.db,"orders"),re(M({},e),{createdAt:PE()}))}async saveOrder2(e){return this.withAuth(()=>xE(au(this.db,"orders"),re(M({},e),{createdAt:PE()})))}async getOrders(){try{let e=await NE(au(this.db,"orders"));return console.log("Firestore Snapshot: ",e.docs.length,e.docs.map(n=>n.data())),e.docs.map(n=>M({id:n.id},n.data()))}catch(e){throw console.error("Firestore: getOrders error",e),e}}async getOrders2(){return this.withAuth(async()=>(await NE(au(this.db,"orders"))).docs.map(n=>M({id:n.id},n.data())))}async deleteOrder(e){return ME(ah(this.db,"orders",e))}async deleteOrder2(e){return this.withAuth(()=>ME(ah(this.db,"orders",e)))}async testConnection(){try{let e=await this.saveOrder({test:!0});console.log("Firestore: test write OK: ",e.id)}catch(e){console.log("Firestore: test write FAILED: ",e)}}static \u0275fac=function(n){return new(n||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})};var _i=class t{constructor(e){this.firebase=e;let n=localStorage.getItem("taniti-cart");n&&this.cartItemsSignal.set(JSON.parse(n))}cartItemsSignal=qe([]);cartItems=this.cartItemsSignal.asReadonly();cartTotal=ry(()=>this.cartItems().reduce((e,n)=>e+n.price,0));saveCart(){localStorage.setItem("taniti-cart",JSON.stringify(this.cartItemsSignal()))}addItem(e){this.cartItemsSignal.update(n=>[...n,e]),this.saveCart()}removeItem(e){console.log("CART SERVICE: Deleting "+e.name),this.cartItemsSignal.update(n=>n.filter(r=>r.id!==e.id)),this.saveCart()}clearItems(){this.cartItemsSignal.set([]),this.saveCart()}async submitOrder(){console.log("CART SERVICE: Submitting Order...");let e=this.cartItems(),n=this.cartTotal();if(this.cartItems().length===0){console.error("CART SERVICE: Cannot submit an empty order.");return}let r=this.cartItems().map(s=>M({id:s.id,name:s.name,price:Number(s.price)},typeof s.image=="string"&&s.image.length>0?{image:s.image}:{}));if(!r.every(s=>this.isValidActivityClient(s)))throw console.error("CART SERVICE: Submission Cancelled due to invalid Activity Data."),new Error("CART SERVICE: Invalid Activity Data in Cart.");let o={activities:r,total:n};console.log("CART SERVICE: Payload for Firestore: "+JSON.stringify(o,null,2));try{let s=await this.firebase.saveOrder2(o);return console.log("CART SERVICE: Order saved with ID: "+s.id),this.clearItems(),s.id}catch(s){throw console.error("CART SERVICE: Failed to submit Order: "+s),s}}isValidActivityClient(e){return typeof e.id!="string"||e.id.length===0?(console.error("CART SERVICE: Validation Error: Invalid ID: ",e),!1):typeof e.name!="string"||e.name.length===0?(console.error("CART SERVICE: Validation Error: Invalid Name: ",e),!1):Number.isFinite(e.price)?e.image!==void 0&&typeof e.image!="string"?(console.error("CART SERVICE: Validation Error: Invalid Image: ",e),!1):!0:(console.error("CART SERVICE: Validation Error: Invalid Price: ",e),!1)}static \u0275fac=function(n){return new(n||t)(Q(Ws))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})};var Ah=class t{constructor(e){this.cart=e}activity;addToCart(){this.cart.addItem(this.activity),console.log(`${this.activity.name} added to cart`)}static \u0275fac=function(n){return new(n||t)(me(_i))};static \u0275cmp=Se({type:t,selectors:[["app-product"]],inputs:{activity:"activity"},decls:9,vars:3,consts:[[1,"product-shell"],[1,"product-container"],["alt","Product",3,"src"],["id","ATC",3,"click"]],template:function(n,r){n&1&&(Ie(0,"div",0)(1,"div",1)(2,"h2"),ce(3),we(),Ie(4,"p"),ce(5),we(),Yr(6,"img",2),Ie(7,"button",3),Kn("click",function(){return r.addToCart()}),ce(8,"Add to Cart"),we()()()),n&2&&(P(3),ze(r.activity.name),P(2),ln("$",r.activity.price),P(),Wn("src",r.activity.image,Mt))},styles:[".product-container[_ngcontent-%COMP%]{margin:0;padding:.5rem;display:flex;flex-direction:column;gap:1rem;background-color:transparent;color:var(--highlight);transition:all .1s ease-in-out}.product-container[_ngcontent-%COMP%]:hover{background-color:var(--primary);color:#fffaf0}.product-container[_ngcontent-%COMP%]:hover   button[_ngcontent-%COMP%], .product-container[_ngcontent-%COMP%]:hover   p[_ngcontent-%COMP%]{color:#fffaf0}h2[_ngcontent-%COMP%]{margin:0;font-family:Malvie,sans-serif}p[_ngcontent-%COMP%]{margin:0;color:var(--text)}img[_ngcontent-%COMP%]{margin:0;max-width:200px;height:150px;object-fit:cover}button[_ngcontent-%COMP%]{margin:.5rem;padding:0;font-family:Bebas Neue,sans-serif;font-size:1.5rem;font-weight:700;background-color:transparent;color:transparent;border:5px solid transparent;transition:all .1s ease-in-out}#ATC[_ngcontent-%COMP%]:hover{background-color:#fffaf0;color:var(--primary);border:5px solid floralwhite;cursor:pointer;transform:scale(1.07)}"]})};function S$(t,e){if(t&1&&Ee(0,"app-info",1),t&2){let n=W();ae("data",n.pageData.desc)}}function A$(t,e){if(t&1&&Ee(0,"app-product",4),t&2){let n=e.$implicit;ae("activity",n)}}function R$(t,e){if(t&1&&(G(0,"div",3),xt(1,A$,1,1,"app-product",4,un),se()),t&2){let n=W();P(),Pt(n.pageData.activityData)}}function N$(t,e){if(t&1&&Ee(0,"app-info",1),t&2){let n=e.$implicit;ae("data",n)}}var Ei=class t{constructor(e){this.route=e}pageData;ngOnInit(){this.pageData=this.route.snapshot.data.data}static \u0275fac=function(n){return new(n||t)(me(Nn))};static \u0275cmp=Se({type:t,selectors:[["app-page"]],inputs:{pageData:"pageData"},decls:7,vars:3,consts:[[1,"page-shell"],[3,"data"],[1,"pageInfo-container"],[1,"activity-container"],[3,"activity"]],template:function(n,r){n&1&&(G(0,"div",0),Ee(1,"app-banner",1),G(2,"div",2),ie(3,S$,1,1,"app-info",1),ie(4,R$,3,0,"div",3),xt(5,N$,1,1,"app-info",1,un),se()()),n&2&&(P(),ae("data",r.pageData.bannerData),P(2),oe(r.pageData.desc.content!=""?3:-1),P(),oe(r.pageData.activityData.length>0?4:-1),P(),Pt(r.pageData.infoData))},dependencies:[Jn,ms,Ah],styles:[".pageInfo-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;align-items:center;gap:3rem}.activity-container[_ngcontent-%COMP%]{max-width:var(--maxWidth);display:grid;grid-template-columns:repeat(3,1fr);row-gap:1rem;column-gap:1rem}@media(max-width:750px){.activity-container[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media(max-width:550px){.activity-container[_ngcontent-%COMP%]{grid-template-columns:repeat(1,1fr)}}"]})};var IN=[],wN=[],TN=[],DN=[{id:"e1",name:"Museum",price:50,image:"pageMedia/entertainment-museum.jpeg"},{id:"e2",name:"Bowling",price:20,image:"pageMedia/entertainment-bowling.jpeg"},{id:"e3",name:"Fishing",price:20,image:"pageMedia/entertainment-bowling.jpeg"},{id:"e4",name:"Snorkeling",price:20,image:"pageMedia/entertainment-bowling.jpeg"},{id:"e5",name:"Ziplining",price:20,image:"pageMedia/entertainment-bowling.jpeg"},{id:"e6",name:"Night Club",price:20,image:"pageMedia/entertainment-bowling.jpeg"},{id:"e7",name:"Art Gallery",price:20,image:"pageMedia/entertainment-bowling.jpeg"},{id:"e8",name:"Golf",price:20,image:"pageMedia/entertainment-bowling.jpeg"}],CN=[{id:"s1",name:"Volcano Tour",price:20,image:"pageMedia/sightseeing-volcano.jpeg"},{id:"s2",name:"Helicopter Tour",price:20,image:"banners/entertainment.jpeg"},{id:"s3",name:"Boat Tour",price:20,image:"pageMedia/entertainment-bowling.jpeg"},{id:"s4",name:"Bus Tour",price:20,image:"pageMedia/entertainment-bowling.jpeg"},{id:"s5",name:"Bike Tour",price:20,image:"pageMedia/transportation-bike.jpeg"},{id:"s6",name:"Rainforest Hike",price:20,image:"pageMedia/sightseeing-rainforest.jpeg"}];var bN={bannerData:{bannerType:"subpage",title:"",image:"banners/transportation.jpeg",button:"Transportation",interactive:!1},desc:{},activityData:IN,infoData:[{title:"How to Get Here",type:0,content:"Almost all visitors arrive to Taniti by air, though some arrive on a small cruise ship that docks in Yellow Leaf Bay for one night per week. Taniti is served by a small airport that can accommodate small jets and propeller planes. Taniti is in the process of expanding the airport so larger jets will be able to land on the island within the next few years.",image:"pageMedia/transportation-plane.jpeg"},{title:"How to Get Around",type:0,content:"Public buses serve Taniti City and run from 5 a.m. to 11 p.m. every day. Private buses serve the rest of the island. Taxis are available in Taniti City, and rental cars can be rented from a local rental agency near the airport. Bikes and helmets are available to rent from several vendors (helmets are required by law). Taniti City is fairly flat and very walkable. Many tourists stay in the area surrounding Merriton Landing: this area is easy to explore on foot.",image:"pageMedia/transportation-bike.jpeg"}]},SN={bannerData:{bannerType:"subpage",title:"",image:"banners/lodging.jpeg",button:"Lodging",interactive:!1},desc:{},activityData:wN,infoData:[{title:"Luxury Hotels",type:0,content:"Taniti has a wide variety of lodging that ranges from an inexpensive hostel to one large, four-star resort.",image:"pageMedia/lodging-hotel.jpeg"},{title:"Bed & Breakfasts",type:0,content:"There are many small, family-owned hotels and a growing number of bed and breakfasts. All types of lodging are strictly regulated and regularly inspected by the Tanitian government.",image:"pageMedia/lodging-bnb.jpeg"}]},AN={bannerData:{bannerType:"subpage",title:"",image:"banners/food.jpeg",button:"Food",interactive:!1},desc:{},activityData:TN,infoData:[{title:"Restaurants",type:0,content:"Taniti currently has 10 restaurants: five serve mostly local fish and rice, three serve American-style meals, and two serve Pan-Asian cuisine.",image:"pageMedia/food-restaurant.jpeg"},{title:"Grocery",type:0,content:"Taniti has two supermarkets, two smaller grocery stores, and one convenience store that is open 24 hours a day.",image:"pageMedia/food-grocery.jpeg"}]},RN={bannerData:{bannerType:"subpage",title:"",image:"banners/entertainment.jpeg",button:"Entertainment",interactive:!1},desc:{title:"",type:1,content:"Most people visit Taniti to enjoy the beaches, explore the rainforest, and to visit the volcano. However, there are other things to do, including visiting a local history museum, going on chartered fishing tours, snorkeling, zip-lining in the rainforest, visiting several pubs, including a microbrewery, dancing at a new dance club, seeing a movie, taking helicopter rides, playing at an arcade, visiting art galleries, and bowling. Also, a nine-hole golf course should be operational by next year. Many of these activities are located in Merriton Landing, which is a rapidly developing area on the north side of Yellow Leaf Bay.",image:""},activityData:DN,infoData:[]},NN={bannerData:{bannerType:"subpage",title:"",image:"banners/sightseeing.jpeg",button:"Sightseeing",interactive:!1},desc:{title:"",type:1,content:"Most tourists spend most of their time in Taniti City, which boasts native architecture and nearby white, sandy beaches that encircle Yellow Leaf Bay. Other popular activities include boat or bus tours of the island, hikes in the rainforest, or visits to Taniti\u2019s active volcano.",image:""},activityData:CN,infoData:[]};function M$(t,e){if(t&1&&Yr(0,"img",2),t&2){let n=W();Wn("src",n.item.image,Mt)}}function x$(t,e){if(t&1){let n=Bt();Ie(0,"button",4),Kn("click",function(){At(n);let i=W();return Rt(i.removeFromCart())}),ce(1,"DELETE"),we()}}function P$(t,e){if(t&1){let n=Bt();Ie(0,"button",4),Kn("click",function(){At(n);let i=W();return Rt(i.clearCart())}),ce(1,"CLEAR"),we()}}var Rh=class t{constructor(e){this.cart=e}item;real=!0;removeFromCart(){console.log("ITEM: Deleting "+this.item.name),this.cart.removeItem(this.item)}clearCart(){console.log("ITEM: Clearing Cart"),this.cart.clearItems()}static \u0275fac=function(n){return new(n||t)(me(_i))};static \u0275cmp=Se({type:t,selectors:[["app-item"]],inputs:{item:"item",real:"real"},decls:9,vars:4,consts:[[1,"item-shell"],[1,"item-container"],[3,"src"],[1,"price"],[3,"click"]],template:function(n,r){n&1&&(Ie(0,"div",0)(1,"div",1),ie(2,M$,1,1,"img",2),Ie(3,"p"),ce(4),we(),Ie(5,"p",3),ce(6),we(),ie(7,x$,2,0,"button")(8,P$,2,0,"button"),we()()),n&2&&(P(2),oe(r.item.image!=""?2:-1),P(2),ze(r.item.name),P(2),ln("$",r.item.price),P(),oe(r.real?7:8))},styles:[".item-shell[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;width:100%}.item-container[_ngcontent-%COMP%]{margin:0;padding:1rem;display:flex;flex-direction:row;align-items:center;gap:1rem;flex:1;background-color:var(--primary)}img[_ngcontent-%COMP%]{width:96px;height:48px;object-fit:cover}p[_ngcontent-%COMP%]{margin:0;padding:0;font-size:1.5rem;color:#fffaf0}.price[_ngcontent-%COMP%]{margin-left:auto}button[_ngcontent-%COMP%]{padding:.25rem .5rem;background-color:transparent;color:#ff4646;border:none}button[_ngcontent-%COMP%]:hover{background-color:#ff4646;color:#fff;cursor:pointer}@media(max-width:550px){.item-container[_ngcontent-%COMP%]{padding:.5rem}img[_ngcontent-%COMP%]{width:64px;height:32px}p[_ngcontent-%COMP%]{font-size:1.25rem}}"]})};var O$=t=>({id:"0",name:"Total",price:t,image:""});function k$(t,e){t&1&&(G(0,"p",4),ce(1,"Cart is Empty"),se())}function L$(t,e){if(t&1&&Ee(0,"app-item",5),t&2){let n=e.$implicit;ae("item",n)}}function F$(t,e){if(t&1){let n=Bt();xt(0,L$,1,1,"app-item",5,un),G(2,"div",6),Ee(3,"app-item",7),G(4,"button",8),Cn("click",function(){At(n);let i=W();return Rt(i.submitOrder())}),ce(5,"Submit Order"),se()()}if(t&2){let n=W();Pt(n.cartItems()),P(3),ae("item",nc(2,O$,n.cartTotal()))("real",!1)}}var Nh=class t{constructor(e){this.cartService=e;this.cartItems=e.cartItems,this.cartTotal=e.cartTotal}bannerData={bannerType:"subpage",title:"",image:"banners/taniti.jpeg",button:"Cart",interactive:!1};cartItems;cartTotal;async submitOrder(){try{await this.cartService.submitOrder()}catch(e){console.log("CART: Error submitting Order: "+e)}}static \u0275fac=function(n){return new(n||t)(me(_i))};static \u0275cmp=Se({type:t,selectors:[["app-cart"]],decls:6,vars:2,consts:[[1,"cart-shell"],[3,"data"],[1,"cart-wrapper"],[1,"cart-container"],[1,"empty"],[3,"item"],[1,"total-container"],[3,"item","real"],[3,"click"]],template:function(n,r){n&1&&(G(0,"div",0),Ee(1,"app-banner",1),G(2,"div",2)(3,"div",3),ie(4,k$,2,0,"p",4)(5,F$,6,4),se()()()),n&2&&(P(),ae("data",r.bannerData),P(3),oe(r.cartItems().length<=0?4:5))},dependencies:[Rh,Jn],styles:[".cart-shell[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}app-banner[_ngcontent-%COMP%]{width:100%}.cart-wrapper[_ngcontent-%COMP%]{margin:0;padding:0;width:100%;max-width:var(--maxWidth)}.cart-container[_ngcontent-%COMP%]{margin:0;padding:0 .5rem;display:flex;flex-direction:column;gap:1rem;text-align:center}h1[_ngcontent-%COMP%]{font-family:Malvie,sans-serif;color:var(--highlight)}.empty[_ngcontent-%COMP%]{font-size:1.5rem}.total-container[_ngcontent-%COMP%]{margin:0;padding:0 0 1rem;background:var(--primary)}button[_ngcontent-%COMP%]{margin:1rem auto 0;padding:0 1rem;font-family:Bebas Neue,sans-serif;font-size:1.5rem;background-color:transparent;color:#fffaf0;border:5px solid transparent;transition:all .1s ease-in-out}button[_ngcontent-%COMP%]:hover{transform:scale(1.1);background-color:#fffaf0;color:var(--primary);cursor:pointer}@media(max-width:550px){.cart-container[_ngcontent-%COMP%]{gap:.5rem}button[_ngcontent-%COMP%]{font-size:2rem}}"]})};var Ks=class t{themes=["theme-light","theme-dark"];themeSignal=qe("");theme=this.themeSignal.asReadonly();initializeTheme(){let e=localStorage.getItem("theme")??"",n;e&&this.themes.includes(e)?n=e:n=this.themes[0],this.setTheme(n)}setTheme(e){if(!this.themes.includes(e)){console.error(`THEME SERVICE: Invalid Theme: ${e}`);return}this.clearTheme(),this.themeSignal.set(e),this.applyTheme(this.theme()),console.log("THEME SERVICE: Theme Set: "+this.theme())}applyTheme(e){this.themes.includes(e)&&e&&(document.documentElement.classList.add(this.theme()),localStorage.setItem("theme",this.theme()))}clearTheme(){let e=0;this.themes.forEach(n=>{document.documentElement.classList.contains(n)&&(document.documentElement.classList.remove(n),e++)}),this.themeSignal.set(""),localStorage.setItem("theme",""),e>0&&console.log("THEME SERVICE: Theme Cleared")}logTheme(){console.log("THEME SERVICE: Current Theme: "+this.theme())}static \u0275fac=function(n){return new(n||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})};function V$(t,e){if(t&1){let n=Bt();Ie(0,"button",0),Kn("click",function(){At(n);let i=W();return Rt(i.setTheme("theme-dark"))}),ce(1,"\u{1F319}"),we()}}function j$(t,e){if(t&1){let n=Bt();Ie(0,"button",0),Kn("click",function(){At(n);let i=W();return Rt(i.setTheme("theme-light"))}),ce(1,"\u2600\uFE0F"),we()}}var Mh=class t{constructor(e){this.themeService=e;this.currentTheme=e.theme}currentTheme;setTheme(e){this.themeService.setTheme(e)}static \u0275fac=function(n){return new(n||t)(me(Ks))};static \u0275cmp=Se({type:t,selectors:[["app-theme"]],decls:3,vars:2,consts:[[3,"click"]],template:function(n,r){n&1&&(Ie(0,"div"),ie(1,V$,2,0,"button"),ie(2,j$,2,0,"button"),we()),n&2&&(P(),oe(r.currentTheme()==="theme-light"?1:-1),P(),oe(r.currentTheme()==="theme-dark"?2:-1))},styles:["div[_ngcontent-%COMP%]{width:2rem;height:2rem;display:inline-block}button[_ngcontent-%COMP%]{width:100%;height:100%;font-size:1rem;background:transparent;border:2px solid transparent;box-sizing:border-box}button[_ngcontent-%COMP%]:hover{border:2px solid var(--highlight);cursor:pointer}"]})};var xh=class t{constructor(e){this.firebase=e}ordersSignal=qe([]);orders=this.ordersSignal.asReadonly();loadingSignal=qe(!0);loading=this.loadingSignal.asReadonly();async refreshOrders(){this.ordersSignal.set([]),this.loadingSignal.set(!0);try{let e=await this.firebase.getOrders2();this.ordersSignal.set(e.map(n=>re(M({},n),{createdAt:n.createdAt?new Date(n.createdAt.seconds*1e3):n.createdAt})))}catch(e){console.error("ORDERS SERVICE: Failed to load orders: "+e)}finally{this.loadingSignal.set(!1)}}async deleteOrder(e){try{await this.firebase.deleteOrder2(e),await this.refreshOrders()}catch(n){console.error("ORDERS SERVICE: Failed to delete order: "+n)}}static \u0275fac=function(n){return new(n||t)(Q(Ws))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})};var B$=(t,e)=>e.id;function $$(t,e){t&1&&(G(0,"p"),ce(1,"Loading Orders..."),se())}function H$(t,e){t&1&&(G(0,"p"),ce(1,"No Orders Yet"),se())}function z$(t,e){if(t&1&&(G(0,"p"),ce(1),se()),t&2){let n=e.$implicit;P(),ln("Activity: ",n.name)}}function q$(t,e){if(t&1){let n=Bt();G(0,"div",3)(1,"p"),ce(2),se(),xt(3,z$,2,1,"p",null,un),G(5,"p"),ce(6),se(),G(7,"p"),ce(8),ey(9,"date"),se(),G(10,"button",4),Cn("click",function(){let i=At(n).$implicit,o=W(2);return Rt(o.deleteOrder(i.id))}),ce(11,"Delete Order"),se()()}if(t&2){let n=e.$implicit;P(2),ln("ID: ",n.id),P(),Pt(n.activities),P(3),ln("Price: ",n.total),P(2),ln("Created At: ",ty(9,3,n.createdAt,"short"))}}function G$(t,e){if(t&1&&xt(0,q$,12,6,"div",3,B$),t&2){let n=W();Pt(n.orders())}}var Ph=class t{constructor(e){this.ordersService=e;this.orders=e.orders,this.loading=e.loading}bannerData={bannerType:"subpage",title:"",image:"banners/taniti.jpeg",button:"PROFILE",interactive:!1};orders;loading;ngOnInit(){this.ordersService.refreshOrders()}async deleteOrder(e){try{await this.ordersService.deleteOrder(e)}catch(n){console.error("ORDERS: Failed to delete Order: "+n)}}static \u0275fac=function(n){return new(n||t)(me(xh))};static \u0275cmp=Se({type:t,selectors:[["app-orders"]],decls:7,vars:4,consts:[[1,"orders-shell"],[3,"data"],[1,"orders-container"],[1,"order-display"],[3,"click"]],template:function(n,r){n&1&&(G(0,"div",0),Ee(1,"app-banner",1)(2,"app-theme"),G(3,"div",2),ie(4,$$,2,0,"p"),ie(5,H$,2,0,"p"),ie(6,G$,2,0),se()()),n&2&&(P(),ae("data",r.bannerData),P(3),oe(r.loading()?4:-1),P(),oe(!r.loading()&&r.orders().length===0?5:-1),P(),oe(!r.loading()&&r.orders().length>0?6:-1))},dependencies:[Jn,Mh,dy],styles:[".orders-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center}.order-display[_ngcontent-%COMP%]{background-color:var(--primary);color:#fffaf0}"]})};var xN=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:sf},{path:"transportation",component:Ei,data:{data:bN}},{path:"lodging",component:Ei,data:{data:SN}},{path:"food",component:Ei,data:{data:AN}},{path:"entertainment",component:Ei,data:{data:RN}},{path:"sightseeing",component:Ei,data:{data:NN}},{path:"cart",component:Nh},{path:"profile",component:Ph}];var PN={providers:[Bg(),zy(xN)]};function W$(t,e){if(t&1&&(G(0,"span"),Ee(1,"img",5),se()),t&2){let n=W(2);P(),ae("src",n.linkData.icon,Mt)("alt",n.linkData.text)}}function K$(t,e){if(t&1&&(G(0,"a",3),ie(1,W$,2,2,"span"),G(2,"span",4),ce(3),se()()),t&2){let n=W();gd("mode-"+n.linkData.displayMode),ae("routerLink",n.linkData.route),P(),oe(n.linkData.icon?1:-1),P(2),ze(n.linkData.text)}}function Q$(t,e){if(t&1&&(G(0,"span"),Ee(1,"img",5),se()),t&2){let n=W(2);P(),ae("src",n.linkData.icon,Mt)("alt",n.linkData.text)}}function Y$(t,e){if(t&1&&(G(0,"button"),ie(1,Q$,2,2,"span"),G(2,"span",4),ce(3),se()()),t&2){let n=W();gd("mode-"+n.linkData.displayMode),P(),oe(n.linkData.icon?1:-1),P(2),ze(n.linkData.text)}}var Oh=class t{linkData;isButton=!1;iconExempt=["text-only","responsive-hide"];ngOnInit(){!this.iconExempt.includes(this.linkData.displayMode)&&!this.linkData.icon&&console.warn(`NAV LINK: ${this.linkData.text}: displayMode '${this.linkData.displayMode}' requires an [icon] input`)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Se({type:t,selectors:[["app-nav-link"]],inputs:{linkData:"linkData",isButton:"isButton"},decls:3,vars:1,consts:[[1,"link-shell"],["routerLinkActive","active",3,"routerLink","class"],[3,"class"],["routerLinkActive","active",3,"routerLink"],[1,"nav-text"],[1,"nav-icon",3,"src","alt"]],template:function(n,r){n&1&&(G(0,"div",0),ie(1,K$,4,5,"a",1)(2,Y$,4,4,"button",2),se()),n&2&&(P(),oe(r.isButton?2:1))},dependencies:[gs,Hy],styles:["button[_ngcontent-%COMP%]{background-color:transparent}a[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{margin:0;padding:0;height:2rem;color:var(--nav-text);text-decoration:none;text-align:center;display:flex;align-items:center;justify-content:center;gap:0;border:2px solid transparent;box-sizing:border-box;cursor:pointer}a[_ngcontent-%COMP%]:not(.mode-icon-only,.mode-responsive-show):hover, button[_ngcontent-%COMP%]:not(.mode-icon-only,.mode-responsive-show):hover{color:var(--nav-highlight);border:2px solid var(--nav-highlight)}a.mode-text-only[_ngcontent-%COMP%], a.mode-responsive[_ngcontent-%COMP%], button.mode-text-only[_ngcontent-%COMP%], button.mode-responsive[_ngcontent-%COMP%]{padding:0 1rem}a.mode-icon-only[_ngcontent-%COMP%]{padding:.25rem}a.mode-both[_ngcontent-%COMP%]{padding:.25rem 1rem 0;gap:.25rem}.mode-text-only[_ngcontent-%COMP%]   .nav-icon[_ngcontent-%COMP%], .mode-responsive[_ngcontent-%COMP%]   .nav-icon[_ngcontent-%COMP%]{display:none}.mode-icon-only[_ngcontent-%COMP%]   .nav-text[_ngcontent-%COMP%]{margin:0;padding:0;display:none}.mode-responsive-show[_ngcontent-%COMP%], .mode-responsive-show[_ngcontent-%COMP%]   .nav-text[_ngcontent-%COMP%]{display:none}.mode-responsive-hide[_ngcontent-%COMP%]{padding:0 1rem}.nav-icon[_ngcontent-%COMP%]{width:1.75rem;height:1.75rem;color:var(--nav-text)}.nav-text[_ngcontent-%COMP%]{margin:0;padding:0;font-size:1.1rem;font-weight:700;font-variant:all-small-caps;color:var(--nav-text)}@media(max-width:1080px){a.mode-responsive[_ngcontent-%COMP%]:hover, a.mode-responsive-hide[_ngcontent-%COMP%]:hover{color:var(--nav-text);border:2px solid transparent}a.mode-responsive[_ngcontent-%COMP%]{padding:.25rem}.mode-responsive[_ngcontent-%COMP%]   .nav-icon[_ngcontent-%COMP%]{display:block}.mode-responsive[_ngcontent-%COMP%]   .nav-text[_ngcontent-%COMP%]{display:none}.mode-responsive-show[_ngcontent-%COMP%]{display:inline}.mode-responsive-hide[_ngcontent-%COMP%]{padding:0;display:none}}@media(max-width:500px){.nav-icon[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;color:var(--nav-text)}.nav-text[_ngcontent-%COMP%]{font-size:1.5rem}}"]})};var kh=class t{breakpoint=1080;isDesktop=qe(window.innerWidth>this.breakpoint);constructor(){window.addEventListener("resize",this.onResize.bind(this))}onResize(){this.isDesktop.set(window.innerWidth>this.breakpoint)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})};var Z$=(t,e)=>e.route;function X$(t,e){if(t&1&&Ee(0,"app-nav-link",1)(1,"app-nav-link",1)(2,"app-nav-link",1)(3,"app-nav-link",1)(4,"app-nav-link",1),t&2){let n=W();ae("linkData",n.transportation),P(),ae("linkData",n.lodging),P(),ae("linkData",n.food),P(),ae("linkData",n.entertainment),P(),ae("linkData",n.sightseeing)}}function eH(t,e){if(t&1){let n=Bt();G(0,"app-nav-link",4),Cn("click",function(){At(n);let i=W(2);return Rt(i.closeExplore())}),se()}if(t&2){let n=e.$implicit;ae("linkData",n)}}function tH(t,e){if(t&1){let n=Bt();G(0,"app-nav-link",2),Cn("click",function(){At(n);let i=W();return Rt(i.toggleExplore())}),se(),G(1,"div",3),xt(2,eH,1,1,"app-nav-link",1,Z$),se()}if(t&2){let n=W();ae("linkData",n.explore)("isButton",!0),P(),es("is-open",n.isExploreOpen()),P(),Pt(n.exploreLinks)}}var Lh=class t{constructor(e){this.screenService=e;this.isDesktop=e.isDesktop}isDesktop;isExploreOpen=qe(!1);toggleExplore(){this.isExploreOpen.update(e=>!e)}closeExplore(){this.isExploreOpen.set(!1)}home={text:"Home",route:"/home",icon:"icons/home.png",displayMode:"responsive"};explore={text:"Explore",route:"#",icon:"icons/explore.png",displayMode:"icon-only"};exploreLinks=[{text:"Transportation",route:"/transportation",displayMode:"text-only"},{text:"Lodging",route:"/lodging",displayMode:"text-only"},{text:"Food",route:"/food",displayMode:"text-only"},{text:"Entertainment",route:"/entertainment",displayMode:"text-only"},{text:"Sightseeing",route:"/sightseeing",displayMode:"text-only"}];transportation={text:"Transportation",route:"/transportation",icon:"",displayMode:"responsive-hide"};lodging={text:"Lodging",route:"/lodging",icon:"",displayMode:"responsive-hide"};food={text:"Food",route:"/food",icon:"",displayMode:"responsive-hide"};entertainment={text:"Entertainment",route:"/entertainment",icon:"",displayMode:"responsive-hide"};sightseeing={text:"Sightseeing",route:"/sightseeing",icon:"",displayMode:"responsive-hide"};cart={text:"Cart",route:"/cart",icon:"icons/cart.png",displayMode:"icon-only"};profile={text:"Profile",route:"/profile",icon:"icons/profile.png",displayMode:"icon-only"};static \u0275fac=function(n){return new(n||t)(me(kh))};static \u0275cmp=Se({type:t,selectors:[["app-navbar"]],decls:7,vars:4,consts:[[1,"nav-shell"],[3,"linkData"],[3,"click","linkData","isButton"],[1,"explore-menu"],[3,"click","linkData"]],template:function(n,r){n&1&&(G(0,"div",0)(1,"nav"),Ee(2,"app-nav-link",1),ie(3,X$,5,5)(4,tH,4,4),Ee(5,"app-nav-link",1)(6,"app-nav-link",1),se()()),n&2&&(P(2),ae("linkData",r.home),P(),oe(r.isDesktop()?3:4),P(2),ae("linkData",r.cart),P(),ae("linkData",r.profile))},dependencies:[Oh],styles:[".nav-shell[_ngcontent-%COMP%]{position:fixed;top:0;z-index:1000;width:100%}nav[_ngcontent-%COMP%]{margin:0;padding:0;width:100%;height:3rem;display:flex;flex-direction:row;justify-content:center;gap:.5rem;align-items:center;background-color:var(--background);box-shadow:0 .5rem 1rem #0000004d}a[_ngcontent-%COMP%]{padding:0 1rem;height:2rem;display:flex;align-items:center;color:var(--nav-text);text-decoration:none;text-align:center;font-size:1.1rem;font-weight:700;font-variant:all-small-caps;border:2px solid transparent;box-sizing:border-box;cursor:pointer}a[_ngcontent-%COMP%]:hover{color:var(--nav-highlight);border:2px solid var(--nav-highlight)}@media(max-width:1080px){.nav-shell[_ngcontent-%COMP%]{top:auto;bottom:0}nav[_ngcontent-%COMP%]{justify-content:center;gap:2rem;box-shadow:0 -.5rem 1rem #0000004d}}.explore-menu[_ngcontent-%COMP%]{padding:1rem;width:100%;position:fixed;bottom:3rem;z-index:-1;display:flex;flex-direction:column;gap:1rem;background-color:var(--background);box-shadow:0 -.5rem 1rem #0000004d;opacity:0;transform:translateY(100%);transition:opacity .2s ease-in-out,transform .2s ease-in-out;pointer-events:none}.explore-menu.is-open[_ngcontent-%COMP%]{opacity:1;transform:translateY(0);pointer-events:auto}@media(max-width:500px){nav[_ngcontent-%COMP%]{height:3.5rem;justify-content:space-around}.explore-menu[_ngcontent-%COMP%]{bottom:3.5rem}}"]})};function nH(t,e){if(t&1&&(Ie(0,"a",1),ce(1),we()),t&2){let n=W().$implicit;Wn("href",n.link,Mt),P(),ze(n.text)}}function rH(t,e){if(t&1&&(Ie(0,"p"),ce(1),we()),t&2){let n=W().$implicit;P(),ze(n.text)}}function iH(t,e){if(t&1&&ie(0,nH,2,2,"a",1)(1,rH,2,1,"p"),t&2){let n=e.$implicit;oe(n.link!=""?0:1)}}function oH(t,e){if(t&1&&xt(0,iH,2,1,null,null,un),t&2){let n=W();Pt(n.footerData.lines)}}var Fh=class t{footerData;static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Se({type:t,selectors:[["app-footer"]],inputs:{footerData:"footerData"},decls:3,vars:1,consts:[[1,"footer-shell"],[3,"href"]],template:function(n,r){n&1&&(Ie(0,"div",0)(1,"footer"),ie(2,oH,2,0),we()()),n&2&&(P(2),oe(r.footerData?2:-1))},styles:[".footer-shell[_ngcontent-%COMP%]{margin:3rem 0 0}footer[_ngcontent-%COMP%]{margin:0;padding:1rem;height:100px;display:flex;flex-direction:column;justify-content:center;align-items:center;gap:1rem;font-family:Belanosima,sans-serif;text-align:center;background-color:var(--primary);color:#fffaf0}footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fffaf0;cursor:pointer}footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:visited{color:inherit;text-decoration:none}footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;padding:0;font-size:1.25rem}"]})};var Vh=class t{constructor(e){this.themeService=e}title=qe("ng-taniti");footerData={lines:[{text:"Photos licensed from Adobe Stock",link:"fake link"},{text:"Made with Angular 21",link:""},{text:"2025",link:""}]};ngOnInit(){this.themeService.initializeTheme()}static \u0275fac=function(n){return new(n||t)(me(Ks))};static \u0275cmp=Se({type:t,selectors:[["app-root"]],decls:5,vars:1,consts:[[1,"app-shell"],[1,"main"],[3,"footerData"]],template:function(n,r){n&1&&(G(0,"div",0),Ee(1,"app-navbar"),G(2,"div",1),Ee(3,"router-outlet"),se(),Ee(4,"app-footer",2),se()),n&2&&(P(4),ae("footerData",r.footerData))},dependencies:[Nc,Lh,Fh],styles:[".app-shell[_ngcontent-%COMP%]{padding-top:3rem;min-height:calc(100vh + 150px);display:flex;flex-direction:column;justify-content:space-between}.main[_ngcontent-%COMP%]{margin:0;padding:0;flex:1}app-footer[_ngcontent-%COMP%]{padding-bottom:0}@media(max-width:1080px){.app-shell[_ngcontent-%COMP%]{padding-top:0}app-footer[_ngcontent-%COMP%]{padding-bottom:3rem}}@media(max-width:500px){app-footer[_ngcontent-%COMP%]{padding-bottom:3.5rem}}"]})};var sH="firebase",aH="12.6.0";Mn(sH,aH,"app");var ON={production:!1,firebaseConfig:{apiKey:"AIzaSyDweRdkdGsOkzaOxWWuoJ0JVQ7-KFtltFM",authDomain:"ng-taniti.firebaseapp.com",projectId:"ng-taniti",storageBucket:"ng-taniti.firebasestorage.app",messagingSenderId:"521171139506",appId:"1:521171139506:web:50d1e74c05b2b4de4182ab"}};var bne=hv(ON.firebaseConfig);Ey(Vh,PN).catch(t=>console.error(t));
