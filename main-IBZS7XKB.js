var mM=Object.defineProperty,yM=Object.defineProperties;var vM=Object.getOwnPropertyDescriptors;var Mu=Object.getOwnPropertySymbols;var hw=Object.prototype.hasOwnProperty,pw=Object.prototype.propertyIsEnumerable;var fw=(t,e,n)=>e in t?mM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,M=(t,e)=>{for(var n in e||={})hw.call(e,n)&&fw(t,n,e[n]);if(Mu)for(var n of Mu(e))pw.call(e,n)&&fw(t,n,e[n]);return t},oe=(t,e)=>yM(t,vM(e));var hp=(t,e)=>{var n={};for(var r in t)hw.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Mu)for(var r of Mu(t))e.indexOf(r)<0&&pw.call(t,r)&&(n[r]=t[r]);return n};var mt=null,xu=!1,yp=1,_M=null,Ft=Symbol("SIGNAL");function G(t){let e=mt;return mt=t,e}function Ou(){return mt}var ha={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function pa(t){if(xu)throw new Error("");if(mt===null)return;mt.consumerOnSignalRead(t);let e=mt.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=mt.recomputing;if(r&&(n=e!==void 0?e.nextProducer:mt.producers,n!==void 0&&n.producer===t)){mt.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===mt&&(!r||IM(i,mt)))return;let o=Co(mt),s={producer:t,consumer:mt,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};mt.producersTail=s,e!==void 0?e.nextProducer=s:mt.producers=s,o&&vw(t,s)}function gw(){yp++}function vp(t){if(!(Co(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===yp)){if(!t.producerMustRecompute(t)&&!Lu(t)){mp(t);return}t.producerRecomputeValue(t),mp(t)}}function _p(t){if(t.consumers===void 0)return;let e=xu;xu=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||EM(r)}}finally{xu=e}}function Ep(){return mt?.consumerAllowSignalWrites!==!1}function EM(t){t.dirty=!0,_p(t),t.consumerMarkedDirty?.(t)}function mp(t){t.dirty=!1,t.lastCleanEpoch=yp}function ga(t){return t&&mw(t),G(t)}function mw(t){t.producersTail=void 0,t.recomputing=!0}function ku(t,e){G(e),t&&yw(t)}function yw(t){t.recomputing=!1;let e=t.producersTail,n=e!==void 0?e.nextProducer:t.producers;if(n!==void 0){if(Co(t))do n=Ip(n);while(n!==void 0);e!==void 0?e.nextProducer=void 0:t.producers=void 0}}function Lu(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(vp(n),r!==n.version))return!0}return!1}function ma(t){if(Co(t)){let e=t.producers;for(;e!==void 0;)e=Ip(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function vw(t,e){let n=t.consumersTail,r=Co(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;i!==void 0;i=i.nextProducer)vw(i.producer,i)}function Ip(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Co(e)){let o=e.producers;for(;o!==void 0;)o=Ip(o)}return n}function Co(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function wp(t){_M?.(t)}function IM(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function Tp(t,e){return Object.is(t,e)}function Fu(t,e){let n=Object.create(wM);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(vp(n),pa(n),n.value===Pu)throw n.error;return n.value};return r[Ft]=n,wp(n),r}var pp=Symbol("UNSET"),gp=Symbol("COMPUTING"),Pu=Symbol("ERRORED"),wM=oe(M({},ha),{value:pp,dirty:!0,error:null,equal:Tp,kind:"computed",producerMustRecompute(t){return t.value===pp||t.value===gp},producerRecomputeValue(t){if(t.value===gp)throw new Error("");let e=t.value;t.value=gp;let n=ga(t),r,i=!1;try{r=t.computation(),G(null),i=e!==pp&&e!==Pu&&r!==Pu&&t.equal(e,r)}catch(o){r=Pu,t.error=o}finally{ku(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function TM(){throw new Error}var _w=TM;function Ew(t){_w(t)}function Dp(t){_w=t}var DM=null;function Cp(t,e){let n=Object.create(Vu);n.value=t,e!==void 0&&(n.equal=e);let r=()=>Iw(n);return r[Ft]=n,wp(n),[r,s=>ya(n,s),s=>ww(n,s)]}function Iw(t){return pa(t),t.value}function ya(t,e){Ep()||Ew(t),t.equal(t.value,e)||(t.value=e,CM(t))}function ww(t,e){Ep()||Ew(t),ya(t,e(t.value))}var Vu=oe(M({},ha),{equal:Tp,value:void 0,kind:"signal"});function CM(t){t.version++,gw(),_p(t),DM?.(t)}function bp(t){let e=G(null);try{return t()}finally{G(e)}}function te(t){return typeof t=="function"}function bo(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var ju=bo(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function va(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var ht=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(te(r))try{r()}catch(o){e=o instanceof ju?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Tw(o)}catch(s){e=e??[],s instanceof ju?e=[...e,...s.errors]:e.push(s)}}if(e)throw new ju(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Tw(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&va(n,e)}remove(e){let{_finalizers:n}=this;n&&va(n,e),e instanceof t&&e._removeParent(this)}};ht.EMPTY=(()=>{let t=new ht;return t.closed=!0,t})();var Sp=ht.EMPTY;function Uu(t){return t instanceof ht||t&&"closed"in t&&te(t.remove)&&te(t.add)&&te(t.unsubscribe)}function Tw(t){te(t)?t():t.unsubscribe()}var gn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var So={setTimeout(t,e,...n){let{delegate:r}=So;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=So;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Bu(t){So.setTimeout(()=>{let{onUnhandledError:e}=gn;if(e)e(t);else throw t})}function _a(){}var Dw=Ap("C",void 0,void 0);function Cw(t){return Ap("E",void 0,t)}function bw(t){return Ap("N",t,void 0)}function Ap(t,e,n){return{kind:t,value:e,error:n}}var bi=null;function Ao(t){if(gn.useDeprecatedSynchronousErrorHandling){let e=!bi;if(e&&(bi={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=bi;if(bi=null,n)throw r}}else t()}function Sw(t){gn.useDeprecatedSynchronousErrorHandling&&bi&&(bi.errorThrown=!0,bi.error=t)}var Si=class extends ht{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Uu(e)&&e.add(this)):this.destination=AM}static create(e,n,r){return new Ro(e,n,r)}next(e){this.isStopped?Np(bw(e),this):this._next(e)}error(e){this.isStopped?Np(Cw(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Np(Dw,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},bM=Function.prototype.bind;function Rp(t,e){return bM.call(t,e)}var Mp=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){$u(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){$u(r)}else $u(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){$u(n)}}},Ro=class extends Si{constructor(e,n,r){super();let i;if(te(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&gn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Rp(e.next,o),error:e.error&&Rp(e.error,o),complete:e.complete&&Rp(e.complete,o)}):i=e}this.destination=new Mp(i)}};function $u(t){gn.useDeprecatedSynchronousErrorHandling?Sw(t):Bu(t)}function SM(t){throw t}function Np(t,e){let{onStoppedNotification:n}=gn;n&&So.setTimeout(()=>n(t,e))}var AM={closed:!0,next:_a,error:SM,complete:_a};var No=typeof Symbol=="function"&&Symbol.observable||"@@observable";function mn(t){return t}function xp(...t){return Pp(t)}function Pp(t){return t.length===0?mn:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var _e=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=NM(n)?n:new Ro(n,r,i);return Ao(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Aw(r),new r((i,o)=>{let s=new Ro({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[No](){return this}pipe(...n){return Pp(n)(this)}toPromise(n){return n=Aw(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function Aw(t){var e;return(e=t??gn.Promise)!==null&&e!==void 0?e:Promise}function RM(t){return t&&te(t.next)&&te(t.error)&&te(t.complete)}function NM(t){return t&&t instanceof Si||RM(t)&&Uu(t)}function MM(t){return te(t?.lift)}function De(t){return e=>{if(MM(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ae(t,e,n,r,i){return new Op(t,e,n,r,i)}var Op=class extends Si{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var Rw=bo(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ot=(()=>{class t extends _e{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Hu(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Rw}next(n){Ao(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Ao(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Ao(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Sp:(this.currentObservers=null,o.push(n),new ht(()=>{this.currentObservers=null,va(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new _e;return n.source=this,n}}return t.create=(e,n)=>new Hu(e,n),t})(),Hu=class extends ot{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Sp}};var pt=class extends ot{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Vt=new _e(t=>t.complete());function Nw(t){return t&&te(t.schedule)}function Mw(t){return t[t.length-1]}function xw(t){return te(Mw(t))?t.pop():void 0}function jr(t){return Nw(Mw(t))?t.pop():void 0}function Ow(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(f){try{l(r.next(f))}catch(p){s(p)}}function u(f){try{l(r.throw(f))}catch(p){s(p)}}function l(f){f.done?o(f.value):i(f.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function Pw(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ai(t){return this instanceof Ai?(this.v=t,this):new Ai(t)}function kw(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(S){return Promise.resolve(S).then(y,p)}}function a(y,S){r[y]&&(i[y]=function(A){return new Promise(function(R,L){o.push([y,A,R,L])>1||u(y,A)})},S&&(i[y]=S(i[y])))}function u(y,S){try{l(r[y](S))}catch(A){m(o[0][3],A)}}function l(y){y.value instanceof Ai?Promise.resolve(y.value.v).then(f,p):m(o[0][2],y)}function f(y){u("next",y)}function p(y){u("throw",y)}function m(y,S){y(S),o.shift(),o.length&&u(o[0][0],o[0][1])}}function Lw(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Pw=="function"?Pw(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,u){s=t[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var zu=t=>t&&typeof t.length=="number"&&typeof t!="function";function qu(t){return te(t?.then)}function Gu(t){return te(t[No])}function Wu(t){return Symbol.asyncIterator&&te(t?.[Symbol.asyncIterator])}function Ku(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function xM(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Qu=xM();function Yu(t){return te(t?.[Qu])}function Ju(t){return kw(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Ai(n.read());if(i)return yield Ai(void 0);yield yield Ai(r)}}finally{n.releaseLock()}})}function Zu(t){return te(t?.getReader)}function st(t){if(t instanceof _e)return t;if(t!=null){if(Gu(t))return PM(t);if(zu(t))return OM(t);if(qu(t))return kM(t);if(Wu(t))return Fw(t);if(Yu(t))return LM(t);if(Zu(t))return FM(t)}throw Ku(t)}function PM(t){return new _e(e=>{let n=t[No]();if(te(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function OM(t){return new _e(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function kM(t){return new _e(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Bu)})}function LM(t){return new _e(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Fw(t){return new _e(e=>{VM(t,e).catch(n=>e.error(n))})}function FM(t){return Fw(Ju(t))}function VM(t,e){var n,r,i,o;return Ow(this,void 0,void 0,function*(){try{for(n=Lw(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function jt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Xu(t,e=0){return De((n,r)=>{n.subscribe(Ae(r,i=>jt(r,t,()=>r.next(i),e),()=>jt(r,t,()=>r.complete(),e),i=>jt(r,t,()=>r.error(i),e)))})}function el(t,e=0){return De((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Vw(t,e){return st(t).pipe(el(e),Xu(e))}function jw(t,e){return st(t).pipe(el(e),Xu(e))}function Uw(t,e){return new _e(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function Bw(t,e){return new _e(n=>{let r;return jt(n,e,()=>{r=t[Qu](),jt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>te(r?.return)&&r.return()})}function tl(t,e){if(!t)throw new Error("Iterable cannot be null");return new _e(n=>{jt(n,e,()=>{let r=t[Symbol.asyncIterator]();jt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function $w(t,e){return tl(Ju(t),e)}function Hw(t,e){if(t!=null){if(Gu(t))return Vw(t,e);if(zu(t))return Uw(t,e);if(qu(t))return jw(t,e);if(Wu(t))return tl(t,e);if(Yu(t))return Bw(t,e);if(Zu(t))return $w(t,e)}throw Ku(t)}function Ze(t,e){return e?Hw(t,e):st(t)}function de(...t){let e=jr(t);return Ze(t,e)}function kp(t,e){let n=te(t)?t:()=>t,r=i=>i.error(n());return new _e(e?i=>e.schedule(r,0,i):r)}function nl(t){return!!t&&(t instanceof _e||te(t.lift)&&te(t.subscribe))}var Ri=bo(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function ke(t,e){return De((n,r)=>{let i=0;n.subscribe(Ae(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:jM}=Array;function UM(t,e){return jM(e)?t(...e):t(e)}function zw(t){return ke(e=>UM(t,e))}var{isArray:BM}=Array,{getPrototypeOf:$M,prototype:HM,keys:zM}=Object;function qw(t){if(t.length===1){let e=t[0];if(BM(e))return{args:e,keys:null};if(qM(e)){let n=zM(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function qM(t){return t&&typeof t=="object"&&$M(t)===HM}function Gw(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Lp(...t){let e=jr(t),n=xw(t),{args:r,keys:i}=qw(t);if(r.length===0)return Ze([],e);let o=new _e(GM(r,e,i?s=>Gw(i,s):mn));return n?o.pipe(zw(n)):o}function GM(t,e,n=mn){return r=>{Ww(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)Ww(e,()=>{let l=Ze(t[u],e),f=!1;l.subscribe(Ae(r,p=>{o[u]=p,f||(f=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Ww(t,e,n){t?jt(n,t,e):e()}function Kw(t,e,n,r,i,o,s,a){let u=[],l=0,f=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=A=>l<r?S(A):u.push(A),S=A=>{o&&e.next(A),l++;let R=!1;st(n(A,f++)).subscribe(Ae(e,L=>{i?.(L),o?y(L):e.next(L)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let L=u.shift();s?jt(e,s,()=>S(L)):S(L)}m()}catch(L){e.error(L)}}))};return t.subscribe(Ae(e,y,()=>{p=!0,m()})),()=>{a?.()}}function yt(t,e,n=1/0){return te(e)?yt((r,i)=>ke((o,s)=>e(r,o,i,s))(st(t(r,i))),n):(typeof e=="number"&&(n=e),De((r,i)=>Kw(r,i,t,n)))}function Mo(t=1/0){return yt(mn,t)}function Qw(){return Mo(1)}function xo(...t){return Qw()(Ze(t,jr(t)))}function Ea(t){return new _e(e=>{st(t()).subscribe(e)})}function yn(t,e){return De((n,r)=>{let i=0;n.subscribe(Ae(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Po(t){return De((e,n)=>{let r=null,i=!1,o;r=e.subscribe(Ae(n,void 0,void 0,s=>{o=st(t(s,Po(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function Ia(t,e){return te(e)?yt(t,e,1):yt(t,1)}function Fp(t){return De((e,n)=>{let r=!1;e.subscribe(Ae(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function cr(t){return t<=0?()=>Vt:De((e,n)=>{let r=0;e.subscribe(Ae(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Yw(t=WM){return De((e,n)=>{let r=!1;e.subscribe(Ae(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function WM(){return new Ri}function Vp(t){return De((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function ur(t,e){let n=arguments.length>=2;return r=>r.pipe(t?yn((i,o)=>t(i,o,r)):mn,cr(1),n?Fp(e):Yw(()=>new Ri))}function rl(t){return t<=0?()=>Vt:De((e,n)=>{let r=[];e.subscribe(Ae(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function jp(...t){let e=jr(t);return De((n,r)=>{(e?xo(t,n,e):xo(t,n)).subscribe(r)})}function Fn(t,e){return De((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(Ae(r,u=>{i?.unsubscribe();let l=0,f=o++;st(t(u,f)).subscribe(i=Ae(r,p=>r.next(e?e(u,p,f,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function wa(t){return De((e,n)=>{st(t).subscribe(Ae(n,()=>n.complete(),_a)),!n.closed&&e.subscribe(n)})}function Ct(t,e,n){let r=te(t)||e||n?{next:t,error:e,complete:n}:t;return r?De((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Ae(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):mn}var Up;function il(){return Up}function Vn(t){let e=Up;return Up=t,e}var Jw=Symbol("NotFound");function Oo(t){return t===Jw||t?.name==="\u0275NotFound"}var ll="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",j=class extends Error{code;constructor(e,n){super(Fo(e,n)),this.code=e}};function YM(t){return`NG0${Math.abs(t)}`}function Fo(t,e){return`${YM(t)}${e?": "+e:""}`}var hr=globalThis;function Ce(t){for(let e in t)if(t[e]===Ce)return e;throw Error("")}function dr(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(dr).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function dl(t,e){return t?e?`${t} ${e}`:t:e||""}var JM=Ce({__forward_ref__:Ce});function fl(t){return t.__forward_ref__=fl,t.toString=function(){return dr(this())},t}function Ut(t){return tg(t)?t():t}function tg(t){return typeof t=="function"&&t.hasOwnProperty(JM)&&t.__forward_ref__===fl}function U(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Aa(t){return ZM(t,hl)}function ng(t){return Aa(t)!==null}function ZM(t,e){return t.hasOwnProperty(e)&&t[e]||null}function XM(t){let e=t?.[hl]??null;return e||null}function $p(t){return t&&t.hasOwnProperty(sl)?t[sl]:null}var hl=Ce({\u0275prov:Ce}),sl=Ce({\u0275inj:Ce}),H=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=U({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function rg(t){return t&&!!t.\u0275providers}var ig=Ce({\u0275cmp:Ce}),og=Ce({\u0275dir:Ce}),sg=Ce({\u0275pipe:Ce}),ag=Ce({\u0275mod:Ce}),Da=Ce({\u0275fac:Ce}),Pi=Ce({__NG_ELEMENT_ID__:Ce}),Zw=Ce({__NG_ENV_ID__:Ce});function Ra(t){return typeof t=="string"?t:t==null?"":String(t)}function nT(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Ra(t)}var rT=Ce({ngErrorCode:Ce}),ex=Ce({ngErrorMessage:Ce}),tx=Ce({ngTokenPath:Ce});function cg(t,e){return iT("",-200,e)}function pl(t,e){throw new j(-201,!1)}function iT(t,e,n){let r=new j(e,t);return r[rT]=e,r[ex]=t,n&&(r[tx]=n),r}function nx(t){return t[rT]}var Hp;function oT(){return Hp}function bt(t){let e=Hp;return Hp=t,e}function ug(t,e,n){let r=Aa(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;pl(t,"Injector")}var rx={},Ni=rx,ix="__NG_DI_FLAG__",zp=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=Mi(n)||0;try{return this.injector.get(e,r&8?null:Ni,r)}catch(i){if(Oo(i))return i;throw i}}};function ox(t,e=0){let n=il();if(n===void 0)throw new j(-203,!1);if(n===null)return ug(t,void 0,e);{let r=sx(e),i=n.retrieve(t,r);if(Oo(i)){if(r.optional)return null;throw i}return i}}function Y(t,e=0){return(oT()||ox)(Ut(t),e)}function O(t,e){return Y(t,Mi(e))}function Mi(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function sx(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function qp(t){let e=[];for(let n=0;n<t.length;n++){let r=Ut(t[n]);if(Array.isArray(r)){if(r.length===0)throw new j(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],u=ax(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(Y(i,o))}else e.push(Y(r))}return e}function ax(t){return t[ix]}function Ur(t,e){let n=t.hasOwnProperty(Da);return n?t[Da]:null}function sT(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function aT(t){return t.flat(Number.POSITIVE_INFINITY)}function gl(t,e){t.forEach(n=>Array.isArray(n)?gl(n,e):e(n))}function lg(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Na(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function cT(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function ml(t,e,n){let r=Vo(t,e);return r>=0?t[r|1]=n:(r=~r,cT(t,r,e,n)),r}function yl(t,e){let n=Vo(t,e);if(n>=0)return t[n|1]}function Vo(t,e){return cx(t,e,1)}function cx(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var Oi={},jn=[],ki=new H(""),dg=new H("",-1),fg=new H(""),Ca=class{get(e,n=Ni){if(n===Ni){let i=iT("",-201);throw i.name="\u0275NotFound",i}return n}};function hg(t){return t[ag]||null}function $r(t){return t[ig]||null}function pg(t){return t[og]||null}function uT(t){return t[sg]||null}function Li(t){return{\u0275providers:t}}function lT(t){return Li([{provide:ki,multi:!0,useValue:t}])}function dT(...t){return{\u0275providers:gg(!0,t),\u0275fromNgModule:!0}}function gg(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return gl(e,s=>{let a=s;al(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&fT(i,o),n}function fT(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];mg(i,o=>{e(o,r)})}}function al(t,e,n,r){if(t=Ut(t),!t)return!1;let i=null,o=$p(t),s=!o&&$r(t);if(!o&&!s){let u=t.ngModule;if(o=$p(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)al(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{gl(o.imports,f=>{al(f,e,n,r)&&(l||=[],l.push(f))})}finally{}l!==void 0&&fT(l,e)}if(!a){let l=Ur(i)||(()=>new i);e({provide:i,useFactory:l,deps:jn},i),e({provide:fg,useValue:i,multi:!0},i),e({provide:ki,useValue:()=>Y(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=t;mg(u,f=>{e(f,l)})}}else return!1;return i!==t&&t.providers!==void 0}function mg(t,e){for(let n of t)rg(n)&&(n=n.\u0275providers),Array.isArray(n)?mg(n,e):e(n)}var ux=Ce({provide:String,useValue:Ce});function hT(t){return t!==null&&typeof t=="object"&&ux in t}function lx(t){return!!(t&&t.useExisting)}function dx(t){return!!(t&&t.useFactory)}function cl(t){return typeof t=="function"}var Ma=new H(""),ol={},Xw={},Bp;function xa(){return Bp===void 0&&(Bp=new Ca),Bp}var at=class{},xi=class extends at{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,Wp(e,s=>this.processProvider(s)),this.records.set(dg,ko(void 0,this)),i.has("environment")&&this.records.set(at,ko(void 0,this));let o=this.records.get(Ma);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(fg,jn,{self:!0}))}retrieve(e,n){let r=Mi(n)||0;try{return this.get(e,Ni,r)}catch(i){if(Oo(i))return i;throw i}}destroy(){Ta(this),this._destroyed=!0;let e=G(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),G(e)}}onDestroy(e){return Ta(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Ta(this);let n=Vn(this),r=bt(void 0),i;try{return e()}finally{Vn(n),bt(r)}}get(e,n=Ni,r){if(Ta(this),e.hasOwnProperty(Zw))return e[Zw](this);let i=Mi(r),o,s=Vn(this),a=bt(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let f=mx(e)&&Aa(e);f&&this.injectableDefInScope(f)?l=ko(Gp(e),ol):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?xa():this.parent;return n=i&8&&n===Ni?null:n,u.get(e,n)}catch(u){let l=nx(u);throw l===-200||l===-201?new j(l,null):u}finally{bt(a),Vn(s)}}resolveInjectorInitializers(){let e=G(null),n=Vn(this),r=bt(void 0),i;try{let o=this.get(ki,jn,{self:!0});for(let s of o)s()}finally{Vn(n),bt(r),G(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(dr(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Ut(e);let n=cl(e)?e:Ut(e&&e.provide),r=hx(e);if(!cl(e)&&e.multi===!0){let i=this.records.get(n);i||(i=ko(void 0,ol,!0),i.factory=()=>qp(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=G(null);try{if(n.value===Xw)throw cg(dr(e));return n.value===ol&&(n.value=Xw,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&gx(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{G(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Ut(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Gp(t){let e=Aa(t),n=e!==null?e.factory:Ur(t);if(n!==null)return n;if(t instanceof H)throw new j(204,!1);if(t instanceof Function)return fx(t);throw new j(204,!1)}function fx(t){if(t.length>0)throw new j(204,!1);let n=XM(t);return n!==null?()=>n.factory(t):()=>new t}function hx(t){if(hT(t))return ko(void 0,t.useValue);{let e=pT(t);return ko(e,ol)}}function pT(t,e,n){let r;if(cl(t)){let i=Ut(t);return Ur(i)||Gp(i)}else if(hT(t))r=()=>Ut(t.useValue);else if(dx(t))r=()=>t.useFactory(...qp(t.deps||[]));else if(lx(t))r=(i,o)=>Y(Ut(t.useExisting),o!==void 0&&o&8?8:void 0);else{let i=Ut(t&&(t.useClass||t.provide));if(px(t))r=()=>new i(...qp(t.deps));else return Ur(i)||Gp(i)}return r}function Ta(t){if(t.destroyed)throw new j(205,!1)}function ko(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function px(t){return!!t.deps}function gx(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function mx(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function Wp(t,e){for(let n of t)Array.isArray(n)?Wp(n,e):n&&rg(n)?Wp(n.\u0275providers,e):e(n)}function St(t,e){let n;t instanceof xi?(Ta(t),n=t):n=new zp(t);let r,i=Vn(n),o=bt(void 0);try{return e()}finally{Vn(i),bt(o)}}function gT(){return oT()!==void 0||il()!=null}var vn=0,z=1,J=2,Xe=3,rn=4,on=5,jo=6,Uo=7,He=8,pr=9,Bn=10,Le=11,Bo=12,yg=13,Fi=14,Gt=15,Hr=16,Vi=17,$n=18,Pa=19,vg=20,lr=21,vl=22,Oa=23,Wt=24,_l=25,ji=26,et=27,mT=1,_g=6,zr=7,ka=8,Ui=9,Be=10;function Hn(t){return Array.isArray(t)&&typeof t[mT]=="object"}function _n(t){return Array.isArray(t)&&t[mT]===!0}function Eg(t){return(t.flags&4)!==0}function qr(t){return t.componentOffset>-1}function El(t){return(t.flags&1)===1}function Bi(t){return!!t.template}function $o(t){return(t[J]&512)!==0}function $i(t){return(t[J]&256)===256}var yT="svg",vT="math";function sn(t){for(;Array.isArray(t);)t=t[vn];return t}function Ig(t,e){return sn(e[t])}function En(t,e){return sn(e[t.index])}function La(t,e){return t.data[e]}function _T(t,e){return t[e]}function wg(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function an(t,e){let n=e[t];return Hn(n)?n:n[vn]}function ET(t){return(t[J]&4)===4}function Il(t){return(t[J]&128)===128}function IT(t){return _n(t[Xe])}function zn(t,e){return e==null?null:t[e]}function Tg(t){t[Vi]=0}function Dg(t){t[J]&1024||(t[J]|=1024,Il(t)&&Va(t))}function wT(t,e){for(;t>0;)e=e[Fi],t--;return e}function Fa(t){return!!(t[J]&9216||t[Wt]?.dirty)}function wl(t){t[Bn].changeDetectionScheduler?.notify(8),t[J]&64&&(t[J]|=1024),Fa(t)&&Va(t)}function Va(t){t[Bn].changeDetectionScheduler?.notify(0);let e=Br(t);for(;e!==null&&!(e[J]&8192||(e[J]|=8192,!Il(e)));)e=Br(e)}function Cg(t,e){if($i(t))throw new j(911,!1);t[lr]===null&&(t[lr]=[]),t[lr].push(e)}function TT(t,e){if(t[lr]===null)return;let n=t[lr].indexOf(e);n!==-1&&t[lr].splice(n,1)}function Br(t){let e=t[Xe];return _n(e)?e[Xe]:e}function bg(t){return t[Uo]??=[]}function Sg(t){return t.cleanup??=[]}function DT(t,e,n,r){let i=bg(e);i.push(n),t.firstCreatePass&&Sg(t).push(r,i.length-1)}var le={lFrame:FT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Kp=!1;function CT(){return le.lFrame.elementDepthCount}function bT(){le.lFrame.elementDepthCount++}function Ag(){le.lFrame.elementDepthCount--}function ST(){return le.bindingsEnabled}function AT(){return le.skipHydrationRootTNode!==null}function Rg(t){return le.skipHydrationRootTNode===t}function Ng(){le.skipHydrationRootTNode=null}function ce(){return le.lFrame.lView}function ct(){return le.lFrame.tView}function At(t){return le.lFrame.contextLView=t,t[He]}function Rt(t){return le.lFrame.contextLView=null,t}function Nt(){let t=Mg();for(;t!==null&&t.type===64;)t=t.parent;return t}function Mg(){return le.lFrame.currentTNode}function RT(){let t=le.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Ho(t,e){let n=le.lFrame;n.currentTNode=t,n.isParent=e}function xg(){return le.lFrame.isParent}function NT(){le.lFrame.isParent=!1}function Pg(){return Kp}function Og(t){let e=Kp;return Kp=t,e}function kg(){let t=le.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function MT(t){return le.lFrame.bindingIndex=t}function Hi(){return le.lFrame.bindingIndex++}function Lg(t){let e=le.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function xT(){return le.lFrame.inI18n}function PT(t,e){let n=le.lFrame;n.bindingIndex=n.bindingRootIndex=t,Tl(e)}function OT(){return le.lFrame.currentDirectiveIndex}function Tl(t){le.lFrame.currentDirectiveIndex=t}function kT(t){let e=le.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Fg(){return le.lFrame.currentQueryIndex}function Dl(t){le.lFrame.currentQueryIndex=t}function yx(t){let e=t[z];return e.type===2?e.declTNode:e.type===1?t[on]:null}function Vg(t,e,n){if(n&4){let i=e,o=t;for(;i=i.parent,i===null&&!(n&1);)if(i=yx(o),i===null||(o=o[Fi],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=le.lFrame=LT();return r.currentTNode=e,r.lView=t,!0}function Cl(t){let e=LT(),n=t[z];le.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function LT(){let t=le.lFrame,e=t===null?null:t.child;return e===null?FT(t):e}function FT(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function VT(){let t=le.lFrame;return le.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var jg=VT;function bl(){let t=VT();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function jT(t){return(le.lFrame.contextLView=wT(t,le.lFrame.contextLView))[He]}function gr(){return le.lFrame.selectedIndex}function Gr(t){le.lFrame.selectedIndex=t}function Sl(){let t=le.lFrame;return La(t.tView,t.selectedIndex)}function UT(){return le.lFrame.currentNamespace}var BT=!0;function Al(){return BT}function Rl(t){BT=t}function Qp(t,e=null,n=null,r){let i=Ug(t,e,n,r);return i.resolveInjectorInitializers(),i}function Ug(t,e=null,n=null,r,i=new Set){let o=[n||jn,dT(t)];return r=r||(typeof t=="object"?void 0:dr(t)),new xi(o,e||xa(),r||null,i)}var Un=class t{static THROW_IF_NOT_FOUND=Ni;static NULL=new Ca;static create(e,n){if(Array.isArray(e))return Qp({name:""},n,e,"");{let r=e.name??"";return Qp({name:r},e.parent,e.providers,r)}}static \u0275prov=U({token:t,providedIn:"any",factory:()=>Y(dg)});static __NG_ELEMENT_ID__=-1},tt=new H(""),zi=(()=>{class t{static __NG_ELEMENT_ID__=vx;static __NG_ENV_ID__=n=>n}return t})(),Yp=class extends zi{_lView;constructor(e){super(),this._lView=e}get destroyed(){return $i(this._lView)}onDestroy(e){let n=this._lView;return Cg(n,e),()=>TT(n,e)}};function vx(){return new Yp(ce())}var $T=!1,Wr=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new pt(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new _e(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=U({token:t,providedIn:"root",factory:()=>new t})}return t})(),Jp=class extends ot{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,gT()&&(this.destroyRef=O(zi,{optional:!0})??void 0,this.pendingTasks=O(Wr,{optional:!0})??void 0)}emit(e){let n=G(null);try{super.next(e)}finally{G(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof ht&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},vt=Jp;function ul(...t){}function Bg(t){let e,n;function r(){t=ul;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function $g(t){return queueMicrotask(()=>t()),()=>{t=ul}}var Hg="isAngularZone",ba=Hg+"_ID",_x=0,qt=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new vt(!1);onMicrotaskEmpty=new vt(!1);onStable=new vt(!1);onError=new vt(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=$T}=e;if(typeof Zone>"u")throw new j(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,wx(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Hg)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new j(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new j(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,Ex,ul,ul);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},Ex={};function zg(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Ix(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){Bg(()=>{t.callbackScheduled=!1,Zp(t),t.isCheckStableRunning=!0,zg(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Zp(t)}function wx(t){let e=()=>{Ix(t)},n=_x++;t._inner=t._inner.fork({name:"angular",properties:{[Hg]:!0,[ba]:n,[ba+n]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(Tx(u))return r.invokeTask(o,s,a,u);try{return eT(t),r.invokeTask(o,s,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),tT(t)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return eT(t),r.invoke(o,s,a,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!Dx(u)&&e(),tT(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Zp(t),zg(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Zp(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function eT(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function tT(t){t._nesting--,zg(t)}var Sa=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new vt;onMicrotaskEmpty=new vt;onStable=new vt;onError=new vt;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function Tx(t){return HT(t,"__ignore_ng_zone__")}function Dx(t){return HT(t,"__scheduler_tick__")}function HT(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var fr=class{_console=console;handleError(e){this._console.error("ERROR",e)}},cn=new H("",{factory:()=>{let t=O(qt),e=O(at),n;return r=>{t.runOutsideAngular(()=>{e.destroyed&&!n?setTimeout(()=>{throw r}):(n??=e.get(fr),n.handleError(r))})}}}),zT={provide:ki,useValue:()=>{let t=O(fr,{optional:!0})},multi:!0},Cx=new H("",{factory:()=>{let t=O(tt).defaultView;if(!t)return;let e=O(cn),n=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{t.addEventListener("unhandledrejection",n),t.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),O(zi).onDestroy(()=>{t.removeEventListener("error",r),t.removeEventListener("unhandledrejection",n)})}});function qg(){return Li([lT(()=>void O(Cx))])}function qe(t,e){let[n,r,i]=Cp(t,e?.equal),o=n,s=o[Ft];return o.set=r,o.update=i,o.asReadonly=qT.bind(o),o}function qT(){let t=this[Ft];if(t.readonlyFn===void 0){let e=()=>this();e[Ft]=t,t.readonlyFn=e}return t.readonlyFn}var Lo=class{},ja=new H("",{factory:()=>!0});var Gg=new H("");var Wg=(()=>{class t{static \u0275prov=U({token:t,providedIn:"root",factory:()=>new Xp})}return t})(),Xp=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}},eg=class{[Ft];constructor(e){this[Ft]=e}destroy(){this[Ft].destroy()}};function In(t){return bp(t)}function nd(t){return{toString:t}.toString()}function kx(t){return typeof t=="function"}function _D(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var Fl=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}},Yi=(()=>{let t=()=>ED;return t.ngInherit=!0,t})();function ED(t){return t.type.prototype.ngOnChanges&&(t.setInput=Fx),Lx}function Lx(){let t=wD(this),e=t?.current;if(e){let n=t.previous;if(n===Oi)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function Fx(t,e,n,r,i){let o=this.declaredInputs[r],s=wD(t)||Vx(t,{previous:Oi,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new Fl(l&&l.currentValue,n,u===Oi),_D(t,e,i,n)}var ID="__ngSimpleChanges__";function wD(t){return t[ID]||null}function Vx(t,e){return t[ID]=e}var GT=[];var Re=function(t,e=null,n){for(let r=0;r<GT.length;r++){let i=GT[r];i(t,e,n)}},Ee=(function(t){return t[t.TemplateCreateStart=0]="TemplateCreateStart",t[t.TemplateCreateEnd=1]="TemplateCreateEnd",t[t.TemplateUpdateStart=2]="TemplateUpdateStart",t[t.TemplateUpdateEnd=3]="TemplateUpdateEnd",t[t.LifecycleHookStart=4]="LifecycleHookStart",t[t.LifecycleHookEnd=5]="LifecycleHookEnd",t[t.OutputStart=6]="OutputStart",t[t.OutputEnd=7]="OutputEnd",t[t.BootstrapApplicationStart=8]="BootstrapApplicationStart",t[t.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",t[t.BootstrapComponentStart=10]="BootstrapComponentStart",t[t.BootstrapComponentEnd=11]="BootstrapComponentEnd",t[t.ChangeDetectionStart=12]="ChangeDetectionStart",t[t.ChangeDetectionEnd=13]="ChangeDetectionEnd",t[t.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",t[t.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",t[t.AfterRenderHooksStart=16]="AfterRenderHooksStart",t[t.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",t[t.ComponentStart=18]="ComponentStart",t[t.ComponentEnd=19]="ComponentEnd",t[t.DeferBlockStateStart=20]="DeferBlockStateStart",t[t.DeferBlockStateEnd=21]="DeferBlockStateEnd",t[t.DynamicComponentStart=22]="DynamicComponentStart",t[t.DynamicComponentEnd=23]="DynamicComponentEnd",t[t.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",t[t.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",t})(Ee||{});function jx(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=ED(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function Ux(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:f}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),f!=null&&(t.destroyHooks??=[]).push(n,f)}}function xl(t,e,n){TD(t,e,3,n)}function Pl(t,e,n,r){(t[J]&3)===n&&TD(t,e,n,r)}function Kg(t,e){let n=t[J];(n&3)===e&&(n&=16383,n+=1,t[J]=n)}function TD(t,e,n,r){let i=r!==void 0?t[Vi]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[Vi]+=65536),(a<o||o==-1)&&(Bx(t,n,e,u),t[Vi]=(t[Vi]&4294901760)+u+2),u++}function WT(t,e){Re(Ee.LifecycleHookStart,t,e);let n=G(null);try{e.call(t)}finally{G(n),Re(Ee.LifecycleHookEnd,t,e)}}function Bx(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[J]>>14<t[Vi]>>16&&(t[J]&3)===e&&(t[J]+=16384,WT(a,o)):WT(a,o)}var qo=-1,Ha=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function $x(t){return(t.flags&8)!==0}function Hx(t){return(t.flags&16)!==0}function zx(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];qx(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function DD(t){return t===3||t===4||t===6}function qx(t){return t.charCodeAt(0)===64}function rd(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?KT(t,n,i,null,e[++r]):KT(t,n,i,null,null))}}return t}function KT(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function CD(t){return t!==qo}function Vl(t){return t&32767}function Gx(t){return t>>16}function jl(t,e){let n=Gx(t),r=e;for(;n>0;)r=r[Fi],n--;return r}var nm=!0;function Ul(t){let e=nm;return nm=t,e}var Wx=256,bD=Wx-1,SD=5,Kx=0,qn={};function Qx(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Pi)&&(r=n[Pi]),r==null&&(r=n[Pi]=Kx++);let i=r&bD,o=1<<i;e.data[t+(i>>SD)]|=o}function AD(t,e){let n=RD(t,e);if(n!==-1)return n;let r=e[z];r.firstCreatePass&&(t.injectorIndex=e.length,Qg(r.data,t),Qg(e,null),Qg(r.blueprint,null));let i=Sm(t,e),o=t.injectorIndex;if(CD(i)){let s=Vl(i),a=jl(i,e),u=a[z].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function Qg(t,e){t.push(0,0,0,0,0,0,0,0,e)}function RD(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Sm(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=OD(i),r===null)return qo;if(n++,i=i[Fi],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return qo}function Yx(t,e,n){Qx(t,e,n)}function Jx(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(DD(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function ND(t,e,n){if(n&8||t!==void 0)return t;pl(e,"NodeInjector")}function MD(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[pr],o=bt(void 0);try{return i?i.get(e,r,n&8):ug(e,r,n&8)}finally{bt(o)}}return ND(r,e,n)}function xD(t,e,n,r=0,i){if(t!==null){if(e[J]&2048&&!(r&2)){let s=tP(t,e,n,r,qn);if(s!==qn)return s}let o=PD(t,e,n,r,qn);if(o!==qn)return o}return MD(e,n,r,i)}function PD(t,e,n,r,i){let o=Xx(n);if(typeof o=="function"){if(!Vg(e,t,r))return r&1?ND(i,n,r):MD(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))pl(n);else return s}finally{jg()}}else if(typeof o=="number"){let s=null,a=RD(t,e),u=qo,l=r&1?e[Gt][on]:null;for((a===-1||r&4)&&(u=a===-1?Sm(t,e):e[a+8],u===qo||!YT(r,!1)?a=-1:(s=e[z],a=Vl(u),e=jl(u,e)));a!==-1;){let f=e[z];if(QT(o,a,f.data)){let p=Zx(a,e,n,s,r,l);if(p!==qn)return p}u=e[a+8],u!==qo&&YT(r,e[z].data[a+8]===l)&&QT(o,a,e)?(s=f,a=Vl(u),e=jl(u,e)):a=-1}}return i}function Zx(t,e,n,r,i,o){let s=e[z],a=s.data[t+8],u=r==null?qr(a)&&nm:r!=s&&(a.type&3)!==0,l=i&1&&o===a,f=Ol(a,s,n,u,l);return f!==null?Bl(e,s,f,a,i):qn}function Ol(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,u=t.directiveStart,l=t.directiveEnd,f=o>>20,p=r?a:a+f,m=i?a+f:l;for(let y=p;y<m;y++){let S=s[y];if(y<u&&n===S||y>=u&&S.type===n)return y}if(i){let y=s[u];if(y&&Bi(y)&&y.type===n)return u}return null}function Bl(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof Ha){let a=o;if(a.resolving){let y=nT(s[n]);throw cg(y)}let u=Ul(a.canSeeViewProviders);a.resolving=!0;let l=s[n].type||s[n],f,p=a.injectImpl?bt(a.injectImpl):null,m=Vg(t,r,0);try{o=t[n]=a.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&jx(n,s[n],e)}finally{p!==null&&bt(p),Ul(u),a.resolving=!1,jg()}}return o}function Xx(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Pi)?t[Pi]:void 0;return typeof e=="number"?e>=0?e&bD:eP:e}function QT(t,e,n){let r=1<<t;return!!(n[e+(t>>SD)]&r)}function YT(t,e){return!(t&2)&&!(t&1&&e)}var qi=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return xD(this._tNode,this._lView,e,Mi(r),n)}};function eP(){return new qi(Nt(),ce())}function Ya(t){return nd(()=>{let e=t.prototype.constructor,n=e[Da]||rm(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Da]||rm(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function rm(t){return tg(t)?()=>{let e=rm(Ut(t));return e&&e()}:Ur(t)}function tP(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[J]&2048&&!$o(s);){let a=PD(o,s,n,r|2,qn);if(a!==qn)return a;let u=o.parent;if(!u){let l=s[vg];if(l){let f=l.get(n,qn,r);if(f!==qn)return f}u=OD(s),s=s[Fi]}o=u}return i}function OD(t){let e=t[z],n=e.type;return n===2?e.declTNode:n===1?t[on]:null}function Ja(t){return Jx(Nt(),t)}function nP(){return Yo(Nt(),ce())}function Yo(t,e){return new Kt(En(t,e))}var Kt=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=nP}return t})();function rP(t){return t instanceof Kt?t.nativeElement:t}function iP(){return this._results[Symbol.iterator]()}var $l=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new ot}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=aT(e);(this._changesDetected=!sT(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=iP};function kD(t){return(t.flags&128)===128}var Am=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(Am||{}),LD=new Map,oP=0;function sP(){return oP++}function aP(t){LD.set(t[Pa],t)}function im(t){LD.delete(t[Pa])}var JT="__ngContext__";function Go(t,e){Hn(e)?(t[JT]=e[Pa],aP(e)):t[JT]=e}function FD(t){return jD(t[Bo])}function VD(t){return jD(t[rn])}function jD(t){for(;t!==null&&!_n(t);)t=t[rn];return t}var cP;function Rm(t){cP=t}var id=new H("",{factory:()=>uP}),uP="ng";var od=new H(""),Za=new H("",{providedIn:"platform",factory:()=>"unknown"});var sd=new H("",{factory:()=>O(tt).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var UD="r";var BD="di";var $D=!1,HD=new H("",{factory:()=>$D});var lP=(t,e,n,r)=>{};function dP(t,e,n,r){lP(t,e,n,r)}function Nm(t){return(t.flags&32)===32}var fP=()=>null;function zD(t,e,n=!1){return fP(t,e,n)}function qD(t,e){let n=t.contentQueries;if(n!==null){let r=G(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];Dl(o),a.contentQueries(2,e[s],s)}}}finally{G(r)}}}function om(t,e,n){Dl(0);let r=G(null);try{e(t,n)}finally{G(r)}}function GD(t,e,n){if(Eg(e)){let r=G(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let u=n[s];a.contentQueries(1,u,s)}}}finally{G(r)}}}var Dn=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t[t.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",t})(Dn||{});var Nl;function hP(){if(Nl===void 0&&(Nl=null,hr.trustedTypes))try{Nl=hr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Nl}function ZT(t){return hP()?.createScriptURL(t)||t}var Hl=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ll})`}};function Xa(t){return t instanceof Hl?t.changingThisBreaksApplicationSecurity:t}function Mm(t,e){let n=WD(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${ll})`)}return n===e}function WD(t){return t instanceof Hl&&t.getTypeName()||null}var pP=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function KD(t){return t=String(t),t.match(pP)?t:"unsafe:"+t}function gP(t,e){return t.createText(e)}function mP(t,e,n){t.setValue(e,n)}function QD(t,e,n){return t.createElement(e,n)}function zl(t,e,n,r,i){t.insertBefore(e,n,r,i)}function YD(t,e,n){t.appendChild(e,n)}function XT(t,e,n,r,i){r!==null?zl(t,e,n,r,i):YD(t,e,n)}function JD(t,e,n,r){t.removeChild(null,e,n,r)}function yP(t,e,n){t.setAttribute(e,"style",n)}function vP(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function ZD(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&zx(t,e,r),i!==null&&vP(t,e,i),o!==null&&yP(t,e,o)}var ad=(function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t})(ad||{});function Mt(t){let e=eC();return e?e.sanitize(ad.URL,t)||"":Mm(t,"URL")?Xa(t):KD(Ra(t))}function XD(t){let e=eC();if(e)return ZT(e.sanitize(ad.RESOURCE_URL,t)||"");if(Mm(t,"ResourceURL"))return ZT(Xa(t));throw new j(904,!1)}function _P(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?XD:Mt}function xm(t,e,n){return _P(e,n)(t)}function eC(){let t=ce();return t&&t[Bn].sanitizer}function Pm(t){return t.ownerDocument}function tC(t){return t instanceof Function?t():t}function EP(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var nC="ng-template";function IP(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&EP(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Om(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Om(t){return t.type===4&&t.value!==nC}function wP(t,e,n){let r=t.type===4&&!n?nC:t.value;return e===r}function TP(t,e,n){let r=4,i=t.attrs,o=i!==null?bP(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!wn(r)&&!wn(u))return!1;if(s&&wn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!wP(t,u,n)||u===""&&e.length===1){if(wn(r))return!1;s=!0}}else if(r&8){if(i===null||!IP(t,i,u,n)){if(wn(r))return!1;s=!0}}else{let l=e[++a],f=DP(u,i,Om(t),n);if(f===-1){if(wn(r))return!1;s=!0;continue}if(l!==""){let p;if(f>o?p="":p=i[f+1].toLowerCase(),r&2&&l!==p){if(wn(r))return!1;s=!0}}}}return wn(r)||s}function wn(t){return(t&1)===0}function DP(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return SP(e,t)}function CP(t,e,n=!1){for(let r=0;r<e.length;r++)if(TP(t,e[r],n))return!0;return!1}function bP(t){for(let e=0;e<t.length;e++){let n=t[e];if(DD(n))return e}return t.length}function SP(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function eD(t,e){return t?":not("+e.trim()+")":e}function AP(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!wn(s)&&(e+=eD(o,i),i=""),r=s,o=o||!wn(r);n++}return i!==""&&(e+=eD(o,i)),e}function RP(t){return t.map(AP).join(",")}function NP(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!wn(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var un={};function km(t,e,n,r,i,o,s,a,u,l,f){let p=et+r,m=p+i,y=MP(p,m),S=typeof l=="function"?l():l;return y[z]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:S,incompleteFirstPass:!1,ssrId:f}}function MP(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:un);return n}function xP(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=km(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Lm(t,e,n,r,i,o,s,a,u,l,f){let p=e.blueprint.slice();return p[vn]=i,p[J]=r|4|128|8|64|1024,(l!==null||t&&t[J]&2048)&&(p[J]|=2048),Tg(p),p[Xe]=p[Fi]=t,p[He]=n,p[Bn]=s||t&&t[Bn],p[Le]=a||t&&t[Le],p[pr]=u||t&&t[pr]||null,p[on]=o,p[Pa]=sP(),p[jo]=f,p[vg]=l,p[Gt]=e.type==2?t[Gt]:p,p}function PP(t,e,n){let r=En(e,t),i=xP(n),o=t[Bn].rendererFactory,s=Fm(t,Lm(t,i,null,rC(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function rC(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function iC(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Fm(t,e){return t[Bo]?t[yg][rn]=e:t[Bo]=e,t[yg]=e,e}function P(t=1){oC(ct(),ce(),gr()+t,!1)}function oC(t,e,n,r){if(!r)if((e[J]&3)===3){let o=t.preOrderCheckHooks;o!==null&&xl(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Pl(e,o,0,n)}Gr(n)}var cd=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(cd||{});function sm(t,e,n,r){let i=G(null);try{let[o,s,a]=t.inputs[n],u=null;(s&cd.SignalBased)!==0&&(u=e[o][Ft]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,u,r,n,o):_D(e,u,o,r)}finally{G(i)}}var Gn=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(Gn||{}),OP;function Vm(t,e){return OP(t,e)}var Gi=new Set,jm=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(jm||{}),ec=new H(""),tD=new Set;function Ji(t){tD.has(t)||(tD.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var sC=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=U({token:t,providedIn:"root",factory:()=>new t})}return t})();var aC=new H("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:O(at)})});function cC(t,e,n){let r=t.get(aC);if(Array.isArray(e))for(let i of e)r.queue.add(i),n?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),n?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(t)}function kP(t,e){let n=t.get(aC);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)n.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function LP(t,e){for(let[n,r]of e)cC(t,r.animateFns)}function nD(t,e,n,r){let i=t?.[ji]?.enter;e!==null&&i&&i.has(n.index)&&LP(r,i)}function zo(t,e,n,r,i,o,s,a){if(i!=null){let u,l=!1;_n(i)?u=i:Hn(i)&&(l=!0,i=i[vn]);let f=sn(i);t===0&&r!==null?(nD(a,r,o,n),s==null?YD(e,r,f):zl(e,r,f,s||null,!0)):t===1&&r!==null?(nD(a,r,o,n),zl(e,r,f,s||null,!0)):t===2?rD(a,o,n,p=>{JD(e,f,l,p)}):t===3&&rD(a,o,n,()=>{e.destroyNode(f)}),u!=null&&QP(e,t,n,u,o,r,s)}}function FP(t,e){uC(t,e),e[vn]=null,e[on]=null}function VP(t,e,n,r,i,o){r[vn]=i,r[on]=e,ld(t,r,n,1,i,o)}function uC(t,e){e[Bn].changeDetectionScheduler?.notify(9),ld(t,e,e[Le],2,null,null)}function jP(t){let e=t[Bo];if(!e)return Yg(t[z],t);for(;e;){let n=null;if(Hn(e))n=e[Bo];else{let r=e[Be];r&&(n=r)}if(!n){for(;e&&!e[rn]&&e!==t;)Hn(e)&&Yg(e[z],e),e=e[Xe];e===null&&(e=t),Hn(e)&&Yg(e[z],e),n=e&&e[rn]}e=n}}function Um(t,e){let n=t[Ui],r=n.indexOf(e);n.splice(r,1)}function ud(t,e){if($i(e))return;let n=e[Le];n.destroyNode&&ld(t,e,n,3,null,null),jP(e)}function Yg(t,e){if($i(e))return;let n=G(null);try{e[J]&=-129,e[J]|=256,e[Wt]&&ma(e[Wt]),$P(t,e),BP(t,e),e[z].type===1&&e[Le].destroy();let r=e[Hr];if(r!==null&&_n(e[Xe])){r!==e[Xe]&&Um(r,e);let i=e[$n];i!==null&&i.detachView(t)}im(e)}finally{G(n)}}function rD(t,e,n,r){let i=t?.[ji];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);t&&Gi.add(t),cC(n,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let u=0;u<s.animateFns.length;u++){let l=s.animateFns[u],{promise:f}=l();a.push(f)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),UP(t,r)}else t&&Gi.delete(t),r(!1)},i)}function UP(t,e){let n=t[ji]?.running;if(n){n.then(()=>{t[ji].running=void 0,Gi.delete(t),e(!0)});return}e(!1)}function BP(t,e){let n=t.cleanup,r=e[Uo];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(e[Uo]=null);let i=e[lr];if(i!==null){e[lr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Oa];if(o!==null){e[Oa]=null;for(let s of o)s.destroy()}}function $P(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Ha)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Re(Ee.LifecycleHookStart,a,u);try{u.call(a)}finally{Re(Ee.LifecycleHookEnd,a,u)}}else{Re(Ee.LifecycleHookStart,i,o);try{o.call(i)}finally{Re(Ee.LifecycleHookEnd,i,o)}}}}}function HP(t,e,n){return zP(t,e.parent,n)}function zP(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[vn];if(qr(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===Dn.None||i===Dn.Emulated)return null}return En(r,n)}function qP(t,e,n){return WP(t,e,n)}function GP(t,e,n){return t.type&40?En(t,n):null}var WP=GP,iD;function Bm(t,e,n,r){let i=HP(t,r,e),o=e[Le],s=r.parent||e[on],a=qP(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)XT(o,i,n[u],a,!1);else XT(o,i,n,a,!1);iD!==void 0&&iD(o,r,e,n,i)}function Ba(t,e){if(e!==null){let n=e.type;if(n&3)return En(e,t);if(n&4)return am(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Ba(t,r);{let i=t[e.index];return _n(i)?am(-1,i):sn(i)}}else{if(n&128)return Ba(t,e.next);if(n&32)return Vm(e,t)()||sn(t[e.index]);{let r=lC(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Br(t[Gt]);return Ba(i,r)}else return Ba(t,e.next)}}}return null}function lC(t,e){if(e!==null){let r=t[Gt][on],i=e.projection;return r.projection[i]}return null}function am(t,e){let n=Be+t+1;if(n<e.length){let r=e[n],i=r[z].firstChild;if(i!==null)return Ba(r,i)}return e[zr]}function $m(t,e,n,r,i,o,s){for(;n!=null;){let a=r[pr];if(n.type===128){n=n.next;continue}let u=r[n.index],l=n.type;if(s&&e===0&&(u&&Go(sn(u),r),n.flags|=2),!Nm(n))if(l&8)$m(t,e,n.child,r,i,o,!1),zo(e,t,a,i,u,n,o,r);else if(l&32){let f=Vm(n,r),p;for(;p=f();)zo(e,t,a,i,p,n,o,r);zo(e,t,a,i,u,n,o,r)}else l&16?KP(t,e,r,n,i,o):zo(e,t,a,i,u,n,o,r);n=s?n.projectionNext:n.next}}function ld(t,e,n,r,i,o){$m(n,r,t.firstChild,e,i,o,!1)}function KP(t,e,n,r,i,o){let s=n[Gt],u=s[on].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let f=u[l];zo(e,t,n[pr],i,f,r,o,n)}else{let l=u,f=s[Xe];kD(r)&&(l.flags|=128),$m(t,e,l,f,i,o,!0)}}function QP(t,e,n,r,i,o,s){let a=r[zr],u=sn(r);a!==u&&zo(e,t,n,o,a,i,s);for(let l=Be;l<r.length;l++){let f=r[l];ld(f[z],f,t,e,o,a)}}function YP(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Gn.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Gn.Important),t.setStyle(n,r,i,o))}}function dC(t,e,n,r,i){let o=gr(),s=r&2;try{Gr(-1),s&&e.length>et&&oC(t,e,et,!1);let a=s?Ee.TemplateUpdateStart:Ee.TemplateCreateStart;Re(a,i,n),n(r,i)}finally{Gr(o);let a=s?Ee.TemplateUpdateEnd:Ee.TemplateCreateEnd;Re(a,i,n)}}function fC(t,e,n){rO(t,e,n),(n.flags&64)===64&&iO(t,e,n)}function Hm(t,e,n=En){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function JP(t,e,n,r){let o=r.get(HD,$D)||n===Dn.ShadowDom||n===Dn.ExperimentalIsolatedShadowDom,s=t.selectRootElement(e,o);return ZP(s),s}function ZP(t){XP(t)}var XP=()=>null;function eO(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function tO(t,e,n,r,i,o){let s=e[z];if(zm(t,s,e,n,r)){qr(t)&&nO(e,t.index);return}t.type&3&&(n=eO(n)),hC(t,e,n,r,i,o)}function hC(t,e,n,r,i,o){if(t.type&3){let s=En(t,e);r=o!=null?o(r,t.value||"",n):r,i.setProperty(s,n,r)}else t.type&12}function nO(t,e){let n=an(e,t);n[J]&16||(n[J]|=64)}function rO(t,e,n){let r=n.directiveStart,i=n.directiveEnd;qr(n)&&PP(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||AD(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let a=t.data[s],u=Bl(e,t,s,n);if(Go(u,e),o!==null&&uO(e,s-r,u,a,n,o),Bi(a)){let l=an(n.index,e);l[He]=Bl(e,t,s,n)}}}function iO(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=OT();try{Gr(o);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];Tl(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&oO(u,l)}}finally{Gr(-1),Tl(s)}}function oO(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function sO(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];CP(e,o.selectors,!1)&&(r??=[],Bi(o)?r.unshift(o):r.push(o))}return r}function aO(t,e,n,r,i,o){let s=En(t,e);cO(e[Le],s,o,t.value,n,r,i)}function cO(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?Ra(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function uO(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];sm(r,n,u,l)}}function pC(t,e,n,r,i){let o=et+n,s=e[z],a=i(s,e,t,r,n);e[o]=a,Ho(t,!0);let u=t.type===2;return u?(ZD(e[Le],a,t),(CT()===0||El(t))&&Go(a,e),bT()):Go(a,e),Al()&&(!u||!Nm(t))&&Bm(s,e,a,t),t}function gC(t){let e=t;return xg()?NT():(e=e.parent,Ho(e,!1)),e}function lO(t,e){let n=t[pr];if(!n)return;let r;try{r=n.get(cn,null)}catch{r=null}r?.(e)}function zm(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],f=s[u+1],p=e.data[l];sm(p,n[l],f,i),a=!0}if(o)for(let u of o){let l=n[u],f=e.data[u];sm(f,l,r,i),a=!0}return a}function dO(t,e){let n=an(e,t),r=n[z];fO(r,n);let i=n[vn];i!==null&&n[jo]===null&&(n[jo]=zD(i,n[pr])),Re(Ee.ComponentStart);try{qm(r,n,n[He])}finally{Re(Ee.ComponentEnd,n[He])}}function fO(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function qm(t,e,n){Cl(e);try{let r=t.viewQuery;r!==null&&om(1,r,n);let i=t.template;i!==null&&dC(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[$n]?.finishViewCreation(t),t.staticContentQueries&&qD(t,e),t.staticViewQueries&&om(2,t.viewQuery,n);let o=t.components;o!==null&&hO(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[J]&=-5,bl()}}function hO(t,e){for(let n=0;n<e.length;n++)dO(t,e[n])}function dd(t,e,n,r){let i=G(null);try{let o=e.tView,a=t[J]&4096?4096:16,u=Lm(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[Hr]=l;let f=t[$n];return f!==null&&(u[$n]=f.createEmbeddedView(o)),qm(o,u,n),u}finally{G(i)}}function za(t,e){return!e||e.firstChild===null||kD(t)}function qa(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(sn(o)),_n(o)&&mC(o,r);let s=n.type;if(s&8)qa(t,e,n.child,r);else if(s&32){let a=Vm(n,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=lC(e,n);if(Array.isArray(a))r.push(...a);else{let u=Br(e[Gt]);qa(u[z],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function mC(t,e){for(let n=Be;n<t.length;n++){let r=t[n],i=r[z].firstChild;i!==null&&qa(r[z],r,i,e)}t[zr]!==t[vn]&&e.push(t[zr])}function yC(t){if(t[_l]!==null){for(let e of t[_l])e.impl.addSequence(e);t[_l].length=0}}var vC=[];function pO(t){return t[Wt]??gO(t)}function gO(t){let e=vC.pop()??Object.create(yO);return e.lView=t,e}function mO(t){t.lView[Wt]!==t&&(t.lView=null,vC.push(t))}var yO=oe(M({},ha),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{Va(t.lView)},consumerOnSignalRead(){this.lView[Wt]=this}});function vO(t){let e=t[Wt]??Object.create(_O);return e.lView=t,e}var _O=oe(M({},ha),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=Br(t.lView);for(;e&&!_C(e[z]);)e=Br(e);e&&Dg(e)},consumerOnSignalRead(){this.lView[Wt]=this}});function _C(t){return t.type!==2}function EC(t){if(t[Oa]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[Oa])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[J]&8192)}}var EO=100;function IC(t,e=0){let r=t[Bn].rendererFactory,i=!1;i||r.begin?.();try{IO(t,e)}finally{i||r.end?.()}}function IO(t,e){let n=Pg();try{Og(!0),cm(t,e);let r=0;for(;Fa(t);){if(r===EO)throw new j(103,!1);r++,cm(t,1)}}finally{Og(n)}}function wO(t,e,n,r){if($i(e))return;let i=e[J],o=!1,s=!1;Cl(e);let a=!0,u=null,l=null;o||(_C(t)?(l=pO(e),u=ga(l)):Ou()===null?(a=!1,l=vO(e),u=ga(l)):e[Wt]&&(ma(e[Wt]),e[Wt]=null));try{Tg(e),MT(t.bindingStartIndex),n!==null&&dC(t,e,n,2,r);let f=(i&3)===3;if(!o)if(f){let y=t.preOrderCheckHooks;y!==null&&xl(e,y,null)}else{let y=t.preOrderHooks;y!==null&&Pl(e,y,0,null),Kg(e,0)}if(s||TO(e),EC(e),wC(e,0),t.contentQueries!==null&&qD(t,e),!o)if(f){let y=t.contentCheckHooks;y!==null&&xl(e,y)}else{let y=t.contentHooks;y!==null&&Pl(e,y,1),Kg(e,1)}CO(t,e);let p=t.components;p!==null&&DC(e,p,0);let m=t.viewQuery;if(m!==null&&om(2,m,r),!o)if(f){let y=t.viewCheckHooks;y!==null&&xl(e,y)}else{let y=t.viewHooks;y!==null&&Pl(e,y,2),Kg(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[vl]){for(let y of e[vl])y();e[vl]=null}o||(yC(e),e[J]&=-73)}catch(f){throw o||Va(e),f}finally{l!==null&&(ku(l,u),a&&mO(l)),bl()}}function wC(t,e){for(let n=FD(t);n!==null;n=VD(n))for(let r=Be;r<n.length;r++){let i=n[r];TC(i,e)}}function TO(t){for(let e=FD(t);e!==null;e=VD(e)){if(!(e[J]&2))continue;let n=e[Ui];for(let r=0;r<n.length;r++){let i=n[r];Dg(i)}}}function DO(t,e,n){Re(Ee.ComponentStart);let r=an(e,t);try{TC(r,n)}finally{Re(Ee.ComponentEnd,r[He])}}function TC(t,e){Il(t)&&cm(t,e)}function cm(t,e){let r=t[z],i=t[J],o=t[Wt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Lu(o)),s||=!1,o&&(o.dirty=!1),t[J]&=-9217,s)wO(r,t,r.template,t[He]);else if(i&8192){let a=G(null);try{EC(t),wC(t,1);let u=r.components;u!==null&&DC(t,u,1),yC(t)}finally{G(a)}}}function DC(t,e,n){for(let r=0;r<e.length;r++)DO(t,e[r],n)}function CO(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Gr(~i);else{let o=i,s=n[++r],a=n[++r];PT(s,o);let u=e[o];Re(Ee.HostBindingsUpdateStart,u);try{a(2,u)}finally{Re(Ee.HostBindingsUpdateEnd,u)}}}}finally{Gr(-1)}}function Gm(t,e){let n=Pg()?64:1088;for(t[Bn].changeDetectionScheduler?.notify(e);t;){t[J]|=n;let r=Br(t);if($o(t)&&!r)return t;t=r}return null}function CC(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function bC(t,e){let n=Be+e;if(n<t.length)return t[n]}function fd(t,e,n,r=!0){let i=e[z];if(bO(i,e,t,n),r){let s=am(n,t),a=e[Le],u=a.parentNode(t[zr]);u!==null&&VP(i,t[on],a,e,u,s)}let o=e[jo];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function SC(t,e){let n=Ga(t,e);return n!==void 0&&ud(n[z],n),n}function Ga(t,e){if(t.length<=Be)return;let n=Be+e,r=t[n];if(r){let i=r[Hr];i!==null&&i!==t&&Um(i,r),e>0&&(t[n-1][rn]=r[rn]);let o=Na(t,Be+e);FP(r[z],r);let s=o[$n];s!==null&&s.detachView(o[z]),r[Xe]=null,r[rn]=null,r[J]&=-129}return r}function bO(t,e,n,r){let i=Be+r,o=n.length;r>0&&(n[i-1][rn]=e),r<o-Be?(e[rn]=n[i],lg(n,Be+r,e)):(n.push(e),e[rn]=null),e[Xe]=n;let s=e[Hr];s!==null&&n!==s&&AC(s,e);let a=e[$n];a!==null&&a.insertView(t),wl(e),e[J]|=128}function AC(t,e){let n=t[Ui],r=e[Xe];if(Hn(r))t[J]|=2;else{let i=r[Xe][Gt];e[Gt]!==i&&(t[J]|=2)}n===null?t[Ui]=[e]:n.push(e)}var Kr=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[z];return qa(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[He]}set context(e){this._lView[He]=e}get destroyed(){return $i(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Xe];if(_n(e)){let n=e[ka],r=n?n.indexOf(this):-1;r>-1&&(Ga(e,r),Na(n,r))}this._attachedToViewContainer=!1}ud(this._lView[z],this._lView)}onDestroy(e){Cg(this._lView,e)}markForCheck(){Gm(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[J]&=-129}reattach(){wl(this._lView),this._lView[J]|=128}detectChanges(){this._lView[J]|=1024,IC(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new j(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=$o(this._lView),n=this._lView[Hr];n!==null&&!e&&Um(n,this._lView),uC(this._lView[z],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new j(902,!1);this._appRef=e;let n=$o(this._lView),r=this._lView[Hr];r!==null&&!n&&AC(r,this._lView),wl(this._lView)}};var Wo=(()=>{class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=SO;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){let o=dd(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new Kr(o)}}return t})();function SO(){return Wm(Nt(),ce())}function Wm(t,e){return t.type&4?new Wo(e,t,Yo(t,e)):null}function hd(t,e,n,r,i){let o=t.data[e];if(o===null)o=AO(t,e,n,r,i),xT()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=RT();o.injectorIndex=s===null?-1:s.injectorIndex}return Ho(o,!0),o}function AO(t,e,n,r,i){let o=Mg(),s=xg(),a=s?o:o&&o.parent,u=t.data[e]=NO(t,a,n,e,r,i);return RO(t,u,o,s),u}function RO(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function NO(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return AT()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function MO(t){let e=t[_g]??[],r=t[Xe][Le],i=[];for(let o of e)o.data[BD]!==void 0?i.push(o):xO(o,r);t[_g]=i}function xO(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[UD];for(;n<i;){let o=r.nextSibling;JD(e,r,!1),r=o,n++}}}var PO=()=>null,OO=()=>null;function um(t,e){return PO(t,e)}function RC(t,e,n){return OO(t,e,n)}var NC=class{},pd=class{},lm=class{resolveComponentFactory(e){throw new j(917,!1)}},tc=class{static NULL=new lm},Wi=class{},Jo=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>kO()}return t})();function kO(){let t=ce(),e=Nt(),n=an(e.index,t);return(Hn(n)?n:t)[Le]}var MC=(()=>{class t{static \u0275prov=U({token:t,providedIn:"root",factory:()=>null})}return t})();var kl={},dm=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,kl,r);return i!==kl||n===kl?i:this.parentInjector.get(e,n,r)}};function ql(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=dl(i,a);else if(o==2){let u=a,l=e[++s];r=dl(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function me(t,e=0){let n=ce();if(n===null)return Y(t,e);let r=Nt();return xD(r,n,Ut(t),e)}function LO(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let a=s,u=null,l=null;for(let f of s)if(f.resolveHostDirectives!==null){[a,u,l]=f.resolveHostDirectives(s);break}jO(t,e,n,a,o,u,l)}o!==null&&r!==null&&FO(n,r,o)}function FO(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new j(-301,!1);r.push(e[i],o)}}function VO(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function jO(t,e,n,r,i,o,s){let a=r.length,u=null;for(let m=0;m<a;m++){let y=r[m];u===null&&Bi(y)&&(u=y,VO(t,n,m)),Yx(AD(n,e),t,y.type)}qO(n,t.data.length,a),u?.viewProvidersResolver&&u.viewProvidersResolver(u);for(let m=0;m<a;m++){let y=r[m];y.providersResolver&&y.providersResolver(y)}let l=!1,f=!1,p=iC(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let m=0;m<a;m++){let y=r[m];if(n.mergedAttrs=rd(n.mergedAttrs,y.hostAttrs),BO(t,n,e,p,y),zO(p,y,i),s!==null&&s.has(y)){let[A,R]=s.get(y);n.directiveToIndex.set(y.type,[p,A+n.directiveStart,R+n.directiveStart])}else(o===null||!o.has(y))&&n.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(n.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(n.flags|=64);let S=y.type.prototype;!l&&(S.ngOnChanges||S.ngOnInit||S.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!f&&(S.ngOnChanges||S.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),f=!0),p++}UO(t,n,o)}function UO(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))oD(0,e,i,r),oD(1,e,i,r),aD(e,r,!1);else{let o=n.get(i);sD(0,e,o,r),sD(1,e,o,r),aD(e,r,!0)}}}function oD(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),xC(e,o)}}function sD(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),xC(e,s)}}function xC(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function aD(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||Om(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!n&&i.hasOwnProperty(u)){let l=i[u];for(let f of l)if(f===e){s??=[],s.push(u,r[a+1]);break}}else if(n&&o.hasOwnProperty(u)){let l=o[u];for(let f=0;f<l.length;f+=2)if(l[f]===e){s??=[],s.push(l[f+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function BO(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Ur(i.type,!0)),s=new Ha(o,Bi(i),me,null);t.blueprint[r]=s,n[r]=s,$O(t,e,r,iC(t,n,i.hostVars,un),i)}function $O(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;HO(s)!=a&&s.push(a),s.push(n,r,o)}}function HO(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function zO(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Bi(e)&&(n[""]=t)}}function qO(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function PC(t,e,n,r,i,o,s,a){let u=e[z],l=u.consts,f=zn(l,s),p=hd(u,t,n,r,f);return o&&LO(u,e,p,zn(l,a),i),p.mergedAttrs=rd(p.mergedAttrs,p.attrs),p.attrs!==null&&ql(p,p.attrs,!1),p.mergedAttrs!==null&&ql(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function OC(t,e){Ux(t,e),Eg(e)&&t.queries.elementEnd(e)}function GO(t,e,n,r,i,o){let s=e.consts,a=zn(s,i),u=hd(e,t,n,r,a);if(u.mergedAttrs=rd(u.mergedAttrs,u.attrs),o!=null){let l=zn(s,o);u.localNames=[];for(let f=0;f<l.length;f+=2)u.localNames.push(l[f],-1)}return u.attrs!==null&&ql(u,u.attrs,!1),u.mergedAttrs!==null&&ql(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function kC(t,e,n){return t[e]=n}function Cn(t,e,n){if(n===un)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function WO(t,e,n,r){let i=Cn(t,e,n);return Cn(t,e+1,r)||i}function Ll(t,e,n){return function r(i){let o=qr(t)?an(t.index,e):e;Gm(o,5);let s=e[He],a=cD(e,s,n,i),u=r.__ngNextListenerFn__;for(;u;)a=cD(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function cD(t,e,n,r){let i=G(null);try{return Re(Ee.OutputStart,e,n),n(r)!==!1}catch(o){return lO(t,o),!1}finally{Re(Ee.OutputEnd,e,n),G(i)}}function LC(t,e,n,r,i,o,s,a){let u=El(t),l=!1,f=null;if(!r&&u&&(f=QO(e,n,o,t.index)),f!==null){let p=f.__ngLastListenerFn__||f;p.__ngNextListenerFn__=s,f.__ngLastListenerFn__=s,l=!0}else{let p=En(t,n),m=r?r(p):p;dP(n,m,o,a);let y=i.listen(m,o,a);if(!KO(o)){let S=r?A=>r(sn(A[t.index])):t.index;FC(S,e,n,o,a,y,!1)}}return l}function KO(t){return t.startsWith("animation")||t.startsWith("transition")}function QO(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[Uo],u=i[o+2];return a&&a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function FC(t,e,n,r,i,o,s){let a=e.firstCreatePass?Sg(e):null,u=bg(n),l=u.length;u.push(i,o),a&&a.push(r,t,l,(l+1)*(s?-1:1))}function uD(t,e,n,r,i,o){let s=e[n],a=e[z],l=a.data[n].outputs[r],p=s[l].subscribe(o);FC(t.index,a,e,i,o,p,!0)}var fm=Symbol("BINDING");var Gl=class extends tc{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=$r(e);return new Ko(n,this.ngModule)}};function YO(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&cd.SignalBased)!==0};return i&&(o.transform=i),o})}function JO(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function ZO(t,e,n){let r=e instanceof at?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new dm(n,r):n}function XO(t){let e=t.get(Wi,null);if(e===null)throw new j(407,!1);let n=t.get(MC,null),r=t.get(Lo,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function ek(t,e){let n=VC(t);return QD(e,n,n==="svg"?yT:n==="math"?vT:null)}function VC(t){return(t.selectors[0][0]||"div").toLowerCase()}var Ko=class extends pd{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=YO(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=JO(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=RP(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){Re(Ee.DynamicComponentStart);let a=G(null);try{let u=this.componentDef,l=tk(r,u,s,o),f=ZO(u,i||this.ngModule,e),p=XO(f),m=p.rendererFactory.createRenderer(null,u),y=r?JP(m,r,u.encapsulation,f):ek(u,m),S=s?.some(lD)||o?.some(L=>typeof L!="function"&&L.bindings.some(lD)),A=Lm(null,l,null,512|rC(u),null,null,p,m,f,null,zD(y,f,!0));A[et]=y,Cl(A);let R=null;try{let L=PC(et,A,2,"#host",()=>l.directiveRegistry,!0,0);ZD(m,y,L),Go(y,A),fC(l,A,L),GD(l,L,A),OC(l,L),n!==void 0&&rk(L,this.ngContentSelectors,n),R=an(L.index,A),A[He]=R[He],qm(l,A,null)}catch(L){throw R!==null&&im(R),im(A),L}finally{Re(Ee.DynamicComponentEnd),bl()}return new Wl(this.componentType,A,!!S)}finally{G(a)}}};function tk(t,e,n,r){let i=t?["ng-version","21.0.3"]:NP(e.selectors[0]),o=null,s=null,a=0;if(n)for(let f of n)a+=f[fm].requiredVars,f.create&&(f.targetIdx=0,(o??=[]).push(f)),f.update&&(f.targetIdx=0,(s??=[]).push(f));if(r)for(let f=0;f<r.length;f++){let p=r[f];if(typeof p!="function")for(let m of p.bindings){a+=m[fm].requiredVars;let y=f+1;m.create&&(m.targetIdx=y,(o??=[]).push(m)),m.update&&(m.targetIdx=y,(s??=[]).push(m))}}let u=[e];if(r)for(let f of r){let p=typeof f=="function"?f:f.type,m=pg(p);u.push(m)}return km(0,null,nk(o,s),1,a,u,null,null,null,[i],null)}function nk(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function lD(t){let e=t[fm].kind;return e==="input"||e==="twoWay"}var Wl=class extends NC{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=La(n[z],et),this.location=Yo(this._tNode,n),this.instance=an(this._tNode.index,n)[He],this.hostView=this.changeDetectorRef=new Kr(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=zm(r,i[z],i,e,n);this.previousInputValues.set(e,n);let s=an(r.index,i);Gm(s,1)}get injector(){return new qi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function rk(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Zi=(()=>{class t{static __NG_ELEMENT_ID__=ik}return t})();function ik(){let t=Nt();return UC(t,ce())}var ok=Zi,jC=class extends ok{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Yo(this._hostTNode,this._hostLView)}get injector(){return new qi(this._hostTNode,this._hostLView)}get parentInjector(){let e=Sm(this._hostTNode,this._hostLView);if(CD(e)){let n=jl(e,this._hostLView),r=Vl(e),i=n[z].data[r+8];return new qi(i,n)}else return new qi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=dD(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Be}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=um(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,za(this._hostTNode,s)),a}createComponent(e,n,r,i,o,s,a){let u=e&&!kx(e),l;if(u)l=n;else{let R=n||{};l=R.index,r=R.injector,i=R.projectableNodes,o=R.environmentInjector||R.ngModuleRef,s=R.directives,a=R.bindings}let f=u?e:new Ko($r(e)),p=r||this.parentInjector;if(!o&&f.ngModule==null){let L=(u?p:this.parentInjector).get(at,null);L&&(o=L)}let m=$r(f.componentType??{}),y=um(this._lContainer,m?.id??null),S=y?.firstChild??null,A=f.create(p,i,S,o,s,a);return this.insertImpl(A.hostView,l,za(this._hostTNode,y)),A}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(IT(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Xe],l=new jC(u,u[on],u[Xe]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return fd(s,i,o,r),e.attachToViewContainerRef(),lg(Jg(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=dD(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Ga(this._lContainer,n);r&&(Na(Jg(this._lContainer),n),ud(r[z],r))}detach(e){let n=this._adjustIndex(e,-1),r=Ga(this._lContainer,n);return r&&Na(Jg(this._lContainer),n)!=null?new Kr(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function dD(t){return t[ka]}function Jg(t){return t[ka]||(t[ka]=[])}function UC(t,e){let n,r=e[t.index];return _n(r)?n=r:(n=CC(r,e,null,t),e[t.index]=n,Fm(e,n)),ak(n,e,t,r),new jC(n,t,e)}function sk(t,e){let n=t[Le],r=n.createComment(""),i=En(e,t),o=n.parentNode(i);return zl(n,o,r,n.nextSibling(i),!1),r}var ak=lk,ck=()=>!1;function uk(t,e,n){return ck(t,e,n)}function lk(t,e,n,r){if(t[zr])return;let i;n.type&8?i=sn(r):i=sk(e,n),t[zr]=i}var hm=class t{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},pm=class t{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)Km(e,n).matches!==null&&this.queries[n].setDirty()}},Kl=class{flags;read;predicate;constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=vk(e):this.predicate=e}},gm=class t{queries;constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},mm=class t{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,n=-1){this.metadata=e,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,n,dk(n,o)),this.matchTNodeWithReadOption(e,n,Ol(n,e,o,!1,!1))}else r===Wo?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Ol(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Kt||i===Zi||i===Wo&&n.type&4)this.addMatch(n.index,-2);else{let o=Ol(n,e,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function dk(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function fk(t,e){return t.type&11?Yo(t,e):t.type&4?Wm(t,e):null}function hk(t,e,n,r){return n===-1?fk(e,t):n===-2?pk(t,e,r):Bl(t,t[z],n,e)}function pk(t,e,n){if(n===Kt)return Yo(e,t);if(n===Wo)return Wm(e,t);if(n===Zi)return UC(e,t)}function BC(t,e,n,r){let i=e[$n].queries[r];if(i.matches===null){let o=t.data,s=n.matches,a=[];for(let u=0;s!==null&&u<s.length;u+=2){let l=s[u];if(l<0)a.push(null);else{let f=o[l];a.push(hk(e,f,s[u+1],n.metadata.read))}}i.matches=a}return i.matches}function ym(t,e,n,r){let i=t.queries.getByIndex(n),o=i.matches;if(o!==null){let s=BC(t,e,i,n);for(let a=0;a<o.length;a+=2){let u=o[a];if(u>0)r.push(s[a/2]);else{let l=o[a+1],f=e[-u];for(let p=Be;p<f.length;p++){let m=f[p];m[Hr]===m[Xe]&&ym(m[z],m,l,r)}if(f[Ui]!==null){let p=f[Ui];for(let m=0;m<p.length;m++){let y=p[m];ym(y[z],y,l,r)}}}}}return r}function gk(t,e){return t[$n].queries[e].queryList}function $C(t,e,n){let r=new $l((n&4)===4);return DT(t,e,r,r.destroy),(e[$n]??=new pm).queries.push(new hm(r))-1}function mk(t,e,n){let r=ct();return r.firstCreatePass&&(HC(r,new Kl(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),$C(r,ce(),e)}function yk(t,e,n,r){let i=ct();if(i.firstCreatePass){let o=Nt();HC(i,new Kl(e,n,r),o.index),_k(i,t),(n&2)===2&&(i.staticContentQueries=!0)}return $C(i,ce(),n)}function vk(t){return t.split(",").map(e=>e.trim())}function HC(t,e,n){t.queries===null&&(t.queries=new gm),t.queries.track(new mm(e,n))}function _k(t,e){let n=t.contentQueries||(t.contentQueries=[]),r=n.length?n[n.length-1]:-1;e!==r&&n.push(t.queries.length-1,e)}function Km(t,e){return t.queries.getByIndex(e)}function Ek(t,e){let n=t[z],r=Km(n,e);return r.crossesNgTemplate?ym(n,t,e,[]):BC(n,t,r,e)}var Ki=class{},gd=class{};var Ql=class extends Ki{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Gl(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=hg(e);this._bootstrapComponents=tC(o.bootstrap),this._r3Injector=Ug(e,n,[{provide:Ki,useValue:this},{provide:tc,useValue:this.componentFactoryResolver},...r],dr(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Yl=class extends gd{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Ql(this.moduleType,e,[])}};var Wa=class extends Ki{injector;componentFactoryResolver=new Gl(this);instance=null;constructor(e){super();let n=new xi([...e.providers,{provide:Ki,useValue:this},{provide:tc,useValue:this.componentFactoryResolver}],e.parent||xa(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function nc(t,e,n=null){return new Wa({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var Ik=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=gg(!1,n.type),i=r.length>0?nc([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=U({token:t,providedIn:"environment",factory:()=>new t(Y(at))})}return t})();function Se(t){return nd(()=>{let e=zC(t),n=oe(M({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Am.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(Ik).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Dn.Emulated,styles:t.styles||jn,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&Ji("NgStandalone"),qC(n);let r=t.dependencies;return n.directiveDefs=fD(r,wk),n.pipeDefs=fD(r,uT),n.id=Ck(n),n})}function wk(t){return $r(t)||pg(t)}function Tk(t,e){if(t==null)return Oi;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=cd.None,u=null),n[o]=[r,a,u],e[o]=s}return n}function Dk(t){if(t==null)return Oi;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function Qr(t){return nd(()=>{let e=zC(t);return qC(e),e})}function Qm(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function zC(t){let e={};return{type:t.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||Oi,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||jn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:Tk(t.inputs,e),outputs:Dk(t.outputs),debugInfo:null}}function qC(t){t.features?.forEach(e=>e(t))}function fD(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let o=e(i);o!==null&&r.push(o)}return r}:null}function Ck(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function bk(t,e,n,r,i,o,s,a){if(n.firstCreatePass){t.mergedAttrs=rd(t.mergedAttrs,t.attrs);let f=t.tView=km(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),f.queries=n.queries.embeddedTView(t))}a&&(t.flags|=a),Ho(t,!1);let u=Sk(n,e,t,r);Al()&&Bm(n,e,u,t),Go(u,e);let l=CC(u,e,u,t);e[r+et]=l,Fm(e,l),uk(l,t,e)}function Jl(t,e,n,r,i,o,s,a,u,l,f){let p=n+et,m;if(e.firstCreatePass){if(m=hd(e,p,4,s||null,a||null),l!=null){let y=zn(e.consts,l);m.localNames=[];for(let S=0;S<y.length;S+=2)m.localNames.push(y[S],-1)}}else m=e.data[p];return bk(m,t,e,n,r,i,o,u),l!=null&&Hm(t,m,f),m}var Sk=Ak;function Ak(t,e,n,r){return Rl(!0),e[Le].createComment("")}var Ym=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var Jm=new H("");function Zo(t){return!!t&&typeof t.then=="function"}function Zm(t){return!!t&&typeof t.subscribe=="function"}var GC=new H("");var Xm=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=O(GC,{optional:!0})??[];injector=O(Un);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=St(this.injector,i);if(Zo(o))n.push(o);else if(Zm(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),md=new H("");function WC(){Dp(()=>{let t="";throw new j(600,t)})}function KC(t){return t.isBoundToModule}var Rk=10;var Xo=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=O(cn);afterRenderManager=O(sC);zonelessEnabled=O(ja);rootEffectScheduler=O(Wg);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new ot;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=O(Wr);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ke(n=>!n))}constructor(){O(ec,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=O(at);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=Un.NULL){return this._injector.get(qt).run(()=>{Re(Ee.BootstrapComponentStart);let s=n instanceof pd;if(!this._injector.get(Xm).done){let S="";throw new j(405,S)}let u;s?u=n:u=this._injector.get(tc).resolveComponentFactory(n),this.componentTypes.push(u.componentType);let l=KC(u)?void 0:this._injector.get(Ki),f=r||u.selector,p=u.create(i,[],f,l),m=p.location.nativeElement,y=p.injector.get(Jm,null);return y?.registerApplication(m),p.onDestroy(()=>{this.detachView(p.hostView),$a(this.components,p),y?.unregisterApplication(m)}),this._loadComponent(p),Re(Ee.BootstrapComponentEnd,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Re(Ee.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(jm.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw Re(Ee.ChangeDetectionEnd),new j(101,!1);let n=G(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,G(n),this.afterTick.next(),Re(Ee.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Wi,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<Rk;){Re(Ee.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{Re(Ee.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Fa(i))continue;let o=r&&!this.zonelessEnabled?0:1;IC(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Fa(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;$a(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(md,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>$a(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new j(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function $a(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function yd(t,e,n,r){let i=ce(),o=Hi();if(Cn(i,o,e)){let s=ct(),a=Sl();aO(a,i,t,e,n,r)}return yd}var r5=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var vm=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function Zg(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function Nk(t,e,n,r){let i,o,s=0,a=t.length-1,u=void 0;if(Array.isArray(e)){G(r);let l=e.length-1;for(G(null);s<=a&&s<=l;){let f=t.at(s),p=e[s],m=Zg(s,f,s,p,n);if(m!==0){m<0&&t.updateValue(s,p),s++;continue}let y=t.at(a),S=e[l],A=Zg(a,y,l,S,n);if(A!==0){A<0&&t.updateValue(a,S),a--,l--;continue}let R=n(s,f),L=n(a,y),re=n(s,p);if(Object.is(re,L)){let he=n(l,S);Object.is(he,R)?(t.swap(s,a),t.updateValue(a,S),l--,a--):t.move(a,s),t.updateValue(s,p),s++;continue}if(i??=new Zl,o??=pD(t,s,a,n),_m(t,i,s,re))t.updateValue(s,p),s++,a++;else if(o.has(re))i.set(R,t.detach(s)),a--;else{let he=t.create(s,e[s]);t.attach(s,he),s++,a++}}for(;s<=l;)hD(t,i,n,s,e[s]),s++}else if(e!=null){G(r);let l=e[Symbol.iterator]();G(null);let f=l.next();for(;!f.done&&s<=a;){let p=t.at(s),m=f.value,y=Zg(s,p,s,m,n);if(y!==0)y<0&&t.updateValue(s,m),s++,f=l.next();else{i??=new Zl,o??=pD(t,s,a,n);let S=n(s,m);if(_m(t,i,s,S))t.updateValue(s,m),s++,a++,f=l.next();else if(!o.has(S))t.attach(s,t.create(s,m)),s++,a++,f=l.next();else{let A=n(s,p);i.set(A,t.detach(s)),a--}}}for(;!f.done;)hD(t,i,n,t.length,f.value),f=l.next()}for(;s<=a;)t.destroy(t.detach(a--));i?.forEach(l=>{t.destroy(l)})}function _m(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function hD(t,e,n,r,i){if(_m(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function pD(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var Zl=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function se(t,e,n,r,i,o,s,a){Ji("NgControlFlow");let u=ce(),l=ct(),f=zn(l.consts,o);return Jl(u,l,t,e,n,r,i,f,256,s,a),ey}function ey(t,e,n,r,i,o,s,a){Ji("NgControlFlow");let u=ce(),l=ct(),f=zn(l.consts,o);return Jl(u,l,t,e,n,r,i,f,512,s,a),ey}function ae(t,e){Ji("NgControlFlow");let n=ce(),r=Hi(),i=n[r]!==un?n[r]:-1,o=i!==-1?Xl(n,et+i):void 0,s=0;if(Cn(n,r,t)){let a=G(null);try{if(o!==void 0&&SC(o,s),t!==-1){let u=et+t,l=Xl(n,u),f=Tm(n[z],u),p=RC(l,f,n),m=dd(n,f,e,{dehydratedView:p});fd(l,m,s,za(f,p))}}finally{G(a)}}else if(o!==void 0){let a=bC(o,s);a!==void 0&&(a[He]=e)}}var Em=class{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-Be}};function ln(t,e){return e}var Im=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function xt(t,e,n,r,i,o,s,a,u,l,f,p,m){Ji("NgControlFlow");let y=ce(),S=ct(),A=u!==void 0,R=ce(),L=a?s.bind(R[Gt][He]):s,re=new Im(A,L);R[et+t]=re,Jl(y,S,t+1,e,n,r,i,zn(S.consts,o),256),A&&Jl(y,S,t+2,u,l,f,p,zn(S.consts,m),512)}var wm=class extends vm{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-Be}at(e){return this.getLView(e)[He].$implicit}attach(e,n){let r=n[jo];this.needsIndexUpdate||=e!==this.length,fd(this.lContainer,n,e,za(this.templateTNode,r)),Mk(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,xk(this.lContainer,e),Pk(this.lContainer,e)}create(e,n){let r=um(this.lContainer,this.templateTNode.tView.ssrId),i=dd(this.hostLView,this.templateTNode,new Em(this.lContainer,n,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){ud(e[z],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[He].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[He].$index=e}getLView(e){return Ok(this.lContainer,e)}};function Pt(t){let e=G(null),n=gr();try{let r=ce(),i=r[z],o=r[n],s=n+1,a=Xl(r,s);if(o.liveCollection===void 0){let l=Tm(i,s);o.liveCollection=new wm(a,r,l)}else o.liveCollection.reset();let u=o.liveCollection;if(Nk(u,t,o.trackByFn,e),u.updateIndexes(),o.hasEmptyBlock){let l=Hi(),f=u.length===0;if(Cn(r,l,f)){let p=n+2,m=Xl(r,p);if(f){let y=Tm(i,p),S=RC(m,y,r),A=dd(r,y,void 0,{dehydratedView:S});fd(m,A,0,za(y,S))}else i.firstUpdatePass&&MO(m),SC(m,0)}}}finally{G(e)}}function Xl(t,e){return t[e]}function Mk(t,e){if(t.length<=Be)return;let n=Be+e,r=t[n],i=r?r[ji]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let o=r[pr];kP(o,i),Gi.delete(r),i.detachedLeaveAnimationFns=void 0}}function xk(t,e){if(t.length<=Be)return;let n=Be+e,r=t[n],i=r?r[ji]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function Pk(t,e){return Ga(t,e)}function Ok(t,e){return bC(t,e)}function Tm(t,e){return La(t,e)}function ue(t,e,n){let r=ce(),i=Hi();if(Cn(r,i,e)){let o=ct(),s=Sl();tO(s,r,t,e,r[Le],n)}return ue}function Dm(t,e,n,r,i){zm(e,t,n,i?"class":"style",r)}function B(t,e,n,r){let i=ce(),o=i[z],s=t+et,a=o.firstCreatePass?PC(s,i,2,e,sO,ST(),n,r):o.data[s];if(pC(a,i,t,e,QC),El(a)){let u=i[z];fC(u,i,a),GD(u,a,i)}return r!=null&&Hm(i,a),B}function W(){let t=ct(),e=Nt(),n=gC(e);return t.firstCreatePass&&OC(t,n),Rg(n)&&Ng(),Ag(),n.classesWithoutHost!=null&&$x(n)&&Dm(t,n,ce(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&Hx(n)&&Dm(t,n,ce(),n.stylesWithoutHost,!1),W}function ve(t,e,n,r){return B(t,e,n,r),W(),ve}function Ie(t,e,n,r){let i=ce(),o=i[z],s=t+et,a=o.firstCreatePass?GO(s,o,2,e,n,r):o.data[s];return pC(a,i,t,e,QC),r!=null&&Hm(i,a),Ie}function we(){let t=Nt(),e=gC(t);return Rg(e)&&Ng(),Ag(),we}function Yr(t,e,n,r){return Ie(t,e,n,r),we(),Yr}var QC=(t,e,n,r,i)=>(Rl(!0),QD(e[Le],r,UT()));function Bt(){return ce()}function Wn(t,e,n){let r=ce(),i=Hi();if(Cn(r,i,e)){let o=ct(),s=Sl();hC(s,r,t,e,r[Le],n)}return Wn}var Ua=void 0;function kk(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return e===1&&n===0?1:5}var Lk=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ua,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ua,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm\u202Fa","h:mm:ss\u202Fa","h:mm:ss\u202Fa z","h:mm:ss\u202Fa zzzz"],["{1}, {0}",Ua,Ua,Ua],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",kk],Xg={};function Qt(t){let e=Fk(t),n=gD(e);if(n)return n;let r=e.split("-")[0];if(n=gD(r),n)return n;if(r==="en")return Lk;throw new j(701,!1)}function gD(t){return t in Xg||(Xg[t]=hr.ng&&hr.ng.common&&hr.ng.common.locales&&hr.ng.common.locales[t]),Xg[t]}var ze=(function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t})(ze||{});function Fk(t){return t.toLowerCase().replace(/_/g,"-")}var rc="en-US";var Vk=rc;function YC(t){typeof t=="string"&&(Vk=t.toLowerCase().replace(/_/g,"-"))}function dn(t,e,n){let r=ce(),i=ct(),o=Nt();return jk(i,r,r[Le],o,t,e,n),dn}function Kn(t,e,n){let r=ce(),i=ct(),o=Nt();return(o.type&3||n)&&LC(o,i,r,n,r[Le],t,e,Ll(o,r,e)),Kn}function jk(t,e,n,r,i,o,s){let a=!0,u=null;if((r.type&3||s)&&(u??=Ll(r,e,o),LC(r,t,e,s,n,i,o,u)&&(a=!1)),a){let l=r.outputs?.[i],f=r.hostDirectiveOutputs?.[i];if(f&&f.length)for(let p=0;p<f.length;p+=2){let m=f[p],y=f[p+1];u??=Ll(r,e,o),uD(r,e,m,y,i,u)}if(l&&l.length)for(let p of l)u??=Ll(r,e,o),uD(r,e,p,i,i,u)}}function K(t=1){return jT(t)}function ty(t,e,n,r){yk(t,e,n,r)}function vd(t,e,n){mk(t,e,n)}function es(t){let e=ce(),n=ct(),r=Fg();Dl(r+1);let i=Km(n,r);if(t.dirty&&ET(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let o=Ek(e,r);t.reset(o,rP),t.notifyOnChanges()}return!0}return!1}function ts(){return gk(ce(),Fg())}function Ml(t,e){return t<<17|e<<2}function Qi(t){return t>>17&32767}function Uk(t){return(t&2)==2}function Bk(t,e){return t&131071|e<<17}function Cm(t){return t|2}function Qo(t){return(t&131068)>>2}function em(t,e){return t&-131069|e<<2}function $k(t){return(t&1)===1}function bm(t){return t|1}function Hk(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Qi(s),u=Qo(s);t[r]=n;let l=!1,f;if(Array.isArray(n)){let p=n;f=p[1],(f===null||Vo(p,f)>0)&&(l=!0)}else f=n;if(i)if(u!==0){let m=Qi(t[a+1]);t[r+1]=Ml(m,a),m!==0&&(t[m+1]=em(t[m+1],r)),t[a+1]=Bk(t[a+1],r)}else t[r+1]=Ml(a,0),a!==0&&(t[a+1]=em(t[a+1],r)),a=r;else t[r+1]=Ml(u,0),a===0?a=r:t[u+1]=em(t[u+1],r),u=r;l&&(t[r+1]=Cm(t[r+1])),mD(t,f,r,!0),mD(t,f,r,!1),zk(e,f,t,r,o),s=Ml(a,u),o?e.classBindings=s:e.styleBindings=s}function zk(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Vo(o,e)>=0&&(n[r+1]=bm(n[r+1]))}function mD(t,e,n,r){let i=t[n+1],o=e===null,s=r?Qi(i):Qo(i),a=!1;for(;s!==0&&(a===!1||o);){let u=t[s],l=t[s+1];qk(u,e)&&(a=!0,t[s+1]=r?bm(l):Cm(l)),s=r?Qi(l):Qo(l)}a&&(t[n+1]=r?Cm(i):bm(i))}function qk(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Vo(t,e)>=0:!1}var Tn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Gk(t){return t.substring(Tn.key,Tn.keyEnd)}function Wk(t){return Kk(t),JC(t,ZC(t,0,Tn.textEnd))}function JC(t,e){let n=Tn.textEnd;return n===e?-1:(e=Tn.keyEnd=Qk(t,Tn.key=e,n),ZC(t,e,n))}function Kk(t){Tn.key=0,Tn.keyEnd=0,Tn.value=0,Tn.valueEnd=0,Tn.textEnd=t.length}function ZC(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function Qk(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function ns(t,e){return Jk(t,e,null,!0),ns}function _d(t){Zk(i1,Yk,t,!0)}function Yk(t,e){for(let n=Wk(e);n>=0;n=JC(e,n))ml(t,Gk(e),!0)}function Jk(t,e,n,r){let i=ce(),o=ct(),s=Lg(2);if(o.firstUpdatePass&&eb(o,t,s,r),e!==un&&Cn(i,s,e)){let a=o.data[gr()];tb(o,a,i,i[Le],t,i[s+1]=s1(e,n),r,s)}}function Zk(t,e,n,r){let i=ct(),o=Lg(2);i.firstUpdatePass&&eb(i,null,o,r);let s=ce();if(n!==un&&Cn(s,o,n)){let a=i.data[gr()];if(nb(a,r)&&!XC(i,o)){let u=r?a.classesWithoutHost:a.stylesWithoutHost;u!==null&&(n=dl(u,n||"")),Dm(i,a,s,n,r)}else o1(i,a,s,s[Le],s[o+1],s[o+1]=r1(t,e,n),r,o)}}function XC(t,e){return e>=t.expandoStartIndex}function eb(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[gr()],s=XC(t,n);nb(o,r)&&e===null&&!s&&(e=!1),e=Xk(i,o,e,r),Hk(i,o,e,n,s,r)}}function Xk(t,e,n,r){let i=kT(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=tm(null,t,e,n,r),n=Ka(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=tm(i,t,e,n,r),o===null){let u=e1(t,e,r);u!==void 0&&Array.isArray(u)&&(u=tm(null,t,e,u[1],r),u=Ka(u,e.attrs,r),t1(t,e,r,u))}else o=n1(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function e1(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Qo(r)!==0)return t[Qi(r)]}function t1(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Qi(i)]=r}function n1(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=Ka(r,s,n)}return Ka(r,e.attrs,n)}function tm(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=Ka(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Ka(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),ml(t,s,n?!0:e[++o]))}return t===void 0?null:t}function r1(t,e,n){if(n==null||n==="")return jn;let r=[],i=Xa(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function i1(t,e,n){let r=String(e);r!==""&&!r.includes(" ")&&ml(t,r,n)}function o1(t,e,n,r,i,o,s,a){i===un&&(i=jn);let u=0,l=0,f=0<i.length?i[0]:null,p=0<o.length?o[0]:null;for(;f!==null||p!==null;){let m=u<i.length?i[u+1]:void 0,y=l<o.length?o[l+1]:void 0,S=null,A;f===p?(u+=2,l+=2,m!==y&&(S=p,A=y)):p===null||f!==null&&f<p?(u+=2,S=f):(l+=2,S=p,A=y),S!==null&&tb(t,e,n,r,S,A,s,a),f=u<i.length?i[u]:null,p=l<o.length?o[l]:null}}function tb(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],f=$k(l)?yD(u,e,n,i,Qo(l),s):void 0;if(!ed(f)){ed(o)||Uk(l)&&(o=yD(u,null,n,i,a,s));let p=Ig(gr(),n);YP(r,s,p,i,o)}}function yD(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),f=l?u[1]:u,p=f===null,m=n[i+1];m===un&&(m=p?jn:void 0);let y=p?yl(m,r):f===r?m:void 0;if(l&&!ed(y)&&(y=yl(u,r)),ed(y)&&(a=y,s))return a;let S=t[i+1];i=s?Qi(S):Qo(S)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=yl(u,r))}return a}function ed(t){return t!==void 0}function s1(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=dr(Xa(t)))),t}function nb(t,e){return(t.flags&(e?8:16))!==0}function Z(t,e=""){let n=ce(),r=ct(),i=t+et,o=r.firstCreatePass?hd(r,i,1,e,null):r.data[i],s=a1(r,n,o,e,t);n[i]=s,Al()&&Bm(r,n,s,o),Ho(o,!1)}var a1=(t,e,n,r,i)=>(Rl(!0),gP(e[Le],r));function c1(t,e,n,r=""){return Cn(t,Hi(),n)?e+Ra(n)+r:un}function Fe(t){return bn("",t),Fe}function bn(t,e,n){let r=ce(),i=c1(r,t,e,n);return i!==un&&u1(r,gr(),i),bn}function u1(t,e,n){let r=Ig(e,t);mP(t[Le],r,n)}function ic(t,e,n,r){return l1(ce(),kg(),t,e,n,r)}function rb(t,e){let n=t[e];return n===un?void 0:n}function l1(t,e,n,r,i,o){let s=e+n;return Cn(t,s,i)?kC(t,s+1,o?r.call(o,i):r(i)):rb(t,s+1)}function d1(t,e,n,r,i,o,s){let a=e+n;return WO(t,a,i,o)?kC(t,a+2,s?r.call(s,i,o):r(i,o)):rb(t,a+2)}function ny(t,e){let n=ct(),r,i=t+et;n.firstCreatePass?(r=f1(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=Ur(r.type,!0)),s,a=bt(me);try{let u=Ul(!1),l=o();return Ul(u),wg(n,ce(),i,l),l}finally{bt(a)}}function f1(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function ry(t,e,n,r){let i=t+et,o=ce(),s=_T(o,i);return h1(o,i)?d1(o,kg(),e,s.transform,n,r,s):s.transform(n,r)}function h1(t,e){return t[z].data[e].pure}var td=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},iy=(()=>{class t{compileModuleSync(n){return new Yl(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=hg(n),o=tC(i.declarations).reduce((s,a)=>{let u=$r(a);return u&&s.push(new Ko(u)),s},[]);return new td(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var ib=(()=>{class t{applicationErrorHandler=O(cn);appRef=O(Xo);taskService=O(Wr);ngZone=O(qt);zonelessEnabled=O(ja);tracing=O(ec,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new ht;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(ba):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(O(Gg,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?$g:Bg;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(ba+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,$g(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ob(){return[{provide:Lo,useExisting:ib},{provide:qt,useClass:Sa},{provide:ja,useValue:!0}]}function p1(){return typeof $localize<"u"&&$localize.locale||rc}var oc=new H("",{factory:()=>O(oc,{optional:!0,skipSelf:!0})||p1()});function oy(t,e){return Fu(t,e?.equal)}var ab=Symbol("InputSignalNode#UNSET"),A1=oe(M({},Vu),{transformFn:void 0,applyValueToInputSignal(t,e){ya(t,e)}});function cb(t,e){let n=Object.create(A1);n.value=t,n.transformFn=e?.transform;function r(){if(pa(n),n.value===ab){let i=null;throw new j(-950,i)}return n.value}return r[Ft]=n,r}var Id=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Ja(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}};function sb(t,e){return cb(t,e)}function R1(t){return cb(ab,t)}var ub=(sb.required=R1,sb);var sy=new H(""),N1=new H("");function sc(t){return!t.moduleRef}function M1(t){let e=sc(t)?t.r3Injector:t.moduleRef.injector,n=e.get(qt);return n.run(()=>{sc(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(cn),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),sc(t)){let o=()=>e.destroy(),s=t.platformInjector.get(sy);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(sy);s.add(o),t.moduleRef.onDestroy(()=>{$a(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return P1(r,n,()=>{let o=e.get(Wr),s=o.add(),a=e.get(Xm);return a.runInitializers(),a.donePromise.then(()=>{let u=e.get(oc,rc);if(YC(u||rc),!e.get(N1,!0))return sc(t)?e.get(Xo):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(sc(t)){let f=e.get(Xo);return t.rootComponent!==void 0&&f.bootstrap(t.rootComponent),f}else return x1?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void o.remove(s))})})}var x1;function P1(t,e,n){try{let r=n();return Zo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var Ed=null;function O1(t=[],e){return Un.create({name:e,providers:[{provide:Ma,useValue:"platform"},{provide:sy,useValue:new Set([()=>Ed=null])},...t]})}function k1(t=[]){if(Ed)return Ed;let e=O1(t);return Ed=e,WC(),L1(e),e}function L1(t){let e=t.get(od,null);St(t,()=>{e?.forEach(n=>n())})}var ac=(()=>{class t{static __NG_ELEMENT_ID__=F1}return t})();function F1(t){return V1(Nt(),ce(),(t&16)===16)}function V1(t,e,n){if(qr(t)&&!n){let r=an(t.index,e);return new Kr(r,r)}else if(t.type&175){let r=e[Gt];return new Kr(r,e)}return null}function lb(t){let{rootComponent:e,appProviders:n,platformProviders:r,platformRef:i}=t;Re(Ee.BootstrapApplicationStart);try{let o=i?.injector??k1(r),s=[ob(),zT,...n||[]],a=new Wa({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return M1({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Re(Ee.BootstrapApplicationEnd)}}function Td(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var db=null;function mr(){return db}function ay(t){db??=t}var cc=class{},Dd=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:()=>O(fb),providedIn:"platform"})}return t})();var fb=(()=>{class t extends Dd{_location;_history;_doc=O(tt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return mr().getBaseHref(this._doc)}onPopState(n){let r=mr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=mr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function gb(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function hb(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function Jr(t){return t&&t[0]!=="?"?`?${t}`:t}var rs=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:()=>O(U1),providedIn:"root"})}return t})(),j1=new H(""),U1=(()=>{class t extends rs{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??O(tt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return gb(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+Jr(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+Jr(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+Jr(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(Y(Dd),Y(j1,8))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),is=(()=>{class t{_subject=new ot;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=H1(hb(pb(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Jr(r))}normalize(n){return t.stripTrailingSlash($1(this._basePath,pb(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Jr(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Jr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Jr;static joinWithSlash=gb;static stripTrailingSlash=hb;static \u0275fac=function(r){return new(r||t)(Y(rs))};static \u0275prov=U({token:t,factory:()=>B1(),providedIn:"root"})}return t})();function B1(){return new is(Y(rs))}function $1(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function pb(t){return t.replace(/\/index.html$/,"")}function H1(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var _t=(function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t})(_t||{}),Ne=(function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t})(Ne||{}),$t=(function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t})($t||{}),vr={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function vb(t){return Qt(t)[ze.LocaleId]}function _b(t,e,n){let r=Qt(t),i=[r[ze.DayPeriodsFormat],r[ze.DayPeriodsStandalone]],o=fn(i,e);return fn(o,n)}function Eb(t,e,n){let r=Qt(t),i=[r[ze.DaysFormat],r[ze.DaysStandalone]],o=fn(i,e);return fn(o,n)}function Ib(t,e,n){let r=Qt(t),i=[r[ze.MonthsFormat],r[ze.MonthsStandalone]],o=fn(i,e);return fn(o,n)}function wb(t,e){let r=Qt(t)[ze.Eras];return fn(r,e)}function uc(t,e){let n=Qt(t);return fn(n[ze.DateFormat],e)}function lc(t,e){let n=Qt(t);return fn(n[ze.TimeFormat],e)}function dc(t,e){let r=Qt(t)[ze.DateTimeFormat];return fn(r,e)}function fc(t,e){let n=Qt(t),r=n[ze.NumberSymbols][e];if(typeof r>"u"){if(e===vr.CurrencyDecimal)return n[ze.NumberSymbols][vr.Decimal];if(e===vr.CurrencyGroup)return n[ze.NumberSymbols][vr.Group]}return r}function Tb(t){if(!t[ze.ExtraData])throw new j(2303,!1)}function Db(t){let e=Qt(t);return Tb(e),(e[ze.ExtraData][2]||[]).map(r=>typeof r=="string"?cy(r):[cy(r[0]),cy(r[1])])}function Cb(t,e,n){let r=Qt(t);Tb(r);let i=[r[ze.ExtraData][0],r[ze.ExtraData][1]],o=fn(i,e)||[];return fn(o,n)||[]}function fn(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new j(2304,!1)}function cy(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}var z1=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Cd={},q1=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function bb(t,e,n,r){let i=eL(t);e=yr(n,e)||e;let s=[],a;for(;e;)if(a=q1.exec(e),a){s=s.concat(a.slice(1));let f=s.pop();if(!f)break;e=f}else{s.push(e);break}let u=i.getTimezoneOffset();r&&(u=Ab(r,u),i=X1(i,r));let l="";return s.forEach(f=>{let p=J1(f);l+=p?p(i,n,u):f==="''"?"'":f.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Nd(t,e,n){let r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function yr(t,e){let n=vb(t);if(Cd[n]??={},Cd[n][e])return Cd[n][e];let r="";switch(e){case"shortDate":r=uc(t,$t.Short);break;case"mediumDate":r=uc(t,$t.Medium);break;case"longDate":r=uc(t,$t.Long);break;case"fullDate":r=uc(t,$t.Full);break;case"shortTime":r=lc(t,$t.Short);break;case"mediumTime":r=lc(t,$t.Medium);break;case"longTime":r=lc(t,$t.Long);break;case"fullTime":r=lc(t,$t.Full);break;case"short":let i=yr(t,"shortTime"),o=yr(t,"shortDate");r=bd(dc(t,$t.Short),[i,o]);break;case"medium":let s=yr(t,"mediumTime"),a=yr(t,"mediumDate");r=bd(dc(t,$t.Medium),[s,a]);break;case"long":let u=yr(t,"longTime"),l=yr(t,"longDate");r=bd(dc(t,$t.Long),[u,l]);break;case"full":let f=yr(t,"fullTime"),p=yr(t,"fullDate");r=bd(dc(t,$t.Full),[f,p]);break}return r&&(Cd[n][e]=r),r}function bd(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return e!=null&&r in e?e[r]:n})),t}function Sn(t,e,n="-",r,i){let o="";(t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,o=n));let s=String(t);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function G1(t,e){return Sn(t,3).substring(0,e)}function Ge(t,e,n=0,r=!1,i=!1){return function(o,s){let a=W1(t,o);if((n>0||a>-n)&&(a+=n),t===3)a===0&&n===-12&&(a=12);else if(t===6)return G1(a,e);let u=fc(s,vr.MinusSign);return Sn(a,e,u,r,i)}}function W1(t,e){switch(t){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new j(2301,!1)}}function Pe(t,e,n=_t.Format,r=!1){return function(i,o){return K1(i,o,t,e,n,r)}}function K1(t,e,n,r,i,o){switch(n){case 2:return Ib(e,i,r)[t.getMonth()];case 1:return Eb(e,i,r)[t.getDay()];case 0:let s=t.getHours(),a=t.getMinutes();if(o){let l=Db(e),f=Cb(e,i,r),p=l.findIndex(m=>{if(Array.isArray(m)){let[y,S]=m,A=s>=y.hours&&a>=y.minutes,R=s<S.hours||s===S.hours&&a<S.minutes;if(y.hours<S.hours){if(A&&R)return!0}else if(A||R)return!0}else if(m.hours===s&&m.minutes===a)return!0;return!1});if(p!==-1)return f[p]}return _b(e,i,r)[s<12?0:1];case 3:return wb(e,r)[t.getFullYear()<=0?0:1];default:let u=n;throw new j(2302,!1)}}function Sd(t){return function(e,n,r){let i=-1*r,o=fc(n,vr.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case 0:return(i>=0?"+":"")+Sn(s,2,o)+Sn(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+Sn(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+Sn(s,2,o)+":"+Sn(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+Sn(s,2,o)+":"+Sn(Math.abs(i%60),2,o);default:throw new j(2310,!1)}}}var Q1=0,Rd=4;function Y1(t){let e=Nd(t,Q1,1).getDay();return Nd(t,0,1+(e<=Rd?Rd:Rd+7)-e)}function Sb(t){let e=t.getDay(),n=e===0?-3:Rd-e;return Nd(t.getFullYear(),t.getMonth(),t.getDate()+n)}function uy(t,e=!1){return function(n,r){let i;if(e){let o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,s=n.getDate();i=1+Math.floor((s+o)/7)}else{let o=Sb(n),s=Y1(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return Sn(i,t,fc(r,vr.MinusSign))}}function Ad(t,e=!1){return function(n,r){let o=Sb(n).getFullYear();return Sn(o,t,fc(r,vr.MinusSign),e)}}var ly={};function J1(t){if(ly[t])return ly[t];let e;switch(t){case"G":case"GG":case"GGG":e=Pe(3,Ne.Abbreviated);break;case"GGGG":e=Pe(3,Ne.Wide);break;case"GGGGG":e=Pe(3,Ne.Narrow);break;case"y":e=Ge(0,1,0,!1,!0);break;case"yy":e=Ge(0,2,0,!0,!0);break;case"yyy":e=Ge(0,3,0,!1,!0);break;case"yyyy":e=Ge(0,4,0,!1,!0);break;case"Y":e=Ad(1);break;case"YY":e=Ad(2,!0);break;case"YYY":e=Ad(3);break;case"YYYY":e=Ad(4);break;case"M":case"L":e=Ge(1,1,1);break;case"MM":case"LL":e=Ge(1,2,1);break;case"MMM":e=Pe(2,Ne.Abbreviated);break;case"MMMM":e=Pe(2,Ne.Wide);break;case"MMMMM":e=Pe(2,Ne.Narrow);break;case"LLL":e=Pe(2,Ne.Abbreviated,_t.Standalone);break;case"LLLL":e=Pe(2,Ne.Wide,_t.Standalone);break;case"LLLLL":e=Pe(2,Ne.Narrow,_t.Standalone);break;case"w":e=uy(1);break;case"ww":e=uy(2);break;case"W":e=uy(1,!0);break;case"d":e=Ge(2,1);break;case"dd":e=Ge(2,2);break;case"c":case"cc":e=Ge(7,1);break;case"ccc":e=Pe(1,Ne.Abbreviated,_t.Standalone);break;case"cccc":e=Pe(1,Ne.Wide,_t.Standalone);break;case"ccccc":e=Pe(1,Ne.Narrow,_t.Standalone);break;case"cccccc":e=Pe(1,Ne.Short,_t.Standalone);break;case"E":case"EE":case"EEE":e=Pe(1,Ne.Abbreviated);break;case"EEEE":e=Pe(1,Ne.Wide);break;case"EEEEE":e=Pe(1,Ne.Narrow);break;case"EEEEEE":e=Pe(1,Ne.Short);break;case"a":case"aa":case"aaa":e=Pe(0,Ne.Abbreviated);break;case"aaaa":e=Pe(0,Ne.Wide);break;case"aaaaa":e=Pe(0,Ne.Narrow);break;case"b":case"bb":case"bbb":e=Pe(0,Ne.Abbreviated,_t.Standalone,!0);break;case"bbbb":e=Pe(0,Ne.Wide,_t.Standalone,!0);break;case"bbbbb":e=Pe(0,Ne.Narrow,_t.Standalone,!0);break;case"B":case"BB":case"BBB":e=Pe(0,Ne.Abbreviated,_t.Format,!0);break;case"BBBB":e=Pe(0,Ne.Wide,_t.Format,!0);break;case"BBBBB":e=Pe(0,Ne.Narrow,_t.Format,!0);break;case"h":e=Ge(3,1,-12);break;case"hh":e=Ge(3,2,-12);break;case"H":e=Ge(3,1);break;case"HH":e=Ge(3,2);break;case"m":e=Ge(4,1);break;case"mm":e=Ge(4,2);break;case"s":e=Ge(5,1);break;case"ss":e=Ge(5,2);break;case"S":e=Ge(6,1);break;case"SS":e=Ge(6,2);break;case"SSS":e=Ge(6,3);break;case"Z":case"ZZ":case"ZZZ":e=Sd(0);break;case"ZZZZZ":e=Sd(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Sd(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=Sd(2);break;default:return null}return ly[t]=e,e}function Ab(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function Z1(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function X1(t,e,n){let i=t.getTimezoneOffset(),o=Ab(e,i);return Z1(t,-1*(o-i))}function eL(t){if(mb(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[i,o=1,s=1]=t.split("-").map(a=>+a);return Nd(i,o-1,s)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(z1))return tL(r)}let e=new Date(t);if(!mb(e))throw new j(2311,!1);return e}function tL(t){let e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let s=Number(t[4]||0)-n,a=Number(t[5]||0)-r,u=Number(t[6]||0),l=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return o.call(e,s,a,u,l),e}function mb(t){return t instanceof Date&&!isNaN(t.valueOf())}var dy=/\s+/,yb=[],fy=(()=>{class t{_ngEl;_renderer;initialClasses=yb;rawClass;stateMap=new Map;constructor(n,r){this._ngEl=n,this._renderer=r}set klass(n){this.initialClasses=n!=null?n.trim().split(dy):yb}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(dy):n}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let r of n)this._updateState(r,!0);else if(n!=null)for(let r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){let i=this.stateMap.get(n);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){n=n.trim(),n.length>0&&n.split(dy).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||t)(me(Kt),me(Jo))};static \u0275dir=Qr({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return t})();function nL(t,e){return new j(2100,!1)}var rL="mediumDate",Rb=new H(""),Nb=new H(""),hy=(()=>{class t{locale;defaultTimezone;defaultOptions;constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,o){if(n==null||n===""||n!==n)return null;try{let s=r??this.defaultOptions?.dateFormat??rL,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return bb(n,s,o||this.locale,a)}catch(s){throw nL(t,s.message)}}static \u0275fac=function(r){return new(r||t)(me(oc,16),me(Rb,24),me(Nb,24))};static \u0275pipe=Qm({name:"date",type:t,pure:!0})}return t})();function py(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var hc=class{};var Mb="browser";var pc=class{_doc;constructor(e){this._doc=e}manager},Md=(()=>{class t extends pc{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(Y(tt))};static \u0275prov=U({token:t,factory:t.\u0275fac})}return t})(),Od=new H(""),vy=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(s=>{s.manager=this});let i=n.filter(s=>!(s instanceof Md));this._plugins=i.slice().reverse();let o=n.find(s=>s instanceof Md);o&&this._plugins.push(o)}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new j(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(Y(Od),Y(qt))};static \u0275prov=U({token:t,factory:t.\u0275fac})}return t})(),gy="ng-app-id";function xb(t){for(let e of t)e.remove()}function Pb(t,e){let n=e.createElement("style");return n.textContent=t,n}function aL(t,e,n,r){let i=t.head?.querySelectorAll(`style[${gy}="${e}"],link[${gy}="${e}"]`);if(i)for(let o of i)o.removeAttribute(gy),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function yy(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var _y=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,aL(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,Pb);r?.forEach(i=>this.addUsage(i,this.external,yy))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(xb(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])xb(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,Pb(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,yy(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(Y(tt),Y(id),Y(sd,8),Y(Za))};static \u0275prov=U({token:t,factory:t.\u0275fac})}return t})(),my={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Ey=/%COMP%/g;var kb="%COMP%",cL=`_nghost-${kb}`,uL=`_ngcontent-${kb}`,lL=!0,dL=new H("",{factory:()=>lL});function fL(t){return uL.replace(Ey,t)}function hL(t){return cL.replace(Ey,t)}function Lb(t,e){return e.map(n=>n.replace(Ey,t))}var Iy=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,a,u=null,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=u,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new gc(n,s,a,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof Pd?i.applyToHost(n):i instanceof mc&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,p=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case Dn.Emulated:o=new Pd(u,l,r,this.appId,f,s,a,p,m);break;case Dn.ShadowDom:return new xd(u,n,r,s,a,this.nonce,p,m,l);case Dn.ExperimentalIsolatedShadowDom:return new xd(u,n,r,s,a,this.nonce,p,m);default:o=new mc(u,l,r,f,s,a,p,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(Y(vy),Y(_y),Y(id),Y(dL),Y(tt),Y(qt),Y(sd),Y(ec,8))};static \u0275prov=U({token:t,factory:t.\u0275fac})}return t})(),gc=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(my[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Ob(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(Ob(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new j(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=my[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=my[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Gn.DashCase|Gn.Important)?e.style.setProperty(n,r,i&Gn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Gn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=mr().getGlobalEventTarget(this.doc,e),!e))throw new j(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function Ob(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var xd=class extends gc{hostEl;sharedStylesHost;shadowRoot;constructor(e,n,r,i,o,s,a,u,l){super(e,i,o,a,u),this.hostEl=n,this.sharedStylesHost=l,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let f=r.styles;f=Lb(r.id,f);for(let m of f){let y=document.createElement("style");s&&y.setAttribute("nonce",s),y.textContent=m,this.shadowRoot.appendChild(y)}let p=r.getExternalStyles?.();if(p)for(let m of p){let y=yy(m,i);s&&y.setAttribute("nonce",s),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},mc=class extends gc{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let f=r.styles;this.styles=l?Lb(l,f):f,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Gi.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Pd=class extends mc{contentAttr;hostAttr;constructor(e,n,r,i,o,s,a,u,l){let f=i+"-"+r.id;super(e,n,r,o,s,a,u,l,f),this.contentAttr=fL(f),this.hostAttr=hL(f)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var kd=class t extends cc{supportsDOMEvents=!0;static makeCurrent(){ay(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=pL();return n==null?null:gL(n)}resetBaseElement(){yc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return py(document.cookie,e)}},yc=null;function pL(){return yc=yc||document.head.querySelector("base"),yc?yc.getAttribute("href"):null}function gL(t){return new URL(t,document.baseURI).pathname}var mL=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac})}return t})(),Fb=["alt","control","meta","shift"],yL={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},vL={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},Vb=(()=>{class t extends pc{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),a=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>mr().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),Fb.forEach(l=>{let f=r.indexOf(l);f>-1&&(r.splice(f,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=yL[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Fb.forEach(s=>{if(s!==i){let a=vL[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(Y(tt))};static \u0275prov=U({token:t,factory:t.\u0275fac})}return t})();function wy(t,e,n){let r=M({rootComponent:t,platformRef:n?.platformRef},_L(e));return lb(r)}function _L(t){return{appProviders:[...DL,...t?.providers??[]],platformProviders:TL}}function EL(){kd.makeCurrent()}function IL(){return new fr}function wL(){return Rm(document),document}var TL=[{provide:Za,useValue:Mb},{provide:od,useValue:EL,multi:!0},{provide:tt,useFactory:wL}];var DL=[{provide:Ma,useValue:"root"},{provide:fr,useFactory:IL},{provide:Od,useClass:Md,multi:!0},{provide:Od,useClass:Vb,multi:!0},Iy,_y,vy,{provide:Wi,useExisting:Iy},{provide:hc,useClass:mL},[]];var jb=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(Y(tt))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var X="primary",Nc=Symbol("RouteTitle"),Sy=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function no(t){return new Sy(t)}function Kb(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Bd(t){return new Promise((e,n)=>{t.pipe(ur()).subscribe({next:r=>e(r),error:r=>n(r)})})}function bL(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Qn(t[n],e[n]))return!1;return!0}function Qn(t,e){let n=t?Ay(t):void 0,r=e?Ay(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!Qb(t[i],e[i]))return!1;return!0}function Ay(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Qb(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function Yb(t){return t.length>0?t[t.length-1]:null}function io(t){return nl(t)?t:Zo(t)?Ze(Promise.resolve(t)):de(t)}function Jb(t){return nl(t)?Bd(t):Promise.resolve(t)}var SL={exact:Xb,subset:eS},Zb={exact:AL,subset:RL,ignored:()=>!0};function Ub(t,e,n){return SL[n.paths](t.root,e.root,n.matrixParams)&&Zb[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function AL(t,e){return Qn(t,e)}function Xb(t,e,n){if(!eo(t.segments,e.segments)||!Vd(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!Xb(t.children[r],e.children[r],n))return!1;return!0}function RL(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Qb(t[n],e[n]))}function eS(t,e,n){return tS(t,e,e.segments,n)}function tS(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!eo(i,n)||e.hasChildren()||!Vd(i,n,r))}else if(t.segments.length===n.length){if(!eo(t.segments,n)||!Vd(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!eS(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!eo(t.segments,i)||!Vd(t.segments,i,r)||!t.children[X]?!1:tS(t.children[X],e,o,r)}}function Vd(t,e,n){return e.every((r,i)=>Zb[n](t[i].parameters,r.parameters))}var Rn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Te([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=no(this.queryParams),this._queryParamMap}toString(){return xL.serialize(this)}},Te=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return jd(this)}},Zr=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=no(this.parameters),this._parameterMap}toString(){return rS(this)}};function NL(t,e){return eo(t,e)&&t.every((n,r)=>Qn(n.parameters,e[r].parameters))}function eo(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function ML(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===X&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==X&&(n=n.concat(e(i,r)))}),n}var Mc=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:()=>new Xr,providedIn:"root"})}return t})(),Xr=class{parse(e){let n=new Ny(e);return new Rn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${vc(e.root,!0)}`,r=kL(e.queryParams),i=typeof e.fragment=="string"?`#${PL(e.fragment)}`:"";return`${n}${r}${i}`}},xL=new Xr;function jd(t){return t.segments.map(e=>rS(e)).join("/")}function vc(t,e){if(!t.hasChildren())return jd(t);if(e){let n=t.children[X]?vc(t.children[X],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==X&&r.push(`${i}:${vc(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=ML(t,(r,i)=>i===X?[vc(t.children[X],!1)]:[`${i}:${vc(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[X]!=null?`${jd(t)}/${n[0]}`:`${jd(t)}/(${n.join("//")})`}}function nS(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ld(t){return nS(t).replace(/%3B/gi,";")}function PL(t){return encodeURI(t)}function Ry(t){return nS(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ud(t){return decodeURIComponent(t)}function Bb(t){return Ud(t.replace(/\+/g,"%20"))}function rS(t){return`${Ry(t.path)}${OL(t.parameters)}`}function OL(t){return Object.entries(t).map(([e,n])=>`;${Ry(e)}=${Ry(n)}`).join("")}function kL(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Ld(n)}=${Ld(i)}`).join("&"):`${Ld(n)}=${Ld(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var LL=/^[^\/()?;#]+/;function Ty(t){let e=t.match(LL);return e?e[0]:""}var FL=/^[^\/()?;=#]+/;function VL(t){let e=t.match(FL);return e?e[0]:""}var jL=/^[^=?&#]+/;function UL(t){let e=t.match(jL);return e?e[0]:""}var BL=/^[^&#]+/;function $L(t){let e=t.match(BL);return e?e[0]:""}var Ny=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Te([],{}):new Te([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[X]=new Te(e,n)),r}parseSegment(){let e=Ty(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new j(4009,!1);return this.capture(e),new Zr(Ud(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=VL(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Ty(this.remaining);i&&(r=i,this.capture(r))}e[Ud(n)]=Ud(r)}parseQueryParam(e){let n=UL(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=$L(this.remaining);s&&(r=s,this.capture(r))}let i=Bb(n),o=Bb(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Ty(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new j(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=X);let s=this.parseChildren();n[o??X]=Object.keys(s).length===1&&s[X]?s[X]:new Te([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new j(4011,!1)}};function iS(t){return t.segments.length>0?new Te([],{[X]:t}):t}function oS(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=oS(i);if(r===X&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new Te(t.segments,e);return HL(n)}function HL(t){if(t.numberOfChildren===1&&t.children[X]){let e=t.children[X];return new Te(t.segments.concat(e.segments),e.children)}return t}function ei(t){return t instanceof Rn}function sS(t,e,n=null,r=null,i=new Xr){let o=aS(t);return cS(o,e,n,r,i)}function aS(t){let e;function n(o){let s={};for(let u of o.children){let l=n(u);s[u.outlet]=l}let a=new Te(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=iS(r);return e??i}function cS(t,e,n,r,i){let o=t;for(;o.parent;)o=o.parent;if(e.length===0)return Dy(o,o,o,n,r,i);let s=zL(e);if(s.toRoot())return Dy(o,o,new Te([],{}),n,r,i);let a=qL(s,o,t),u=a.processChildren?Ec(a.segmentGroup,a.index,s.commands):lS(a.segmentGroup,a.index,s.commands);return Dy(o,a.segmentGroup,u,n,r,i)}function $d(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Tc(t){return typeof t=="object"&&t!=null&&t.outlets}function $b(t,e,n){t||="\u0275";let r=new Rn;return r.queryParams={[t]:e},n.parse(n.serialize(r)).queryParams[t]}function Dy(t,e,n,r,i,o){let s={};for(let[l,f]of Object.entries(r??{}))s[l]=Array.isArray(f)?f.map(p=>$b(l,p,o)):$b(l,f,o);let a;t===e?a=n:a=uS(t,e,n);let u=iS(oS(a));return new Rn(u,s,i)}function uS(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=uS(o,e,n)}),new Te(t.segments,r)}var Hd=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&$d(r[0]))throw new j(4003,!1);let i=r.find(Tc);if(i&&i!==Yb(r))throw new j(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function zL(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Hd(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Hd(n,e,r)}var ss=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function qL(t,e,n){if(t.isAbsolute)return new ss(e,!0,0);if(!n)return new ss(e,!1,NaN);if(n.parent===null)return new ss(n,!0,0);let r=$d(t.commands[0])?0:1,i=n.segments.length-1+r;return GL(n,i,t.numberOfDoubleDots)}function GL(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new j(4005,!1);i=r.segments.length}return new ss(r,!1,i-o)}function WL(t){return Tc(t[0])?t[0].outlets:{[X]:t}}function lS(t,e,n){if(t??=new Te([],{}),t.segments.length===0&&t.hasChildren())return Ec(t,e,n);let r=KL(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new Te(t.segments.slice(0,r.pathIndex),{});return o.children[X]=new Te(t.segments.slice(r.pathIndex),t.children),Ec(o,0,i)}else return r.match&&i.length===0?new Te(t.segments,{}):r.match&&!t.hasChildren()?My(t,e,n):r.match?Ec(t,0,i):My(t,e,n)}function Ec(t,e,n){if(n.length===0)return new Te(t.segments,{});{let r=WL(n),i={};if(Object.keys(r).some(o=>o!==X)&&t.children[X]&&t.numberOfChildren===1&&t.children[X].segments.length===0){let o=Ec(t.children[X],e,n);return new Te(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=lS(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Te(t.segments,i)}}function KL(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(Tc(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!zb(u,l,s))return o;r+=2}else{if(!zb(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function My(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(Tc(o)){let u=QL(o.outlets);return new Te(r,u)}if(i===0&&$d(n[0])){let u=t.segments[e];r.push(new Zr(u.path,Hb(n[0]))),i++;continue}let s=Tc(o)?o.outlets[X]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&$d(a)?(r.push(new Zr(s,Hb(a))),i+=2):(r.push(new Zr(s,{})),i++)}return new Te(r,{})}function QL(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=My(new Te([],{}),0,r))}),e}function Hb(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function zb(t,e,n){return t==n.path&&Qn(e,n.parameters)}var Ic="imperative",ut=(function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t})(ut||{}),Zt=class{id;url;constructor(e,n){this.id=e,this.url=n}},ro=class extends Zt{type=ut.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Nn=class extends Zt{urlAfterRedirects;type=ut.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ot=(function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t})(Ot||{}),Dc=(function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t})(Dc||{}),Yn=class extends Zt{reason;code;type=ut.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},_r=class extends Zt{reason;code;type=ut.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},cs=class extends Zt{error;target;type=ut.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Cc=class extends Zt{urlAfterRedirects;state;type=ut.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},zd=class extends Zt{urlAfterRedirects;state;type=ut.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},qd=class extends Zt{urlAfterRedirects;state;shouldActivate;type=ut.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Gd=class extends Zt{urlAfterRedirects;state;type=ut.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wd=class extends Zt{urlAfterRedirects;state;type=ut.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Kd=class{route;type=ut.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Qd=class{route;type=ut.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Yd=class{snapshot;type=ut.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Jd=class{snapshot;type=ut.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Zd=class{snapshot;type=ut.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Xd=class{snapshot;type=ut.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var bc=class{},us=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function YL(t){return!(t instanceof bc)&&!(t instanceof us)}function JL(t,e){return t.providers&&!t._injector&&(t._injector=nc(t.providers,e,`Route: ${t.path}`)),t._injector??e}function An(t){return t.outlet||X}function ZL(t,e){let n=t.filter(r=>An(r)===e);return n.push(...t.filter(r=>An(r)!==e)),n}function fs(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var ef=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return fs(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new hs(this.rootInjector)}},hs=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new ef(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(Y(at))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),tf=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=xy(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=xy(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Py(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Py(e,this._root).map(n=>n.value)}};function xy(t,e){if(t===e.value)return e;for(let n of e.children){let r=xy(t,n);if(r)return r}return null}function Py(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Py(t,n);if(r.length)return r.unshift(e),r}return[]}var Jt=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function os(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Sc=class extends tf{snapshot;constructor(e,n){super(e),this.snapshot=n,jy(this,e)}toString(){return this.snapshot.toString()}};function dS(t){let e=XL(t),n=new pt([new Zr("",{})]),r=new pt({}),i=new pt({}),o=new pt({}),s=new pt(""),a=new Mn(n,r,o,s,i,X,t,e.root);return a.snapshot=e.root,new Sc(new Jt(a,[]),e)}function XL(t){let e={},n={},r={},o=new to([],e,r,"",n,X,t,null,{});return new Ac("",new Jt(o,[]))}var Mn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ke(l=>l[Nc]))??de(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ke(e=>no(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ke(e=>no(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function nf(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:M(M({},e.params),t.params),data:M(M({},e.data),t.data),resolve:M(M(M(M({},t.data),e.data),i?.data),t._resolvedData)}:r={params:M({},t.params),data:M({},t.data),resolve:M(M({},t.data),t._resolvedData??{})},i&&hS(i)&&(r.resolve[Nc]=i.title),r}var to=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Nc]}constructor(e,n,r,i,o,s,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=no(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=no(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Ac=class extends tf{url;constructor(e,n){super(n),this.url=e,jy(this,n)}toString(){return fS(this._root)}};function jy(t,e){e.value._routerState=t,e.children.forEach(n=>jy(t,n))}function fS(t){let e=t.children.length>0?` { ${t.children.map(fS).join(", ")} } `:"";return`${t.value}${e}`}function Cy(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Qn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Qn(e.params,n.params)||t.paramsSubject.next(n.params),bL(e.url,n.url)||t.urlSubject.next(n.url),Qn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Oy(t,e){let n=Qn(t.params,e.params)&&NL(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Oy(t.parent,e.parent))}function hS(t){return typeof t.title=="string"||t.title===null}var pS=new H(""),xc=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=X;activateEvents=new vt;deactivateEvents=new vt;attachEvents=new vt;detachEvents=new vt;routerOutletData=ub();parentContexts=O(hs);location=O(Zi);changeDetector=O(ac);inputBinder=O(af,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new j(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new j(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new j(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new j(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new ky(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Qr({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Yi]})}return t})(),ky=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===Mn?this.route:e===hs?this.childContexts:e===pS?this.outletData:this.parent.get(e,n)}},af=new H("");var Uy=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Se({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&ve(0,"router-outlet")},dependencies:[xc],encapsulation:2})}return t})();function By(t){let e=t.children&&t.children.map(By),n=e?oe(M({},t),{children:e}):M({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==X&&(n.component=Uy),n}function eF(t,e,n){let r=Rc(t,e._root,n?n._root:void 0);return new Sc(r,e)}function Rc(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=tF(t,e,n);return new Jt(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Rc(t,a)),s}}let r=nF(e.value),i=e.children.map(o=>Rc(t,o));return new Jt(r,i)}}function tF(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Rc(t,r,i);return Rc(t,r)})}function nF(t){return new Mn(new pt(t.url),new pt(t.params),new pt(t.queryParams),new pt(t.fragment),new pt(t.data),t.outlet,t.component,t)}var ls=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},gS="ngNavigationCancelingError";function rf(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=ei(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=mS(!1,Ot.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function mS(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[gS]=!0,n.cancellationCode=e,n}function rF(t){return yS(t)&&ei(t.url)}function yS(t){return!!t&&t[gS]}var iF=(t,e,n,r)=>ke(i=>(new Ly(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Ly=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Cy(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=os(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=os(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=os(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=os(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Xd(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Jd(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(Cy(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Cy(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},of=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},as=class{component;route;constructor(e,n){this.component=e,this.route=n}};function oF(t,e,n){let r=t._root,i=e?e._root:null;return _c(r,i,n,[r.value])}function sF(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function ps(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!ng(t)?t:e.get(t):r}function _c(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=os(e);return t.children.forEach(s=>{aF(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>wc(a,n.getContext(s),i)),i}function aF(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=cF(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new of(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?_c(t,e,a?a.children:null,r,i):_c(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new as(a.outlet.component,s))}else s&&wc(e,a,i),i.canActivateChecks.push(new of(r)),o.component?_c(t,null,a?a.children:null,r,i):_c(t,null,n,r,i);return i}function cF(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!eo(t.url,e.url);case"pathParamsOrQueryParamsChange":return!eo(t.url,e.url)||!Qn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Oy(t,e)||!Qn(t.queryParams,e.queryParams);case"paramsChange":default:return!Oy(t,e)}}function wc(t,e,n){let r=os(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?wc(s,e.children.getContext(o),n):wc(s,null,n):wc(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new as(e.outlet.component,i)):n.canDeactivateChecks.push(new as(null,i)):n.canDeactivateChecks.push(new as(null,i))}function Pc(t){return typeof t=="function"}function uF(t){return typeof t=="boolean"}function lF(t){return t&&Pc(t.canLoad)}function dF(t){return t&&Pc(t.canActivate)}function fF(t){return t&&Pc(t.canActivateChild)}function hF(t){return t&&Pc(t.canDeactivate)}function pF(t){return t&&Pc(t.canMatch)}function vS(t){return t instanceof Ri||t?.name==="EmptyError"}var Fd=Symbol("INITIAL_VALUE");function ds(){return Fn(t=>Lp(t.map(e=>e.pipe(cr(1),jp(Fd)))).pipe(ke(e=>{for(let n of e)if(n!==!0){if(n===Fd)return Fd;if(n===!1||gF(n))return n}return!0}),yn(e=>e!==Fd),cr(1)))}function gF(t){return ei(t)||t instanceof ls}function _S(t){return t.aborted?de(void 0).pipe(cr(1)):new _e(e=>{let n=()=>{e.next(),e.complete()};return t.addEventListener("abort",n),()=>t.removeEventListener("abort",n)})}function ES(t){return wa(_S(t))}function mF(t,e){return yt(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?de(oe(M({},n),{guardsResult:!0})):yF(s,r,i,t).pipe(yt(a=>a&&uF(a)?vF(r,o,t,e):de(a)),ke(a=>oe(M({},n),{guardsResult:a})))})}function yF(t,e,n,r){return Ze(t).pipe(yt(i=>TF(i.component,i.route,n,e,r)),ur(i=>i!==!0,!0))}function vF(t,e,n,r){return Ze(e).pipe(Ia(i=>xo(EF(i.route.parent,r),_F(i.route,r),wF(t,i.path,n),IF(t,i.route,n))),ur(i=>i!==!0,!0))}function _F(t,e){return t!==null&&e&&e(new Zd(t)),de(!0)}function EF(t,e){return t!==null&&e&&e(new Yd(t)),de(!0)}function IF(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return de(!0);let i=r.map(o=>Ea(()=>{let s=fs(e)??n,a=ps(o,s),u=dF(a)?a.canActivate(e,t):St(s,()=>a(e,t));return io(u).pipe(ur())}));return de(i).pipe(ds())}function wF(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>sF(s)).filter(s=>s!==null).map(s=>Ea(()=>{let a=s.guards.map(u=>{let l=fs(s.node)??n,f=ps(u,l),p=fF(f)?f.canActivateChild(r,t):St(l,()=>f(r,t));return io(p).pipe(ur())});return de(a).pipe(ds())}));return de(o).pipe(ds())}function TF(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return de(!0);let s=o.map(a=>{let u=fs(e)??i,l=ps(a,u),f=hF(l)?l.canDeactivate(t,e,n,r):St(u,()=>l(t,e,n,r));return io(f).pipe(ur())});return de(s).pipe(ds())}function DF(t,e,n,r,i){let o=e.canLoad;if(o===void 0||o.length===0)return de(!0);let s=o.map(a=>{let u=ps(a,t),l=lF(u)?u.canLoad(e,n):St(t,()=>u(e,n)),f=io(l);return i?f.pipe(ES(i)):f});return de(s).pipe(ds(),IS(r))}function IS(t){return xp(Ct(e=>{if(typeof e!="boolean")throw rf(t,e)}),ke(e=>e===!0))}function CF(t,e,n,r,i){let o=e.canMatch;if(!o||o.length===0)return de(!0);let s=o.map(a=>{let u=ps(a,t),l=pF(u)?u.canMatch(e,n):St(t,()=>u(e,n)),f=io(l);return i?f.pipe(ES(i)):f});return de(s).pipe(ds(),IS(r))}var Xi=class wS extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,wS.prototype)}},Fy=class TS extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,TS.prototype)}};function bF(t){throw new j(4e3,!1)}function SF(t){throw mS(!1,Ot.GuardRejected)}var AF=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}async lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[X])throw bF(`${e.redirectTo}`);i=i.children[X]}}async applyRedirectCommands(e,n,r,i,o){let s=await RF(n,i,o);if(s instanceof Rn)throw new Fy(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new Fy(a);return a}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new Rn(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Te(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new j(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}};function RF(t,e,n){if(typeof t=="string")return Promise.resolve(t);let r=t,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,params:l,data:f,title:p}=e;return Bd(io(St(n,()=>r({params:l,data:f,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,title:p}))))}var Vy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function NF(t,e,n,r,i,o){let s=DS(t,e,n);return s.matched?(r=JL(e,r),CF(r,e,n,i,o).pipe(ke(a=>a===!0?s:M({},Vy)))):de(s)}function DS(t,e,n){if(e.path==="**")return MF(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?M({},Vy):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Kb)(n,t,e);if(!i)return M({},Vy);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?M(M({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function MF(t){return{matched:!0,parameters:t.length>0?Yb(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function qb(t,e,n,r){return n.length>0&&OF(t,n,r)?{segmentGroup:new Te(e,PF(r,new Te(n,t.children))),slicedSegments:[]}:n.length===0&&kF(t,n,r)?{segmentGroup:new Te(t.segments,xF(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Te(t.segments,t.children),slicedSegments:n}}function xF(t,e,n,r){let i={};for(let o of n)if(cf(t,e,o)&&!r[An(o)]){let s=new Te([],{});i[An(o)]=s}return M(M({},r),i)}function PF(t,e){let n={};n[X]=e;for(let r of t)if(r.path===""&&An(r)!==X){let i=new Te([],{});n[An(r)]=i}return n}function OF(t,e,n){return n.some(r=>cf(t,e,r)&&An(r)!==X)}function kF(t,e,n){return n.some(r=>cf(t,e,r))}function cf(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function LF(t,e,n){return e.length===0&&!t.children[n]}var FF=class{};async function VF(t,e,n,r,i,o,s="emptyOnly",a){return new UF(t,e,n,r,i,s,o,a).recognize()}var jF=31,UF=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,a,u){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.abortSignal=u,this.applyRedirects=new AF(this.urlSerializer,this.urlTree)}noMatchError(e){return new j(4002,`'${e.segmentGroup}'`)}async recognize(){let e=qb(this.urlTree.root,[],[],this.config).segmentGroup,{children:n,rootSnapshot:r}=await this.match(e),i=new Jt(r,n),o=new Ac("",i),s=sS(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}async match(e){let n=new to([],Object.freeze({}),Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),X,this.rootComponentType,null,{});try{return{children:await this.processSegmentGroup(this.injector,this.config,e,X,n),rootSnapshot:n}}catch(r){if(r instanceof Fy)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Xi?this.noMatchError(r):r}}async processSegmentGroup(e,n,r,i,o){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,n,r,o);let s=await this.processSegment(e,n,r,r.segments,i,!0,o);return s instanceof Jt?[s]:[]}async processChildren(e,n,r,i){let o=[];for(let u of Object.keys(r.children))u==="primary"?o.unshift(u):o.push(u);let s=[];for(let u of o){let l=r.children[u],f=ZL(n,u),p=await this.processSegmentGroup(e,f,l,u,i);s.push(...p)}let a=CS(s);return BF(a),a}async processSegment(e,n,r,i,o,s,a){for(let u of n)try{return await this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,s,a)}catch(l){if(l instanceof Xi||vS(l))continue;throw l}if(LF(r,i,o))return new FF;throw new Xi(r)}async processSegmentAgainstRoute(e,n,r,i,o,s,a,u){if(An(r)!==s&&(s===X||!cf(i,o,r)))throw new Xi(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,i,r,o,s,u);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,u);throw new Xi(i)}async expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:f,positionalParamSegments:p,remainingSegments:m}=DS(n,i,o);if(!u)throw new Xi(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>jF&&(this.allowRedirects=!1));let y=new to(o,l,Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,Gb(i),An(i),i.component??i._loadedComponent??null,i,Wb(i)),S=nf(y,a,this.paramsInheritanceStrategy);if(y.params=Object.freeze(S.params),y.data=Object.freeze(S.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let A=await this.applyRedirects.applyRedirectCommands(f,i.redirectTo,p,y,e),R=await this.applyRedirects.lineralizeSegments(i,A);return this.processSegment(e,r,n,R.concat(m),s,!1,a)}async matchSegmentAgainstRoute(e,n,r,i,o,s){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await Bd(NF(n,r,i,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(n.children={}),!a?.matched)throw new Xi(n);e=r._injector??e;let{routes:u}=await this.getChildConfig(e,r,i),l=r._loadedInjector??e,{parameters:f,consumedSegments:p,remainingSegments:m}=a,y=new to(p,f,Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,Gb(r),An(r),r.component??r._loadedComponent??null,r,Wb(r)),S=nf(y,s,this.paramsInheritanceStrategy);y.params=Object.freeze(S.params),y.data=Object.freeze(S.data);let{segmentGroup:A,slicedSegments:R}=qb(n,p,m,u);if(R.length===0&&A.hasChildren()){let he=await this.processChildren(l,u,A,y);return new Jt(y,he)}if(u.length===0&&R.length===0)return new Jt(y,[]);let L=An(r)===o,re=await this.processSegment(l,u,A,R,L?X:o,!0,y);return new Jt(y,re instanceof Jt?[re]:[])}async getChildConfig(e,n,r){if(n.children)return{routes:n.children,injector:e};if(n.loadChildren){if(n._loadedRoutes!==void 0)return{routes:n._loadedRoutes,injector:n._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await Bd(DF(e,n,r,this.urlSerializer,this.abortSignal))){let o=await this.configLoader.loadChildren(e,n);return n._loadedRoutes=o.routes,n._loadedInjector=o.injector,o}throw SF(n)}return{routes:[],injector:e}}};function BF(t){t.sort((e,n)=>e.value.outlet===X?-1:n.value.outlet===X?1:e.value.outlet.localeCompare(n.value.outlet))}function $F(t){let e=t.value.routeConfig;return e&&e.path===""}function CS(t){let e=[],n=new Set;for(let r of t){if(!$F(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=CS(r.children);e.push(new Jt(r.value,i))}return e.filter(r=>!n.has(r))}function Gb(t){return t.data||{}}function Wb(t){return t.resolve||{}}var HF=new H("",{factory:()=>VF});function zF(t,e,n,r,i,o,s){let a=t.get(HF);return yt(u=>de(u).pipe(Fn(l=>a(t,e,n,r,l.extractedUrl,i,o,s)),ke(({state:l,tree:f})=>oe(M({},u),{targetSnapshot:l,urlAfterRedirects:f}))))}function qF(t,e){return yt(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return de(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of bS(u))s.add(l);let a=0;return Ze(s).pipe(Ia(u=>o.has(u)?GF(u,r,t,e):(u.data=nf(u,u.parent,t).resolve,de(void 0))),Ct(()=>a++),rl(1),yt(u=>a===s.size?de(n):Vt))})}function bS(t){let e=t.children.map(n=>bS(n)).flat();return[t,...e]}function GF(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!hS(i)&&(o[Nc]=i.title),Ea(()=>(t.data=nf(t,t.parent,n).resolve,WF(o,t,e,r).pipe(ke(s=>(t._resolvedData=s,t.data=M(M({},t.data),s),null)))))}function WF(t,e,n,r){let i=Ay(t);if(i.length===0)return de({});let o={};return Ze(i).pipe(yt(s=>KF(t[s],e,n,r).pipe(ur(),Ct(a=>{if(a instanceof ls)throw rf(new Xr,a);o[s]=a}))),rl(1),ke(()=>o),Po(s=>vS(s)?Vt:kp(s)))}function KF(t,e,n,r){let i=fs(e)??r,o=ps(t,i),s=o.resolve?o.resolve(e,n):St(i,()=>o(e,n));return io(s)}function by(t){return Fn(e=>{let n=t(e);return n?Ze(n).pipe(ke(()=>e)):de(e)})}var $y=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===X);return r}getResolvedTitleForRoute(n){return n.data[Nc]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:()=>O(SS),providedIn:"root"})}return t})(),SS=(()=>{class t extends $y{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(Y(jb))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),gs=new H("",{factory:()=>({})}),Oc=new H(""),AS=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=O(iy);async loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await Jb(St(n,()=>r.loadComponent())),s=await MS(NS(o));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s,s}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await RS(r,this.compiler,n,this.onLoadEndListener);return r._loadedRoutes=o.routes,r._loadedInjector=o.injector,o}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();async function RS(t,e,n,r){let i=await Jb(St(n,()=>t.loadChildren())),o=await MS(NS(i)),s;o instanceof gd||Array.isArray(o)?s=o:s=await e.compileModuleAsync(o),r&&r(t);let a,u,l=!1;return Array.isArray(s)?(u=s,l=!0):(a=s.create(n).injector,u=a.get(Oc,[],{optional:!0,self:!0}).flat()),{routes:u.map(By),injector:a}}function QF(t){return t&&typeof t=="object"&&"default"in t}function NS(t){return QF(t)?t.default:t}async function MS(t){return t}var uf=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:()=>O(YF),providedIn:"root"})}return t})(),YF=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),xS=new H("");var JF=()=>{},PS=new H(""),OS=(()=>{class t{currentNavigation=qe(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=qe(null);events=new ot;transitionAbortWithErrorSubject=new ot;configLoader=O(AS);environmentInjector=O(at);destroyRef=O(zi);urlSerializer=O(Mc);rootContexts=O(hs);location=O(is);inputBindingEnabled=O(af,{optional:!0})!==null;titleStrategy=O($y);options=O(gs,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=O(uf);createViewTransition=O(xS,{optional:!0});navigationErrorHandler=O(PS,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>de(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new Kd(i)),r=i=>this.events.next(new Qd(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;In(()=>{this.transitions?.next(oe(M({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(n){return this.transitions=new pt(null),this.transitions.pipe(yn(r=>r!==null),Fn(r=>{let i=!1,o=new AbortController;return de(r).pipe(Fn(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Ot.SupersededByNewNavigation),Vt;this.currentTransition=r;let a=this.lastSuccessfulNavigation();this.currentNavigation.set({id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:a?oe(M({},a),{previousNavigation:null}):null,abort:()=>o.abort()});let u=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=s.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!u&&l!=="reload")return this.events.next(new _r(s.id,this.urlSerializer.serialize(s.rawUrl),"",Dc.IgnoredSameUrlNavigation)),s.resolve(!1),Vt;if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return de(s).pipe(Fn(f=>(this.events.next(new ro(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),f.id!==this.navigationId?Vt:Promise.resolve(f))),zF(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy,o.signal),Ct(f=>{r.targetSnapshot=f.targetSnapshot,r.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation.update(m=>(m.finalUrl=f.urlAfterRedirects,m));let p=new Cc(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(p)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:f,extractedUrl:p,source:m,restoredState:y,extras:S}=s,A=new ro(f,this.urlSerializer.serialize(p),m,y);this.events.next(A);let R=dS(this.rootComponentType).snapshot;return this.currentTransition=r=oe(M({},s),{targetSnapshot:R,urlAfterRedirects:p,extras:oe(M({},S),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(L=>(L.finalUrl=p,L)),de(r)}else return this.events.next(new _r(s.id,this.urlSerializer.serialize(s.extractedUrl),"",Dc.IgnoredByUrlHandlingStrategy)),s.resolve(!1),Vt}),Ct(s=>{let a=new zd(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),ke(s=>(this.currentTransition=r=oe(M({},s),{guards:oF(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),mF(this.environmentInjector,s=>this.events.next(s)),Ct(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw rf(this.urlSerializer,s.guardsResult);let a=new qd(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),yn(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",Ot.GuardRejected),!1)),by(s=>{if(s.guards.canActivateChecks.length!==0)return de(s).pipe(Ct(a=>{let u=new Gd(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}),Fn(a=>{let u=!1;return de(a).pipe(qF(this.paramsInheritanceStrategy,this.environmentInjector),Ct({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(a,"",Ot.NoDataFromResolver)}}))}),Ct(a=>{let u=new Wd(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}))}),by(s=>{let a=l=>{let f=[];if(l.routeConfig?._loadedComponent)l.component=l.routeConfig?._loadedComponent;else if(l.routeConfig?.loadComponent){let p=fs(l)??this.environmentInjector;f.push(this.configLoader.loadComponent(p,l.routeConfig).then(m=>{l.component=m}))}for(let p of l.children)f.push(...a(p));return f},u=a(s.targetSnapshot.root);return u.length===0?de(s):Ze(Promise.all(u).then(()=>s))}),by(()=>this.afterPreactivation()),Fn(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,u=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return u?Ze(u).pipe(ke(()=>r)):de(r)}),ke(s=>{let a=eF(n.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=oe(M({},s),{targetRouterState:a}),this.currentNavigation.update(u=>(u.targetRouterState=a,u)),r}),Ct(()=>{this.events.next(new bc)}),iF(this.rootContexts,n.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),cr(1),wa(_S(o.signal).pipe(yn(()=>!i&&!r.targetRouterState),Ct(()=>{this.cancelNavigationTransition(r,o.signal.reason+"",Ot.Aborted)}))),Ct({next:s=>{i=!0,this.currentNavigation.update(a=>(a.abort=JF,a)),this.lastSuccessfulNavigation.set(In(this.currentNavigation)),this.events.next(new Nn(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),wa(this.transitionAbortWithErrorSubject.pipe(Ct(s=>{throw s}))),Vp(()=>{o.abort(),i||this.cancelNavigationTransition(r,"",Ot.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Po(s=>{if(this.destroyed)return r.resolve(!1),Vt;if(i=!0,yS(s))this.events.next(new Yn(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),rF(s)?this.events.next(new us(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new cs(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let u=St(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(u instanceof ls){let{message:l,cancellationCode:f}=rf(this.urlSerializer,u);this.events.next(new Yn(r.id,this.urlSerializer.serialize(r.extractedUrl),l,f)),this.events.next(new us(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(u){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(u)}}return Vt}))}))}cancelNavigationTransition(n,r,i){let o=new Yn(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=In(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ZF(t){return t!==Ic}var kS=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:()=>O(XF),providedIn:"root"})}return t})(),sf=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},XF=(()=>{class t extends sf{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Ya(t)))(i||t)}})();static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Hy=(()=>{class t{urlSerializer=O(Mc);options=O(gs,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=O(is);urlHandlingStrategy=O(uf);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Rn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof Rn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=dS(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:()=>O(LS),providedIn:"root"})}return t})(),LS=(()=>{class t extends Hy{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof ro?this.updateStateMemento():n instanceof _r?this.commitTransition(r):n instanceof Cc?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof bc?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Yn&&n.code!==Ot.SupersededByNewNavigation&&n.code!==Ot.Redirect?this.restoreHistory(r):n instanceof cs?this.restoreHistory(r,!0):n instanceof Nn&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,u=M(M({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",u)}else{let a=M(M({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Ya(t)))(i||t)}})();static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function zy(t,e){t.events.pipe(yn(n=>n instanceof Nn||n instanceof Yn||n instanceof cs||n instanceof _r),ke(n=>n instanceof Nn||n instanceof _r?0:(n instanceof Yn?n.code===Ot.Redirect||n.code===Ot.SupersededByNewNavigation:!1)?2:1),yn(n=>n!==2),cr(1)).subscribe(()=>{e()})}var eV={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},tV={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ms=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=O(Ym);stateManager=O(Hy);options=O(gs,{optional:!0})||{};pendingTasks=O(Wr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=O(OS);urlSerializer=O(Mc);location=O(is);urlHandlingStrategy=O(uf);injector=O(at);_events=new ot;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=O(kS);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=O(Oc,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!O(af,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new ht;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=In(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Yn&&r.code!==Ot.Redirect&&r.code!==Ot.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Nn)this.navigated=!0;else if(r instanceof us){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=M({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||ZF(i.source)},s);this.scheduleNavigation(a,Ic,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}YL(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ic,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=M({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o).catch(u=>{this.disposed||this.injector.get(cn)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return In(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(By),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,f=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":f=M(M({},this.currentUrlTree.queryParams),o);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}f!==null&&(f=this.removeEmptyProps(f));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=aS(m)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return cS(p,n,f,l??null,this.urlSerializer)}navigateByUrl(n,r={skipLocationChange:!1}){let i=ei(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Ic,null,r)}navigate(n,r={skipLocationChange:!1}){return nV(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.console.warn(Fo(4018,!1)),this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=M({},eV):r===!1?i=M({},tV):i=r,ei(n))return Ub(this.currentUrlTree,n,i);let o=this.parseUrl(n);return Ub(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,u=m});let f=this.pendingTasks.add();return zy(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function nV(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new j(4008,!1)}var ys=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=qe(null);get href(){return In(this.reactiveHref)}set href(n){this.reactiveHref.set(n)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new ot;applicationErrorHandler=O(cn);options=O(gs,{optional:!0});constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(O(new Id("href"),{optional:!0}));let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area"||!!(typeof customElements=="object"&&customElements.get(u)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let n=this.preserveFragment,r=i=>i==="merge"||i==="preserve";n||=r(this.queryParamsHandling),n||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),n&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Nn&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(ei(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(n!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.reactiveHref.set(n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n))??"":null)}applyAttributeValue(n,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return this.routerLinkInput===null?null:ei(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||t)(me(ms),me(Mn),Ja("tabindex"),me(Jo),me(Kt),me(rs))};static \u0275dir=Qr({type:t,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&dn("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&yd("href",i.reactiveHref(),xm)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Td],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Td],replaceUrl:[2,"replaceUrl","replaceUrl",Td],routerLink:"routerLink"},features:[Yi]})}return t})(),qy=(()=>{class t{router;element;renderer;cdr;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new vt;link=O(ys,{optional:!0});constructor(n,r,i,o){this.router=n,this.element=r,this.renderer=i,this.cdr=o,this.routerEventsSubscription=n.events.subscribe(s=>{s instanceof Nn&&this.update()})}ngAfterContentInit(){de(this.links.changes,de(null)).pipe(Mo()).subscribe(n=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let n=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Ze(n).pipe(Mo()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(n){let r=Array.isArray(n)?n:n.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(n){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let n=this.hasActiveLinks();this.classes.forEach(r=>{n?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),n&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==n&&(this._isActive=n,this.cdr.markForCheck(),this.isActiveChange.emit(n))})}isLinkActive(n){let r=iV(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?n.isActive(o,r):!1}}hasActiveLinks(){let n=this.isLinkActive(this.router);return this.link&&n(this.link)||this.links.some(n)}static \u0275fac=function(r){return new(r||t)(me(ms),me(Kt),me(Jo),me(ac))};static \u0275dir=Qr({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&ty(o,ys,5),r&2){let s;es(s=ts())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[Yi]})}return t})();function iV(t){return!!t.paths}var oV=new H("");function Gy(t,...e){return Li([{provide:Oc,multi:!0,useValue:t},[],{provide:Mn,useFactory:sV},{provide:md,multi:!0,useFactory:aV},e.map(n=>n.\u0275providers)])}function sV(){return O(ms).routerState.root}function aV(){let t=O(Un);return e=>{let n=t.get(Xo);if(e!==n.components[0])return;let r=t.get(ms),i=t.get(cV);t.get(uV)===1&&r.initialNavigation(),t.get(lV,null,{optional:!0})?.setUpPreloading(),t.get(oV,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var cV=new H("",{factory:()=>new ot}),uV=new H("",{factory:()=>1});var lV=new H("");function fV(t,e){if(t&1&&ve(0,"img",2),t&2){let n=K(2);ue("src",n.data.image,Mt)}}function hV(t,e){if(t&1&&(B(0,"h1"),Z(1),W()),t&2){let n=K(2);P(),Fe(n.data.title)}}function pV(t,e){if(t&1&&(B(0,"button",4),Z(1),W()),t&2){let n=K(2);ns("disabled",!n.data.interactive),ue("disabled",!n.data.interactive),P(),Fe(n.data.button)}}function gV(t,e){if(t&1&&(B(0,"div",1),se(1,fV,1,1,"img",2),B(2,"div",3),se(3,hV,2,1,"h1"),se(4,pV,2,4,"button",4),W()()),t&2){let n=K();ue("ngClass",n.data.bannerType),P(),ae(n.data.image!=""?1:-1),P(2),ae(n.data.title!=""?3:-1),P(),ae(n.data.button!=""?4:-1)}}var Jn=class t{data;static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Se({type:t,selectors:[["app-banner"]],inputs:{data:"data"},decls:2,vars:1,consts:[[1,"banner-shell"],[1,"banner",3,"ngClass"],[3,"src","alt"],[1,"book-container"],["id","book",3,"disabled"]],template:function(n,r){n&1&&(B(0,"div",0),se(1,gV,5,4,"div",1),W()),n&2&&(P(),ae(r.data?1:-1))},dependencies:[fy],styles:[".banner[_ngcontent-%COMP%]{margin:0 0 1.5rem;width:100%;height:500px;position:relative;display:flex;justify-content:center}.subpage[_ngcontent-%COMP%]{height:200px}h1[_ngcontent-%COMP%]{font-family:Malvie,sans-serif;font-size:6rem;color:#fffaf0}img[_ngcontent-%COMP%]{width:100%;object-fit:cover}.book-container[_ngcontent-%COMP%]{width:100%;position:absolute;top:0;bottom:0;display:flex;flex-direction:column;justify-content:center;align-items:center;background:radial-gradient(black 0%,transparent 30%)}button[_ngcontent-%COMP%]{margin:0;padding:0}#book[_ngcontent-%COMP%]{margin:0;padding:.2rem 3rem 0;width:90%;max-width:450px;display:flex;justify-content:center;align-items:center;background:transparent;color:#fffaf0;font-family:Bebas Neue,sans-serif;font-size:clamp(1rem,3vw,2rem);border:5px solid floralwhite;box-sizing:border-box;transition:all .2s ease-in-out}#book.disabled[_ngcontent-%COMP%]{cursor:default;background:#fffaf0;color:var(--primary);font-size:clamp(3rem,4vw,4rem)}#book[_ngcontent-%COMP%]:not(.disabled):hover{transform:scale(1.1);background:#fffaf0;color:var(--primary);cursor:pointer}"]})};function mV(t,e){if(t&1&&(Ie(0,"h2",3),Z(1),we()),t&2){let n=K(2);P(),Fe(n.data==null?null:n.data.title)}}function yV(t,e){if(t&1&&(Ie(0,"p"),Z(1),we()),t&2){let n=K(2);P(),Fe(n.data==null?null:n.data.content)}}function vV(t,e){if(t&1&&Yr(0,"img",4),t&2){let n=K(2);Wn("src",n.data==null?null:n.data.image,Mt)}}function _V(t,e){if(t&1&&(Ie(0,"div",1),se(1,mV,2,1,"h2",3),se(2,yV,2,1,"p"),se(3,vV,1,1,"img",4),we()),t&2){let n=K();P(),ae((n.data==null?null:n.data.title)!=""?1:-1),P(),ae((n.data==null?null:n.data.content)!=""?2:-1),P(),ae((n.data==null?null:n.data.image)!=""?3:-1)}}function EV(t,e){if(t&1&&(Ie(0,"p"),Z(1),we()),t&2){let n=K(2);P(),Fe(n.data==null?null:n.data.content)}}function IV(t,e){if(t&1&&(Ie(0,"div",1),se(1,EV,2,1,"p"),we()),t&2){let n=K();P(),ae((n.data==null?null:n.data.content)!=""?1:-1)}}function wV(t,e){if(t&1&&(Ie(0,"p",3),Z(1),we()),t&2){let n=K(2);P(),Fe(n.data==null?null:n.data.title)}}function TV(t,e){if(t&1&&(Ie(0,"p"),Z(1),we()),t&2){let n=K(2);P(),Fe(n.data==null?null:n.data.content)}}function DV(t,e){if(t&1&&(Ie(0,"div",2),se(1,wV,2,1,"p",3),se(2,TV,2,1,"p"),we()),t&2){let n=K();P(),ae((n.data==null?null:n.data.title)!=""?1:-1),P(),ae((n.data==null?null:n.data.content)!=""?2:-1)}}var kc=(r=>(r[r.Primary=0]="Primary",r[r.Secondary=1]="Secondary",r[r.FAQ=2]="FAQ",r))(kc||{}),vs=class t{data;width;InfoType=kc;static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Se({type:t,selectors:[["app-info"]],inputs:{data:"data",width:"width"},decls:4,vars:3,consts:[[1,"info-shell"],[1,"info-container"],[1,"info-container","faq"],[1,"title"],["alt","image",3,"src"]],template:function(n,r){n&1&&(Ie(0,"div",0),se(1,_V,4,3,"div",1),se(2,IV,2,1,"div",1),se(3,DV,3,2,"div",2),we()),n&2&&(P(),ae((r.data==null?null:r.data.type)===r.InfoType.Primary?1:-1),P(),ae((r.data==null?null:r.data.type)===r.InfoType.Secondary?2:-1),P(),ae((r.data==null?null:r.data.type)===r.InfoType.FAQ?3:-1))},styles:[".info-shell[_ngcontent-%COMP%]{display:flex;justify-content:center}.info-container[_ngcontent-%COMP%]{padding:0 1rem 1.25rem;max-width:var(--maxWidth);display:flex;flex-direction:column;align-items:center;gap:1rem}.faq[_ngcontent-%COMP%]{flex-direction:row;align-items:flex-start}.faq[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{flex:1;max-width:50%}.faq[_ngcontent-%COMP%]   p.title[_ngcontent-%COMP%]{text-align:right}.faq[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:not(.title){text-align:left}h2[_ngcontent-%COMP%]{margin:0;font-family:Malvie,sans-serif;font-size:2rem;text-align:center}p[_ngcontent-%COMP%]{margin:0;padding:0;font-size:1.25em;text-align:center}.title[_ngcontent-%COMP%]{color:var(--highlight)}img[_ngcontent-%COMP%]{width:100%;max-width:700px;max-height:450px;display:block;object-fit:cover;object-position:top}"]})};var CV=t=>({title:"FAQ",type:t,content:"",image:""});function bV(t,e){if(t&1&&ve(0,"app-info",1),t&2){let n=e.$implicit;ue("data",n)}}var lf=class t{bannerData={bannerType:"primary",title:"Taniti",image:"banners/taniti.jpeg",button:"Start Your Adventure",interactive:!0};aboutData={title:"About the Island",type:0,content:"Taniti is a small, tropical island in the Pacific. While the island has an area of less than 500 square miles, the terrain is varied and includes both sandy and rocky beaches, a small but safe harbor, lush tropical rainforests, and a mountainous interior that includes a small, active volcano. Taniti has an indigenous population of about 20,000. Until a recent increase in tourism, most of the Tanitian economy was dominated by fishing or agriculture",image:""};questionsData=[{title:"What power outlets are on the Island?",type:2,content:"Power outlets are 120 volts (the same as in the United States).",image:""},{title:"What is the law on alcohol sales?",type:2,content:"Alcohol is not allowed to be served or sold between the hours of midnight and 9:00 a.m.",image:""},{title:"What is the drinking age on Taniti?",type:2,content:"The drinking age on Taniti is 18 and the drinking age is not strictly enforced.",image:""},{title:"What language is spoken on Taniti?",type:2,content:"Many younger Tanitians speak fluent English. Very little English is spoken in rural areas, especially by the older residents.",image:""},{title:"Does the island have medical facilities?",type:2,content:"There is one hospital and several clinics. The hospital has many multilingual employees.",image:""},{title:"How bad is the crime on Taniti?",type:2,content:"Violent crime is very rare on Taniti, but as tourism increases, there are more reports of pickpocketing and other petty crimes.",image:""},{title:"What holidays does Taniti observe?",type:2,content:"Taniti enjoys a large number of national holidays, and many tourist attractions and restaurants will be closed on holidays, so visitors should plan accordingly.",image:""},{title:"What currency is accepted on Taniti?",type:2,content:"Taniti uses the U.S. dollar as its currency, but many businesses will also accept euros and yen. Several banks facilitate currency exchange, and many businesses accept major credit cards.",image:""}];InfoType=kc;static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Se({type:t,selectors:[["app-home"]],decls:6,vars:5,consts:[[3,"data"],[1,"faq",3,"data"]],template:function(n,r){n&1&&(B(0,"div"),ve(1,"app-banner",0)(2,"app-info",0)(3,"app-info",0),xt(4,bV,1,1,"app-info",1,ln),W()),n&2&&(P(),ue("data",r.bannerData),P(),ue("data",r.aboutData),P(),ue("data",ic(3,CV,r.InfoType.Primary)),P(),Pt(r.questionsData))},dependencies:[Jn,vs],encapsulation:2})};var FS=()=>{};var US=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},SV=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},BS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,f=o>>2,p=(o&3)<<4|a>>4,m=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(m=64)),r.push(n[f],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(US(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):SV(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new Qy;let m=o<<2|a>>4;if(r.push(m),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let S=l<<6&192|p;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Qy=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},AV=function(t){let e=US(t);return BS.encodeByteArray(e,!0)},Fc=function(t){return AV(t).replace(/\./g,"")},ff=function(t){try{return BS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function $S(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var RV=()=>$S().__FIREBASE_DEFAULTS__,NV=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},MV=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&ff(t[1]);return e&&JSON.parse(e)},hf=()=>{try{return FS()||RV()||NV()||MV()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Jy=t=>hf()?.emulatorHosts?.[t],HS=t=>{let e=Jy(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Zy=()=>hf()?.config,Xy=t=>hf()?.[`_${t}`];var df=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function ti(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function pf(t){return(await fetch(t,{credentials:"include"})).ok}function zS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=M({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Fc(JSON.stringify(n)),Fc(JSON.stringify(s)),""].join(".")}var Lc={};function xV(){let t={prod:[],emulator:[]};for(let e of Object.keys(Lc))Lc[e]?t.emulator.push(e):t.prod.push(e);return t}function PV(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var VS=!1;function gf(t,e){if(typeof window>"u"||typeof document>"u"||!ti(window.location.host)||Lc[t]===e||Lc[t]||VS)return;Lc[t]=e;function n(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=xV().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{VS=!0,s()},m}function f(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=PV(r),y=n("text"),S=document.getElementById(y)||document.createElement("span"),A=n("learnmore"),R=document.getElementById(A)||document.createElement("a"),L=n("preprendIcon"),re=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let he=m.element;a(he),f(R,A);let wt=l();u(re,L),he.append(re,S,R,wt),document.body.appendChild(he)}o?(S.innerText="Preview backend disconnected.",re.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(re.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function lt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(lt())}function OV(){let t=hf()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function GS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function WS(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function KS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function QS(){let t=lt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function YS(){return!OV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ev(){try{return typeof indexedDB=="object"}catch{return!1}}function JS(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}var kV="FirebaseError",Xt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=kV,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Er.prototype.create)}},Er=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?LV(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Xt(i,a,r)}};function LV(t,e){return t.replace(FV,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var FV=/\{\$([^}]+)}/g;function ZS(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Zn(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(jS(o)&&jS(s)){if(!Zn(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function jS(t){return t!==null&&typeof t=="object"}function Vc(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function XS(t,e){let n=new Yy(t,e);return n.subscribe.bind(n)}var Yy=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");VV(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Ky),i.error===void 0&&(i.error=Ky),i.complete===void 0&&(i.complete=Ky);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function VV(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ky(){}var FZ=14400*1e3;function en(t){return t&&t._delegate?t._delegate:t}var hn=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var oo="[DEFAULT]";var tv=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new df;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){let n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(UV(e))try{this.getOrInitializeService({instanceIdentifier:oo})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=oo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=oo){return this.instances.has(e)}getOptions(e=oo){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){let r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:jV(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=oo){return this.component?this.component.multipleInstances?e:oo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function jV(t){return t===oo?void 0:t}function UV(t){return t.instantiationMode==="EAGER"}var mf=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new tv(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var BV=[],fe=(function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t})(fe||{}),$V={debug:fe.DEBUG,verbose:fe.VERBOSE,info:fe.INFO,warn:fe.WARN,error:fe.ERROR,silent:fe.SILENT},HV=fe.INFO,zV={[fe.DEBUG]:"log",[fe.VERBOSE]:"log",[fe.INFO]:"info",[fe.WARN]:"warn",[fe.ERROR]:"error"},qV=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=zV[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},ni=class{constructor(e){this.name=e,this._logLevel=HV,this._logHandler=qV,this._userLogHandler=null,BV.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$V[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,fe.DEBUG,...e),this._logHandler(this,fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,fe.VERBOSE,...e),this._logHandler(this,fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,fe.INFO,...e),this._logHandler(this,fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,fe.WARN,...e),this._logHandler(this,fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,fe.ERROR,...e),this._logHandler(this,fe.ERROR,...e)}};var GV=(t,e)=>e.some(n=>t instanceof n),e0,t0;function WV(){return e0||(e0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function KV(){return t0||(t0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var n0=new WeakMap,rv=new WeakMap,r0=new WeakMap,nv=new WeakMap,ov=new WeakMap;function QV(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Xn(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&n0.set(n,t)}).catch(()=>{}),ov.set(e,t),e}function YV(t){if(rv.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});rv.set(t,e)}var iv={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return rv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||r0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Xn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function i0(t){iv=t(iv)}function JV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(yf(this),e,...n);return r0.set(r,e.sort?e.sort():[e]),Xn(r)}:KV().includes(t)?function(...e){return t.apply(yf(this),e),Xn(n0.get(this))}:function(...e){return Xn(t.apply(yf(this),e))}}function ZV(t){return typeof t=="function"?JV(t):(t instanceof IDBTransaction&&YV(t),GV(t,WV())?new Proxy(t,iv):t)}function Xn(t){if(t instanceof IDBRequest)return QV(t);if(nv.has(t))return nv.get(t);let e=ZV(t);return e!==t&&(nv.set(t,e),ov.set(e,t)),e}var yf=t=>ov.get(t);function s0(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=Xn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Xn(s.result),u.oldVersion,u.newVersion,Xn(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var XV=["get","getKey","getAll","getAllKeys","count"],e2=["put","add","delete","clear"],sv=new Map;function o0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(sv.get(e))return sv.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=e2.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||XV.includes(n)))return;let o=async function(s,...a){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return sv.set(e,o),o}i0(t=>oe(M({},t),{get:(e,n,r)=>o0(e,n)||t.get(e,n,r),has:(e,n)=>!!o0(e,n)||t.has(e,n)}));var cv=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(t2(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function t2(t){return t.getComponent()?.type==="VERSION"}var uv="@firebase/app",a0="0.14.6";var Ir=new ni("@firebase/app"),n2="@firebase/app-compat",r2="@firebase/analytics-compat",i2="@firebase/analytics",o2="@firebase/app-check-compat",s2="@firebase/app-check",a2="@firebase/auth",c2="@firebase/auth-compat",u2="@firebase/database",l2="@firebase/data-connect",d2="@firebase/database-compat",f2="@firebase/functions",h2="@firebase/functions-compat",p2="@firebase/installations",g2="@firebase/installations-compat",m2="@firebase/messaging",y2="@firebase/messaging-compat",v2="@firebase/performance",_2="@firebase/performance-compat",E2="@firebase/remote-config",I2="@firebase/remote-config-compat",w2="@firebase/storage",T2="@firebase/storage-compat",D2="@firebase/firestore",C2="@firebase/ai",b2="@firebase/firestore-compat",S2="firebase",A2="12.6.0";var lv="[DEFAULT]",R2={[uv]:"fire-core",[n2]:"fire-core-compat",[i2]:"fire-analytics",[r2]:"fire-analytics-compat",[s2]:"fire-app-check",[o2]:"fire-app-check-compat",[a2]:"fire-auth",[c2]:"fire-auth-compat",[u2]:"fire-rtdb",[l2]:"fire-data-connect",[d2]:"fire-rtdb-compat",[f2]:"fire-fn",[h2]:"fire-fn-compat",[p2]:"fire-iid",[g2]:"fire-iid-compat",[m2]:"fire-fcm",[y2]:"fire-fcm-compat",[v2]:"fire-perf",[_2]:"fire-perf-compat",[E2]:"fire-rc",[I2]:"fire-rc-compat",[w2]:"fire-gcs",[T2]:"fire-gcs-compat",[D2]:"fire-fst",[b2]:"fire-fst-compat",[C2]:"fire-vertex","fire-js":"fire-js",[S2]:"fire-js-all"};var vf=new Map,N2=new Map,dv=new Map;function c0(t,e){try{t.container.addComponent(e)}catch(n){Ir.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ii(t){let e=t.name;if(dv.has(e))return Ir.debug(`There were multiple attempts to register component ${e}.`),!1;dv.set(e,t);for(let n of vf.values())c0(n,t);for(let n of N2.values())c0(n,t);return!0}function Uc(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function tn(t){return t==null?!1:t.settings!==void 0}var M2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ri=new Er("app","Firebase",M2);var fv=class{constructor(e,n,r){this._isDeleted=!1,this._options=M({},e),this._config=M({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new hn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ri.create("app-deleted",{appName:this._name})}};var oi=A2;function gv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=M({name:lv,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw ri.create("bad-app-name",{appName:String(i)});if(n||(n=Zy()),!n)throw ri.create("no-options");let o=vf.get(i);if(o){if(Zn(n,o.options)&&Zn(r,o.config))return o;throw ri.create("duplicate-app",{appName:i})}let s=new mf(i);for(let u of dv.values())s.addComponent(u);let a=new fv(n,r,s);return vf.set(i,a),a}function _f(t=lv){let e=vf.get(t);if(!e&&t===lv&&Zy())return gv();if(!e)throw ri.create("no-app",{appName:t});return e}function xn(t,e,n){let r=R2[t]??t;n&&(r+=`-${n}`);let i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ir.warn(s.join(" "));return}ii(new hn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var x2="firebase-heartbeat-database",P2=1,jc="firebase-heartbeat-store",av=null;function f0(){return av||(av=s0(x2,P2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(jc)}catch(n){console.warn(n)}}}}).catch(t=>{throw ri.create("idb-open",{originalErrorMessage:t.message})})),av}async function O2(t){try{let n=(await f0()).transaction(jc),r=await n.objectStore(jc).get(h0(t));return await n.done,r}catch(e){if(e instanceof Xt)Ir.warn(e.message);else{let n=ri.create("idb-get",{originalErrorMessage:e?.message});Ir.warn(n.message)}}}async function u0(t,e){try{let r=(await f0()).transaction(jc,"readwrite");await r.objectStore(jc).put(e,h0(t)),await r.done}catch(n){if(n instanceof Xt)Ir.warn(n.message);else{let r=ri.create("idb-set",{originalErrorMessage:n?.message});Ir.warn(r.message)}}}function h0(t){return`${t.name}!${t.options.appId}`}var k2=1024,L2=30,hv=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new pv(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{let n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=l0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>L2){let i=V2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ir.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=l0(),{heartbeatsToSend:n,unsentEntries:r}=F2(this._heartbeatsCache.heartbeats),i=Fc(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Ir.warn(e),""}}};function l0(){return new Date().toISOString().substring(0,10)}function F2(t,e=k2){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),d0(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),d0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var pv=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ev()?JS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let n=await O2(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return u0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return u0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function d0(t){return Fc(JSON.stringify({version:2,heartbeats:t})).length}function V2(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function j2(t){ii(new hn("platform-logger",e=>new cv(e),"PRIVATE")),ii(new hn("heartbeat",e=>new hv(e),"PRIVATE")),xn(uv,a0,t),xn(uv,a0,"esm2020"),xn("fire-js","")}j2("");var p0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},g0={};var wr,mv;(function(){var t;function e(w,v){function E(){}E.prototype=v.prototype,w.F=v.prototype,w.prototype=new E,w.prototype.constructor=w,w.D=function(T,I,C){for(var _=Array(arguments.length-2),Lt=2;Lt<arguments.length;Lt++)_[Lt-2]=arguments[Lt];return v.prototype[I].apply(T,_)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,v,E){E||(E=0);let T=Array(16);if(typeof v=="string")for(var I=0;I<16;++I)T[I]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(I=0;I<16;++I)T[I]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=w.g[0],E=w.g[1],I=w.g[2];let C=w.g[3],_;_=v+(C^E&(I^C))+T[0]+3614090360&4294967295,v=E+(_<<7&4294967295|_>>>25),_=C+(I^v&(E^I))+T[1]+3905402710&4294967295,C=v+(_<<12&4294967295|_>>>20),_=I+(E^C&(v^E))+T[2]+606105819&4294967295,I=C+(_<<17&4294967295|_>>>15),_=E+(v^I&(C^v))+T[3]+3250441966&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(C^E&(I^C))+T[4]+4118548399&4294967295,v=E+(_<<7&4294967295|_>>>25),_=C+(I^v&(E^I))+T[5]+1200080426&4294967295,C=v+(_<<12&4294967295|_>>>20),_=I+(E^C&(v^E))+T[6]+2821735955&4294967295,I=C+(_<<17&4294967295|_>>>15),_=E+(v^I&(C^v))+T[7]+4249261313&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(C^E&(I^C))+T[8]+1770035416&4294967295,v=E+(_<<7&4294967295|_>>>25),_=C+(I^v&(E^I))+T[9]+2336552879&4294967295,C=v+(_<<12&4294967295|_>>>20),_=I+(E^C&(v^E))+T[10]+4294925233&4294967295,I=C+(_<<17&4294967295|_>>>15),_=E+(v^I&(C^v))+T[11]+2304563134&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(C^E&(I^C))+T[12]+1804603682&4294967295,v=E+(_<<7&4294967295|_>>>25),_=C+(I^v&(E^I))+T[13]+4254626195&4294967295,C=v+(_<<12&4294967295|_>>>20),_=I+(E^C&(v^E))+T[14]+2792965006&4294967295,I=C+(_<<17&4294967295|_>>>15),_=E+(v^I&(C^v))+T[15]+1236535329&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(I^C&(E^I))+T[1]+4129170786&4294967295,v=E+(_<<5&4294967295|_>>>27),_=C+(E^I&(v^E))+T[6]+3225465664&4294967295,C=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(C^v))+T[11]+643717713&4294967295,I=C+(_<<14&4294967295|_>>>18),_=E+(C^v&(I^C))+T[0]+3921069994&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(I^C&(E^I))+T[5]+3593408605&4294967295,v=E+(_<<5&4294967295|_>>>27),_=C+(E^I&(v^E))+T[10]+38016083&4294967295,C=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(C^v))+T[15]+3634488961&4294967295,I=C+(_<<14&4294967295|_>>>18),_=E+(C^v&(I^C))+T[4]+3889429448&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(I^C&(E^I))+T[9]+568446438&4294967295,v=E+(_<<5&4294967295|_>>>27),_=C+(E^I&(v^E))+T[14]+3275163606&4294967295,C=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(C^v))+T[3]+4107603335&4294967295,I=C+(_<<14&4294967295|_>>>18),_=E+(C^v&(I^C))+T[8]+1163531501&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(I^C&(E^I))+T[13]+2850285829&4294967295,v=E+(_<<5&4294967295|_>>>27),_=C+(E^I&(v^E))+T[2]+4243563512&4294967295,C=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(C^v))+T[7]+1735328473&4294967295,I=C+(_<<14&4294967295|_>>>18),_=E+(C^v&(I^C))+T[12]+2368359562&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(E^I^C)+T[5]+4294588738&4294967295,v=E+(_<<4&4294967295|_>>>28),_=C+(v^E^I)+T[8]+2272392833&4294967295,C=v+(_<<11&4294967295|_>>>21),_=I+(C^v^E)+T[11]+1839030562&4294967295,I=C+(_<<16&4294967295|_>>>16),_=E+(I^C^v)+T[14]+4259657740&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(E^I^C)+T[1]+2763975236&4294967295,v=E+(_<<4&4294967295|_>>>28),_=C+(v^E^I)+T[4]+1272893353&4294967295,C=v+(_<<11&4294967295|_>>>21),_=I+(C^v^E)+T[7]+4139469664&4294967295,I=C+(_<<16&4294967295|_>>>16),_=E+(I^C^v)+T[10]+3200236656&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(E^I^C)+T[13]+681279174&4294967295,v=E+(_<<4&4294967295|_>>>28),_=C+(v^E^I)+T[0]+3936430074&4294967295,C=v+(_<<11&4294967295|_>>>21),_=I+(C^v^E)+T[3]+3572445317&4294967295,I=C+(_<<16&4294967295|_>>>16),_=E+(I^C^v)+T[6]+76029189&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(E^I^C)+T[9]+3654602809&4294967295,v=E+(_<<4&4294967295|_>>>28),_=C+(v^E^I)+T[12]+3873151461&4294967295,C=v+(_<<11&4294967295|_>>>21),_=I+(C^v^E)+T[15]+530742520&4294967295,I=C+(_<<16&4294967295|_>>>16),_=E+(I^C^v)+T[2]+3299628645&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(I^(E|~C))+T[0]+4096336452&4294967295,v=E+(_<<6&4294967295|_>>>26),_=C+(E^(v|~I))+T[7]+1126891415&4294967295,C=v+(_<<10&4294967295|_>>>22),_=I+(v^(C|~E))+T[14]+2878612391&4294967295,I=C+(_<<15&4294967295|_>>>17),_=E+(C^(I|~v))+T[5]+4237533241&4294967295,E=I+(_<<21&4294967295|_>>>11),_=v+(I^(E|~C))+T[12]+1700485571&4294967295,v=E+(_<<6&4294967295|_>>>26),_=C+(E^(v|~I))+T[3]+2399980690&4294967295,C=v+(_<<10&4294967295|_>>>22),_=I+(v^(C|~E))+T[10]+4293915773&4294967295,I=C+(_<<15&4294967295|_>>>17),_=E+(C^(I|~v))+T[1]+2240044497&4294967295,E=I+(_<<21&4294967295|_>>>11),_=v+(I^(E|~C))+T[8]+1873313359&4294967295,v=E+(_<<6&4294967295|_>>>26),_=C+(E^(v|~I))+T[15]+4264355552&4294967295,C=v+(_<<10&4294967295|_>>>22),_=I+(v^(C|~E))+T[6]+2734768916&4294967295,I=C+(_<<15&4294967295|_>>>17),_=E+(C^(I|~v))+T[13]+1309151649&4294967295,E=I+(_<<21&4294967295|_>>>11),_=v+(I^(E|~C))+T[4]+4149444226&4294967295,v=E+(_<<6&4294967295|_>>>26),_=C+(E^(v|~I))+T[11]+3174756917&4294967295,C=v+(_<<10&4294967295|_>>>22),_=I+(v^(C|~E))+T[2]+718787259&4294967295,I=C+(_<<15&4294967295|_>>>17),_=E+(C^(I|~v))+T[9]+3951481745&4294967295,w.g[0]=w.g[0]+v&4294967295,w.g[1]=w.g[1]+(I+(_<<21&4294967295|_>>>11))&4294967295,w.g[2]=w.g[2]+I&4294967295,w.g[3]=w.g[3]+C&4294967295}r.prototype.v=function(w,v){v===void 0&&(v=w.length);let E=v-this.blockSize,T=this.C,I=this.h,C=0;for(;C<v;){if(I==0)for(;C<=E;)i(this,w,C),C+=this.blockSize;if(typeof w=="string"){for(;C<v;)if(T[I++]=w.charCodeAt(C++),I==this.blockSize){i(this,T),I=0;break}}else for(;C<v;)if(T[I++]=w[C++],I==this.blockSize){i(this,T),I=0;break}}this.h=I,this.o+=v},r.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var v=1;v<w.length-8;++v)w[v]=0;v=this.o*8;for(var E=w.length-8;E<w.length;++E)w[E]=v&255,v/=256;for(this.v(w),w=Array(16),v=0,E=0;E<4;++E)for(let T=0;T<32;T+=8)w[v++]=this.g[E]>>>T&255;return w};function o(w,v){var E=a;return Object.prototype.hasOwnProperty.call(E,w)?E[w]:E[w]=v(w)}function s(w,v){this.h=v;let E=[],T=!0;for(let I=w.length-1;I>=0;I--){let C=w[I]|0;T&&C==v||(E[I]=C,T=!1)}this.g=E}var a={};function u(w){return-128<=w&&w<128?o(w,function(v){return new s([v|0],v<0?-1:0)}):new s([w|0],w<0?-1:0)}function l(w){if(isNaN(w)||!isFinite(w))return p;if(w<0)return R(l(-w));let v=[],E=1;for(let T=0;w>=E;T++)v[T]=w/E|0,E*=4294967296;return new s(v,0)}function f(w,v){if(w.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(w.charAt(0)=="-")return R(f(w.substring(1),v));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');let E=l(Math.pow(v,8)),T=p;for(let C=0;C<w.length;C+=8){var I=Math.min(8,w.length-C);let _=parseInt(w.substring(C,C+I),v);I<8?(I=l(Math.pow(v,I)),T=T.j(I).add(l(_))):(T=T.j(E),T=T.add(l(_)))}return T}var p=u(0),m=u(1),y=u(16777216);t=s.prototype,t.m=function(){if(A(this))return-R(this).m();let w=0,v=1;for(let E=0;E<this.g.length;E++){let T=this.i(E);w+=(T>=0?T:4294967296+T)*v,v*=4294967296}return w},t.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(S(this))return"0";if(A(this))return"-"+R(this).toString(w);let v=l(Math.pow(w,6));var E=this;let T="";for(;;){let I=wt(E,v).g;E=L(E,I.j(v));let C=((E.g.length>0?E.g[0]:E.h)>>>0).toString(w);if(E=I,S(E))return C+T;for(;C.length<6;)C="0"+C;T=C+T}},t.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function S(w){if(w.h!=0)return!1;for(let v=0;v<w.g.length;v++)if(w.g[v]!=0)return!1;return!0}function A(w){return w.h==-1}t.l=function(w){return w=L(this,w),A(w)?-1:S(w)?0:1};function R(w){let v=w.g.length,E=[];for(let T=0;T<v;T++)E[T]=~w.g[T];return new s(E,~w.h).add(m)}t.abs=function(){return A(this)?R(this):this},t.add=function(w){let v=Math.max(this.g.length,w.g.length),E=[],T=0;for(let I=0;I<=v;I++){let C=T+(this.i(I)&65535)+(w.i(I)&65535),_=(C>>>16)+(this.i(I)>>>16)+(w.i(I)>>>16);T=_>>>16,C&=65535,_&=65535,E[I]=_<<16|C}return new s(E,E[E.length-1]&-2147483648?-1:0)};function L(w,v){return w.add(R(v))}t.j=function(w){if(S(this)||S(w))return p;if(A(this))return A(w)?R(this).j(R(w)):R(R(this).j(w));if(A(w))return R(this.j(R(w)));if(this.l(y)<0&&w.l(y)<0)return l(this.m()*w.m());let v=this.g.length+w.g.length,E=[];for(var T=0;T<2*v;T++)E[T]=0;for(T=0;T<this.g.length;T++)for(let I=0;I<w.g.length;I++){let C=this.i(T)>>>16,_=this.i(T)&65535,Lt=w.i(I)>>>16,xr=w.i(I)&65535;E[2*T+2*I]+=_*xr,re(E,2*T+2*I),E[2*T+2*I+1]+=C*xr,re(E,2*T+2*I+1),E[2*T+2*I+1]+=_*Lt,re(E,2*T+2*I+1),E[2*T+2*I+2]+=C*Lt,re(E,2*T+2*I+2)}for(w=0;w<v;w++)E[w]=E[2*w+1]<<16|E[2*w];for(w=v;w<2*v;w++)E[w]=0;return new s(E,0)};function re(w,v){for(;(w[v]&65535)!=w[v];)w[v+1]+=w[v]>>>16,w[v]&=65535,v++}function he(w,v){this.g=w,this.h=v}function wt(w,v){if(S(v))throw Error("division by zero");if(S(w))return new he(p,p);if(A(w))return v=wt(R(w),v),new he(R(v.g),R(v.h));if(A(v))return v=wt(w,R(v)),new he(R(v.g),v.h);if(w.g.length>30){if(A(w)||A(v))throw Error("slowDivide_ only works with positive integers.");for(var E=m,T=v;T.l(w)<=0;)E=kt(E),T=kt(T);var I=rt(E,1),C=rt(T,1);for(T=rt(T,2),E=rt(E,2);!S(T);){var _=C.add(T);_.l(w)<=0&&(I=I.add(E),C=_),T=rt(T,1),E=rt(E,1)}return v=L(w,I.j(v)),new he(I,v)}for(I=p;w.l(v)>=0;){for(E=Math.max(1,Math.floor(w.m()/v.m())),T=Math.ceil(Math.log(E)/Math.LN2),T=T<=48?1:Math.pow(2,T-48),C=l(E),_=C.j(v);A(_)||_.l(w)>0;)E-=T,C=l(E),_=C.j(v);S(C)&&(C=m),I=I.add(C),w=L(w,_)}return new he(I,w)}t.B=function(w){return wt(this,w).h},t.and=function(w){let v=Math.max(this.g.length,w.g.length),E=[];for(let T=0;T<v;T++)E[T]=this.i(T)&w.i(T);return new s(E,this.h&w.h)},t.or=function(w){let v=Math.max(this.g.length,w.g.length),E=[];for(let T=0;T<v;T++)E[T]=this.i(T)|w.i(T);return new s(E,this.h|w.h)},t.xor=function(w){let v=Math.max(this.g.length,w.g.length),E=[];for(let T=0;T<v;T++)E[T]=this.i(T)^w.i(T);return new s(E,this.h^w.h)};function kt(w){let v=w.g.length+1,E=[];for(let T=0;T<v;T++)E[T]=w.i(T)<<1|w.i(T-1)>>>31;return new s(E,w.h)}function rt(w,v){let E=v>>5;v%=32;let T=w.g.length-E,I=[];for(let C=0;C<T;C++)I[C]=v>0?w.i(C+E)>>>v|w.i(C+E+1)<<32-v:w.i(C+E);return new s(I,w.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,mv=g0.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=f,wr=g0.Integer=s}).apply(typeof p0<"u"?p0:typeof self<"u"?self:typeof window<"u"?window:{});var Ef=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Tr={};var yv,U2,_s,vv,Bc,If,_v,Ev,Iv;(function(){var t,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ef=="object"&&Ef];for(var d=0;d<c.length;++d){var h=c[d];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var h=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var D=c[g];if(!(D in h))break e;h=h[D]}c=c[c.length-1],g=h[c],d=d(g),d!=g&&d!=null&&e(h,c,{configurable:!0,writable:!0,value:d})}}i("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(c){return c||function(d){var h=[],g;for(g in d)Object.prototype.hasOwnProperty.call(d,g)&&h.push([g,d[g]]);return h}});var o=o||{},s=this||self;function a(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function u(c,d,h){return c.call.apply(c.bind,arguments)}function l(c,d,h){return l=u,l.apply(null,arguments)}function f(c,d){var h=Array.prototype.slice.call(arguments,1);return function(){var g=h.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function p(c,d){function h(){}h.prototype=d.prototype,c.Z=d.prototype,c.prototype=new h,c.prototype.constructor=c,c.Ob=function(g,D,b){for(var k=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)k[ie-2]=arguments[ie];return d.prototype[D].apply(g,k)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function y(c){let d=c.length;if(d>0){let h=Array(d);for(let g=0;g<d;g++)h[g]=c[g];return h}return[]}function S(c,d){for(let g=1;g<arguments.length;g++){let D=arguments[g];var h=typeof D;if(h=h!="object"?h:D?Array.isArray(D)?"array":h:"null",h=="array"||h=="object"&&typeof D.length=="number"){h=c.length||0;let b=D.length||0;c.length=h+b;for(let k=0;k<b;k++)c[h+k]=D[k]}else c.push(D)}}class A{constructor(d,h){this.i=d,this.j=h,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function R(c){s.setTimeout(()=>{throw c},0)}function L(){var c=w;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class re{constructor(){this.h=this.g=null}add(d,h){let g=he.get();g.set(d,h),this.h?this.h.next=g:this.g=g,this.h=g}}var he=new A(()=>new wt,c=>c.reset());class wt{constructor(){this.next=this.g=this.h=null}set(d,h){this.h=d,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let kt,rt=!1,w=new re,v=()=>{let c=Promise.resolve(void 0);kt=()=>{c.then(E)}};function E(){for(var c;c=L();){try{c.h.call(c.g)}catch(h){R(h)}var d=he;d.j(c),d.h<100&&(d.h++,c.next=d.g,d.g=c)}rt=!1}function T(){this.u=this.u,this.C=this.C}T.prototype.u=!1,T.prototype.dispose=function(){this.u||(this.u=!0,this.N())},T.prototype[Symbol.dispose]=function(){this.dispose()},T.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var C=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let h=()=>{};s.addEventListener("test",h,d),s.removeEventListener("test",h,d)}catch{}return c})();function _(c){return/^[\s\xa0]*$/.test(c)}function Lt(c,d){I.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,d)}p(Lt,I),Lt.prototype.init=function(c,d){let h=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget,d||(h=="mouseover"?d=c.fromElement:h=="mouseout"&&(d=c.toElement)),this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Lt.Z.h.call(this)},Lt.prototype.h=function(){Lt.Z.h.call(this);let c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var xr="closure_listenable_"+(Math.random()*1e6|0),jN=0;function UN(c,d,h,g,D){this.listener=c,this.proxy=null,this.src=d,this.type=h,this.capture=!!g,this.ha=D,this.key=++jN,this.da=this.fa=!1}function gu(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function mu(c,d,h){for(let g in c)d.call(h,c[g],g,c)}function BN(c,d){for(let h in c)d.call(void 0,c[h],h,c)}function lI(c){let d={};for(let h in c)d[h]=c[h];return d}let dI="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fI(c,d){let h,g;for(let D=1;D<arguments.length;D++){g=arguments[D];for(h in g)c[h]=g[h];for(let b=0;b<dI.length;b++)h=dI[b],Object.prototype.hasOwnProperty.call(g,h)&&(c[h]=g[h])}}function yu(c){this.src=c,this.g={},this.h=0}yu.prototype.add=function(c,d,h,g,D){let b=c.toString();c=this.g[b],c||(c=this.g[b]=[],this.h++);let k=zh(c,d,g,D);return k>-1?(d=c[k],h||(d.fa=!1)):(d=new UN(d,this.src,b,!!g,D),d.fa=h,c.push(d)),d};function Hh(c,d){let h=d.type;if(h in c.g){var g=c.g[h],D=Array.prototype.indexOf.call(g,d,void 0),b;(b=D>=0)&&Array.prototype.splice.call(g,D,1),b&&(gu(d),c.g[h].length==0&&(delete c.g[h],c.h--))}}function zh(c,d,h,g){for(let D=0;D<c.length;++D){let b=c[D];if(!b.da&&b.listener==d&&b.capture==!!h&&b.ha==g)return D}return-1}var qh="closure_lm_"+(Math.random()*1e6|0),Gh={};function hI(c,d,h,g,D){if(g&&g.once)return gI(c,d,h,g,D);if(Array.isArray(d)){for(let b=0;b<d.length;b++)hI(c,d[b],h,g,D);return null}return h=Yh(h),c&&c[xr]?c.J(d,h,a(g)?!!g.capture:!!g,D):pI(c,d,h,!1,g,D)}function pI(c,d,h,g,D,b){if(!d)throw Error("Invalid event type");let k=a(D)?!!D.capture:!!D,ie=Kh(c);if(ie||(c[qh]=ie=new yu(c)),h=ie.add(d,h,g,k,b),h.proxy)return h;if(g=$N(),h.proxy=g,g.src=c,g.listener=h,c.addEventListener)C||(D=k),D===void 0&&(D=!1),c.addEventListener(d.toString(),g,D);else if(c.attachEvent)c.attachEvent(yI(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return h}function $N(){function c(h){return d.call(c.src,c.listener,h)}let d=HN;return c}function gI(c,d,h,g,D){if(Array.isArray(d)){for(let b=0;b<d.length;b++)gI(c,d[b],h,g,D);return null}return h=Yh(h),c&&c[xr]?c.K(d,h,a(g)?!!g.capture:!!g,D):pI(c,d,h,!0,g,D)}function mI(c,d,h,g,D){if(Array.isArray(d))for(var b=0;b<d.length;b++)mI(c,d[b],h,g,D);else g=a(g)?!!g.capture:!!g,h=Yh(h),c&&c[xr]?(c=c.i,b=String(d).toString(),b in c.g&&(d=c.g[b],h=zh(d,h,g,D),h>-1&&(gu(d[h]),Array.prototype.splice.call(d,h,1),d.length==0&&(delete c.g[b],c.h--)))):c&&(c=Kh(c))&&(d=c.g[d.toString()],c=-1,d&&(c=zh(d,h,g,D)),(h=c>-1?d[c]:null)&&Wh(h))}function Wh(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[xr])Hh(d.i,c);else{var h=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(h,g,c.capture):d.detachEvent?d.detachEvent(yI(h),g):d.addListener&&d.removeListener&&d.removeListener(g),(h=Kh(d))?(Hh(h,c),h.h==0&&(h.src=null,d[qh]=null)):gu(c)}}}function yI(c){return c in Gh?Gh[c]:Gh[c]="on"+c}function HN(c,d){if(c.da)c=!0;else{d=new Lt(d,this);let h=c.listener,g=c.ha||c.src;c.fa&&Wh(c),c=h.call(g,d)}return c}function Kh(c){return c=c[qh],c instanceof yu?c:null}var Qh="__closure_events_fn_"+(Math.random()*1e9>>>0);function Yh(c){return typeof c=="function"?c:(c[Qh]||(c[Qh]=function(d){return c.handleEvent(d)}),c[Qh])}function gt(){T.call(this),this.i=new yu(this),this.M=this,this.G=null}p(gt,T),gt.prototype[xr]=!0,gt.prototype.removeEventListener=function(c,d,h,g){mI(this,c,d,h,g)};function Tt(c,d){var h,g=c.G;if(g)for(h=[];g;g=g.G)h.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new I(d,c);else if(d instanceof I)d.target=d.target||c;else{var D=d;d=new I(g,c),fI(d,D)}D=!0;let b,k;if(h)for(k=h.length-1;k>=0;k--)b=d.g=h[k],D=vu(b,g,!0,d)&&D;if(b=d.g=c,D=vu(b,g,!0,d)&&D,D=vu(b,g,!1,d)&&D,h)for(k=0;k<h.length;k++)b=d.g=h[k],D=vu(b,g,!1,d)&&D}gt.prototype.N=function(){if(gt.Z.N.call(this),this.i){var c=this.i;for(let d in c.g){let h=c.g[d];for(let g=0;g<h.length;g++)gu(h[g]);delete c.g[d],c.h--}}this.G=null},gt.prototype.J=function(c,d,h,g){return this.i.add(String(c),d,!1,h,g)},gt.prototype.K=function(c,d,h,g){return this.i.add(String(c),d,!0,h,g)};function vu(c,d,h,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();let D=!0;for(let b=0;b<d.length;++b){let k=d[b];if(k&&!k.da&&k.capture==h){let ie=k.listener,Je=k.ha||k.src;k.fa&&Hh(c.i,k),D=ie.call(Je,g)!==!1&&D}}return D&&!g.defaultPrevented}function zN(c,d){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=l(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:s.setTimeout(c,d||0)}function vI(c){c.g=zN(()=>{c.g=null,c.i&&(c.i=!1,vI(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class qN extends T{constructor(d,h){super(),this.m=d,this.l=h,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:vI(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Js(c){T.call(this),this.h=c,this.g={}}p(Js,T);var _I=[];function EI(c){mu(c.g,function(d,h){this.g.hasOwnProperty(h)&&Wh(d)},c),c.g={}}Js.prototype.N=function(){Js.Z.N.call(this),EI(this)},Js.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Jh=s.JSON.stringify,GN=s.JSON.parse,WN=class{stringify(c){return s.JSON.stringify(c,void 0)}parse(c){return s.JSON.parse(c,void 0)}};function II(){}function wI(){}var Zs={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Zh(){I.call(this,"d")}p(Zh,I);function Xh(){I.call(this,"c")}p(Xh,I);var Ii={},TI=null;function _u(){return TI=TI||new gt}Ii.Ia="serverreachability";function DI(c){I.call(this,Ii.Ia,c)}p(DI,I);function Xs(c){let d=_u();Tt(d,new DI(d))}Ii.STAT_EVENT="statevent";function CI(c,d){I.call(this,Ii.STAT_EVENT,c),this.stat=d}p(CI,I);function Dt(c){let d=_u();Tt(d,new CI(d,c))}Ii.Ja="timingevent";function bI(c,d){I.call(this,Ii.Ja,c),this.size=d}p(bI,I);function ea(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){c()},d)}function ta(){this.g=!0}ta.prototype.ua=function(){this.g=!1};function KN(c,d,h,g,D,b){c.info(function(){if(c.g)if(b){var k="",ie=b.split("&");for(let Me=0;Me<ie.length;Me++){var Je=ie[Me].split("=");if(Je.length>1){let it=Je[0];Je=Je[1];let Ln=it.split("_");k=Ln.length>=2&&Ln[1]=="type"?k+(it+"="+Je+"&"):k+(it+"=redacted&")}}}else k=null;else k=b;return"XMLHTTP REQ ("+g+") [attempt "+D+"]: "+d+`
`+h+`
`+k})}function QN(c,d,h,g,D,b,k){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+D+"]: "+d+`
`+h+`
`+b+" "+k})}function wo(c,d,h,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+JN(c,h)+(g?" "+g:"")})}function YN(c,d){c.info(function(){return"TIMEOUT: "+d})}ta.prototype.info=function(){};function JN(c,d){if(!c.g)return d;if(!d)return null;try{let b=JSON.parse(d);if(b){for(c=0;c<b.length;c++)if(Array.isArray(b[c])){var h=b[c];if(!(h.length<2)){var g=h[1];if(Array.isArray(g)&&!(g.length<1)){var D=g[0];if(D!="noop"&&D!="stop"&&D!="close")for(let k=1;k<g.length;k++)g[k]=""}}}}return Jh(b)}catch{return d}}var Eu={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},SI={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},AI;function ep(){}p(ep,II),ep.prototype.g=function(){return new XMLHttpRequest},AI=new ep;function na(c){return encodeURIComponent(String(c))}function ZN(c){var d=1;c=c.split(":");let h=[];for(;d>0&&c.length;)h.push(c.shift()),d--;return c.length&&h.push(c.join(":")),h}function Pr(c,d,h,g){this.j=c,this.i=d,this.l=h,this.S=g||1,this.V=new Js(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new RI}function RI(){this.i=null,this.g="",this.h=!1}var NI={},tp={};function np(c,d,h){c.M=1,c.A=wu(kn(d)),c.u=h,c.R=!0,MI(c,null)}function MI(c,d){c.F=Date.now(),Iu(c),c.B=kn(c.A);var h=c.B,g=c.S;Array.isArray(g)||(g=[String(g)]),zI(h.i,"t",g),c.C=0,h=c.j.L,c.h=new RI,c.g=cw(c.j,h?d:null,!c.u),c.P>0&&(c.O=new qN(l(c.Y,c,c.g),c.P)),d=c.V,h=c.g,g=c.ba;var D="readystatechange";Array.isArray(D)||(D&&(_I[0]=D.toString()),D=_I);for(let b=0;b<D.length;b++){let k=hI(h,D[b],g||d.handleEvent,!1,d.h||d);if(!k)break;d.g[k.key]=k}d=c.J?lI(c.J):{},c.u?(c.v||(c.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,d)):(c.v="GET",c.g.ea(c.B,c.v,null,d)),Xs(),KN(c.i,c.v,c.B,c.l,c.S,c.u)}Pr.prototype.ba=function(c){c=c.target;let d=this.O;d&&Lr(c)==3?d.j():this.Y(c)},Pr.prototype.Y=function(c){try{if(c==this.g)e:{let ie=Lr(this.g),Je=this.g.ya(),Me=this.g.ca();if(!(ie<3)&&(ie!=3||this.g&&(this.h.h||this.g.la()||JI(this.g)))){this.K||ie!=4||Je==7||(Je==8||Me<=0?Xs(3):Xs(2)),rp(this);var d=this.g.ca();this.X=d;var h=XN(this);if(this.o=d==200,QN(this.i,this.v,this.B,this.l,this.S,ie,d),this.o){if(this.U&&!this.L){t:{if(this.g){var g,D=this.g;if((g=D.g?D.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(g)){var b=g;break t}}b=null}if(c=b)wo(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ip(this,c);else{this.o=!1,this.m=3,Dt(12),wi(this),ra(this);break e}}if(this.R){c=!0;let it;for(;!this.K&&this.C<h.length;)if(it=eM(this,h),it==tp){ie==4&&(this.m=4,Dt(14),c=!1),wo(this.i,this.l,null,"[Incomplete Response]");break}else if(it==NI){this.m=4,Dt(15),wo(this.i,this.l,h,"[Invalid Chunk]"),c=!1;break}else wo(this.i,this.l,it,null),ip(this,it);if(xI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ie!=4||h.length!=0||this.h.h||(this.m=1,Dt(16),c=!1),this.o=this.o&&c,!c)wo(this.i,this.l,h,"[Invalid Chunked Response]"),wi(this),ra(this);else if(h.length>0&&!this.W){this.W=!0;var k=this.j;k.g==this&&k.aa&&!k.P&&(k.j.info("Great, no buffering proxy detected. Bytes received: "+h.length),dp(k),k.P=!0,Dt(11))}}else wo(this.i,this.l,h,null),ip(this,h);ie==4&&wi(this),this.o&&!this.K&&(ie==4?iw(this.j,this):(this.o=!1,Iu(this)))}else pM(this.g),d==400&&h.indexOf("Unknown SID")>0?(this.m=3,Dt(12)):(this.m=0,Dt(13)),wi(this),ra(this)}}}catch{}finally{}};function XN(c){if(!xI(c))return c.g.la();let d=JI(c.g);if(d==="")return"";let h="",g=d.length,D=Lr(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return wi(c),ra(c),"";c.h.i=new s.TextDecoder}for(let b=0;b<g;b++)c.h.h=!0,h+=c.h.i.decode(d[b],{stream:!(D&&b==g-1)});return d.length=0,c.h.g+=h,c.C=0,c.h.g}function xI(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function eM(c,d){var h=c.C,g=d.indexOf(`
`,h);return g==-1?tp:(h=Number(d.substring(h,g)),isNaN(h)?NI:(g+=1,g+h>d.length?tp:(d=d.slice(g,g+h),c.C=g+h,d)))}Pr.prototype.cancel=function(){this.K=!0,wi(this)};function Iu(c){c.T=Date.now()+c.H,PI(c,c.H)}function PI(c,d){if(c.D!=null)throw Error("WatchDog timer not null");c.D=ea(l(c.aa,c),d)}function rp(c){c.D&&(s.clearTimeout(c.D),c.D=null)}Pr.prototype.aa=function(){this.D=null;let c=Date.now();c-this.T>=0?(YN(this.i,this.B),this.M!=2&&(Xs(),Dt(17)),wi(this),this.m=2,ra(this)):PI(this,this.T-c)};function ra(c){c.j.I==0||c.K||iw(c.j,c)}function wi(c){rp(c);var d=c.O;d&&typeof d.dispose=="function"&&d.dispose(),c.O=null,EI(c.V),c.g&&(d=c.g,c.g=null,d.abort(),d.dispose())}function ip(c,d){try{var h=c.j;if(h.I!=0&&(h.g==c||op(h.h,c))){if(!c.L&&op(h.h,c)&&h.I==3){try{var g=h.Ba.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var D=g;if(D[0]==0){e:if(!h.v){if(h.g)if(h.g.F+3e3<c.F)Au(h),bu(h);else break e;lp(h),Dt(18)}}else h.xa=D[1],0<h.xa-h.K&&D[2]<37500&&h.F&&h.A==0&&!h.C&&(h.C=ea(l(h.Va,h),6e3));LI(h.h)<=1&&h.ta&&(h.ta=void 0)}else Di(h,11)}else if((c.L||h.g==c)&&Au(h),!_(d))for(D=h.Ba.g.parse(d),d=0;d<D.length;d++){let Me=D[d],it=Me[0];if(!(it<=h.K))if(h.K=it,Me=Me[1],h.I==2)if(Me[0]=="c"){h.M=Me[1],h.ba=Me[2];let Ln=Me[3];Ln!=null&&(h.ka=Ln,h.j.info("VER="+h.ka));let Ci=Me[4];Ci!=null&&(h.za=Ci,h.j.info("SVER="+h.za));let Fr=Me[5];Fr!=null&&typeof Fr=="number"&&Fr>0&&(g=1.5*Fr,h.O=g,h.j.info("backChannelRequestTimeoutMs_="+g)),g=h;let Vr=c.g;if(Vr){let Nu=Vr.g?Vr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Nu){var b=g.h;b.g||Nu.indexOf("spdy")==-1&&Nu.indexOf("quic")==-1&&Nu.indexOf("h2")==-1||(b.j=b.l,b.g=new Set,b.h&&(sp(b,b.h),b.h=null))}if(g.G){let fp=Vr.g?Vr.g.getResponseHeader("X-HTTP-Session-Id"):null;fp&&(g.wa=fp,Oe(g.J,g.G,fp))}}h.I=3,h.l&&h.l.ra(),h.aa&&(h.T=Date.now()-c.F,h.j.info("Handshake RTT: "+h.T+"ms")),g=h;var k=c;if(g.na=aw(g,g.L?g.ba:null,g.W),k.L){FI(g.h,k);var ie=k,Je=g.O;Je&&(ie.H=Je),ie.D&&(rp(ie),Iu(ie)),g.g=k}else nw(g);h.i.length>0&&Su(h)}else Me[0]!="stop"&&Me[0]!="close"||Di(h,7);else h.I==3&&(Me[0]=="stop"||Me[0]=="close"?Me[0]=="stop"?Di(h,7):up(h):Me[0]!="noop"&&h.l&&h.l.qa(Me),h.A=0)}}Xs(4)}catch{}}var tM=class{constructor(c,d){this.g=c,this.map=d}};function OI(c){this.l=c||10,s.PerformanceNavigationTiming?(c=s.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function kI(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function LI(c){return c.h?1:c.g?c.g.size:0}function op(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function sp(c,d){c.g?c.g.add(d):c.h=d}function FI(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}OI.prototype.cancel=function(){if(this.i=VI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function VI(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let h of c.g.values())d=d.concat(h.G);return d}return y(c.i)}var jI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nM(c,d){if(c){c=c.split("&");for(let h=0;h<c.length;h++){let g=c[h].indexOf("="),D,b=null;g>=0?(D=c[h].substring(0,g),b=c[h].substring(g+1)):D=c[h],d(D,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function Or(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;c instanceof Or?(this.l=c.l,ia(this,c.j),this.o=c.o,this.g=c.g,oa(this,c.u),this.h=c.h,ap(this,qI(c.i)),this.m=c.m):c&&(d=String(c).match(jI))?(this.l=!1,ia(this,d[1]||"",!0),this.o=sa(d[2]||""),this.g=sa(d[3]||"",!0),oa(this,d[4]),this.h=sa(d[5]||"",!0),ap(this,d[6]||"",!0),this.m=sa(d[7]||"")):(this.l=!1,this.i=new ca(null,this.l))}Or.prototype.toString=function(){let c=[];var d=this.j;d&&c.push(aa(d,UI,!0),":");var h=this.g;return(h||d=="file")&&(c.push("//"),(d=this.o)&&c.push(aa(d,UI,!0),"@"),c.push(na(h).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.u,h!=null&&c.push(":",String(h))),(h=this.h)&&(this.g&&h.charAt(0)!="/"&&c.push("/"),c.push(aa(h,h.charAt(0)=="/"?oM:iM,!0))),(h=this.i.toString())&&c.push("?",h),(h=this.m)&&c.push("#",aa(h,aM)),c.join("")},Or.prototype.resolve=function(c){let d=kn(this),h=!!c.j;h?ia(d,c.j):h=!!c.o,h?d.o=c.o:h=!!c.g,h?d.g=c.g:h=c.u!=null;var g=c.h;if(h)oa(d,c.u);else if(h=!!c.h){if(g.charAt(0)!="/")if(this.g&&!this.h)g="/"+g;else{var D=d.h.lastIndexOf("/");D!=-1&&(g=d.h.slice(0,D+1)+g)}if(D=g,D==".."||D==".")g="";else if(D.indexOf("./")!=-1||D.indexOf("/.")!=-1){g=D.lastIndexOf("/",0)==0,D=D.split("/");let b=[];for(let k=0;k<D.length;){let ie=D[k++];ie=="."?g&&k==D.length&&b.push(""):ie==".."?((b.length>1||b.length==1&&b[0]!="")&&b.pop(),g&&k==D.length&&b.push("")):(b.push(ie),g=!0)}g=b.join("/")}else g=D}return h?d.h=g:h=c.i.toString()!=="",h?ap(d,qI(c.i)):h=!!c.m,h&&(d.m=c.m),d};function kn(c){return new Or(c)}function ia(c,d,h){c.j=h?sa(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function oa(c,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);c.u=d}else c.u=null}function ap(c,d,h){d instanceof ca?(c.i=d,cM(c.i,c.l)):(h||(d=aa(d,sM)),c.i=new ca(d,c.l))}function Oe(c,d,h){c.i.set(d,h)}function wu(c){return Oe(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function sa(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function aa(c,d,h){return typeof c=="string"?(c=encodeURI(c).replace(d,rM),h&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function rM(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var UI=/[#\/\?@]/g,iM=/[#\?:]/g,oM=/[#\?]/g,sM=/[#\?@]/g,aM=/#/g;function ca(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Ti(c){c.g||(c.g=new Map,c.h=0,c.i&&nM(c.i,function(d,h){c.add(decodeURIComponent(d.replace(/\+/g," ")),h)}))}t=ca.prototype,t.add=function(c,d){Ti(this),this.i=null,c=To(this,c);let h=this.g.get(c);return h||this.g.set(c,h=[]),h.push(d),this.h+=1,this};function BI(c,d){Ti(c),d=To(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function $I(c,d){return Ti(c),d=To(c,d),c.g.has(d)}t.forEach=function(c,d){Ti(this),this.g.forEach(function(h,g){h.forEach(function(D){c.call(d,D,g,this)},this)},this)};function HI(c,d){Ti(c);let h=[];if(typeof d=="string")$I(c,d)&&(h=h.concat(c.g.get(To(c,d))));else for(c=Array.from(c.g.values()),d=0;d<c.length;d++)h=h.concat(c[d]);return h}t.set=function(c,d){return Ti(this),this.i=null,c=To(this,c),$I(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=HI(this,c),c.length>0?String(c[0]):d):d};function zI(c,d,h){BI(c,d),h.length>0&&(c.i=null,c.g.set(To(c,d),y(h)),c.h+=h.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(let g=0;g<d.length;g++){var h=d[g];let D=na(h);h=HI(this,h);for(let b=0;b<h.length;b++){let k=D;h[b]!==""&&(k+="="+na(h[b])),c.push(k)}}return this.i=c.join("&")};function qI(c){let d=new ca;return d.i=c.i,c.g&&(d.g=new Map(c.g),d.h=c.h),d}function To(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function cM(c,d){d&&!c.j&&(Ti(c),c.i=null,c.g.forEach(function(h,g){let D=g.toLowerCase();g!=D&&(BI(this,g),zI(this,D,h))},c)),c.j=d}function uM(c,d){let h=new ta;if(s.Image){let g=new Image;g.onload=f(kr,h,"TestLoadImage: loaded",!0,d,g),g.onerror=f(kr,h,"TestLoadImage: error",!1,d,g),g.onabort=f(kr,h,"TestLoadImage: abort",!1,d,g),g.ontimeout=f(kr,h,"TestLoadImage: timeout",!1,d,g),s.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function lM(c,d){let h=new ta,g=new AbortController,D=setTimeout(()=>{g.abort(),kr(h,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(b=>{clearTimeout(D),b.ok?kr(h,"TestPingServer: ok",!0,d):kr(h,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(D),kr(h,"TestPingServer: error",!1,d)})}function kr(c,d,h,g,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),g(h)}catch{}}function dM(){this.g=new WN}function Tu(c){this.i=c.Sb||null,this.h=c.ab||!1}p(Tu,II),Tu.prototype.g=function(){return new Du(this.i,this.h)};function Du(c,d){gt.call(this),this.H=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Du,gt),t=Du.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=d,this.readyState=1,la(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(d.body=c),(this.H||s).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ua(this)),this.readyState=0},t.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,la(this)),this.g&&(this.readyState=3,la(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;GI(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function GI(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}t.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?ua(this):la(this),this.readyState==3&&GI(this)}},t.Oa=function(c){this.g&&(this.response=this.responseText=c,ua(this))},t.Na=function(c){this.g&&(this.response=c,ua(this))},t.ga=function(){this.g&&ua(this)};function ua(c){c.readyState=4,c.l=null,c.j=null,c.B=null,la(c)}t.setRequestHeader=function(c,d){this.A.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var h=d.next();!h.done;)h=h.value,c.push(h[0]+": "+h[1]),h=d.next();return c.join(`\r
`)};function la(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Du.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function WI(c){let d="";return mu(c,function(h,g){d+=g,d+=":",d+=h,d+=`\r
`}),d}function cp(c,d,h){e:{for(g in h){var g=!1;break e}g=!0}g||(h=WI(h),typeof c=="string"?h!=null&&na(h):Oe(c,d,h))}function Ue(c){gt.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Ue,gt);var fM=/^https?$/i,hM=["POST","PUT"];t=Ue.prototype,t.Fa=function(c){this.H=c},t.ea=function(c,d,h,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():AI.g(),this.g.onreadystatechange=m(l(this.Ca,this));try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(b){KI(this,b);return}if(c=h||"",h=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var D in g)h.set(D,g[D]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let b of g.keys())h.set(b,g.get(b));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(h.keys()).find(b=>b.toLowerCase()=="content-type"),D=s.FormData&&c instanceof s.FormData,!(Array.prototype.indexOf.call(hM,d,void 0)>=0)||g||D||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[b,k]of h)this.g.setRequestHeader(b,k);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(b){KI(this,b)}};function KI(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.o=5,QI(c),Cu(c)}function QI(c){c.A||(c.A=!0,Tt(c,"complete"),Tt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,Tt(this,"complete"),Tt(this,"abort"),Cu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Cu(this,!0)),Ue.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?YI(this):this.Xa())},t.Xa=function(){YI(this)};function YI(c){if(c.h&&typeof o<"u"){if(c.v&&Lr(c)==4)setTimeout(c.Ca.bind(c),0);else if(Tt(c,"readystatechange"),Lr(c)==4){c.h=!1;try{let b=c.ca();e:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var h;if(!(h=d)){var g;if(g=b===0){let k=String(c.D).match(jI)[1]||null;!k&&s.self&&s.self.location&&(k=s.self.location.protocol.slice(0,-1)),g=!fM.test(k?k.toLowerCase():"")}h=g}if(h)Tt(c,"complete"),Tt(c,"success");else{c.o=6;try{var D=Lr(c)>2?c.g.statusText:""}catch{D=""}c.l=D+" ["+c.ca()+"]",QI(c)}}finally{Cu(c)}}}}function Cu(c,d){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);let h=c.g;c.g=null,d||Tt(c,"ready");try{h.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Lr(c){return c.g?c.g.readyState:0}t.ca=function(){try{return Lr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),GN(d)}};function JI(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function pM(c){let d={};c=(c.g&&Lr(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(_(c[g]))continue;var h=ZN(c[g]);let D=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let b=d[D]||[];d[D]=b,b.push(h)}BN(d,function(g){return g.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function da(c,d,h){return h&&h.internalChannelParams&&h.internalChannelParams[c]||d}function ZI(c){this.za=0,this.i=[],this.j=new ta,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=da("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=da("baseRetryDelayMs",5e3,c),this.Za=da("retryDelaySeedMs",1e4,c),this.Ta=da("forwardChannelMaxRetries",2,c),this.va=da("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new OI(c&&c.concurrentRequestLimit),this.Ba=new dM,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=ZI.prototype,t.ka=8,t.I=1,t.connect=function(c,d,h,g){Dt(0),this.W=c,this.H=d||{},h&&g!==void 0&&(this.H.OSID=h,this.H.OAID=g),this.F=this.X,this.J=aw(this,null,this.W),Su(this)};function up(c){if(XI(c),c.I==3){var d=c.V++,h=kn(c.J);if(Oe(h,"SID",c.M),Oe(h,"RID",d),Oe(h,"TYPE","terminate"),fa(c,h),d=new Pr(c,c.j,d),d.M=2,d.A=wu(kn(h)),h=!1,s.navigator&&s.navigator.sendBeacon)try{h=s.navigator.sendBeacon(d.A.toString(),"")}catch{}!h&&s.Image&&(new Image().src=d.A,h=!0),h||(d.g=cw(d.j,null),d.g.ea(d.A)),d.F=Date.now(),Iu(d)}sw(c)}function bu(c){c.g&&(dp(c),c.g.cancel(),c.g=null)}function XI(c){bu(c),c.v&&(s.clearTimeout(c.v),c.v=null),Au(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&s.clearTimeout(c.m),c.m=null)}function Su(c){if(!kI(c.h)&&!c.m){c.m=!0;var d=c.Ea;kt||v(),rt||(kt(),rt=!0),w.add(d,c),c.D=0}}function gM(c,d){return LI(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=d.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=ea(l(c.Ea,c,d),ow(c,c.D)),c.D++,!0)}t.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;let D=new Pr(this,this.j,c),b=this.o;if(this.U&&(b?(b=lI(b),fI(b,this.U)):b=this.U),this.u!==null||this.R||(D.J=b,b=null),this.S)e:{for(var d=0,h=0;h<this.i.length;h++){t:{var g=this.i[h];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,d>4096){d=h;break e}if(d===4096||h===this.i.length-1){d=h+1;break e}}d=1e3}else d=1e3;d=tw(this,D,d),h=kn(this.J),Oe(h,"RID",c),Oe(h,"CVER",22),this.G&&Oe(h,"X-HTTP-Session-Id",this.G),fa(this,h),b&&(this.R?d="headers="+na(WI(b))+"&"+d:this.u&&cp(h,this.u,b)),sp(this.h,D),this.Ra&&Oe(h,"TYPE","init"),this.S?(Oe(h,"$req",d),Oe(h,"SID","null"),D.U=!0,np(D,h,null)):np(D,h,d),this.I=2}}else this.I==3&&(c?ew(this,c):this.i.length==0||kI(this.h)||ew(this))};function ew(c,d){var h;d?h=d.l:h=c.V++;let g=kn(c.J);Oe(g,"SID",c.M),Oe(g,"RID",h),Oe(g,"AID",c.K),fa(c,g),c.u&&c.o&&cp(g,c.u,c.o),h=new Pr(c,c.j,h,c.D+1),c.u===null&&(h.J=c.o),d&&(c.i=d.G.concat(c.i)),d=tw(c,h,1e3),h.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),sp(c.h,h),np(h,g,d)}function fa(c,d){c.H&&mu(c.H,function(h,g){Oe(d,g,h)}),c.l&&mu({},function(h,g){Oe(d,g,h)})}function tw(c,d,h){h=Math.min(c.i.length,h);let g=c.l?l(c.l.Ka,c.l,c):null;e:{var D=c.i;let ie=-1;for(;;){let Je=["count="+h];ie==-1?h>0?(ie=D[0].g,Je.push("ofs="+ie)):ie=0:Je.push("ofs="+ie);let Me=!0;for(let it=0;it<h;it++){var b=D[it].g;let Ln=D[it].map;if(b-=ie,b<0)ie=Math.max(0,D[it].g-100),Me=!1;else try{b="req"+b+"_"||"";try{var k=Ln instanceof Map?Ln:Object.entries(Ln);for(let[Ci,Fr]of k){let Vr=Fr;a(Fr)&&(Vr=Jh(Fr)),Je.push(b+Ci+"="+encodeURIComponent(Vr))}}catch(Ci){throw Je.push(b+"type="+encodeURIComponent("_badmap")),Ci}}catch{g&&g(Ln)}}if(Me){k=Je.join("&");break e}}k=void 0}return c=c.i.splice(0,h),d.G=c,k}function nw(c){if(!c.g&&!c.v){c.Y=1;var d=c.Da;kt||v(),rt||(kt(),rt=!0),w.add(d,c),c.A=0}}function lp(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=ea(l(c.Da,c),ow(c,c.A)),c.A++,!0)}t.Da=function(){if(this.v=null,rw(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=ea(l(this.Wa,this),c)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Dt(10),bu(this),rw(this))};function dp(c){c.B!=null&&(s.clearTimeout(c.B),c.B=null)}function rw(c){c.g=new Pr(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var d=kn(c.na);Oe(d,"RID","rpc"),Oe(d,"SID",c.M),Oe(d,"AID",c.K),Oe(d,"CI",c.F?"0":"1"),!c.F&&c.ia&&Oe(d,"TO",c.ia),Oe(d,"TYPE","xmlhttp"),fa(c,d),c.u&&c.o&&cp(d,c.u,c.o),c.O&&(c.g.H=c.O);var h=c.g;c=c.ba,h.M=1,h.A=wu(kn(d)),h.u=null,h.R=!0,MI(h,c)}t.Va=function(){this.C!=null&&(this.C=null,bu(this),lp(this),Dt(19))};function Au(c){c.C!=null&&(s.clearTimeout(c.C),c.C=null)}function iw(c,d){var h=null;if(c.g==d){Au(c),dp(c),c.g=null;var g=2}else if(op(c.h,d))h=d.G,FI(c.h,d),g=1;else return;if(c.I!=0){if(d.o)if(g==1){h=d.u?d.u.length:0,d=Date.now()-d.F;var D=c.D;g=_u(),Tt(g,new bI(g,h)),Su(c)}else nw(c);else if(D=d.m,D==3||D==0&&d.X>0||!(g==1&&gM(c,d)||g==2&&lp(c)))switch(h&&h.length>0&&(d=c.h,d.i=d.i.concat(h)),D){case 1:Di(c,5);break;case 4:Di(c,10);break;case 3:Di(c,6);break;default:Di(c,2)}}}function ow(c,d){let h=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(h*=2),h*d}function Di(c,d){if(c.j.info("Error code "+d),d==2){var h=l(c.bb,c),g=c.Ua;let D=!g;g=new Or(g||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||ia(g,"https"),wu(g),D?uM(g.toString(),h):lM(g.toString(),h)}else Dt(2);c.I=0,c.l&&c.l.pa(d),sw(c),XI(c)}t.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Dt(2)):(this.j.info("Failed to ping google.com"),Dt(1))};function sw(c){if(c.I=0,c.ja=[],c.l){let d=VI(c.h);(d.length!=0||c.i.length!=0)&&(S(c.ja,d),S(c.ja,c.i),c.h.i.length=0,y(c.i),c.i.length=0),c.l.oa()}}function aw(c,d,h){var g=h instanceof Or?kn(h):new Or(h);if(g.g!="")d&&(g.g=d+"."+g.g),oa(g,g.u);else{var D=s.location;g=D.protocol,d=d?d+"."+D.hostname:D.hostname,D=+D.port;let b=new Or(null);g&&ia(b,g),d&&(b.g=d),D&&oa(b,D),h&&(b.h=h),g=b}return h=c.G,d=c.wa,h&&d&&Oe(g,h,d),Oe(g,"VER",c.ka),fa(c,g),g}function cw(c,d,h){if(d&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Aa&&!c.ma?new Ue(new Tu({ab:h})):new Ue(c.ma),d.Fa(c.L),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function uw(){}t=uw.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Ru(){}Ru.prototype.g=function(c,d){return new zt(c,d)};function zt(c,d){gt.call(this),this.g=new ZI(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(c?c["X-WebChannel-Client-Profile"]=d.sa:c={"X-WebChannel-Client-Profile":d.sa}),this.g.U=c,(c=d&&d.Qb)&&!_(c)&&(this.g.u=c),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!_(d)&&(this.g.G=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Do(this)}p(zt,gt),zt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},zt.prototype.close=function(){up(this.g)},zt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var h={};h.__data__=c,c=h}else this.v&&(h={},h.__data__=Jh(c),c=h);d.i.push(new tM(d.Ya++,c)),d.I==3&&Su(d)},zt.prototype.N=function(){this.g.l=null,delete this.j,up(this.g),delete this.g,zt.Z.N.call(this)};function lw(c){Zh.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let h in d){c=h;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}p(lw,Zh);function dw(){Xh.call(this),this.status=1}p(dw,Xh);function Do(c){this.g=c}p(Do,uw),Do.prototype.ra=function(){Tt(this.g,"a")},Do.prototype.qa=function(c){Tt(this.g,new lw(c))},Do.prototype.pa=function(c){Tt(this.g,new dw)},Do.prototype.oa=function(){Tt(this.g,"b")},Ru.prototype.createWebChannel=Ru.prototype.g,zt.prototype.send=zt.prototype.o,zt.prototype.open=zt.prototype.m,zt.prototype.close=zt.prototype.close,Iv=Tr.createWebChannelTransport=function(){return new Ru},Ev=Tr.getStatEventTarget=function(){return _u()},_v=Tr.Event=Ii,If=Tr.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Eu.NO_ERROR=0,Eu.TIMEOUT=8,Eu.HTTP_ERROR=6,Bc=Tr.ErrorCode=Eu,SI.COMPLETE="complete",vv=Tr.EventType=SI,wI.EventType=Zs,Zs.OPEN="a",Zs.CLOSE="b",Zs.ERROR="c",Zs.MESSAGE="d",gt.prototype.listen=gt.prototype.J,_s=Tr.WebChannel=wI,U2=Tr.FetchXmlHttpFactory=Tu,Ue.prototype.listenOnce=Ue.prototype.K,Ue.prototype.getLastError=Ue.prototype.Ha,Ue.prototype.getLastErrorCode=Ue.prototype.ya,Ue.prototype.getStatus=Ue.prototype.ca,Ue.prototype.getResponseJson=Ue.prototype.La,Ue.prototype.getResponseText=Ue.prototype.la,Ue.prototype.send=Ue.prototype.ea,Ue.prototype.setWithCredentials=Ue.prototype.Fa,yv=Tr.XhrIo=Ue}).apply(typeof Ef<"u"?Ef:typeof self<"u"?self:typeof window<"u"?window:{});var m0="@firebase/firestore",y0="4.9.2";var dt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};dt.UNAUTHENTICATED=new dt(null),dt.GOOGLE_CREDENTIALS=new dt("google-credentials-uid"),dt.FIRST_PARTY=new dt("first-party-uid"),dt.MOCK_USER=new dt("mock-user");var zs="12.3.0";var co=new ni("@firebase/firestore");function Es(){return co.logLevel}function F(t,...e){if(co.logLevel<=fe.DEBUG){let n=e.map(dE);co.debug(`Firestore (${zs}): ${t}`,...n)}}function Dr(t,...e){if(co.logLevel<=fe.ERROR){let n=e.map(dE);co.error(`Firestore (${zs}): ${t}`,...n)}}function Ns(t,...e){if(co.logLevel<=fe.WARN){let n=e.map(dE);co.warn(`Firestore (${zs}): ${t}`,...n)}}function dE(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function q(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,rA(t,r,n)}function rA(t,e,n){let r=`FIRESTORE (${zs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Dr(r),new Error(r)}function be(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||rA(e,i,r)}function ee(t,e){return t}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},V=class extends Xt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var tr=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Af=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Sv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(dt.UNAUTHENTICATED))}shutdown(){}},Av=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Rv=class{constructor(e){this.t=e,this.currentUser=dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){be(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new tr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new tr,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new tr)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(be(typeof r.accessToken=="string",31837,{l:r}),new Af(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return be(e===null||typeof e=="string",2055,{h:e}),new dt(e)}},Nv=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=dt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},Mv=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Nv(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Rf=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},xv=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,tn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){be(this.o===void 0,3512);let r=o=>{o.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,F("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Rf(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(be(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Rf(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function B2(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Wc=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=B2(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function pe(t,e){return t<e?-1:t>e?1:0}function Pv(t,e){let n=Math.min(t.length,e.length);for(let r=0;r<n;r++){let i=t.charAt(r),o=e.charAt(r);if(i!==o)return wv(i)===wv(o)?pe(i,o):wv(i)?1:-1}return pe(t.length,e.length)}var $2=55296,H2=57343;function wv(t){let e=t.charCodeAt(0);return e>=$2&&e<=H2}function Ms(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var v0="__name__",Nf=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&q(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&q(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return pe(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):Pv(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return wr.fromString(e.substring(4,e.length-2))}},je=class t extends Nf{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new V(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},z2=/^[_a-zA-Z][_a-zA-Z0-9]*$/,nn=class t extends Nf{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return z2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===v0}static keyField(){return new t([v0])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new V(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new V(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new V(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new V(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var $=class t{constructor(e){this.path=e}static fromPath(e){return new t(je.fromString(e))}static fromName(e){return new t(je.fromString(e).popFirst(5))}static empty(){return new t(je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return je.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new je(e.slice()))}};function iA(t,e,n){if(!n)throw new V(N.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function q2(t,e,n,r){if(e===!0&&r===!0)throw new V(N.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function _0(t){if(!$.isDocumentKey(t))throw new V(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function E0(t){if($.isDocumentKey(t))throw new V(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function oA(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function fE(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":q(12329,{type:typeof t})}function Kc(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new V(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=fE(t);throw new V(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Qe(t,e){let n={typeString:t};return e&&(n.value=e),n}function su(t,e){if(!oA(t))throw new V(N.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new V(N.INVALID_ARGUMENT,n);return!0}var I0=-62135596800,w0=1e6,Ye=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*w0);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new V(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new V(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<I0)throw new V(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new V(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/w0}_compareTo(e){return this.seconds===e.seconds?pe(this.nanoseconds,e.nanoseconds):pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(su(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-I0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Ye._jsonSchemaVersion="firestore/timestamp/1.0",Ye._jsonSchema={type:Qe("string",Ye._jsonSchemaVersion),seconds:Qe("number"),nanoseconds:Qe("number")};var ne=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new Ye(0,0))}static max(){return new t(new Ye(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Qc=-1,Ov=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};Ov.UNKNOWN_ID=-1;function G2(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ne.fromTimestamp(r===1e9?new Ye(n+1,0):new Ye(n,r));return new uo(i,$.empty(),e)}function W2(t){return new uo(t.readTime,t.key,Qc)}var uo=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(ne.min(),$.empty(),Qc)}static max(){return new t(ne.max(),$.empty(),Qc)}};function K2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=$.comparator(t.documentKey,e.documentKey),n!==0?n:pe(t.largestBatchId,e.largestBatchId))}var Q2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",kv=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function qs(t){if(t.code!==N.FAILED_PRECONDITION||t.message!==Q2)throw t;F("LocalStore","Unexpectedly lost primary lease")}var x=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&q(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(f=>{s[l]=f,++a,a===o&&r(s)},f=>i(f))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function Y2(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Gs(t){return t.name==="IndexedDbTransactionError"}var hE=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ue&&this.ue(n),n}}t.ce=-1;return t})(),pE=-1;function ih(t){return t==null}function Yc(t){return t===0&&1/t==-1/0}function J2(t){return typeof t=="number"&&Number.isInteger(t)&&!Yc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var sA="";function Z2(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=T0(e)),e=X2(t.get(n),e);return T0(e)}function X2(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case sA:n+="";break;default:n+=o}}return n}function T0(t){return t+sA+""}var ej="remoteDocuments",aA="owner";var cA="mutationQueues";var uA="mutations";var lA="documentMutations",tj="remoteDocumentsV14";var dA="remoteDocumentGlobal";var fA="targets";var hA="targetDocuments";var pA="targetGlobal",gA="collectionParents";var mA="clientMetadata";var yA="bundles";var vA="namedQueries";var nj="indexConfiguration";var rj="indexState";var ij="indexEntries";var _A="documentOverlays";var oj="globals";var sj=[cA,uA,lA,ej,fA,aA,pA,hA,mA,dA,gA,yA,vA],yX=[...sj,_A],aj=[cA,uA,lA,tj,fA,aA,pA,hA,mA,dA,gA,yA,vA,_A],cj=aj,uj=[...cj,nj,rj,ij];var vX=[...uj,oj];function D0(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function mo(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function EA(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var $e=class t{constructor(e,n){this.comparator=e,this.root=n||nr.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,nr.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ds(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ds(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ds(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ds(this.root,e,this.comparator,!0)}},Ds=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},nr=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw q(43730,{key:this.key,value:this.value});if(this.right.isRed())throw q(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw q(27949);return e+(this.isRed()?0:1)}};nr.EMPTY=null,nr.RED=!0,nr.BLACK=!1;nr.EMPTY=new class{constructor(){this.size=0}get key(){throw q(57766)}get value(){throw q(16141)}get color(){throw q(16727)}get left(){throw q(29726)}get right(){throw q(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new nr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ft=class t{constructor(e){this.comparator=e,this.data=new $e(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Mf(this.data.getIterator())}getIteratorFrom(e){return new Mf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Mf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var er=class t{constructor(e){this.fields=e,e.sort(nn.comparator)}static empty(){return new t([])}unionWith(e){let n=new ft(nn.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ms(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var xf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var It=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new xf("Invalid base64 string: "+o):o}})(e);return new t(n)}static fromUint8Array(e){let n=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};It.EMPTY_BYTE_STRING=new It("");var lj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cr(t){if(be(!!t,39018),typeof t=="string"){let e=0,n=lj.exec(t);if(be(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ve(t.seconds),nanos:Ve(t.nanos)}}function Ve(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function br(t){return typeof t=="string"?It.fromBase64String(t):It.fromUint8Array(t)}var IA="server_timestamp",wA="__type__",TA="__previous_value__",DA="__local_write_time__";function gE(t){return(t?.mapValue?.fields||{})[wA]?.stringValue===IA}function oh(t){let e=t.mapValue.fields[TA];return gE(e)?oh(e):e}function Jc(t){let e=Cr(t.mapValue.fields[DA].timestampValue);return new Ye(e.seconds,e.nanos)}var Lv=class{constructor(e,n,r,i,o,s,a,u,l,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=f}},Pf="(default)",Of=class t{constructor(e,n){this.projectId=e,this.database=n||Pf}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===Pf}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var mE="__type__",CA="__max__",wf={mapValue:{fields:{__type__:{stringValue:CA}}}},yE="__vector__",xs="value";function di(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?gE(t)?4:SA(t)?9007199254740991:bA(t)?10:11:q(28295,{value:t})}function or(t,e){if(t===e)return!0;let n=di(t);if(n!==di(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Jc(t).isEqual(Jc(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Cr(i.timestampValue),a=Cr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,o){return br(i.bytesValue).isEqual(br(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,o){return Ve(i.geoPointValue.latitude)===Ve(o.geoPointValue.latitude)&&Ve(i.geoPointValue.longitude)===Ve(o.geoPointValue.longitude)})(t,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Ve(i.integerValue)===Ve(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ve(i.doubleValue),a=Ve(o.doubleValue);return s===a?Yc(s)===Yc(a):isNaN(s)&&isNaN(a)}return!1})(t,e);case 9:return Ms(t.arrayValue.values||[],e.arrayValue.values||[],or);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(D0(s)!==D0(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!or(s[u],a[u])))return!1;return!0})(t,e);default:return q(52216,{left:t})}}function Zc(t,e){return(t.values||[]).find(n=>or(n,e))!==void 0}function Ps(t,e){if(t===e)return 0;let n=di(t),r=di(e);if(n!==r)return pe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return pe(t.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=Ve(o.integerValue||o.doubleValue),u=Ve(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1})(t,e);case 3:return C0(t.timestampValue,e.timestampValue);case 4:return C0(Jc(t),Jc(e));case 5:return Pv(t.stringValue,e.stringValue);case 6:return(function(o,s){let a=br(o),u=br(s);return a.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let f=pe(a[l],u[l]);if(f!==0)return f}return pe(a.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=pe(Ve(o.latitude),Ve(s.latitude));return a!==0?a:pe(Ve(o.longitude),Ve(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return b0(t.arrayValue,e.arrayValue);case 10:return(function(o,s){let a=o.fields||{},u=s.fields||{},l=a[xs]?.arrayValue,f=u[xs]?.arrayValue,p=pe(l?.values?.length||0,f?.values?.length||0);return p!==0?p:b0(l,f)})(t.mapValue,e.mapValue);case 11:return(function(o,s){if(o===wf.mapValue&&s===wf.mapValue)return 0;if(o===wf.mapValue)return 1;if(s===wf.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},f=Object.keys(l);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){let m=Pv(u[p],f[p]);if(m!==0)return m;let y=Ps(a[u[p]],l[f[p]]);if(y!==0)return y}return pe(u.length,f.length)})(t.mapValue,e.mapValue);default:throw q(23264,{he:n})}}function C0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return pe(t,e);let n=Cr(t),r=Cr(e),i=pe(n.seconds,r.seconds);return i!==0?i:pe(n.nanos,r.nanos)}function b0(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=Ps(n[i],r[i]);if(o)return o}return pe(n.length,r.length)}function Os(t){return Fv(t)}function Fv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){let r=Cr(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return br(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return $.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=Fv(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Fv(n.fields[s])}`;return i+"}"})(t.mapValue):q(61005,{value:t})}function Cf(t){switch(di(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=oh(t);return e?16+Cf(e):16;case 5:return 2*t.stringValue.length;case 6:return br(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+Cf(o),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return mo(r.fields,(o,s)=>{i+=o.length+Cf(s)}),i})(t.mapValue);default:throw q(13486,{value:t})}}function Vv(t){return!!t&&"integerValue"in t}function vE(t){return!!t&&"arrayValue"in t}function S0(t){return!!t&&"nullValue"in t}function A0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function bf(t){return!!t&&"mapValue"in t}function bA(t){return(t?.mapValue?.fields||{})[mE]?.stringValue===yE}function Hc(t){if(t.geoPointValue)return{geoPointValue:M({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:M({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return mo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Hc(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Hc(t.arrayValue.values[n]);return e}return M({},t)}function SA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===CA}var EX={mapValue:{fields:{[mE]:{stringValue:yE},[xs]:{arrayValue:{}}}}};var Pn=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!bf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hc(n)}setAll(e){let n=nn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=Hc(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());bf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return or(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];bf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){mo(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(Hc(this.value))}};function AA(t){let e=[];return mo(t.fields,(n,r)=>{let i=new nn([n]);if(bf(r)){let o=AA(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new er(e)}var On=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,ne.min(),ne.min(),ne.min(),Pn.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,ne.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,ne.min(),ne.min(),Pn.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,ne.min(),ne.min(),Pn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ks=class{constructor(e,n){this.position=e,this.inclusive=n}};function R0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=$.comparator($.fromName(s.referenceValue),n.key):r=Ps(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function N0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!or(t.position[n],e.position[n]))return!1;return!0}var Ls=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function dj(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var kf=class{},nt=class t extends kf{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Uv(e,n,r):n==="array-contains"?new Hv(e,r):n==="in"?new zv(e,r):n==="not-in"?new qv(e,r):n==="array-contains-any"?new Gv(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Bv(e,r):new $v(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ps(n,this.value)):n!==null&&di(this.value)===di(n)&&this.matchesComparison(Ps(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return q(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},sr=class t extends kf{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new t(e,n)}matches(e){return RA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function RA(t){return t.op==="and"}function NA(t){return fj(t)&&RA(t)}function fj(t){for(let e of t.filters)if(e instanceof sr)return!1;return!0}function jv(t){if(t instanceof nt)return t.field.canonicalString()+t.op.toString()+Os(t.value);if(NA(t))return t.filters.map(e=>jv(e)).join(",");{let e=t.filters.map(n=>jv(n)).join(",");return`${t.op}(${e})`}}function MA(t,e){return t instanceof nt?(function(r,i){return i instanceof nt&&r.op===i.op&&r.field.isEqual(i.field)&&or(r.value,i.value)})(t,e):t instanceof sr?(function(r,i){return i instanceof sr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&MA(s,i.filters[a]),!0):!1})(t,e):void q(19439)}function xA(t){return t instanceof nt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Os(n.value)}`})(t):t instanceof sr?(function(n){return n.op.toString()+" {"+n.getFilters().map(xA).join(" ,")+"}"})(t):"Filter"}var Uv=class extends nt{constructor(e,n,r){super(e,n,r),this.key=$.fromName(r.referenceValue)}matches(e){let n=$.comparator(e.key,this.key);return this.matchesComparison(n)}},Bv=class extends nt{constructor(e,n){super(e,"in",n),this.keys=PA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},$v=class extends nt{constructor(e,n){super(e,"not-in",n),this.keys=PA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function PA(t,e){return(e.arrayValue?.values||[]).map(n=>$.fromName(n.referenceValue))}var Hv=class extends nt{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return vE(n)&&Zc(n.arrayValue,this.value)}},zv=class extends nt{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Zc(this.value.arrayValue,n)}},qv=class extends nt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Zc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Zc(this.value.arrayValue,n)}},Gv=class extends nt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!vE(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Zc(this.value.arrayValue,r))}};var Wv=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Te=null}};function M0(t,e=null,n=[],r=[],i=null,o=null,s=null){return new Wv(t,e,n,r,i,o,s)}function _E(t){let e=ee(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>jv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),ih(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Os(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Os(r)).join(",")),e.Te=n}return e.Te}function EE(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!dj(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!MA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!N0(t.startAt,e.startAt)&&N0(t.endAt,e.endAt)}function Kv(t){return $.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Fs=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function hj(t,e,n,r,i,o,s,a){return new Fs(t,e,n,r,i,o,s,a)}function OA(t){return new Fs(t)}function x0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function pj(t){return t.collectionGroup!==null}function zc(t){let e=ee(t);if(e.Ie===null){e.Ie=[];let n=new Set;for(let o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new ft(nn.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Ls(o,r))}),n.has(nn.keyField().canonicalString())||e.Ie.push(new Ls(nn.keyField(),r))}return e.Ie}function rr(t){let e=ee(t);return e.Ee||(e.Ee=gj(e,zc(t))),e.Ee}function gj(t,e){if(t.limitType==="F")return M0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Ls(i.field,o)});let n=t.endAt?new ks(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ks(t.startAt.position,t.startAt.inclusive):null;return M0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Qv(t,e,n){return new Fs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function sh(t,e){return EE(rr(t),rr(e))&&t.limitType===e.limitType}function kA(t){return`${_E(rr(t))}|lt:${t.limitType}`}function Is(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>xA(i)).join(", ")}]`),ih(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Os(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Os(i)).join(",")),`Target(${r})`})(rr(t))}; limitType=${t.limitType})`}function ah(t,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):$.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,i){for(let o of zc(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,u){let l=R0(s,a,u);return s.inclusive?l<=0:l<0})(r.startAt,zc(r),i)||r.endAt&&!(function(s,a,u){let l=R0(s,a,u);return s.inclusive?l>=0:l>0})(r.endAt,zc(r),i))})(t,e)}function mj(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function LA(t){return(e,n)=>{let r=!1;for(let i of zc(t)){let o=yj(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function yj(t,e,n){let r=t.field.isKeyField()?$.comparator(e.key,n.key):(function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?Ps(u,l):q(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return q(19790,{direction:t.dir})}}var Sr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){mo(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return EA(this.inner)}size(){return this.innerSize}};var vj=new $e($.comparator);function Ar(){return vj}var FA=new $e($.comparator);function $c(...t){let e=FA;for(let n of t)e=e.insert(n.key,n);return e}function VA(t){let e=FA;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function so(){return qc()}function jA(){return qc()}function qc(){return new Sr(t=>t.toString(),(t,e)=>t.isEqual(e))}var _j=new $e($.comparator),Ej=new ft($.comparator);function ge(...t){let e=Ej;for(let n of t)e=e.add(n);return e}var Ij=new ft(pe);function wj(){return Ij}function IE(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yc(e)?"-0":e}}function UA(t){return{integerValue:""+t}}function Tj(t,e){return J2(e)?UA(e):IE(t,e)}var Vs=class{constructor(){this._=void 0}};function Dj(t,e,n){return t instanceof lo?(function(i,o){let s={fields:{[wA]:{stringValue:IA},[DA]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&gE(o)&&(o=oh(o)),o&&(s.fields[TA]=o),{mapValue:s}})(n,e):t instanceof fo?$A(t,e):t instanceof ho?HA(t,e):(function(i,o){let s=BA(i,o),a=P0(s)+P0(i.Ae);return Vv(s)&&Vv(i.Ae)?UA(a):IE(i.serializer,a)})(t,e)}function Cj(t,e,n){return t instanceof fo?$A(t,e):t instanceof ho?HA(t,e):n}function BA(t,e){return t instanceof js?(function(r){return Vv(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var lo=class extends Vs{},fo=class extends Vs{constructor(e){super(),this.elements=e}};function $A(t,e){let n=zA(e);for(let r of t.elements)n.some(i=>or(i,r))||n.push(r);return{arrayValue:{values:n}}}var ho=class extends Vs{constructor(e){super(),this.elements=e}};function HA(t,e){let n=zA(e);for(let r of t.elements)n=n.filter(i=>!or(i,r));return{arrayValue:{values:n}}}var js=class extends Vs{constructor(e,n){super(),this.serializer=e,this.Ae=n}};function P0(t){return Ve(t.integerValue||t.doubleValue)}function zA(t){return vE(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Yv=class{constructor(e,n){this.field=e,this.transform=n}};function bj(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof fo&&i instanceof fo||r instanceof ho&&i instanceof ho?Ms(r.elements,i.elements,or):r instanceof js&&i instanceof js?or(r.Ae,i.Ae):r instanceof lo&&i instanceof lo})(t.transform,e.transform)}var Jv=class{constructor(e,n){this.version=e,this.transformResults=n}},si=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Sf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Us=class{};function qA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Xc(t.key,si.none()):new po(t.key,t.data,si.none());{let n=t.data,r=Pn.empty(),i=new ft(nn.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Rr(t.key,r,new er(i.toArray()),si.none())}}function Sj(t,e,n){t instanceof po?(function(i,o,s){let a=i.value.clone(),u=k0(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(t,e,n):t instanceof Rr?(function(i,o,s){if(!Sf(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=k0(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(GA(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(t,e,n):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function Gc(t,e,n,r){return t instanceof po?(function(o,s,a,u){if(!Sf(o.precondition,s))return a;let l=o.value.clone(),f=L0(o.fieldTransforms,u,s);return l.setAll(f),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(t,e,n,r):t instanceof Rr?(function(o,s,a,u){if(!Sf(o.precondition,s))return a;let l=L0(o.fieldTransforms,u,s),f=s.data;return f.setAll(GA(o)),f.setAll(l),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(t,e,n,r):(function(o,s,a){return Sf(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(t,e,n)}function Aj(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=BA(r.transform,i||null);o!=null&&(n===null&&(n=Pn.empty()),n.set(r.field,o))}return n||null}function O0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ms(r,i,(o,s)=>bj(o,s))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var po=class extends Us{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Rr=class extends Us{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function GA(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function k0(t,e,n){let r=new Map;be(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Cj(s,a,n[i]))}return r}function L0(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,Dj(o,s,e))}return r}var Xc=class extends Us{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Zv=class extends Us{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Xv=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&Sj(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Gc(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Gc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=jA();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let u=qA(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(ne.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ge())}isEqual(e){return this.batchId===e.batchId&&Ms(this.mutations,e.mutations,(n,r)=>O0(n,r))&&Ms(this.baseMutations,e.baseMutations,(n,r)=>O0(n,r))}},e_=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){be(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return _j})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var t_=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var n_=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var We,ye;function Rj(t){switch(t){case N.OK:return q(64938);case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0;default:return q(15467,{code:t})}}function WA(t){if(t===void 0)return Dr("GRPC error has no .code"),N.UNKNOWN;switch(t){case We.OK:return N.OK;case We.CANCELLED:return N.CANCELLED;case We.UNKNOWN:return N.UNKNOWN;case We.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case We.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case We.INTERNAL:return N.INTERNAL;case We.UNAVAILABLE:return N.UNAVAILABLE;case We.UNAUTHENTICATED:return N.UNAUTHENTICATED;case We.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case We.NOT_FOUND:return N.NOT_FOUND;case We.ALREADY_EXISTS:return N.ALREADY_EXISTS;case We.PERMISSION_DENIED:return N.PERMISSION_DENIED;case We.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case We.ABORTED:return N.ABORTED;case We.OUT_OF_RANGE:return N.OUT_OF_RANGE;case We.UNIMPLEMENTED:return N.UNIMPLEMENTED;case We.DATA_LOSS:return N.DATA_LOSS;default:return q(39323,{code:t})}}(ye=We||(We={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";var Nj=null;function Mj(){return new TextEncoder}var xj=new wr([4294967295,4294967295],0);function F0(t){let e=Mj().encode(t),n=new mv;return n.update(e),new Uint8Array(n.digest())}function V0(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new wr([n,r],0),new wr([i,o],0)]}var r_=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ao(`Invalid padding: ${n}`);if(r<0)throw new ao(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ao(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ao(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=wr.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(wr.fromNumber(r)));return i.compare(xj)===1&&(i=new wr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let n=F0(e),[r,i]=V0(n);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.ge===0)return;let n=F0(e),[r,i]=V0(n);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);this.Se(s)}}Se(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},ao=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Lf=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,eu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(ne.min(),i,new $e(pe),Ar(),ge())}},eu=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,ge(),ge(),ge())}};var bs=class{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}},Ff=class{constructor(e,n){this.targetId=e,this.Ce=n}},Vf=class{constructor(e,n,r=It.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},jf=class{constructor(){this.ve=0,this.Fe=j0(),this.Me=It.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ge(),n=ge(),r=ge();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:q(38017,{changeType:o})}}),new eu(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=j0()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,be(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},i_=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ar(),this.Je=Tf(),this.He=Tf(),this.Ye=new $e(pe)}Ze(e){for(let n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(let n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{let r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:q(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){let n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){let o=i.target;if(Kv(o))if(r===0){let s=new $(o.path);this.et(n,s,On.newNoDocument(s,ne.min()))}else be(r===1,20013,{expectedCount:r});else{let s=this._t(n);if(s!==r){let a=this.ut(e),u=a?this.ct(a,e,s):1;if(u!==0){this.it(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,l)}Nj?.lt((function(f,p,m,y,S){let A={localCacheCount:f,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},R=p.unchangedNames;return R&&(A.bloomFilter={applied:S===0,hashCount:R?.hashCount??0,bitmapLength:R?.bits?.bitmap?.length??0,padding:R?.bits?.padding??0,mightContain:L=>y?.mightContain(L)??!1}),A})(s,e.Ce,this.Ge.ht(),a,u))}}}}ut(e){let n=e.Ce.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=br(r).toUint8Array()}catch(u){if(u instanceof xf)return Ns("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new r_(s,i,o)}catch(u){return Ns(u instanceof ao?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){let r=this.Ge.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Ge.ht(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.et(n,o,null),i++)}),i}Tt(e){let n=new Map;this.ze.forEach((o,s)=>{let a=this.ot(s);if(a){if(o.current&&Kv(a.target)){let u=new $(a.target.path);this.It(u).has(s)||this.Et(s,u)||this.et(s,u,On.newNoDocument(u,e))}o.Be&&(n.set(s,o.ke()),o.qe())}});let r=ge();this.He.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.ot(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.je.forEach((o,s)=>s.setReadTime(e));let i=new Lf(e,n,this.Ye,this.je,r);return this.je=Ar(),this.Je=Tf(),this.He=Tf(),this.Ye=new $e(pe),i}Xe(e,n){if(!this.rt(e))return;let r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){let n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new jf,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new ft(pe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new ft(pe),this.Je=this.Je.insert(e,n)),n}rt(e){let n=this.ot(e)!==null;return n||F("WatchChangeAggregator","Detected inactive target",e),n}ot(e){let n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new jf),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}};function Tf(){return new $e($.comparator)}function j0(){return new $e($.comparator)}var Pj={asc:"ASCENDING",desc:"DESCENDING"},Oj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kj={and:"AND",or:"OR"},o_=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function s_(t,e){return t.useProto3Json||ih(e)?e:{value:e}}function Uf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function KA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Lj(t,e){return Uf(t,e.toTimestamp())}function ir(t){return be(!!t,49232),ne.fromTimestamp((function(n){let r=Cr(n);return new Ye(r.seconds,r.nanos)})(t))}function wE(t,e){return a_(t,e).canonicalString()}function a_(t,e){let n=(function(i){return new je(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function QA(t){let e=je.fromString(t);return be(eR(e),10190,{key:e.toString()}),e}function c_(t,e){return wE(t.databaseId,e.path)}function Tv(t,e){let n=QA(e);if(n.get(1)!==t.databaseId.projectId)throw new V(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new V(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new $(JA(n))}function YA(t,e){return wE(t.databaseId,e)}function Fj(t){let e=QA(t);return e.length===4?je.emptyPath():JA(e)}function u_(t){return new je(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function JA(t){return be(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function U0(t,e,n){return{name:c_(t,e),fields:n.value.mapValue.fields}}function Vj(t,e){let n;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:q(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,f){return l.useProto3Json?(be(f===void 0||typeof f=="string",58123),It.fromBase64String(f||"")):(be(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),It.fromUint8Array(f||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(l){let f=l.code===void 0?N.UNKNOWN:WA(l.code);return new V(f,l.message||"")})(s);n=new Vf(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Tv(t,r.document.name),o=ir(r.document.updateTime),s=r.document.createTime?ir(r.document.createTime):ne.min(),a=new Pn({mapValue:{fields:r.document.fields}}),u=On.newFoundDocument(i,o,s,a),l=r.targetIds||[],f=r.removedTargetIds||[];n=new bs(l,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Tv(t,r.document),o=r.readTime?ir(r.readTime):ne.min(),s=On.newNoDocument(i,o),a=r.removedTargetIds||[];n=new bs([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Tv(t,r.document),o=r.removedTargetIds||[];n=new bs([],o,i,null)}else{if(!("filter"in e))return q(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new n_(i,o),a=r.targetId;n=new Ff(a,s)}}return n}function jj(t,e){let n;if(e instanceof po)n={update:U0(t,e.key,e.value)};else if(e instanceof Xc)n={delete:c_(t,e.key)};else if(e instanceof Rr)n={update:U0(t,e.key,e.data),updateMask:Kj(e.fieldMask)};else{if(!(e instanceof Zv))return q(16599,{Vt:e.type});n={verify:c_(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof lo)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof fo)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ho)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof js)return{fieldPath:s.field.canonicalString(),increment:a.Ae};throw q(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(n.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:Lj(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:q(27497)})(t,e.precondition)),n}function Uj(t,e){return t&&t.length>0?(be(e!==void 0,14353),t.map(n=>(function(i,o){let s=i.updateTime?ir(i.updateTime):ir(o);return s.isEqual(ne.min())&&(s=ir(o)),new Jv(s,i.transformResults||[])})(n,e))):[]}function Bj(t,e){return{documents:[YA(t,e.path)]}}function $j(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=YA(t,i);let o=(function(l){if(l.length!==0)return XA(sr.create(l,"and"))})(e.filters);o&&(n.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(f=>(function(m){return{field:ws(m.field),direction:qj(m.dir)}})(f))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=s_(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{ft:n,parent:i}}function Hj(t){let e=Fj(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){be(r===1,65062);let f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let o=[];n.where&&(o=(function(p){let m=ZA(p);return m instanceof sr&&NA(m)?m.getFilters():[m]})(n.where));let s=[];n.orderBy&&(s=(function(p){return p.map(m=>(function(S){return new Ls(Ts(S.field),(function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(m))})(n.orderBy));let a=null;n.limit&&(a=(function(p){let m;return m=typeof p=="object"?p.value:p,ih(m)?null:m})(n.limit));let u=null;n.startAt&&(u=(function(p){let m=!!p.before,y=p.values||[];return new ks(y,m)})(n.startAt));let l=null;return n.endAt&&(l=(function(p){let m=!p.before,y=p.values||[];return new ks(y,m)})(n.endAt)),hj(e,i,s,o,a,"F",u,l)}function zj(t,e){let n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return q(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ZA(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Ts(n.unaryFilter.field);return nt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ts(n.unaryFilter.field);return nt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Ts(n.unaryFilter.field);return nt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Ts(n.unaryFilter.field);return nt.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return q(61313);default:return q(60726)}})(t):t.fieldFilter!==void 0?(function(n){return nt.create(Ts(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return q(58110);default:return q(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return sr.create(n.compositeFilter.filters.map(r=>ZA(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return q(1026)}})(n.compositeFilter.op))})(t):q(30097,{filter:t})}function qj(t){return Pj[t]}function Gj(t){return Oj[t]}function Wj(t){return kj[t]}function ws(t){return{fieldPath:t.canonicalString()}}function Ts(t){return nn.fromServerFormat(t.fieldPath)}function XA(t){return t instanceof nt?(function(n){if(n.op==="=="){if(A0(n.value))return{unaryFilter:{field:ws(n.field),op:"IS_NAN"}};if(S0(n.value))return{unaryFilter:{field:ws(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(A0(n.value))return{unaryFilter:{field:ws(n.field),op:"IS_NOT_NAN"}};if(S0(n.value))return{unaryFilter:{field:ws(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ws(n.field),op:Gj(n.op),value:n.value}}})(t):t instanceof sr?(function(n){let r=n.getFilters().map(i=>XA(i));return r.length===1?r[0]:{compositeFilter:{op:Wj(n.op),filters:r}}})(t):q(54877,{filter:t})}function Kj(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function eR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var tu=class t{constructor(e,n,r,i,o=ne.min(),s=ne.min(),a=It.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var l_=class{constructor(e){this.yt=e}};function Qj(t){let e=Hj({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Qv(e,e.limit,"L"):e}var Bf=class{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(Ve(e.integerValue));else if("doubleValue"in e){let r=Ve(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Yc(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=Cr(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(br(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?SA(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):bA(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):q(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){let r=e.fields||{};this.Ft(n,55);for(let i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){let r=e.fields||{};this.Ft(n,53);let i=xs,o=r[i].arrayValue?.values?.length||0;this.Ft(n,15),n.Mt(Ve(o)),this.Ot(i,n),this.Ct(r[i],n)}Qt(e,n){let r=e.values||[];this.Ft(n,50);for(let i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),$.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}};Bf.Kt=new Bf;var d_=class{constructor(){this.Cn=new f_}addToCollectionParentIndex(e,n){return this.Cn.add(n),x.resolve()}getCollectionParents(e,n){return x.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return x.resolve()}deleteFieldIndex(e,n){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,n){return x.resolve()}getDocumentsMatchingTarget(e,n){return x.resolve(null)}getIndexType(e,n){return x.resolve(0)}getFieldIndexes(e,n){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,n){return x.resolve(uo.min())}getMinOffsetFromCollectionGroup(e,n){return x.resolve(uo.min())}updateCollectionGroup(e,n,r){return x.resolve()}updateIndexEntries(e,n){return x.resolve()}},f_=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ft(je.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ft(je.comparator)).toArray()}};var IX=new Uint8Array(0);var B0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},tR=41943040,pn=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};pn.DEFAULT_COLLECTION_PERCENTILE=10,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,pn.DEFAULT=new pn(tR,pn.DEFAULT_COLLECTION_PERCENTILE,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),pn.DISABLED=new pn(-1,0,0);var nu=class t{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new t(0)}static cr(){return new t(-1)}};var $0="LruGarbageCollector",Yj=1048576;function H0([t,e],[n,r]){let i=pe(t,n);return i===0?pe(e,r):i}var h_=class{constructor(e){this.Ir=e,this.buffer=new ft(H0),this.Er=0}dr(){return++this.Er}Ar(e){let n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();H0(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},p_=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){F($0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Gs(n)?F($0,"Ignoring IndexedDB error during garbage collection: ",n):await qs(n)}await this.Vr(3e5)})}},g_=class{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return x.resolve(hE.ce);let r=new h_(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(F("LruGarbageCollector","Garbage collection skipped; disabled"),x.resolve(B0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(F("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),B0):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,o,s,a,u,l,f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(F("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Es()<=fe.DEBUG&&F("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-f}ms`),x.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function Jj(t,e){return new g_(t,e)}var m_=class{constructor(){this.changes=new Sr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,On.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?x.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var y_=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var v_=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Gc(r.mutation,i,er.empty(),Ye.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ge()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ge()){let i=so();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=$c();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=so();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ge()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=Ar(),s=qc(),a=(function(){return qc()})();return n.forEach((u,l)=>{let f=r.get(l.key);i.has(l.key)&&(f===void 0||f.mutation instanceof Rr)?o=o.insert(l.key,l):f!==void 0?(s.set(l.key,f.mutation.getFieldMask()),Gc(f.mutation,l,f.mutation.getFieldMask(),Ye.now())):s.set(l.key,er.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,f)=>s.set(l,f)),n.forEach((l,f)=>a.set(l,new y_(f,s.get(l)??null))),a))}recalculateAndSaveOverlays(e,n){let r=qc(),i=new $e((s,a)=>s-a),o=ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let f=r.get(u)||er.empty();f=a.applyToLocalView(l,f),r.set(u,f);let p=(i.get(a.batchId)||ge()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,f=u.value,p=jA();f.forEach(m=>{if(!o.has(m)){let y=qA(n.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return x.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return(function(s){return $.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):pj(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):x.resolve(so()),a=Qc,u=o;return s.next(l=>x.forEach(l,(f,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(f)?x.resolve():this.remoteDocumentCache.getEntry(e,f).next(m=>{u=u.insert(f,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,ge())).next(f=>({batchId:a,changes:VA(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new $(n)).next(r=>{let i=$c();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=$c();return this.indexManager.getCollectionParents(e,o).next(a=>x.forEach(a,u=>{let l=(function(p,m){return new Fs(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(f=>{f.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let f=l.getKey();s.get(f)===null&&(s=s.insert(f,On.newInvalidDocument(f)))});let a=$c();return s.forEach((u,l)=>{let f=o.get(u);f!==void 0&&Gc(f.mutation,l,er.empty(),Ye.now()),ah(n,l)&&(a=a.insert(u,l))}),a})}};var __=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return x.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:ir(i.createTime)}})(n)),x.resolve()}getNamedQuery(e,n){return x.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:Qj(i.bundledQuery),readTime:ir(i.readTime)}})(n)),x.resolve()}};var E_=class{constructor(){this.overlays=new $e($.comparator),this.qr=new Map}getOverlay(e,n){return x.resolve(this.overlays.get(n))}getOverlays(e,n){let r=so();return x.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.St(e,n,o)}),x.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),x.resolve()}getOverlaysForCollection(e,n,r){let i=so(),o=n.length+1,s=new $(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return x.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new $e((l,f)=>l-f),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let f=o.get(l.largestBatchId);f===null&&(f=so(),o=o.insert(l.largestBatchId,f)),f.set(l.getKey(),l)}}let a=so(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,f)=>a.set(l,f)),!(a.size()>=i)););return x.resolve(a)}St(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new t_(n,r));let o=this.qr.get(n);o===void 0&&(o=ge(),this.qr.set(n,o)),this.qr.set(n,o.add(r.key))}};var I_=class{constructor(){this.sessionToken=It.EMPTY_BYTE_STRING}getSessionToken(e){return x.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,x.resolve()}};var ru=class{constructor(){this.Qr=new ft(Ke.$r),this.Ur=new ft(Ke.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){let r=new Ke(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Ke(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){let n=new $(new je([])),r=new Ke(n,e),i=new Ke(n,e+1),o=[];return this.Ur.forEachInRange([r,i],s=>{this.Gr(s),o.push(s.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let n=new $(new je([])),r=new Ke(n,e),i=new Ke(n,e+1),o=ge();return this.Ur.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new Ke(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Ke=class{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return $.comparator(e.key,n.key)||pe(e.Yr,n.Yr)}static Kr(e,n){return pe(e.Yr,n.Yr)||$.comparator(e.key,n.key)}};var w_=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ft(Ke.$r)}checkEmpty(e){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Xv(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.Zr=this.Zr.add(new Ke(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return x.resolve(s)}lookupMutationBatch(e,n){return x.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.ei(r),o=i<0?0:i;return x.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?pE:this.tr-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Ke(n,0),i=new Ke(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],s=>{let a=this.Xr(s.Yr);o.push(a)}),x.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ft(pe);return n.forEach(i=>{let o=new Ke(i,0),s=new Ke(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],a=>{r=r.add(a.Yr)})}),x.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;$.isDocumentKey(o)||(o=o.child(""));let s=new Ke(new $(o),0),a=new ft(pe);return this.Zr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Yr)),!0)},s),x.resolve(this.ti(a))}ti(e){let n=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){be(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return x.forEach(n.mutations,i=>{let o=new Ke(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){let r=new Ke(n,0),i=this.Zr.firstAfterOrEqual(r);return x.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,x.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var T_=class{constructor(e){this.ri=e,this.docs=(function(){return new $e($.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return x.resolve(r?r.document.mutableCopy():On.newInvalidDocument(n))}getEntries(e,n){let r=Ar();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():On.newInvalidDocument(i))}),x.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Ar(),s=n.path,a=new $(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:f}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||K2(W2(f),r)<=0||(i.has(f.key)||ah(n,f))&&(o=o.insert(f.key,f.mutableCopy()))}return x.resolve(o)}getAllFromCollectionGroup(e,n,r,i){q(9500)}ii(e,n){return x.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new D_(this)}getSize(e){return x.resolve(this.size)}},D_=class extends m_{constructor(e){super(),this.Nr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),x.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}};var C_=class{constructor(e){this.persistence=e,this.si=new Sr(n=>_E(n),EE),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.oi=0,this._i=new ru,this.targetCount=0,this.ai=nu.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),x.resolve()}Pr(e){this.si.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.ai=new nu(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,x.resolve()}updateTargetData(e,n){return this.Pr(n),x.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.si.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),x.waitFor(o).next(()=>i)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,n){let r=this.si.get(n)||null;return x.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),x.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),x.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),x.resolve()}getMatchingKeysForTargetId(e,n){let r=this._i.Hr(n);return x.resolve(r)}containsKey(e,n){return x.resolve(this._i.containsKey(n))}};var $f=class{constructor(e,n){this.ui={},this.overlays={},this.ci=new hE(0),this.li=!1,this.li=!0,this.hi=new I_,this.referenceDelegate=e(this),this.Pi=new C_(this),this.indexManager=new d_,this.remoteDocumentCache=(function(i){return new T_(i)})(r=>this.referenceDelegate.Ti(r)),this.serializer=new l_(n),this.Ii=new __(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new E_,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new w_(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){F("MemoryPersistence","Starting transaction:",e);let i=new b_(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,n){return x.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}},b_=class extends kv{constructor(e){super(),this.currentSequenceNumber=e}},S_=class t{constructor(e){this.persistence=e,this.Ri=new ru,this.Vi=null}static mi(e){return new t(e)}get fi(){if(this.Vi)return this.Vi;throw q(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),x.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),x.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.fi,r=>{let i=$.fromPath(r);return this.gi(e,i).next(o=>{o||n.removeEntry(i,ne.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return x.or([()=>x.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}},Hf=class t{constructor(e,n){this.persistence=e,this.pi=new Sr(r=>Z2(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Jj(this,n)}static mi(e,n){return new t(e,n)}Ei(){}di(e){return x.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){let n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return x.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?x.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,s=>this.br(e,s,n).next(a=>{a||(r++,o.removeEntry(s,ne.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),x.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),x.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),x.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),x.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Cf(e.data.value)),n}br(e,n,r){return x.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.pi.get(n);return x.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var A_=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=ge(),i=ge();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var R_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var N_=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return YS()?8:Y2(lt())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ys(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ws(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new R_;return this.Ss(e,n,s).next(a=>{if(o.result=a,this.Vs)return this.bs(e,n,s,a.size)})}).next(()=>o.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(Es()<=fe.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",Is(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),x.resolve()):(Es()<=fe.DEBUG&&F("QueryEngine","Query:",Is(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Es()<=fe.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",Is(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,rr(n))):x.resolve())}ys(e,n){if(x0(n))return x.resolve(null);let r=rr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Qv(n,null,"F"),r=rr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ge(...o);return this.ps.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.Ds(n,a);return this.Cs(n,l,s,u.readTime)?this.ys(e,Qv(n,null,"F")):this.vs(e,l,n,u)}))})))}ws(e,n,r,i){return x0(n)||i.isEqual(ne.min())?x.resolve(null):this.ps.getDocuments(e,r).next(o=>{let s=this.Ds(n,o);return this.Cs(n,s,r,i)?x.resolve(null):(Es()<=fe.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Is(n)),this.vs(e,s,n,G2(i,Qc)).next(a=>a))})}Ds(e,n){let r=new ft(LA(e));return n.forEach((i,o)=>{ah(e,o)&&(r=r.add(o))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,n,r){return Es()<=fe.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",Is(n)),this.ps.getDocumentsMatchingQuery(e,n,uo.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var TE="LocalStore",Zj=3e8,M_=class{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new $e(pe),this.xs=new Sr(o=>_E(o),EE),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new v_(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}};function Xj(t,e,n,r){return new M_(t,e,n,r)}async function nR(t,e){let n=ee(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=ge();for(let l of i){s.push(l.batchId);for(let f of l.mutations)u=u.add(f.key)}for(let l of o){a.push(l.batchId);for(let f of l.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Ls:l,removedBatchIds:s,addedBatchIds:a}))})})}function eU(t,e){let n=ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,u,l,f){let p=l.batch,m=p.keys(),y=x.resolve();return m.forEach(S=>{y=y.next(()=>f.getEntry(u,S)).next(A=>{let R=l.docVersions.get(S);be(R!==null,48541),A.version.compareTo(R)<0&&(p.applyToRemoteDocument(A,l),A.isValidDocument()&&(A.setReadTime(l.commitVersion),f.addEntry(A)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))})(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let u=ge();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u})(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function rR(t){let e=ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function tU(t,e){let n=ee(t),r=e.snapshotVersion,i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;let a=[];e.targetChanges.forEach((f,p)=>{let m=i.get(p);if(!m)return;a.push(n.Pi.removeMatchingKeys(o,f.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(o,f.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(It.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):f.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(f.resumeToken,r)),i=i.insert(p,y),(function(A,R,L){return A.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=Zj?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0})(m,y,f)&&a.push(n.Pi.updateTargetData(o,y))});let u=Ar(),l=ge();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,f))}),a.push(nU(o,s,e.documentUpdates).next(f=>{u=f.ks,l=f.qs})),!r.isEqual(ne.min())){let f=n.Pi.getLastRemoteSnapshotVersion(o).next(p=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(f)}return x.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.Ms=i,o))}function nU(t,e,n){let r=ge(),i=ge();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Ar();return n.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ne.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):F(TE,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{ks:s,qs:i}})}function rU(t,e){let n=ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=pE),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function iU(t,e){let n=ee(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(o=>o?(i=o,x.resolve(i)):n.Pi.allocateTargetId(r).next(s=>(i=new tu(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function x_(t,e,n){let r=ee(t),i=r.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!Gs(s))throw s;F(TE,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function z0(t,e,n){let r=ee(t),i=ne.min(),o=ge();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,l,f){let p=ee(u),m=p.xs.get(f);return m!==void 0?x.resolve(p.Ms.get(m)):p.Pi.getTargetData(l,f)})(r,s,rr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(s,e,n?i:ne.min(),n?o:ge())).next(a=>(oU(r,mj(e),a),{documents:a,Qs:o})))}function oU(t,e,n){let r=t.Os.get(e)||ne.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Os.set(e,r)}var zf=class{constructor(){this.activeTargetIds=wj()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var P_=class{constructor(){this.Mo=new zf,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new zf,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var O_=class{Oo(e){}shutdown(){}};var q0="ConnectivityMonitor",qf=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){F(q0,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){F(q0,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Df=null;function k_(){return Df===null?Df=(function(){return 268435456+Math.round(2147483648*Math.random())})():Df++,"0x"+Df.toString(16)}var Dv="RestConnection",sU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},L_=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Pf?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,o){let s=k_(),a=this.zo(e,n.toUriEncodedString());F(Dv,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,o);let{host:l}=new URL(a),f=ti(l);return this.Jo(e,a,u,r,f).then(p=>(F(Dv,`Received RPC '${e}' ${s}: `,p),p),p=>{throw Ns(Dv,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Ho(e,n,r,i,o,s){return this.Go(e,n,r,i,o)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+zs})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,n){let r=sU[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}};var F_=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var Et="WebChannelConnection",V_=class extends L_{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,o){let s=k_();return new Promise((a,u)=>{let l=new yv;l.setWithCredentials(!0),l.listenOnce(vv.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Bc.NO_ERROR:let p=l.getResponseJson();F(Et,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case Bc.TIMEOUT:F(Et,`RPC '${e}' ${s} timed out`),u(new V(N.DEADLINE_EXCEEDED,"Request time out"));break;case Bc.HTTP_ERROR:let m=l.getStatus();if(F(Et,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let S=y?.error;if(S&&S.status&&S.message){let A=(function(L){let re=L.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(re)>=0?re:N.UNKNOWN})(S.status);u(new V(A,S.message))}else u(new V(N.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new V(N.UNAVAILABLE,"Connection failed."));break;default:q(9055,{l_:e,streamId:s,h_:l.getLastErrorCode(),P_:l.getLastError()})}}finally{F(Et,`RPC '${e}' ${s} completed.`)}});let f=JSON.stringify(i);F(Et,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",f,r,15)})}T_(e,n,r){let i=k_(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Iv(),a=Ev(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let f=o.join("");F(Et,`Creating RPC '${e}' stream ${i}: ${f}`,u);let p=s.createWebChannel(f,u);this.I_(p);let m=!1,y=!1,S=new F_({Yo:R=>{y?F(Et,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(F(Et,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),F(Et,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},Zo:()=>p.close()}),A=(R,L,re)=>{R.listen(L,he=>{try{re(he)}catch(wt){setTimeout(()=>{throw wt},0)}})};return A(p,_s.EventType.OPEN,()=>{y||(F(Et,`RPC '${e}' stream ${i} transport opened.`),S.o_())}),A(p,_s.EventType.CLOSE,()=>{y||(y=!0,F(Et,`RPC '${e}' stream ${i} transport closed`),S.a_(),this.E_(p))}),A(p,_s.EventType.ERROR,R=>{y||(y=!0,Ns(Et,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),S.a_(new V(N.UNAVAILABLE,"The operation could not be completed")))}),A(p,_s.EventType.MESSAGE,R=>{if(!y){let L=R.data[0];be(!!L,16349);let re=L,he=re?.error||re[0]?.error;if(he){F(Et,`RPC '${e}' stream ${i} received error:`,he);let wt=he.status,kt=(function(v){let E=We[v];if(E!==void 0)return WA(E)})(wt),rt=he.message;kt===void 0&&(kt=N.INTERNAL,rt="Unknown error status: "+wt+" with message "+he.message),y=!0,S.a_(new V(kt,rt)),p.close()}else F(Et,`RPC '${e}' stream ${i} received:`,L),S.u_(L)}}),A(a,_v.STAT_EVENT,R=>{R.stat===If.PROXY?F(Et,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===If.NOPROXY&&F(Et,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.__()},0),S}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}};function Cv(){return typeof document<"u"?document:null}function ch(t){return new o_(t,!0)}var Gf=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&F("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var G0="PersistentStream",Wf=class{constructor(e,n,r,i,o,s,a,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Gf(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(Dr(n.toString()),Dr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;let e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{let i=new V(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){let r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return F(G0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(F(G0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},j_=class extends Wf{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let n=Vj(this.serializer,e),r=(function(o){if(!("targetChange"in o))return ne.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ne.min():s.readTime?ir(s.readTime):ne.min()})(e);return this.listener.H_(n,r)}Y_(e){let n={};n.database=u_(this.serializer),n.addTarget=(function(o,s){let a,u=s.target;if(a=Kv(u)?{documents:Bj(o,u)}:{query:$j(o,u).ft},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=KA(o,s.resumeToken);let l=s_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ne.min())>0){a.readTime=Uf(o,s.snapshotVersion.toTimestamp());let l=s_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=zj(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){let n={};n.database=u_(this.serializer),n.removeTarget=e,this.q_(n)}},U_=class extends Wf{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return be(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,be(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){be(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let n=Uj(e.writeResults,e.commitTime),r=ir(e.commitTime);return this.listener.na(r,n)}ra(){let e={};e.database=u_(this.serializer),this.q_(e)}ea(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>jj(this.serializer,r))};this.q_(n)}};var B_=class{},$_=class extends B_{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new V(N.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Go(e,a_(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new V(N.UNKNOWN,o.toString())})}Ho(e,n,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Ho(e,a_(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new V(N.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},H_=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Dr(n),this.aa=!1):F("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var go="RemoteStore",z_=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(s=>{r.enqueueAndForget(async()=>{yo(this)&&(F(go,"Restarting streams for network reachability change."),await(async function(u){let l=ee(u);l.Ea.add(4),await au(l),l.Ra.set("Unknown"),l.Ea.delete(4),await uh(l)})(this))})}),this.Ra=new H_(r,i)}};async function uh(t){if(yo(t))for(let e of t.da)await e(!0)}async function au(t){for(let e of t.da)await e(!1)}function iR(t,e){let n=ee(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),SE(n)?bE(n):Ws(n).O_()&&CE(n,e))}function DE(t,e){let n=ee(t),r=Ws(n);n.Ia.delete(e),r.O_()&&oR(n,e),n.Ia.size===0&&(r.O_()?r.L_():yo(n)&&n.Ra.set("Unknown"))}function CE(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ne.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ws(t).Y_(e)}function oR(t,e){t.Va.Ue(e),Ws(t).Z_(e)}function bE(t){t.Va=new i_({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ws(t).start(),t.Ra.ua()}function SE(t){return yo(t)&&!Ws(t).x_()&&t.Ia.size>0}function yo(t){return ee(t).Ea.size===0}function sR(t){t.Va=void 0}async function aU(t){t.Ra.set("Online")}async function cU(t){t.Ia.forEach((e,n)=>{CE(t,e)})}async function uU(t,e){sR(t),SE(t)?(t.Ra.ha(e),bE(t)):t.Ra.set("Unknown")}async function lU(t,e,n){if(t.Ra.set("Online"),e instanceof Vf&&e.state===2&&e.cause)try{await(async function(i,o){let s=o.cause;for(let a of o.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.Ia.delete(a),i.Va.removeTarget(a))})(t,e)}catch(r){F(go,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Kf(t,r)}else if(e instanceof bs?t.Va.Ze(e):e instanceof Ff?t.Va.st(e):t.Va.tt(e),!n.isEqual(ne.min()))try{let r=await rR(t.localStore);n.compareTo(r)>=0&&await(function(o,s){let a=o.Va.Tt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let f=o.Ia.get(l);f&&o.Ia.set(l,f.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let f=o.Ia.get(u);if(!f)return;o.Ia.set(u,f.withResumeToken(It.EMPTY_BYTE_STRING,f.snapshotVersion)),oR(o,u);let p=new tu(f.target,u,l,f.sequenceNumber);CE(o,p)}),o.remoteSyncer.applyRemoteEvent(a)})(t,n)}catch(r){F(go,"Failed to raise snapshot:",r),await Kf(t,r)}}async function Kf(t,e,n){if(!Gs(e))throw e;t.Ea.add(1),await au(t),t.Ra.set("Offline"),n||(n=()=>rR(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{F(go,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await uh(t)})}function aR(t,e){return e().catch(n=>Kf(t,n,e))}async function lh(t){let e=ee(t),n=fi(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:pE;for(;dU(e);)try{let i=await rU(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,fU(e,i)}catch(i){await Kf(e,i)}cR(e)&&uR(e)}function dU(t){return yo(t)&&t.Ta.length<10}function fU(t,e){t.Ta.push(e);let n=fi(t);n.O_()&&n.X_&&n.ea(e.mutations)}function cR(t){return yo(t)&&!fi(t).x_()&&t.Ta.length>0}function uR(t){fi(t).start()}async function hU(t){fi(t).ra()}async function pU(t){let e=fi(t);for(let n of t.Ta)e.ea(n.mutations)}async function gU(t,e,n){let r=t.Ta.shift(),i=e_.from(r,e,n);await aR(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await lh(t)}async function mU(t,e){e&&fi(t).X_&&await(async function(r,i){if((function(s){return Rj(s)&&s!==N.ABORTED})(i.code)){let o=r.Ta.shift();fi(r).B_(),await aR(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await lh(r)}})(t,e),cR(t)&&uR(t)}async function W0(t,e){let n=ee(t);n.asyncQueue.verifyOperationInProgress(),F(go,"RemoteStore received new credentials");let r=yo(n);n.Ea.add(3),await au(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await uh(n)}async function yU(t,e){let n=ee(t);e?(n.Ea.delete(2),await uh(n)):e||(n.Ea.add(2),await au(n),n.Ra.set("Unknown"))}function Ws(t){return t.ma||(t.ma=(function(n,r,i){let o=ee(n);return o.sa(),new j_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Xo:aU.bind(null,t),t_:cU.bind(null,t),r_:uU.bind(null,t),H_:lU.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),SE(t)?bE(t):t.Ra.set("Unknown")):(await t.ma.stop(),sR(t))})),t.ma}function fi(t){return t.fa||(t.fa=(function(n,r,i){let o=ee(n);return o.sa(),new U_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:hU.bind(null,t),r_:mU.bind(null,t),ta:pU.bind(null,t),na:gU.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await lh(t)):(await t.fa.stop(),t.Ta.length>0&&(F(go,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}var q_=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new V(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function AE(t,e){if(Dr("AsyncQueue",`${e}: ${t}`),Gs(t))return new V(N.UNAVAILABLE,`${e}: ${t}`);throw t}var Qf=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||$.comparator(n.key,r.key):(n,r)=>$.comparator(n.key,r.key),this.keyedMap=$c(),this.sortedSet=new $e(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Yf=class{constructor(){this.ga=new $e($.comparator)}track(e){let n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):q(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){let e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}},Bs=class t{constructor(e,n,r,i,o,s,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,Qf.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var G_=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},W_=class{constructor(){this.queries=K0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){let i=ee(n),o=i.queries;i.queries=K0(),o.forEach((s,a)=>{for(let u of a.Sa)u.onError(r)})})(this,new V(N.ABORTED,"Firestore shutting down"))}};function K0(){return new Sr(t=>kA(t),sh)}async function vU(t,e){let n=ee(t),r=3,i=e.query,o=n.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new G_,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(i,!0);break;case 1:o.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){let a=AE(s,`Initialization of query '${Is(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&RE(n)}async function _U(t,e){let n=ee(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function EU(t,e){let n=ee(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.Sa)a.Fa(i)&&(r=!0);s.wa=i}}r&&RE(n)}function IU(t,e,n){let r=ee(t),i=r.queries.get(e);if(i)for(let o of i.Sa)o.onError(n);r.queries.delete(e)}function RE(t){t.Ca.forEach(e=>{e.next()})}var K_,Q0;(Q0=K_||(K_={})).Ma="default",Q0.Cache="cache";var Q_=class{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Bs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;let r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Bs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==K_.Cache}};var Jf=class{constructor(e){this.key=e}},Zf=class{constructor(e){this.key=e}},Y_=class{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ge(),this.mutatedKeys=ge(),this.eu=LA(e),this.tu=new Qf(this.eu)}get nu(){return this.Ya}ru(e,n){let r=n?n.iu:new Yf,i=n?n.tu:this.tu,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{let m=i.get(f),y=ah(this.query,p)?p:null,S=!!m&&this.mutatedKeys.has(m.key),A=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),R=!1;m&&y?m.data.isEqual(y.data)?S!==A&&(r.track({type:3,doc:y}),R=!0):this.su(m,y)||(r.track({type:2,doc:y}),R=!0,(u&&this.eu(y,u)>0||l&&this.eu(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),R=!0):m&&!y&&(r.track({type:1,doc:m}),R=!0,(u||l)&&(a=!0)),R&&(y?(s=s.add(y),o=A?o.add(f):o.delete(f)):(s=s.delete(f),o=o.delete(f)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),o=o.delete(f.key),r.track({type:1,doc:f})}return{tu:s,iu:r,Cs:a,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let s=e.iu.ya();s.sort((f,p)=>(function(y,S){let A=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return q(20277,{Rt:R})}};return A(y)-A(S)})(f.type,p.type)||this.eu(f.doc,p.doc)),this.ou(r),i=i??!1;let a=n&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,l=u!==this.Za;return this.Za=u,s.length!==0||l?{snapshot:new Bs(this.query,e.tu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Yf,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=ge(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new Zf(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new Jf(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=ge();let n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Bs.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},NE="SyncEngine",J_=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},Z_=class{constructor(e){this.key=e,this.hu=!1}},X_=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Sr(a=>kA(a),sh),this.Iu=new Map,this.Eu=new Set,this.du=new $e($.comparator),this.Au=new Map,this.Ru=new ru,this.Vu={},this.mu=new Map,this.fu=nu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};async function wU(t,e,n=!0){let r=gR(t),i,o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await lR(r,e,n,!0),i}async function TU(t,e){let n=gR(t);await lR(n,e,!0,!1)}async function lR(t,e,n,r){let i=await iU(t.localStore,rr(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),a;return r&&(a=await DU(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&iR(t.remoteStore,i),a}async function DU(t,e,n,r,i){t.pu=(p,m,y)=>(async function(A,R,L,re){let he=R.view.ru(L);he.Cs&&(he=await z0(A.localStore,R.query,!1).then(({documents:w})=>R.view.ru(w,he)));let wt=re&&re.targetChanges.get(R.targetId),kt=re&&re.targetMismatches.get(R.targetId)!=null,rt=R.view.applyChanges(he,A.isPrimaryClient,wt,kt);return J0(A,R.targetId,rt.au),rt.snapshot})(t,p,m,y);let o=await z0(t.localStore,e,!0),s=new Y_(e,o.Qs),a=s.ru(o.documents),u=eu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(a,t.isPrimaryClient,u);J0(t,n,l.au);let f=new J_(e,n,s);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),l.snapshot}async function CU(t,e,n){let r=ee(t),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(s=>!sh(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await x_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&DE(r.remoteStore,i.targetId),eE(r,i.targetId)}).catch(qs)):(eE(r,i.targetId),await x_(r.localStore,i.targetId,!0))}async function bU(t,e){let n=ee(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),DE(n.remoteStore,r.targetId))}async function SU(t,e,n){let r=OU(t);try{let i=await(function(s,a){let u=ee(s),l=Ye.now(),f=a.reduce((y,S)=>y.add(S.key),ge()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let S=Ar(),A=ge();return u.Ns.getEntries(y,f).next(R=>{S=R,S.forEach((L,re)=>{re.isValidDocument()||(A=A.add(L))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,S)).next(R=>{p=R;let L=[];for(let re of a){let he=Aj(re,p.get(re.key).overlayedDocument);he!=null&&L.push(new Rr(re.key,he,AA(he.value.mapValue),si.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,L,a)}).next(R=>{m=R;let L=R.applyToLocalDocumentSet(p,A);return u.documentOverlayCache.saveOverlays(y,R.batchId,L)})}).then(()=>({batchId:m.batchId,changes:VA(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,u){let l=s.Vu[s.currentUser.toKey()];l||(l=new $e(pe)),l=l.insert(a,u),s.Vu[s.currentUser.toKey()]=l})(r,i.batchId,n),await cu(r,i.changes),await lh(r.remoteStore)}catch(i){let o=AE(i,"Failed to persist write");n.reject(o)}}async function dR(t,e){let n=ee(t);try{let r=await tU(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Au.get(o);s&&(be(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?be(s.hu,14607):i.removedDocuments.size>0&&(be(s.hu,42227),s.hu=!1))}),await cu(n,r,e)}catch(r){await qs(r)}}function Y0(t,e,n){let r=ee(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Tu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let u=ee(s);u.onlineState=a;let l=!1;u.queries.forEach((f,p)=>{for(let m of p.Sa)m.va(a)&&(l=!0)}),l&&RE(u)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function AU(t,e,n){let r=ee(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Au.get(e),o=i&&i.key;if(o){let s=new $e($.comparator);s=s.insert(o,On.newNoDocument(o,ne.min()));let a=ge().add(o),u=new Lf(ne.min(),new Map,new $e(pe),s,a);await dR(r,u),r.du=r.du.remove(o),r.Au.delete(e),ME(r)}else await x_(r.localStore,e,!1).then(()=>eE(r,e,n)).catch(qs)}async function RU(t,e){let n=ee(t),r=e.batch.batchId;try{let i=await eU(n.localStore,e);hR(n,r,null),fR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await cu(n,i)}catch(i){await qs(i)}}async function NU(t,e,n){let r=ee(t);try{let i=await(function(s,a){let u=ee(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let f;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(be(p!==null,37113),f=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,f,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,f)).next(()=>u.localDocuments.getDocuments(l,f))})})(r.localStore,e);hR(r,e,n),fR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await cu(r,i)}catch(i){await qs(i)}}function fR(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function hR(t,e,n){let r=ee(t),i=r.Vu[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function eE(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||pR(t,r)})}function pR(t,e){t.Eu.delete(e.path.canonicalString());let n=t.du.get(e);n!==null&&(DE(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),ME(t))}function J0(t,e,n){for(let r of n)r instanceof Jf?(t.Ru.addReference(r.key,e),MU(t,r)):r instanceof Zf?(F(NE,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||pR(t,r.key)):q(19791,{wu:r})}function MU(t,e){let n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(F(NE,"New document in limbo: "+n),t.Eu.add(r),ME(t))}function ME(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){let e=t.Eu.values().next().value;t.Eu.delete(e);let n=new $(je.fromString(e)),r=t.fu.next();t.Au.set(r,new Z_(n)),t.du=t.du.insert(n,r),iR(t.remoteStore,new tu(rr(OA(n.path)),r,"TargetPurposeLimboResolution",hE.ce))}}async function cu(t,e,n){let r=ee(t),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((a,u)=>{s.push(r.pu(u,e,n).then(l=>{if((l||n)&&r.isPrimaryClient){let f=l?!l.fromCache:n?.targetChanges.get(u.targetId)?.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(l){i.push(l);let f=A_.As(u.targetId,l);o.push(f)}}))}),await Promise.all(s),r.Pu.H_(i),await(async function(u,l){let f=ee(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>x.forEach(l,m=>x.forEach(m.Es,y=>f.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>x.forEach(m.ds,y=>f.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!Gs(p))throw p;F(TE,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=f.Ms.get(m),S=y.snapshotVersion,A=y.withLastLimboFreeSnapshotVersion(S);f.Ms=f.Ms.insert(m,A)}}})(r.localStore,o))}async function xU(t,e){let n=ee(t);if(!n.currentUser.isEqual(e)){F(NE,"User change. New user:",e.toKey());let r=await nR(n.localStore,e);n.currentUser=e,(function(o,s){o.mu.forEach(a=>{a.forEach(u=>{u.reject(new V(N.CANCELLED,s))})}),o.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await cu(n,r.Ls)}}function PU(t,e){let n=ee(t),r=n.Au.get(e);if(r&&r.hu)return ge().add(r.key);{let i=ge(),o=n.Iu.get(e);if(!o)return i;for(let s of o){let a=n.Tu.get(s);i=i.unionWith(a.view.nu)}return i}}function gR(t){let e=ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=dR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=PU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=AU.bind(null,e),e.Pu.H_=EU.bind(null,e.eventManager),e.Pu.yu=IU.bind(null,e.eventManager),e}function OU(t){let e=ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=RU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=NU.bind(null,e),e}var mR=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(n){this.serializer=ch(n.databaseInfo.databaseId),this.sharedClientState=this.Du(n),this.persistence=this.Cu(n),await this.persistence.start(),this.localStore=this.vu(n),this.gcScheduler=this.Fu(n,this.localStore),this.indexBackfillerScheduler=this.Mu(n,this.localStore)}Fu(n,r){return null}Mu(n,r){return null}vu(n){return Xj(this.persistence,new N_,n.initialUser,this.serializer)}Cu(n){return new $f(S_.mi,this.serializer)}Du(n){return new P_}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return t.provider={build:()=>new t},t})(),tE=class extends mR{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){be(this.persistence.referenceDelegate instanceof Hf,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new p_(r,e.asyncQueue,n)}Cu(e){let n=this.cacheSizeBytes!==void 0?pn.withCacheSize(this.cacheSizeBytes):pn.DEFAULT;return new $f(r=>Hf.mi(r,n),this.serializer)}};var kU=(()=>{class t{async initialize(n,r){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Y0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=xU.bind(null,this.syncEngine),await yU(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(n){return(function(){return new W_})()}createDatastore(n){let r=ch(n.databaseInfo.databaseId),i=(function(s){return new V_(s)})(n.databaseInfo);return(function(s,a,u,l){return new $_(s,a,u,l)})(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return(function(i,o,s,a,u){return new z_(i,o,s,a,u)})(this.localStore,this.datastore,n.asyncQueue,r=>Y0(this.syncEngine,r,0),(function(){return qf.v()?new qf:new O_})())}createSyncEngine(n,r){return(function(o,s,a,u,l,f,p){let m=new X_(o,s,a,u,l,f);return p&&(m.gu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}async terminate(){await(async function(r){let i=ee(r);F(go,"RemoteStore shutting down."),i.Ea.add(5),await au(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}return t.provider={build:()=>new t},t})();var nE=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Dr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var hi="FirestoreClient",rE=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=dt.UNAUTHENTICATED,this.clientId=Wc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{F(hi,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(F(hi,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=AE(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function bv(t,e){t.asyncQueue.verifyOperationInProgress(),F(hi,"Initializing OfflineComponentProvider");let n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await nR(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Z0(t,e){t.asyncQueue.verifyOperationInProgress();let n=await LU(t);F(hi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>W0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>W0(e.remoteStore,i)),t._onlineComponents=e}async function LU(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){F(hi,"Using user provided OfflineComponentProvider");try{await bv(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;Ns("Error using user provided cache. Falling back to memory cache: "+n),await bv(t,new mR)}}else F(hi,"Using default OfflineComponentProvider"),await bv(t,new tE(void 0));return t._offlineComponents}async function yR(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(F(hi,"Using user provided OnlineComponentProvider"),await Z0(t,t._uninitializedComponentsProvider._online)):(F(hi,"Using default OnlineComponentProvider"),await Z0(t,new kU))),t._onlineComponents}function FU(t){return yR(t).then(e=>e.syncEngine)}async function VU(t){let e=await yR(t),n=e.eventManager;return n.onListen=wU.bind(null,e.syncEngine),n.onUnlisten=CU.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=TU.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=bU.bind(null,e.syncEngine),n}function jU(t,e,n={}){let r=new tr;return t.asyncQueue.enqueueAndForget(async()=>(function(o,s,a,u,l){let f=new nE({next:m=>{f.Nu(),s.enqueueAndForget(()=>_U(o,p)),m.fromCache&&u.source==="server"?l.reject(new V(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Q_(a,f,{includeMetadataChanges:!0,qa:!0});return vU(o,p)})(await VU(t),t.asyncQueue,e,n,r)),r.promise}function vR(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var X0=new Map;var _R="firestore.googleapis.com",eA=!0,Xf=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new V(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=_R,this.ssl=eA}else this.host=e.host,this.ssl=e.ssl??eA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=tR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Yj)throw new V(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}q2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=vR(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new V(N.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new V(N.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new V(N.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},$s=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xf({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new V(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new V(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xf(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Sv;switch(r.type){case"firstParty":return new Mv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new V(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){let r=X0.get(n);r&&(F("ComponentProvider","Removing Datastore"),X0.delete(n),r.terminate())})(this),Promise.resolve()}};function UU(t,e,n,r={}){t=Kc(t,$s);let i=ti(e),o=t._getSettings(),s=oe(M({},o),{emulatorOptions:t._getEmulatorOptions()}),a=`${e}:${n}`;i&&(pf(`https://${a}`),gf("Firestore",!0)),o.host!==_R&&o.host!==a&&Ns("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=oe(M({},o),{host:a,ssl:i,emulatorOptions:r});if(!Zn(u,s)&&(t._setSettings(u),r.mockUserToken)){let l,f;if(typeof r.mockUserToken=="string")l=r.mockUserToken,f=dt.MOCK_USER;else{l=zS(r.mockUserToken,t._app?.options.projectId);let p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new V(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new dt(p)}t._authCredentials=new Av(new Af(l,f))}}var eh=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Ht=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ai(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(su(n,t._jsonSchema))return new t(e,r||null,new $(je.fromString(n.referencePath)))}};Ht._jsonSchemaVersion="firestore/documentReference/1.0",Ht._jsonSchema={type:Qe("string",Ht._jsonSchemaVersion),referencePath:Qe("string")};var ai=class t extends eh{constructor(e,n,r){super(e,n,OA(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ht(this.firestore,null,new $(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function uu(t,e,...n){if(t=en(t),iA("collection","path",e),t instanceof $s){let r=je.fromString(e,...n);return E0(r),new ai(t,null,r)}{if(!(t instanceof Ht||t instanceof ai))throw new V(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(je.fromString(e,...n));return E0(r),new ai(t.firestore,null,r)}}function dh(t,e,...n){if(t=en(t),arguments.length===1&&(e=Wc.newId()),iA("doc","path",e),t instanceof $s){let r=je.fromString(e,...n);return _0(r),new Ht(t,null,new $(r))}{if(!(t instanceof Ht||t instanceof ai))throw new V(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(je.fromString(e,...n));return _0(r),new Ht(t.firestore,t instanceof ai?t.converter:null,new $(r))}}var tA="AsyncQueue",th=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Gf(this,"async_queue_retry"),this._c=()=>{let r=Cv();r&&F(tA,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let n=Cv();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let n=Cv();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let n=new tr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Gs(e))throw e;F(tA,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){let n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Dr("INTERNAL UNHANDLED ERROR: ",nA(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);let i=q_.createAndSchedule(this,e,n,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&q(47125,{Pc:nA(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let n=this.tc.indexOf(e);this.tc.splice(n,1)}};function nA(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}var Hs=class extends $s{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new th,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new th(e),this._firestoreClient=void 0,await e}}};function ER(t,e){let n=typeof t=="object"?t:_f(),r=typeof t=="string"?t:e||Pf,i=Uc(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=HS("firestore");o&&UU(i,...o)}return i}function IR(t){if(t._terminated)throw new V(N.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||BU(t),t._firestoreClient}function BU(t){let e=t._freezeSettings(),n=(function(i,o,s,a){return new Lv(i,o,s,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,vR(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new rE(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(i){let o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}})(t._componentsProvider))}var ci=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(It.fromBase64String(e))}catch(n){throw new V(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(It.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(su(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};ci._jsonSchemaVersion="firestore/bytes/1.0",ci._jsonSchema={type:Qe("string",ci._jsonSchemaVersion),bytes:Qe("string")};var iu=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new V(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ou=class{constructor(e){this._methodName=e}};var ui=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new V(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new V(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return pe(this._lat,e._lat)||pe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(su(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};ui._jsonSchemaVersion="firestore/geoPoint/1.0",ui._jsonSchema={type:Qe("string",ui._jsonSchemaVersion),latitude:Qe("number"),longitude:Qe("number")};var li=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(su(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new V(N.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};li._jsonSchemaVersion="firestore/vectorValue/1.0",li._jsonSchema={type:Qe("string",li._jsonSchemaVersion),vectorValues:Qe("object")};var $U=/^__.*__$/,iE=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Rr(e,this.data,this.fieldMask,n,this.fieldTransforms):new po(e,this.data,n,this.fieldTransforms)}};function wR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw q(40011,{Ac:t})}}var oE=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new t(M(M({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){let n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){let n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return nh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(wR(this.Ac)&&$U.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}},sE=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ch(e)}Cc(e,n,r,i=!1){return new oE({Ac:e,methodName:n,Dc:r,path:nn.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function HU(t){let e=t._freezeSettings(),n=ch(t._databaseId);return new sE(t._databaseId,!!e.ignoreUndefinedProperties,n)}function zU(t,e,n,r,i,o={}){let s=t.Cc(o.merge||o.mergeFields?2:0,e,n,i);bR("Data must be an object, but it was:",s,r);let a=DR(r,s),u,l;if(o.merge)u=new er(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let f=[];for(let p of o.mergeFields){let m=qU(e,p,n);if(!s.contains(m))throw new V(N.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);WU(f,m)||f.push(m)}u=new er(f),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new iE(new Pn(a),u,l)}var aE=class t extends ou{_toFieldTransform(e){return new Yv(e.path,new lo)}isEqual(e){return e instanceof t}};function TR(t,e){if(CR(t=en(t)))return bR("Unsupported field value:",e,t),DR(t,e);if(t instanceof ou)return(function(r,i){if(!wR(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let u=TR(a,i.wc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(t,e)}return(function(r,i){if((r=en(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Tj(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ye.fromDate(r);return{timestampValue:Uf(i.serializer,o)}}if(r instanceof Ye){let o=new Ye(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Uf(i.serializer,o)}}if(r instanceof ui)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ci)return{bytesValue:KA(i.serializer,r._byteString)};if(r instanceof Ht){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:wE(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof li)return(function(s,a){return{mapValue:{fields:{[mE]:{stringValue:yE},[xs]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.Sc("VectorValues must only contain numeric values.");return IE(a.serializer,l)})}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${fE(r)}`)})(t,e)}function DR(t,e){let n={};return EA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):mo(t,(r,i)=>{let o=TR(i,e.mc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function CR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ye||t instanceof ui||t instanceof ci||t instanceof Ht||t instanceof ou||t instanceof li)}function bR(t,e,n){if(!CR(n)||!oA(n)){let r=fE(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function qU(t,e,n){if((e=en(e))instanceof iu)return e._internalPath;if(typeof e=="string")return SR(t,e);throw nh("Field path arguments must be of type string or ",t,!1,void 0,n)}var GU=new RegExp("[~\\*/\\[\\]]");function SR(t,e,n){if(e.search(GU)>=0)throw nh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new iu(...e.split("."))._internalPath}catch{throw nh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function nh(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new V(N.INVALID_ARGUMENT,a+t+u)}function WU(t,e){return t.some(n=>n.isEqual(e))}var rh=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new cE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(AR("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},cE=class extends rh{data(){return super.data()}};function AR(t,e){return typeof e=="string"?SR(t,e):e instanceof iu?e._internalPath:e._delegate._internalPath}function KU(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new V(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var uE=class{convertValue(e,n="none"){switch(di(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ve(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(br(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw q(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return mo(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){let n=e.fields?.[xs].arrayValue?.values?.map(r=>Ve(r.doubleValue));return new li(n)}convertGeoPoint(e){return new ui(Ve(e.latitude),Ve(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=oh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Jc(e));default:return null}}convertTimestamp(e){let n=Cr(e);return new Ye(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=je.fromString(e);be(eR(r),9688,{name:e});let i=new Of(r.get(1),r.get(3)),o=new $(r.popFirst(5));return i.isEqual(n)||Dr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function QU(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Cs=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Ss=class t extends rh{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new As(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(AR("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new V(N.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};Ss._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ss._jsonSchema={type:Qe("string",Ss._jsonSchemaVersion),bundleSource:Qe("string","DocumentSnapshot"),bundleName:Qe("string"),bundle:Qe("string")};var As=class extends Ss{data(e={}){return super.data(e)}},Rs=class t{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Cs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new As(this._firestore,this._userDataWriter,r.key,r,new Cs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new V(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new As(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Cs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new As(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Cs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,f=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),f=s.indexOf(a.doc.key)),{type:YU(a.type),doc:u,oldIndex:l,newIndex:f}})}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new V(N.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Wc.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function YU(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return q(61501,{type:t})}}Rs._jsonSchemaVersion="firestore/querySnapshot/1.0",Rs._jsonSchema={type:Qe("string",Rs._jsonSchemaVersion),bundleSource:Qe("string","QuerySnapshot"),bundleName:Qe("string"),bundle:Qe("string")};var lE=class extends uE{constructor(e){super(),this.firestore=e}convertBytes(e){return new ci(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ht(this.firestore,null,n)}};function xE(t){t=Kc(t,eh);let e=Kc(t.firestore,Hs),n=IR(e),r=new lE(e);return KU(t._query),jU(n,t._query).then(i=>new Rs(e,r,t,i))}function PE(t){return RR(Kc(t.firestore,Hs),[new Xc(t._key,si.none())])}function OE(t,e){let n=Kc(t.firestore,Hs),r=dh(t),i=QU(t.converter,e);return RR(n,[zU(HU(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,si.exists(!1))]).then(()=>r)}function RR(t,e){return(function(r,i){let o=new tr;return r.asyncQueue.enqueueAndForget(async()=>SU(await FU(r),i,o)),o.promise})(IR(t),e)}function kE(){return new aE("serverTimestamp")}(function(e,n=!0){(function(i){zs=i})(oi),ii(new hn("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Hs(new Rv(r.getProvider("auth-internal")),new xv(s,r.getProvider("app-check-internal")),(function(l,f){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new V(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Of(l.options.projectId,f)})(s,i),s);return o=M({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),xn(m0,y0,e),xn(m0,y0,"esm2020")})();function zR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var qR=zR,GR=new Er("auth","Firebase",zR());var yh=new ni("@firebase/auth");function JU(t,...e){yh.logLevel<=fe.WARN&&yh.warn(`Auth (${oi}): ${t}`,...e)}function hh(t,...e){yh.logLevel<=fe.ERROR&&yh.error(`Auth (${oi}): ${t}`,...e)}function yi(t,...e){throw tI(t,...e)}function vo(t,...e){return tI(t,...e)}function WR(t,e,n){let r=oe(M({},qR()),{[e]:n});return new Er("auth","Firebase",r).create(e,{appName:t.name})}function mi(t){return WR(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function tI(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return GR.create(t,...e)}function Q(t,e,...n){if(!t)throw tI(e,...n)}function Nr(t){let e="INTERNAL ASSERTION FAILED: "+t;throw hh(e),new Error(e)}function vi(t,e){t||Nr(e)}function jE(){return typeof self<"u"&&self.location?.href||""}function ZU(){return NR()==="http:"||NR()==="https:"}function NR(){return typeof self<"u"&&self.location?.protocol||null}function XU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ZU()||WS()||"connection"in navigator)?navigator.onLine:!0}function eB(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var _o=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,vi(n>e,"Short delay should be less than long delay!"),this.isMobile=qS()||KS()}get(){return XU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function nI(t,e){vi(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var vh=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Nr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Nr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Nr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var tB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var nB=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],rB=new _o(3e4,6e4);function Rh(t,e){return t.tenantId&&!e.tenantId?oe(M({},e),{tenantId:t.tenantId}):e}async function Ks(t,e,n,r,i={}){return KR(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});let a=Vc(M({key:t.config.apiKey},s)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);let l=M({method:e,headers:u},o);return GS()||(l.referrerPolicy="no-referrer"),t.emulatorConfig&&ti(t.emulatorConfig.host)&&(l.credentials="include"),vh.fetch()(await YR(t,t.config.apiHost,n,a),l)})}async function KR(t,e,n){t._canInitEmulator=!1;let r=M(M({},tB),e);try{let i=new UE(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=await o.json();if("needConfirmation"in s)throw fh(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw fh(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw fh(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw fh(t,"user-disabled",s);let f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw WR(t,f,l);yi(t,f)}}catch(i){if(i instanceof Xt)throw i;yi(t,"network-request-failed",{message:String(i)})}}async function QR(t,e,n,r,i={}){let o=await Ks(t,e,n,r,i);return"mfaPendingCredential"in o&&yi(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function YR(t,e,n,r){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?nI(t.config,i):`${t.config.apiScheme}://${i}`;return nB.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}var UE=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(vo(this.auth,"network-request-failed")),rB.get())})}};function fh(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=vo(t,e,r);return i.customData._tokenResponse=n,i}async function iB(t,e){return Ks(t,"POST","/v1/accounts:delete",e)}async function _h(t,e){return Ks(t,"POST","/v1/accounts:lookup",e)}function lu(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function JR(t,e=!1){let n=en(t),r=await n.getIdToken(e),i=rI(r);Q(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:lu(LE(i.auth_time)),issuedAtTime:lu(LE(i.iat)),expirationTime:lu(LE(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}}function LE(t){return Number(t)*1e3}function rI(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return hh("JWT malformed, contained fewer than 3 sections"),null;try{let i=ff(n);return i?JSON.parse(i):(hh("Failed to decode base64 JWT payload"),null)}catch(i){return hh("Caught error parsing JWT payload as JSON",i?.toString()),null}}function MR(t){let e=rI(t);return Q(e,"internal-error"),Q(typeof e.exp<"u","internal-error"),Q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function fu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Xt&&oB(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function oB({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var BE=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var hu=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=lu(this.lastLoginAt),this.creationTime=lu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Eh(t){let e=t.auth,n=await t.getIdToken(),r=await fu(t,_h(e,{idToken:n}));Q(r?.users.length,e,"internal-error");let i=r.users[0];t._notifyReloadListener(i);let o=i.providerUserInfo?.length?XR(i.providerUserInfo):[],s=sB(t.providerData,o),a=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!s?.length,l=a?u:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new hu(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(t,f)}async function ZR(t){let e=en(t);await Eh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function sB(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function XR(t){return t.map(r=>{var i=r,{providerId:e}=i,n=hp(i,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}async function aB(t,e){let n=await KR(t,{},async()=>{let r=Vc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=await YR(t,i,"/v1/token",`key=${o}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return t.emulatorConfig&&ti(t.emulatorConfig.host)&&(u.credentials="include"),vh.fetch()(s,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function cB(t,e){return Ks(t,"POST","/v2/accounts:revokeToken",Rh(t,e))}var du=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Q(e.idToken,"internal-error"),Q(typeof e.idToken<"u","internal-error"),Q(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):MR(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Q(e.length!==0,"internal-error");let n=MR(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){let{accessToken:r,refreshToken:i,expiresIn:o}=await aB(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(Q(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(Q(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(Q(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Nr("not implemented")}};function pi(t,e){Q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var gi=class t{constructor(o){var s=o,{uid:e,auth:n,stsTokenManager:r}=s,i=hp(s,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new BE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new hu(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){let n=await fu(this,this.stsTokenManager.getToken(this.auth,e));return Q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return JR(this,e)}reload(){return ZR(this)}_assign(e){this!==e&&(Q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>M({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(oe(M({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Eh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(tn(this.auth.app))return Promise.reject(mi(this.auth));let e=await this.getIdToken();return await fu(this,iB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return oe(M({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>M({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){let r=n.displayName??void 0,i=n.email??void 0,o=n.phoneNumber??void 0,s=n.photoURL??void 0,a=n.tenantId??void 0,u=n._redirectEventId??void 0,l=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:p,emailVerified:m,isAnonymous:y,providerData:S,stsTokenManager:A}=n;Q(p&&A,e,"internal-error");let R=du.fromJSON(this.name,A);Q(typeof p=="string",e,"internal-error"),pi(r,e.name),pi(i,e.name),Q(typeof m=="boolean",e,"internal-error"),Q(typeof y=="boolean",e,"internal-error"),pi(o,e.name),pi(s,e.name),pi(a,e.name),pi(u,e.name),pi(l,e.name),pi(f,e.name);let L=new t({uid:p,auth:e,email:i,emailVerified:m,displayName:r,isAnonymous:y,photoURL:s,phoneNumber:o,tenantId:a,stsTokenManager:R,createdAt:l,lastLoginAt:f});return S&&Array.isArray(S)&&(L.providerData=S.map(re=>M({},re))),u&&(L._redirectEventId=u),L}static async _fromIdTokenResponse(e,n,r=!1){let i=new du;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Eh(o),o}static async _fromGetAccountInfoResponse(e,n,r){let i=n.users[0];Q(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?XR(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new du;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new hu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u}};var xR=new Map;function Mr(t){vi(t instanceof Function,"Expected a class definition");let e=xR.get(t);return e?(vi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,xR.set(t,e),e)}var uB=(()=>{class t{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(n,r){this.storage[n]=r}async _get(n){let r=this.storage[n];return r===void 0?null:r}async _remove(n){delete this.storage[n]}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),$E=uB;function ph(t,e,n){return`firebase:${t}:${e}:${n}`}var Ih=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=ph(this.userKey,i.apiKey,o),this.fullPersistenceKey=ph("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=await _h(this.auth,{idToken:e}).catch(()=>{});return n?gi._fromGetAccountInfoResponse(this.auth,n,e):null}return gi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new t(Mr($E),e,r);let i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l),o=i[0]||Mr($E),s=ph(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let f=await l._get(s);if(f){let p;if(typeof f=="string"){let m=await _h(e,{idToken:f}).catch(()=>{});if(!m)break;p=await gi._fromGetAccountInfoResponse(e,m,f)}else p=gi._fromJSON(e,f);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],a&&await o._set(s,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==o)try{await l._remove(s)}catch{}})),new t(o,e,r))}};function PR(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(rN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(eN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(oN(e))return"Blackberry";if(sN(e))return"Webos";if(tN(e))return"Safari";if((e.includes("chrome/")||nN(e))&&!e.includes("edge/"))return"Chrome";if(iN(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function eN(t=lt()){return/firefox\//i.test(t)}function tN(t=lt()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function nN(t=lt()){return/crios\//i.test(t)}function rN(t=lt()){return/iemobile/i.test(t)}function iN(t=lt()){return/android/i.test(t)}function oN(t=lt()){return/blackberry/i.test(t)}function sN(t=lt()){return/webos/i.test(t)}function iI(t=lt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function lB(t=lt()){return iI(t)&&!!window.navigator?.standalone}function dB(){return QS()&&document.documentMode===10}function aN(t=lt()){return iI(t)||iN(t)||sN(t)||oN(t)||/windows phone/i.test(t)||rN(t)}function cN(t,e=[]){let n;switch(t){case"Browser":n=PR(lt());break;case"Worker":n=`${PR(lt())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${oi}/${r}`}var HE=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function fB(t,e={}){return Ks(t,"GET","/v2/passwordPolicy",Rh(t,e))}var hB=6,zE=class{constructor(e){let n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??hB,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var qE=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wh(this),this.idTokenSubscription=new wh(this),this.beforeStateQueue=new HE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=GR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Mr(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ih.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let n=await _h(this,{idToken:e}),r=await gi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(tn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}let n=await this.assertedPersistence.getCurrentUser(),r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let o=this.redirectUser?._redirectEventId,s=r?._redirectEventId,a=await this.tryRedirectSignIn(e);(!o||o===s)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Q(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Eh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=eB()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(tn(this.app))return Promise.reject(mi(this));let n=e?en(e):null;return n&&Q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return tn(this.app)?Promise.reject(mi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return tn(this.app)?Promise.reject(mi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Mr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await fB(this),n=new zE(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Er("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){let n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await cB(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){let r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let n=e&&Mr(e)||this._popupRedirectResolver;Q(n,this,"argument-error"),this.redirectPersistenceManager=await Ih.create(this,[Mr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Q(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=cN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);let r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(tn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&JU(`Error while retrieving App Check token: ${e.error}`),e?.token}};function Nh(t){return en(t)}var wh=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=XS(n=>this.observer=n)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var oI={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function pB(t){oI=t}function gB(t){return oI.loadJS(t)}function mB(){return oI.gapiScript}function uN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function lN(t,e){let n=Uc(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(Zn(o,e??{}))return i;yi(i,"already-initialized")}return n.initialize({options:e})}function yB(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Mr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function dN(t,e,n){let r=Nh(t);Q(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=fN(e),{host:s,port:a}=vB(e),u=a===null?"":`:${a}`,l={url:`${o}//${s}${u}/`},f=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Q(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Q(Zn(l,r.config.emulator)&&Zn(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,ti(s)?(pf(`${o}//${s}${u}`),gf("Auth",!0)):i||_B()}function fN(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function vB(t){let e=fN(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:OR(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:OR(s)}}}function OR(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function _B(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Th=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Nr("not implemented")}_getIdTokenResponse(e){return Nr("not implemented")}_linkToIdToken(e,n){return Nr("not implemented")}_getReauthenticationResolver(e){return Nr("not implemented")}};async function FE(t,e){return QR(t,"POST","/v1/accounts:signInWithIdp",Rh(t,e))}var Dh=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var GE=class extends Dh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};async function EB(t,e){return QR(t,"POST","/v1/accounts:signUp",Rh(t,e))}var Eo=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){let o=await gi._fromIdTokenResponse(e,r,i),s=kR(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);let i=kR(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})}};function kR(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}async function sI(t){if(tn(t.app))return Promise.reject(mi(t));let e=Nh(t);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new Eo({user:e.currentUser,providerId:null,operationType:"signIn"});let n=await EB(e,{returnSecureToken:!0}),r=await Eo._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(r.user),r}var WE=class t extends Xt{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function hN(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?WE._fromErrorAndOperation(t,o,e,r):o})}async function IB(t,e,n=!1){let r=await fu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Eo._forOperation(t,"link",r)}async function wB(t,e,n=!1){let{auth:r}=t;if(tn(r.app))return Promise.reject(mi(r));let i="reauthenticate";try{let o=await fu(t,hN(r,i,e,t),n);Q(o.idToken,r,"internal-error");let s=rI(o.idToken);Q(s,r,"internal-error");let{sub:a}=s;return Q(t.uid===a,r,"user-mismatch"),Eo._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&yi(r,"user-mismatch"),o}}async function TB(t,e,n=!1){if(tn(t.app))return Promise.reject(mi(t));let r="signIn",i=await hN(t,r,e),o=await Eo._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}function pN(t,e,n,r){return en(t).onIdTokenChanged(e,n,r)}function gN(t,e,n){return en(t).beforeAuthStateChanged(e,n)}var Ch="__sak";var bh=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ch,"1"),this.storage.removeItem(Ch),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var DB=1e3,CB=10,bB=(()=>{class t extends bh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=aN(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);dB()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,CB):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},DB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(n,r){await super._set(n,r),this.localCache[n]=JSON.stringify(r)}async _get(n){let r=await super._get(n);return this.localCache[n]=JSON.stringify(r),r}async _remove(n){await super._remove(n),delete this.localCache[n]}}return t.type="LOCAL",t})(),mN=bB;var SB=(()=>{class t extends bh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),aI=SB;function AB(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}var RB=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}async handleEvent(n){let r=n,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(async f=>f(r.origin,s)),l=await AB(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function yN(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var KE=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=yN("",20);i.port1.start();let f=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(f),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(m.data.response);break;default:clearTimeout(f),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}};function ar(){return window}function NB(t){ar().location.href=t}function vN(){return typeof ar().WorkerGlobalScope<"u"&&typeof ar().importScripts=="function"}async function MB(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function xB(){return navigator?.serviceWorker?.controller||null}function PB(){return vN()?self:null}var _N="firebaseLocalStorageDb",OB=1,Sh="firebaseLocalStorage",EN="fbase_key",Io=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Mh(t,e){return t.transaction([Sh],e?"readwrite":"readonly").objectStore(Sh)}function kB(){let t=indexedDB.deleteDatabase(_N);return new Io(t).toPromise()}function QE(){let t=indexedDB.open(_N,OB);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Sh,{keyPath:EN})}catch(i){n(i)}}),t.addEventListener("success",async()=>{let r=t.result;r.objectStoreNames.contains(Sh)?e(r):(r.close(),await kB(),e(await QE()))})})}async function LR(t,e,n){let r=Mh(t,!0).put({[EN]:e,value:n});return new Io(r).toPromise()}async function LB(t,e){let n=Mh(t,!1).get(e),r=await new Io(n).toPromise();return r===void 0?null:r.value}function FR(t,e){let n=Mh(t,!0).delete(e);return new Io(n).toPromise()}var FB=800,VB=3,jB=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await QE(),this.db)}async _withRetries(n){let r=0;for(;;)try{let i=await this._openDb();return await n(i)}catch(i){if(r++>VB)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return vN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=RB._getInstance(PB()),this.receiver._subscribe("keyChanged",async(n,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(n,r)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await MB(),!this.activeServiceWorker)return;this.sender=new KE(this.activeServiceWorker);let n=await this.sender._send("ping",{},800);n&&n[0]?.fulfilled&&n[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(n){if(!(!this.sender||!this.activeServiceWorker||xB()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let n=await QE();return await LR(n,Ch,"1"),await FR(n,Ch),!0}catch{}return!1}async _withPendingWrite(n){this.pendingWrites++;try{await n()}finally{this.pendingWrites--}}async _set(n,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>LR(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)))}async _get(n){let r=await this._withRetries(i=>LB(i,n));return this.localCache[n]=r,r}async _remove(n){return this._withPendingWrite(async()=>(await this._withRetries(r=>FR(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)))}async _poll(){let n=await this._withRetries(o=>{let s=Mh(o,!1).getAll();return new Io(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),FB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),IN=jB;var xX=uN("rcb"),PX=new _o(3e4,6e4);function UB(t,e){return e?Mr(e):(Q(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var pu=class extends Th{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return FE(e,this._buildIdpRequest())}_linkToIdToken(e,n){return FE(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return FE(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function BB(t){return TB(t.auth,new pu(t),t.bypassAuthState)}function $B(t){let{auth:e,user:n}=t;return Q(n,e,"internal-error"),wB(n,new pu(t),t.bypassAuthState)}async function HB(t){let{auth:e,user:n}=t;return Q(n,e,"internal-error"),IB(n,new pu(t),t.bypassAuthState)}var YE=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return BB;case"linkViaPopup":case"linkViaRedirect":return HB;case"reauthViaPopup":case"reauthViaRedirect":return $B;default:yi(this.auth,"internal-error")}}resolve(e){vi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var OX=new _o(2e3,1e4);var zB="pendingRedirect",gh=new Map,JE=class extends YE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=gh.get(this.auth._key());if(!e){try{let r=await qB(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}gh.set(this.auth._key(),e)}return this.bypassAuthState||gh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function qB(t,e){let n=KB(e),r=WB(t);if(!await r._isAvailable())return!1;let i=await r._get(n)==="true";return await r._remove(n),i}function GB(t,e){gh.set(t._key(),e)}function WB(t){return Mr(t._redirectPersistence)}function KB(t){return ph(zB,t.config.apiKey,t.name)}async function QB(t,e,n=!1){if(tn(t.app))return Promise.reject(mi(t));let r=Nh(t),i=UB(r,e),s=await new JE(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}var YB=600*1e3,ZE=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!JB(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!wN(e)){let r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(vo(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=YB&&this.cachedEventUids.clear(),this.cachedEventUids.has(VR(e))}saveEventToCache(e){this.cachedEventUids.add(VR(e)),this.lastProcessedEventTime=Date.now()}};function VR(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function wN({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function JB(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wN(t);default:return!1}}async function ZB(t,e={}){return Ks(t,"GET","/v1/projects",e)}var XB=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,e$=/^https?/;async function t$(t){if(t.config.emulator)return;let{authorizedDomains:e}=await ZB(t);for(let n of e)try{if(n$(n))return}catch{}yi(t,"unauthorized-domain")}function n$(t){let e=jE(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!e$.test(n))return!1;if(XB.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var r$=new _o(3e4,6e4);function jR(){let t=ar().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function i$(t){return new Promise((e,n)=>{function r(){jR(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{jR(),n(vo(t,"network-request-failed"))},timeout:r$.get()})}if(ar().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ar().gapi?.load)r();else{let i=uN("iframefcb");return ar()[i]=()=>{gapi.load?r():n(vo(t,"network-request-failed"))},gB(`${mB()}?onload=${i}`).catch(o=>n(o))}}).catch(e=>{throw mh=null,e})}var mh=null;function o$(t){return mh=mh||i$(t),mh}var s$=new _o(5e3,15e3),a$="__/auth/iframe",c$="emulator/auth/iframe",u$={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},l$=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function d$(t){let e=t.config;Q(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?nI(e,c$):`https://${t.config.authDomain}/${a$}`,r={apiKey:e.apiKey,appName:t.name,v:oi},i=l$.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Vc(r).slice(1)}`}async function f$(t){let e=await o$(t),n=ar().gapi;return Q(n,t,"internal-error"),e.open({where:document.body,url:d$(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:u$,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});let s=vo(t,"network-request-failed"),a=ar().setTimeout(()=>{o(s)},s$.get());function u(){ar().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})}))}var h$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},p$=500,g$=600,m$="_blank",y$="http://localhost",Ah=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function v$(t,e,n,r=p$,i=g$){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=oe(M({},h$),{width:r.toString(),height:i.toString(),top:o,left:s}),l=lt().toLowerCase();n&&(a=nN(l)?m$:n),eN(l)&&(e=e||y$,u.scrollbars="yes");let f=Object.entries(u).reduce((m,[y,S])=>`${m}${y}=${S},`,"");if(lB(l)&&a!=="_self")return _$(e||"",a),new Ah(null);let p=window.open(e||"",a,f);Q(p,t,"popup-blocked");try{p.focus()}catch{}return new Ah(p)}function _$(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var E$="__/auth/handler",I$="emulator/auth/handler",w$=encodeURIComponent("fac");async function UR(t,e,n,r,i,o){Q(t.config.authDomain,t,"auth-domain-config-required"),Q(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:oi,eventId:i};if(e instanceof Dh){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",ZS(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[f,p]of Object.entries(o||{}))s[f]=p}if(e instanceof GE){let f=e.getScopes().filter(p=>p!=="");f.length>0&&(s.scopes=f.join(","))}t.tenantId&&(s.tid=t.tenantId);let a=s;for(let f of Object.keys(a))a[f]===void 0&&delete a[f];let u=await t._getAppCheckToken(),l=u?`#${w$}=${encodeURIComponent(u)}`:"";return`${T$(t)}?${Vc(a).slice(1)}${l}`}function T$({config:t}){return t.emulator?nI(t,I$):`https://${t.authDomain}/${E$}`}var VE="webStorageSupport",XE=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=aI,this._completeRedirectFn=QB,this._overrideRedirectResult=GB}async _openPopup(e,n,r,i){vi(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");let o=await UR(e,n,r,jE(),i);return v$(e,o,yN())}async _openRedirect(e,n,r,i){await this._originValidation(e);let o=await UR(e,n,r,jE(),i);return NB(o),new Promise(()=>{})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(vi(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){let n=await f$(e),r=new ZE(e);return n.register("authEvent",i=>(Q(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(VE,{type:VE},i=>{let o=i?.[0]?.[VE];o!==void 0&&n(!!o),yi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=t$(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return aN()||tN()||iI()}},TN=XE;var BR="@firebase/auth",$R="1.11.1";var eI=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function D$(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function C$(t){ii(new hn("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Q(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:cN(t)},l=new qE(r,i,o,u);return yB(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ii(new hn("auth-internal",e=>{let n=Nh(e.getProvider("auth").getImmediate());return(r=>new eI(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),xn(BR,$R,D$(t)),xn(BR,$R,"esm2020")}var b$=300,S$=Xy("authIdTokenMaxAge")||b$,HR=null,A$=t=>async e=>{let n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>S$)return;let i=n?.token;HR!==i&&(HR=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function cI(t=_f()){let e=Uc(t,"auth");if(e.isInitialized())return e.getImmediate();let n=lN(t,{popupRedirectResolver:TN,persistence:[IN,mN,aI]}),r=Xy("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=A$(o.toString());gN(n,s,()=>s(n.currentUser)),pN(n,a=>s(a))}}let i=Jy("auth");return i&&dN(n,`http://${i}`),n}function R$(){return document.getElementsByTagName("head")?.[0]??document}pB({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=vo("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",R$().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});C$("Browser");var Qs=class t{db=ER();auth=cI();authReadyPromise;constructor(){this.authReadyPromise=this.signInAnon()}async signInAnon(){if(!this.auth.currentUser)try{let e=await sI(this.auth);console.log("Firebase: Anonymous Sign-In Successful. UID: "+e.user.uid)}catch(e){throw console.error("Firebase: Anonymous Sign-In Failed: "+e),new Error("Could not authenticate Demo user.")}}async withAuth(e){return await this.authReadyPromise,e()}async saveOrder(e){return OE(uu(this.db,"orders"),oe(M({},e),{createdAt:kE()}))}async saveOrder2(e){return this.withAuth(()=>OE(uu(this.db,"orders"),oe(M({},e),{createdAt:kE()})))}async getOrders(){try{let e=await xE(uu(this.db,"orders"));return console.log("Firestore Snapshot: ",e.docs.length,e.docs.map(n=>n.data())),e.docs.map(n=>M({id:n.id},n.data()))}catch(e){throw console.error("Firestore: getOrders error",e),e}}async getOrders2(){return this.withAuth(async()=>(await xE(uu(this.db,"orders"))).docs.map(n=>M({id:n.id},n.data())))}async deleteOrder(e){return PE(dh(this.db,"orders",e))}async deleteOrder2(e){return this.withAuth(()=>PE(dh(this.db,"orders",e)))}async testConnection(){try{let e=await this.saveOrder({test:!0});console.log("Firestore: test write OK: ",e.id)}catch(e){console.log("Firestore: test write FAILED: ",e)}}static \u0275fac=function(n){return new(n||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})};var _i=class t{constructor(e){this.firebase=e;let n=localStorage.getItem("taniti-cart");n&&this.cartItemsSignal.set(JSON.parse(n))}cartItemsSignal=qe([]);cartItems=this.cartItemsSignal.asReadonly();cartTotal=oy(()=>this.cartItems().reduce((e,n)=>e+n.price,0));saveCart(){localStorage.setItem("taniti-cart",JSON.stringify(this.cartItemsSignal()))}addItem(e){this.cartItemsSignal.update(n=>[...n,e]),this.saveCart()}removeItem(e){console.log("CART SERVICE: Deleting "+e.name),this.cartItemsSignal.update(n=>n.filter(r=>r.id!==e.id)),this.saveCart()}clearItems(){this.cartItemsSignal.set([]),this.saveCart()}async submitOrder(){console.log("CART SERVICE: Submitting Order...");let e=this.cartItems(),n=this.cartTotal();if(this.cartItems().length===0){console.error("CART SERVICE: Cannot submit an empty order.");return}let r=this.cartItems().map(s=>M({id:s.id,name:s.name,price:Number(s.price)},typeof s.image=="string"&&s.image.length>0?{image:s.image}:{}));if(!r.every(s=>this.isValidActivityClient(s)))throw console.error("CART SERVICE: Submission Cancelled due to invalid Activity Data."),new Error("CART SERVICE: Invalid Activity Data in Cart.");let o={activities:r,total:n};console.log("CART SERVICE: Payload for Firestore: "+JSON.stringify(o,null,2));try{let s=await this.firebase.saveOrder2(o);return console.log("CART SERVICE: Order saved with ID: "+s.id),this.clearItems(),s.id}catch(s){throw console.error("CART SERVICE: Failed to submit Order: "+s),s}}isValidActivityClient(e){return typeof e.id!="string"||e.id.length===0?(console.error("CART SERVICE: Validation Error: Invalid ID: ",e),!1):typeof e.name!="string"||e.name.length===0?(console.error("CART SERVICE: Validation Error: Invalid Name: ",e),!1):Number.isFinite(e.price)?e.image!==void 0&&typeof e.image!="string"?(console.error("CART SERVICE: Validation Error: Invalid Image: ",e),!1):!0:(console.error("CART SERVICE: Validation Error: Invalid Price: ",e),!1)}static \u0275fac=function(n){return new(n||t)(Y(Qs))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})};var xh=class t{constructor(e){this.cart=e}activity;addToCart(){this.cart.addItem(this.activity),console.log(`${this.activity.name} added to cart`)}static \u0275fac=function(n){return new(n||t)(me(_i))};static \u0275cmp=Se({type:t,selectors:[["app-product"]],inputs:{activity:"activity"},decls:9,vars:3,consts:[[1,"product-shell"],[1,"product-container"],["alt","Product",3,"src"],["id","ATC",3,"click"]],template:function(n,r){n&1&&(Ie(0,"div",0)(1,"div",1)(2,"h2"),Z(3),we(),Ie(4,"p"),Z(5),we(),Yr(6,"img",2),Ie(7,"button",3),Kn("click",function(){return r.addToCart()}),Z(8,"Add to Cart"),we()()()),n&2&&(P(3),Fe(r.activity.name),P(2),bn("$",r.activity.price),P(),Wn("src",r.activity.image,Mt))},styles:[".product-container[_ngcontent-%COMP%]{margin:0;padding:.5rem;display:flex;flex-direction:column;gap:1rem;background-color:transparent;color:var(--highlight);transition:all .1s ease-in-out}.product-container[_ngcontent-%COMP%]:hover{background-color:var(--primary);color:#fffaf0}.product-container[_ngcontent-%COMP%]:hover   button[_ngcontent-%COMP%], .product-container[_ngcontent-%COMP%]:hover   p[_ngcontent-%COMP%]{color:#fffaf0}h2[_ngcontent-%COMP%]{margin:0;font-family:Malvie,sans-serif}p[_ngcontent-%COMP%]{margin:0;color:var(--text)}img[_ngcontent-%COMP%]{margin:0;max-width:200px;height:150px;object-fit:cover}button[_ngcontent-%COMP%]{margin:.5rem;padding:0;font-family:Bebas Neue,sans-serif;font-size:1.5rem;font-weight:700;background-color:transparent;color:transparent;border:5px solid transparent;transition:all .1s ease-in-out}#ATC[_ngcontent-%COMP%]:hover{background-color:#fffaf0;color:var(--primary);border:5px solid floralwhite;cursor:pointer;transform:scale(1.07)}"]})};function N$(t,e){if(t&1&&ve(0,"app-info",1),t&2){let n=K();ue("data",n.pageData.desc)}}function M$(t,e){if(t&1&&ve(0,"app-product",4),t&2){let n=e.$implicit;ue("activity",n)}}function x$(t,e){if(t&1&&(B(0,"div",3),xt(1,M$,1,1,"app-product",4,ln),W()),t&2){let n=K();P(),Pt(n.pageData.activityData)}}function P$(t,e){if(t&1&&ve(0,"app-info",1),t&2){let n=e.$implicit;ue("data",n)}}var Ei=class t{constructor(e){this.route=e}pageData;ngOnInit(){this.pageData=this.route.snapshot.data.data}static \u0275fac=function(n){return new(n||t)(me(Mn))};static \u0275cmp=Se({type:t,selectors:[["app-page"]],inputs:{pageData:"pageData"},decls:7,vars:3,consts:[[1,"page-shell"],[3,"data"],[1,"pageInfo-container"],[1,"activity-container"],[3,"activity"]],template:function(n,r){n&1&&(B(0,"div",0),ve(1,"app-banner",1),B(2,"div",2),se(3,N$,1,1,"app-info",1),se(4,x$,3,0,"div",3),xt(5,P$,1,1,"app-info",1,ln),W()()),n&2&&(P(),ue("data",r.pageData.bannerData),P(2),ae(r.pageData.desc.content!=""?3:-1),P(),ae(r.pageData.activityData.length>0?4:-1),P(),Pt(r.pageData.infoData))},dependencies:[Jn,vs,xh],styles:[".pageInfo-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;align-items:center;gap:3rem}.activity-container[_ngcontent-%COMP%]{max-width:var(--maxWidth);display:grid;grid-template-columns:repeat(3,1fr);row-gap:1rem;column-gap:1rem}@media(max-width:750px){.activity-container[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media(max-width:550px){.activity-container[_ngcontent-%COMP%]{grid-template-columns:repeat(1,1fr)}}"]})};var CN=[],bN=[],SN=[],AN=[{id:"e1",name:"Museum",price:50,image:"pageMedia/entertainment-museum.jpeg"},{id:"e2",name:"Bowling",price:20,image:"pageMedia/entertainment-bowling.jpeg"},{id:"e3",name:"Fishing",price:20,image:"pageMedia/entertainment-bowling.jpeg"},{id:"e4",name:"Snorkeling",price:20,image:"pageMedia/entertainment-bowling.jpeg"},{id:"e5",name:"Ziplining",price:20,image:"pageMedia/entertainment-bowling.jpeg"},{id:"e6",name:"Night Club",price:20,image:"pageMedia/entertainment-bowling.jpeg"},{id:"e7",name:"Art Gallery",price:20,image:"pageMedia/entertainment-bowling.jpeg"},{id:"e8",name:"Golf",price:20,image:"pageMedia/entertainment-bowling.jpeg"}],RN=[{id:"s1",name:"Volcano Tour",price:20,image:"pageMedia/sightseeing-volcano.jpeg"},{id:"s2",name:"Helicopter Tour",price:20,image:"banners/entertainment.jpeg"},{id:"s3",name:"Boat Tour",price:20,image:"pageMedia/entertainment-bowling.jpeg"},{id:"s4",name:"Bus Tour",price:20,image:"pageMedia/entertainment-bowling.jpeg"},{id:"s5",name:"Bike Tour",price:20,image:"pageMedia/transportation-bike.jpeg"},{id:"s6",name:"Rainforest Hike",price:20,image:"pageMedia/sightseeing-rainforest.jpeg"}];var NN={bannerData:{bannerType:"subpage",title:"",image:"banners/transportation.jpeg",button:"Transportation",interactive:!1},desc:{},activityData:CN,infoData:[{title:"How to Get Here",type:0,content:"Almost all visitors arrive to Taniti by air, though some arrive on a small cruise ship that docks in Yellow Leaf Bay for one night per week. Taniti is served by a small airport that can accommodate small jets and propeller planes. Taniti is in the process of expanding the airport so larger jets will be able to land on the island within the next few years.",image:"pageMedia/transportation-plane.jpeg"},{title:"How to Get Around",type:0,content:"Public buses serve Taniti City and run from 5 a.m. to 11 p.m. every day. Private buses serve the rest of the island. Taxis are available in Taniti City, and rental cars can be rented from a local rental agency near the airport. Bikes and helmets are available to rent from several vendors (helmets are required by law). Taniti City is fairly flat and very walkable. Many tourists stay in the area surrounding Merriton Landing: this area is easy to explore on foot.",image:"pageMedia/transportation-bike.jpeg"}]},MN={bannerData:{bannerType:"subpage",title:"",image:"banners/lodging.jpeg",button:"Lodging",interactive:!1},desc:{},activityData:bN,infoData:[{title:"Luxury Hotels",type:0,content:"Taniti has a wide variety of lodging that ranges from an inexpensive hostel to one large, four-star resort.",image:"pageMedia/lodging-hotel.jpeg"},{title:"Bed & Breakfasts",type:0,content:"There are many small, family-owned hotels and a growing number of bed and breakfasts. All types of lodging are strictly regulated and regularly inspected by the Tanitian government.",image:"pageMedia/lodging-bnb.jpeg"}]},xN={bannerData:{bannerType:"subpage",title:"",image:"banners/food.jpeg",button:"Food",interactive:!1},desc:{},activityData:SN,infoData:[{title:"Restaurants",type:0,content:"Taniti currently has 10 restaurants: five serve mostly local fish and rice, three serve American-style meals, and two serve Pan-Asian cuisine.",image:"pageMedia/food-restaurant.jpeg"},{title:"Grocery",type:0,content:"Taniti has two supermarkets, two smaller grocery stores, and one convenience store that is open 24 hours a day.",image:"pageMedia/food-grocery.jpeg"}]},PN={bannerData:{bannerType:"subpage",title:"",image:"banners/entertainment.jpeg",button:"Entertainment",interactive:!1},desc:{title:"",type:1,content:"Most people visit Taniti to enjoy the beaches, explore the rainforest, and to visit the volcano. However, there are other things to do, including visiting a local history museum, going on chartered fishing tours, snorkeling, zip-lining in the rainforest, visiting several pubs, including a microbrewery, dancing at a new dance club, seeing a movie, taking helicopter rides, playing at an arcade, visiting art galleries, and bowling. Also, a nine-hole golf course should be operational by next year. Many of these activities are located in Merriton Landing, which is a rapidly developing area on the north side of Yellow Leaf Bay.",image:""},activityData:AN,infoData:[]},ON={bannerData:{bannerType:"subpage",title:"",image:"banners/sightseeing.jpeg",button:"Sightseeing",interactive:!1},desc:{title:"",type:1,content:"Most tourists spend most of their time in Taniti City, which boasts native architecture and nearby white, sandy beaches that encircle Yellow Leaf Bay. Other popular activities include boat or bus tours of the island, hikes in the rainforest, or visits to Taniti\u2019s active volcano.",image:""},activityData:RN,infoData:[]};function O$(t,e){if(t&1&&Yr(0,"img",2),t&2){let n=K();Wn("src",n.item.image,Mt)}}function k$(t,e){if(t&1){let n=Bt();Ie(0,"button",4),Kn("click",function(){At(n);let i=K();return Rt(i.removeFromCart())}),Z(1,"DELETE"),we()}}function L$(t,e){if(t&1){let n=Bt();Ie(0,"button",4),Kn("click",function(){At(n);let i=K();return Rt(i.clearCart())}),Z(1,"CLEAR"),we()}}var Ph=class t{constructor(e){this.cart=e}item;real=!0;removeFromCart(){console.log("ITEM: Deleting "+this.item.name),this.cart.removeItem(this.item)}clearCart(){console.log("ITEM: Clearing Cart"),this.cart.clearItems()}static \u0275fac=function(n){return new(n||t)(me(_i))};static \u0275cmp=Se({type:t,selectors:[["app-item"]],inputs:{item:"item",real:"real"},decls:9,vars:4,consts:[[1,"item-shell"],[1,"item-container"],[3,"src"],[1,"price"],[3,"click"]],template:function(n,r){n&1&&(Ie(0,"div",0)(1,"div",1),se(2,O$,1,1,"img",2),Ie(3,"p"),Z(4),we(),Ie(5,"p",3),Z(6),we(),se(7,k$,2,0,"button")(8,L$,2,0,"button"),we()()),n&2&&(P(2),ae(r.item.image!=""?2:-1),P(2),Fe(r.item.name),P(2),bn("$",r.item.price),P(),ae(r.real?7:8))},styles:[".item-shell[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;width:100%}.item-container[_ngcontent-%COMP%]{margin:0;padding:1rem;display:flex;flex-direction:row;align-items:center;gap:1rem;flex:1;background-color:var(--primary)}img[_ngcontent-%COMP%]{width:96px;height:48px;object-fit:cover}p[_ngcontent-%COMP%]{margin:0;padding:0;font-size:1.5rem;color:#fffaf0}.price[_ngcontent-%COMP%]{margin-left:auto}button[_ngcontent-%COMP%]{padding:.25rem .5rem;background-color:transparent;color:#ff4646;border:none}button[_ngcontent-%COMP%]:hover{background-color:#ff4646;color:#fff;cursor:pointer}@media(max-width:550px){.item-container[_ngcontent-%COMP%]{padding:.5rem}img[_ngcontent-%COMP%]{width:64px;height:32px}p[_ngcontent-%COMP%]{font-size:1.25rem}}"]})};var F$=t=>({id:"0",name:"Total",price:t,image:""});function V$(t,e){t&1&&(B(0,"p",4),Z(1,"Cart is Empty"),W())}function j$(t,e){if(t&1&&ve(0,"app-item",5),t&2){let n=e.$implicit;ue("item",n)}}function U$(t,e){if(t&1){let n=Bt();xt(0,j$,1,1,"app-item",5,ln),B(2,"div",6),ve(3,"app-item",7),B(4,"button",8),dn("click",function(){At(n);let i=K();return Rt(i.submitOrder())}),Z(5,"Submit Order"),W()()}if(t&2){let n=K();Pt(n.cartItems()),P(3),ue("item",ic(2,F$,n.cartTotal()))("real",!1)}}var Oh=class t{constructor(e){this.cartService=e;this.cartItems=e.cartItems,this.cartTotal=e.cartTotal}bannerData={bannerType:"subpage",title:"",image:"banners/taniti.jpeg",button:"Cart",interactive:!1};cartItems;cartTotal;async submitOrder(){try{await this.cartService.submitOrder()}catch(e){console.log("CART: Error submitting Order: "+e)}}static \u0275fac=function(n){return new(n||t)(me(_i))};static \u0275cmp=Se({type:t,selectors:[["app-cart"]],decls:6,vars:2,consts:[[1,"cart-shell"],[3,"data"],[1,"cart-wrapper"],[1,"cart-container"],[1,"empty"],[3,"item"],[1,"total-container"],[3,"item","real"],[3,"click"]],template:function(n,r){n&1&&(B(0,"div",0),ve(1,"app-banner",1),B(2,"div",2)(3,"div",3),se(4,V$,2,0,"p",4)(5,U$,6,4),W()()()),n&2&&(P(),ue("data",r.bannerData),P(3),ae(r.cartItems().length<=0?4:5))},dependencies:[Ph,Jn],styles:[".cart-shell[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}app-banner[_ngcontent-%COMP%]{width:100%}.cart-wrapper[_ngcontent-%COMP%]{margin:0;padding:0;width:100%;max-width:var(--maxWidth)}.cart-container[_ngcontent-%COMP%]{margin:0;padding:0 .5rem;display:flex;flex-direction:column;gap:1rem;text-align:center}h1[_ngcontent-%COMP%]{font-family:Malvie,sans-serif;color:var(--highlight)}.empty[_ngcontent-%COMP%]{font-size:1.5rem}.total-container[_ngcontent-%COMP%]{margin:0;padding:0 0 1rem;background:var(--primary)}button[_ngcontent-%COMP%]{margin:1rem auto 0;padding:0 1rem;font-family:Bebas Neue,sans-serif;font-size:1.5rem;background-color:transparent;color:#fffaf0;border:5px solid transparent;transition:all .1s ease-in-out}button[_ngcontent-%COMP%]:hover{transform:scale(1.1);background-color:#fffaf0;color:var(--primary);cursor:pointer}@media(max-width:550px){.cart-container[_ngcontent-%COMP%]{gap:.5rem}button[_ngcontent-%COMP%]{font-size:2rem}}"]})};var Ys=class t{themes=["theme-light","theme-dark"];themeSignal=qe("");theme=this.themeSignal.asReadonly();initializeTheme(){let e=localStorage.getItem("theme")??"",n;e&&this.themes.includes(e)?n=e:n=this.themes[0],this.setTheme(n)}setTheme(e){if(!this.themes.includes(e)){console.error(`THEME SERVICE: Invalid Theme: ${e}`);return}this.clearTheme(),this.themeSignal.set(e),this.applyTheme(this.theme()),console.log("THEME SERVICE: Theme Set: "+this.theme())}applyTheme(e){this.themes.includes(e)&&e&&(document.documentElement.classList.add(this.theme()),localStorage.setItem("theme",this.theme()))}clearTheme(){let e=0;this.themes.forEach(n=>{document.documentElement.classList.contains(n)&&(document.documentElement.classList.remove(n),e++)}),this.themeSignal.set(""),localStorage.setItem("theme",""),e>0&&console.log("THEME SERVICE: Theme Cleared")}logTheme(){console.log("THEME SERVICE: Current Theme: "+this.theme())}static \u0275fac=function(n){return new(n||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})};function B$(t,e){if(t&1){let n=Bt();Ie(0,"button",0),Kn("click",function(){At(n);let i=K();return Rt(i.setTheme("theme-dark"))}),Z(1,"\u{1F319}"),we()}}function $$(t,e){if(t&1){let n=Bt();Ie(0,"button",0),Kn("click",function(){At(n);let i=K();return Rt(i.setTheme("theme-light"))}),Z(1,"\u2600\uFE0F"),we()}}var kh=class t{constructor(e){this.themeService=e;this.currentTheme=e.theme}currentTheme;setTheme(e){this.themeService.setTheme(e)}static \u0275fac=function(n){return new(n||t)(me(Ys))};static \u0275cmp=Se({type:t,selectors:[["app-theme"]],decls:3,vars:2,consts:[[3,"click"]],template:function(n,r){n&1&&(Ie(0,"div"),se(1,B$,2,0,"button"),se(2,$$,2,0,"button"),we()),n&2&&(P(),ae(r.currentTheme()==="theme-light"?1:-1),P(),ae(r.currentTheme()==="theme-dark"?2:-1))},styles:["div[_ngcontent-%COMP%]{width:2rem;height:2rem;display:inline-block}button[_ngcontent-%COMP%]{width:100%;height:100%;font-size:1rem;background:transparent;border:2px solid transparent;box-sizing:border-box}button[_ngcontent-%COMP%]:hover{border:2px solid var(--highlight);cursor:pointer}"]})};var Lh=class t{constructor(e){this.firebase=e}ordersSignal=qe([]);orders=this.ordersSignal.asReadonly();loadingSignal=qe(!0);loading=this.loadingSignal.asReadonly();async refreshOrders(){this.ordersSignal.set([]),this.loadingSignal.set(!0);try{let e=await this.firebase.getOrders2();this.ordersSignal.set(e.map(n=>oe(M({},n),{createdAt:n.createdAt?new Date(n.createdAt.seconds*1e3):n.createdAt})))}catch(e){console.error("ORDERS SERVICE: Failed to load orders: "+e)}finally{this.loadingSignal.set(!1)}}async deleteOrder(e){try{await this.firebase.deleteOrder2(e),await this.refreshOrders()}catch(n){console.error("ORDERS SERVICE: Failed to delete order: "+n)}}static \u0275fac=function(n){return new(n||t)(Y(Qs))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})};var z$=(t,e)=>e.id;function q$(t,e){t&1&&(B(0,"p"),Z(1,"Loading Orders..."),W())}function G$(t,e){t&1&&(B(0,"p",7),Z(1,"No Orders Yet"),W())}function W$(t,e){if(t&1&&(B(0,"div",13)(1,"p",16),Z(2),W(),B(3,"p",17),Z(4),W()()),t&2){let n=e.$implicit;P(2),Fe(n.name),P(2),bn("$",n.price)}}function K$(t,e){if(t&1){let n=Bt();B(0,"div",8)(1,"div",9)(2,"p",10),Z(3),W(),B(4,"p",11),Z(5),ny(6,"date"),W()(),B(7,"div",12)(8,"h4"),Z(9,"Activities"),W(),xt(10,W$,5,2,"div",13,ln),W(),B(12,"p",14),Z(13),W(),B(14,"button",15),dn("click",function(){let i=At(n).$implicit,o=K(2);return Rt(o.deleteOrder(i.id))}),Z(15,"Delete Order"),W()()}if(t&2){let n=e.$implicit;P(3),bn("ID: ",n.id),P(2),Fe(ry(6,3,n.createdAt,"short")),P(5),Pt(n.activities),P(3),bn("$",n.total)}}function Q$(t,e){if(t&1&&xt(0,K$,16,6,"div",8,z$),t&2){let n=K();Pt(n.orders())}}var Fh=class t{constructor(e){this.ordersService=e;this.orders=e.orders,this.loading=e.loading}bannerData={bannerType:"subpage",title:"",image:"banners/taniti.jpeg",button:"PROFILE",interactive:!1};orders;loading;ngOnInit(){this.ordersService.refreshOrders()}async deleteOrder(e){try{await this.ordersService.deleteOrder(e)}catch(n){console.error("ORDERS: Failed to delete Order: "+n)}}static \u0275fac=function(n){return new(n||t)(me(Lh))};static \u0275cmp=Se({type:t,selectors:[["app-orders"]],decls:17,vars:4,consts:[[1,"orders-shell"],[3,"data"],[1,"orders-content"],[1,"settings-wrapper"],[1,"setting"],[1,"orders-wrapper"],[1,"orders-container"],[1,"empty"],[1,"order-display"],[1,"order-stats"],[1,"order-id"],[1,"order-time"],[1,"activities-wrapper"],[1,"activity-entry"],[1,"order-price"],[1,"order-delete",3,"click"],[1,"activity-name"],[1,"activity-price"]],template:function(n,r){n&1&&(B(0,"div",0),ve(1,"app-banner",1),B(2,"div",2)(3,"div",3)(4,"h1"),Z(5,"Settings"),W(),B(6,"div",4)(7,"h3"),Z(8,"Dark Mode Toggle"),W(),ve(9,"app-theme"),W()(),B(10,"div",5)(11,"h1"),Z(12,"Orders"),W(),B(13,"div",6),se(14,q$,2,0,"p"),se(15,G$,2,0,"p",7),se(16,Q$,2,0),W()()()()),n&2&&(P(),ue("data",r.bannerData),P(13),ae(r.loading()?14:-1),P(),ae(!r.loading()&&r.orders().length===0?15:-1),P(),ae(!r.loading()&&r.orders().length>0?16:-1))},dependencies:[Jn,kh,hy],styles:[".orders-shell[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}.orders-content[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center}.orders-wrapper[_ngcontent-%COMP%]{margin-top:3rem;padding:.5rem;width:calc(100% - 2rem);max-width:var(--maxWidth)}.orders-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center}.order-display[_ngcontent-%COMP%]{margin-bottom:1rem;padding-bottom:1rem;width:100%;background-color:var(--primary);color:#fffaf0}.order-stats[_ngcontent-%COMP%]{margin:1rem 0;display:flex;justify-content:space-around}.activities-wrapper[_ngcontent-%COMP%]{margin:0 0 1rem}.activity-entry[_ngcontent-%COMP%]{margin:.25rem;padding:.5rem 1.5rem;display:flex;justify-content:space-between;background-color:var(--secondary)}.order-delete[_ngcontent-%COMP%]{margin:1rem 0 0}.settings-wrapper[_ngcontent-%COMP%]{padding:.5rem;width:calc(100% - 2rem);max-width:var(--maxWidth)}.setting[_ngcontent-%COMP%]{padding:.5rem;display:flex;flex-direction:row;justify-content:space-between;align-items:center;background-color:var(--setting-background)}h1[_ngcontent-%COMP%]{margin:0 0 1rem;padding:0;font-family:Malvie,sans-serif;color:var(--highlight)}h3[_ngcontent-%COMP%]{margin:0;padding:0;color:var(--setting-text)}h4[_ngcontent-%COMP%]{margin:0;padding:0;font-family:Malvie,sans-serif;font-size:1.25rem}.empty[_ngcontent-%COMP%]{font-size:1.5rem}p[_ngcontent-%COMP%]{margin:0;padding:0}"]})};var LN=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:lf},{path:"transportation",component:Ei,data:{data:NN}},{path:"lodging",component:Ei,data:{data:MN}},{path:"food",component:Ei,data:{data:xN}},{path:"entertainment",component:Ei,data:{data:PN}},{path:"sightseeing",component:Ei,data:{data:ON}},{path:"cart",component:Oh},{path:"profile",component:Fh}];var FN={providers:[qg(),Gy(LN)]};function Y$(t,e){if(t&1&&(B(0,"span"),ve(1,"img",5),W()),t&2){let n=K(2);P(),ue("src",n.linkData.icon,Mt)("alt",n.linkData.text)}}function J$(t,e){if(t&1&&(B(0,"a",3),se(1,Y$,2,2,"span"),B(2,"span",4),Z(3),W()()),t&2){let n=K();_d("mode-"+n.linkData.displayMode),ue("routerLink",n.linkData.route),P(),ae(n.linkData.icon?1:-1),P(2),Fe(n.linkData.text)}}function Z$(t,e){if(t&1&&(B(0,"span"),ve(1,"img",5),W()),t&2){let n=K(2);P(),ue("src",n.linkData.icon,Mt)("alt",n.linkData.text)}}function X$(t,e){if(t&1&&(B(0,"button"),se(1,Z$,2,2,"span"),B(2,"span",4),Z(3),W()()),t&2){let n=K();_d("mode-"+n.linkData.displayMode),P(),ae(n.linkData.icon?1:-1),P(2),Fe(n.linkData.text)}}var Vh=class t{linkData;isButton=!1;iconExempt=["text-only","responsive-hide"];ngOnInit(){!this.iconExempt.includes(this.linkData.displayMode)&&!this.linkData.icon&&console.warn(`NAV LINK: ${this.linkData.text}: displayMode '${this.linkData.displayMode}' requires an [icon] input`)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Se({type:t,selectors:[["app-nav-link"]],inputs:{linkData:"linkData",isButton:"isButton"},decls:3,vars:1,consts:[[1,"link-shell"],["routerLinkActive","active",3,"routerLink","class"],[3,"class"],["routerLinkActive","active",3,"routerLink"],[1,"nav-text"],[1,"nav-icon",3,"src","alt"]],template:function(n,r){n&1&&(B(0,"div",0),se(1,J$,4,5,"a",1)(2,X$,4,4,"button",2),W()),n&2&&(P(),ae(r.isButton?2:1))},dependencies:[ys,qy],styles:["button[_ngcontent-%COMP%]{background-color:transparent}a[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{margin:0;padding:0;height:2rem;color:var(--nav-text);text-decoration:none;text-align:center;display:flex;align-items:center;justify-content:center;gap:0;border:2px solid transparent;box-sizing:border-box;cursor:pointer}a[_ngcontent-%COMP%]:not(.mode-icon-only,.mode-responsive-show):hover, button[_ngcontent-%COMP%]:not(.mode-icon-only,.mode-responsive-show):hover{color:var(--nav-highlight);border:2px solid var(--nav-highlight)}a.mode-text-only[_ngcontent-%COMP%], a.mode-responsive[_ngcontent-%COMP%], button.mode-text-only[_ngcontent-%COMP%], button.mode-responsive[_ngcontent-%COMP%]{padding:0 1rem}a.mode-icon-only[_ngcontent-%COMP%]{padding:.25rem}a.mode-both[_ngcontent-%COMP%]{padding:.25rem 1rem 0;gap:.25rem}.mode-text-only[_ngcontent-%COMP%]   .nav-icon[_ngcontent-%COMP%], .mode-responsive[_ngcontent-%COMP%]   .nav-icon[_ngcontent-%COMP%]{display:none}.mode-icon-only[_ngcontent-%COMP%]   .nav-text[_ngcontent-%COMP%]{margin:0;padding:0;display:none}.mode-responsive-show[_ngcontent-%COMP%], .mode-responsive-show[_ngcontent-%COMP%]   .nav-text[_ngcontent-%COMP%]{display:none}.mode-responsive-hide[_ngcontent-%COMP%]{padding:0 1rem}.nav-icon[_ngcontent-%COMP%]{width:1.75rem;height:1.75rem;color:var(--nav-text)}.nav-text[_ngcontent-%COMP%]{margin:0;padding:0;font-size:1.1rem;font-weight:700;font-variant:all-small-caps;color:var(--nav-text)}@media(max-width:1080px){a.mode-responsive[_ngcontent-%COMP%]:hover, a.mode-responsive-hide[_ngcontent-%COMP%]:hover{color:var(--nav-text);border:2px solid transparent}a.mode-responsive[_ngcontent-%COMP%]{padding:.25rem}.mode-responsive[_ngcontent-%COMP%]   .nav-icon[_ngcontent-%COMP%]{display:block}.mode-responsive[_ngcontent-%COMP%]   .nav-text[_ngcontent-%COMP%]{display:none}.mode-responsive-show[_ngcontent-%COMP%]{display:inline}.mode-responsive-hide[_ngcontent-%COMP%]{padding:0;display:none}}@media(max-width:500px){.nav-icon[_ngcontent-%COMP%]{width:2rem;height:2rem;color:var(--nav-text)}.nav-text[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:400}}"]})};var jh=class t{breakpoint=1080;isDesktop=qe(window.innerWidth>this.breakpoint);constructor(){window.addEventListener("resize",this.onResize.bind(this))}onResize(){this.isDesktop.set(window.innerWidth>this.breakpoint)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})};var tH=["exploreButtonRef"],nH=["exploreMenuRef"],rH=(t,e)=>e.route;function iH(t,e){if(t&1&&ve(0,"app-nav-link",3)(1,"app-nav-link",3)(2,"app-nav-link",3)(3,"app-nav-link",3)(4,"app-nav-link",3),t&2){let n=K();ue("linkData",n.transportation),P(),ue("linkData",n.lodging),P(),ue("linkData",n.food),P(),ue("linkData",n.entertainment),P(),ue("linkData",n.sightseeing)}}function oH(t,e){if(t&1){let n=Bt();B(0,"app-nav-link",6),dn("click",function(){At(n);let i=K(2);return Rt(i.closeExplore())}),W()}if(t&2){let n=e.$implicit;ue("linkData",n)}}function sH(t,e){if(t&1){let n=Bt();B(0,"app-nav-link",4,0),dn("click",function(){At(n);let i=K();return Rt(i.toggleExplore())}),W(),B(2,"div",5,1),xt(4,oH,1,1,"app-nav-link",3,rH),W()}if(t&2){let n=K();ue("linkData",n.explore)("isButton",!0),P(2),ns("is-open",n.isExploreOpen()),P(2),Pt(n.exploreLinks)}}var Uh=class t{constructor(e){this.screenService=e;this.isDesktop=e.isDesktop}isDesktop;isExploreOpen=qe(!1);exploreButtonRef;exploreMenuRef;toggleExplore(){this.isExploreOpen.update(e=>!e)}closeExplore(){this.isExploreOpen.set(!1)}clickout(e){if(!this.isExploreOpen())return;let n=e.target,r=this.exploreButtonRef?.nativeElement.contains(n),i=this.exploreMenuRef?.nativeElement.contains(n);!r&&!i&&this.closeExplore()}home={text:"Home",route:"/home",icon:"icons/home.png",displayMode:"responsive"};explore={text:"Explore",route:"#",icon:"icons/explore.png",displayMode:"icon-only"};exploreLinks=[{text:"Transportation",route:"/transportation",displayMode:"text-only"},{text:"Lodging",route:"/lodging",displayMode:"text-only"},{text:"Food",route:"/food",displayMode:"text-only"},{text:"Entertainment",route:"/entertainment",displayMode:"text-only"},{text:"Sightseeing",route:"/sightseeing",displayMode:"text-only"}];transportation={text:"Transportation",route:"/transportation",icon:"",displayMode:"responsive-hide"};lodging={text:"Lodging",route:"/lodging",icon:"",displayMode:"responsive-hide"};food={text:"Food",route:"/food",icon:"",displayMode:"responsive-hide"};entertainment={text:"Entertainment",route:"/entertainment",icon:"",displayMode:"responsive-hide"};sightseeing={text:"Sightseeing",route:"/sightseeing",icon:"",displayMode:"responsive-hide"};cart={text:"Cart",route:"/cart",icon:"icons/cart.png",displayMode:"icon-only"};profile={text:"Profile",route:"/profile",icon:"icons/profile.png",displayMode:"icon-only"};static \u0275fac=function(n){return new(n||t)(me(jh))};static \u0275cmp=Se({type:t,selectors:[["app-navbar"]],viewQuery:function(n,r){if(n&1&&(vd(tH,5,Kt),vd(nH,5,Kt)),n&2){let i;es(i=ts())&&(r.exploreButtonRef=i.first),es(i=ts())&&(r.exploreMenuRef=i.first)}},hostBindings:function(n,r){n&1&&dn("click",function(o){return r.clickout(o)},Pm)},decls:7,vars:4,consts:[["exploreButtonRef",""],["exploreMenuRef",""],[1,"nav-shell"],[3,"linkData"],[3,"click","linkData","isButton"],[1,"explore-menu"],[3,"click","linkData"]],template:function(n,r){n&1&&(B(0,"div",2)(1,"nav"),ve(2,"app-nav-link",3),se(3,iH,5,5)(4,sH,6,4),ve(5,"app-nav-link",3)(6,"app-nav-link",3),W()()),n&2&&(P(2),ue("linkData",r.home),P(),ae(r.isDesktop()?3:4),P(2),ue("linkData",r.cart),P(),ue("linkData",r.profile))},dependencies:[Vh],styles:[".nav-shell[_ngcontent-%COMP%]{position:fixed;top:0;z-index:1000;width:100%}nav[_ngcontent-%COMP%]{margin:0;padding:0;width:100%;height:3rem;display:flex;flex-direction:row;justify-content:center;gap:.5rem;align-items:center;background-color:var(--background);box-shadow:0 .5rem 1rem #0000004d}a[_ngcontent-%COMP%]{padding:0 1rem;height:2rem;display:flex;align-items:center;color:var(--nav-text);text-decoration:none;text-align:center;font-size:1.1rem;font-weight:700;font-variant:all-small-caps;border:2px solid transparent;box-sizing:border-box;cursor:pointer}a[_ngcontent-%COMP%]:hover{color:var(--nav-highlight);border:2px solid var(--nav-highlight)}@media(max-width:1080px){.nav-shell[_ngcontent-%COMP%]{top:auto;bottom:0}nav[_ngcontent-%COMP%]{justify-content:center;gap:2rem;box-shadow:0 -.5rem 1rem #0000004d}}.explore-menu[_ngcontent-%COMP%]{padding:1rem;width:100%;position:fixed;bottom:3rem;z-index:-1;display:flex;flex-direction:column;gap:1rem;background-color:var(--background);box-shadow:0 -.5rem 1rem #0000004d;opacity:0;transform:translateY(100%);transition:opacity .2s ease-in-out,transform .2s ease-in-out;pointer-events:none}.explore-menu.is-open[_ngcontent-%COMP%]{opacity:1;transform:translateY(0);pointer-events:auto}@media(max-width:500px){nav[_ngcontent-%COMP%]{height:3rem;justify-content:space-around}.explore-menu[_ngcontent-%COMP%]{bottom:3rem}}"]})};function aH(t,e){if(t&1&&(Ie(0,"a",1),Z(1),we()),t&2){let n=K().$implicit;Wn("href",n.link,Mt),P(),Fe(n.text)}}function cH(t,e){if(t&1&&(Ie(0,"p"),Z(1),we()),t&2){let n=K().$implicit;P(),Fe(n.text)}}function uH(t,e){if(t&1&&se(0,aH,2,2,"a",1)(1,cH,2,1,"p"),t&2){let n=e.$implicit;ae(n.link!=""?0:1)}}function lH(t,e){if(t&1&&xt(0,uH,2,1,null,null,ln),t&2){let n=K();Pt(n.footerData.lines)}}var Bh=class t{footerData;static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Se({type:t,selectors:[["app-footer"]],inputs:{footerData:"footerData"},decls:3,vars:1,consts:[[1,"footer-shell"],[3,"href"]],template:function(n,r){n&1&&(Ie(0,"div",0)(1,"footer"),se(2,lH,2,0),we()()),n&2&&(P(2),ae(r.footerData?2:-1))},styles:[".footer-shell[_ngcontent-%COMP%]{margin:3rem 0 0}footer[_ngcontent-%COMP%]{margin:0;padding:1rem;height:100px;display:flex;flex-direction:column;justify-content:center;align-items:center;gap:1rem;font-family:Belanosima,sans-serif;text-align:center;background-color:var(--primary);color:#fffaf0}footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fffaf0;cursor:pointer}footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:visited{color:inherit;text-decoration:none}footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;padding:0;font-size:1.25rem}"]})};var $h=class t{constructor(e){this.themeService=e}title=qe("ng-taniti");footerData={lines:[{text:"Photos licensed from Adobe Stock",link:"fake link"},{text:"Made with Angular 21",link:""},{text:"2025",link:""}]};ngOnInit(){this.themeService.initializeTheme()}static \u0275fac=function(n){return new(n||t)(me(Ys))};static \u0275cmp=Se({type:t,selectors:[["app-root"]],decls:5,vars:1,consts:[[1,"app-shell"],[1,"main"],[3,"footerData"]],template:function(n,r){n&1&&(B(0,"div",0),ve(1,"app-navbar"),B(2,"div",1),ve(3,"router-outlet"),W(),ve(4,"app-footer",2),W()),n&2&&(P(4),ue("footerData",r.footerData))},dependencies:[xc,Uh,Bh],styles:[".app-shell[_ngcontent-%COMP%]{padding-top:3rem;min-height:calc(100vh + 150px);display:flex;flex-direction:column;justify-content:space-between}.main[_ngcontent-%COMP%]{margin:0;padding:0;flex:1}app-footer[_ngcontent-%COMP%]{padding-bottom:0}@media(max-width:1080px){.app-shell[_ngcontent-%COMP%]{padding-top:0}app-footer[_ngcontent-%COMP%]{padding-bottom:3rem}}@media(max-width:500px){app-footer[_ngcontent-%COMP%]{padding-bottom:3rem}}"]})};var dH="firebase",fH="12.6.0";xn(dH,fH,"app");var VN={production:!1,firebaseConfig:{apiKey:"AIzaSyDweRdkdGsOkzaOxWWuoJ0JVQ7-KFtltFM",authDomain:"ng-taniti.firebaseapp.com",projectId:"ng-taniti",storageBucket:"ng-taniti.firebasestorage.app",messagingSenderId:"521171139506",appId:"1:521171139506:web:50d1e74c05b2b4de4182ab"}};var Mne=gv(VN.firebaseConfig);wy($h,FN).catch(t=>console.error(t));
